(function(){
shadow$provide[587]=function(ya,ca,Sa,Q){function w(u,A,z){var C,P={},g=null,h=null;void 0!==z&&(g=""+z);void 0!==A.key&&(g=""+A.key);void 0!==A.ref&&(h=A.ref);for(C in A)q.call(A,C)&&!c.hasOwnProperty(C)&&(P[C]=A[C]);if(u&&u.defaultProps)for(C in A=u.defaultProps,A)void 0===P[C]&&(P[C]=A[C]);return{$$typeof:Y,type:u,key:g,ref:h,props:P,_owner:y.current}}ca(158);ya=ca(19);var Y=60103;Q.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(ca=Symbol.for,Y=ca("react.element"),Q.Fragment=ca("react.fragment"));
var y=ya.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};Q.jsx=w;Q.jsxs=w};
shadow$provide[589]=function(ya,ca,Sa,Q){Sa.exports=ca(587)};
shadow$provide[590]=function(ya,ca,Sa,Q){function w(dc){for(var Nc="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+dc,Qc=1;Qc<arguments.length;Qc++)Nc+="\x26args[]\x3d"+encodeURIComponent(arguments[Qc]);return"Minified React error #"+dc+"; visit "+Nc+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Y(dc){if(null==dc)return null;if("function"===typeof dc)return dc.displayName||dc.name||null;if("string"===typeof dc)return dc;
switch(dc){case R:return"Fragment";case T:return"Portal";case F:return"Profiler";case G:return"StrictMode";case ia:return"Suspense";case U:return"SuspenseList"}if("object"===typeof dc)switch(dc.$$typeof){case M:return(dc.displayName||"Context")+".Consumer";case O:return(dc._context.displayName||"Context")+".Provider";case I:var Nc=dc.render;Nc=Nc.displayName||Nc.name||"";return dc.displayName||(""!==Nc?"ForwardRef("+Nc+")":"ForwardRef");case Z:return Y(dc.type);case W:return Y(dc._render);case aa:Nc=
dc._payload;dc=dc._init;try{return Y(dc(Nc))}catch(Qc){}}return null}function y(dc,Nc){for(var Qc=dc._threadCount|0;Qc<=Nc;Qc++)dc[Qc]=dc._currentValue2,dc._threadCount=Qc+1}function q(dc,Nc,Qc,Ad){if(Ad&&(Ad=dc.contextType,"object"===typeof Ad&&null!==Ad))return y(Ad,Qc),Ad[Qc];if(dc=dc.contextTypes){Qc={};for(var Xc in dc)Qc[Xc]=Nc[Xc];Nc=Qc}else Nc=va;return Nc}function c(dc){if(Ga.call(Ya,dc))return!0;if(Ga.call(Ia,dc))return!1;if(xa.test(dc))return Ya[dc]=!0;Ia[dc]=!0;return!1}function u(dc,
Nc,Qc,Ad){if(null!==Qc&&0===Qc.type)return!1;switch(typeof Nc){case "function":case "symbol":return!0;case "boolean":if(Ad)return!1;if(null!==Qc)return!Qc.acceptsBooleans;dc=dc.toLowerCase().slice(0,5);return"data-"!==dc&&"aria-"!==dc;default:return!1}}function A(dc,Nc,Qc,Ad){if(null===Nc||"undefined"===typeof Nc||u(dc,Nc,Qc,Ad))return!0;if(Ad)return!1;if(null!==Qc)switch(Qc.type){case 3:return!Nc;case 4:return!1===Nc;case 5:return isNaN(Nc);case 6:return isNaN(Nc)||1>Nc}return!1}function z(dc,Nc,
Qc,Ad,Xc,sc,Sc){this.acceptsBooleans=2===Nc||3===Nc||4===Nc;this.attributeName=Ad;this.attributeNamespace=Xc;this.mustUseProperty=Qc;this.propertyName=dc;this.type=Nc;this.sanitizeURL=sc;this.removeEmptyString=Sc}function C(dc){return dc[1].toUpperCase()}function P(dc){if("boolean"===typeof dc||"number"===typeof dc)return""+dc;dc=""+dc;var Nc=Ba.exec(dc);if(Nc){var Qc="",Ad,Xc=0;for(Ad=Nc.index;Ad<dc.length;Ad++){switch(dc.charCodeAt(Ad)){case 34:Nc="\x26quot;";break;case 38:Nc="\x26amp;";break;case 39:Nc=
"\x26#x27;";break;case 60:Nc="\x26lt;";break;case 62:Nc="\x26gt;";break;default:continue}Xc!==Ad&&(Qc+=dc.substring(Xc,Ad));Xc=Ad+1;Qc+=Nc}dc=Xc!==Ad?Qc+dc.substring(Xc,Ad):Qc}return dc}function g(dc,Nc){var Qc=Fa.hasOwnProperty(dc)?Fa[dc]:null,Ad;if(Ad="style"!==dc)Ad=null!==Qc?0===Qc.type:!(2<dc.length)||"o"!==dc[0]&&"O"!==dc[0]||"n"!==dc[1]&&"N"!==dc[1]?!1:!0;if(Ad||A(dc,Nc,Qc,!1))return"";if(null!==Qc){dc=Qc.attributeName;Ad=Qc.type;if(3===Ad||4===Ad&&!0===Nc)return dc+'\x3d""';Qc.sanitizeURL&&
(Nc=""+Nc);return dc+'\x3d"'+(P(Nc)+'"')}return c(dc)?dc+'\x3d"'+(P(Nc)+'"'):""}function h(dc,Nc){return dc===Nc&&(0!==dc||1/dc===1/Nc)||dc!==dc&&Nc!==Nc}function b(){if(null===ka)throw Error(w(321));return ka}function l(){if(0<Va)throw Error(w(312));return{memoizedState:null,queue:null,next:null}}function m(){null===na?null===ua?(oa=!1,ua=na=l()):(oa=!0,na=ua):null===na.next?(oa=!1,na=na.next=l()):(oa=!0,na=na.next);return na}function p(dc,Nc,Qc,Ad){for(;La;)La=!1,Va+=1,na=null,Qc=dc(Nc,Ad);D();
return Qc}function D(){ka=null;La=!1;ua=null;Va=0;na=Oa=null}function v(dc,Nc){return"function"===typeof Nc?Nc(dc):Nc}function t(dc,Nc,Qc){ka=b();na=m();if(oa){var Ad=na.queue;Nc=Ad.dispatch;if(null!==Oa&&(Qc=Oa.get(Ad),void 0!==Qc)){Oa.delete(Ad);Ad=na.memoizedState;do Ad=dc(Ad,Qc.action),Qc=Qc.next;while(null!==Qc);na.memoizedState=Ad;return[Ad,Nc]}return[na.memoizedState,Nc]}dc=dc===v?"function"===typeof Nc?Nc():Nc:void 0!==Qc?Qc(Nc):Nc;na.memoizedState=dc;dc=na.queue={last:null,dispatch:null};
dc=dc.dispatch=f.bind(null,ka,dc);return[na.memoizedState,dc]}function r(dc,Nc){ka=b();na=m();Nc=void 0===Nc?null:Nc;if(null!==na){var Qc=na.memoizedState;if(null!==Qc&&null!==Nc){var Ad=Qc[1];a:if(null===Ad)Ad=!1;else{for(var Xc=0;Xc<Ad.length&&Xc<Nc.length;Xc++)if(!la(Nc[Xc],Ad[Xc])){Ad=!1;break a}Ad=!0}if(Ad)return Qc[0]}}dc=dc();na.memoizedState=[dc,Nc];return dc}function f(dc,Nc,Qc){if(!(25>Va))throw Error(w(301));if(dc===ka)if(La=!0,dc={action:Qc,next:null},null===Oa&&(Oa=new Map),Qc=Oa.get(Nc),
void 0===Qc)Oa.set(Nc,dc);else{for(Nc=Qc;null!==Nc.next;)Nc=Nc.next;Nc.next=dc}}function E(){}function B(dc){switch(dc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J(dc){if(void 0===dc||null===dc)return dc;var Nc="";L.Children.forEach(dc,function(Qc){null!=Qc&&(Nc+=Qc)});return Nc}function V(dc,Nc){if(void 0===dc)throw Error(w(152,Y(Nc)||"Component"));}function H(dc,Nc,Qc){function Ad(Sc,
Ib){var lb=Ib.prototype&&Ib.prototype.isReactComponent,Db=q(Ib,Nc,Qc,lb),Gb=[],db=!1,rb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Gb)return null},enqueueReplaceState:function(Rc,fd){db=!0;Gb=[fd]},enqueueSetState:function(Rc,fd){if(null===Gb)return null;Gb.push(fd)}};if(lb){if(lb=new Ib(Sc.props,Db,rb),"function"===typeof Ib.getDerivedStateFromProps){var Nb=Ib.getDerivedStateFromProps.call(null,Sc.props,lb.state);null!=Nb&&(lb.state=S({},lb.state,Nb))}}else if(ka={},
lb=Ib(Sc.props,Db,rb),lb=p(Ib,Sc.props,lb,Db),null==lb||null==lb.render){dc=lb;V(dc,Ib);return}lb.props=Sc.props;lb.context=Db;lb.updater=rb;rb=lb.state;void 0===rb&&(lb.state=rb=null);if("function"===typeof lb.UNSAFE_componentWillMount||"function"===typeof lb.componentWillMount)if("function"===typeof lb.componentWillMount&&"function"!==typeof Ib.getDerivedStateFromProps&&lb.componentWillMount(),"function"===typeof lb.UNSAFE_componentWillMount&&"function"!==typeof Ib.getDerivedStateFromProps&&lb.UNSAFE_componentWillMount(),
Gb.length){rb=Gb;var fc=db;Gb=null;db=!1;if(fc&&1===rb.length)lb.state=rb[0];else{Nb=fc?rb[0]:lb.state;var Bc=!0;for(fc=fc?1:0;fc<rb.length;fc++){var Jc=rb[fc];Jc="function"===typeof Jc?Jc.call(lb,Nb,Sc.props,Db):Jc;null!=Jc&&(Bc?(Bc=!1,Nb=S({},Nb,Jc)):S(Nb,Jc))}lb.state=Nb}}else Gb=null;dc=lb.render();V(dc,Ib);if("function"===typeof lb.getChildContext&&(Sc=Ib.childContextTypes,"object"===typeof Sc)){var ic=lb.getChildContext(),Oc;for(Oc in ic)if(!(Oc in Sc))throw Error(w(108,Y(Ib)||"Unknown",Oc));
}ic&&(Nc=S({},Nc,ic))}for(;L.isValidElement(dc);){var Xc=dc,sc=Xc.type;if("function"!==typeof sc)break;Ad(Xc,sc)}return{child:dc,context:Nc}}var S=ca(158),L=ca(19),T=60106,R=60107,G=60108,F=60114,O=60109,M=60110,I=60112,ia=60113,U=60120,Z=60115,aa=60116,W=60121,fa=60117,X=60119,ea=60129,pa=60131;"function"===typeof Symbol&&Symbol.for&&(ya=Symbol.for,T=ya("react.portal"),R=ya("react.fragment"),G=ya("react.strict_mode"),F=ya("react.profiler"),O=ya("react.provider"),M=ya("react.context"),I=ya("react.forward_ref"),
ia=ya("react.suspense"),U=ya("react.suspense_list"),Z=ya("react.memo"),aa=ya("react.lazy"),W=ya("react.block"),fa=ya("react.fundamental"),X=ya("react.scope"),ea=ya("react.debug_trace_mode"),pa=ya("react.legacy_hidden"));ya=L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var va={},ta=new Uint16Array(16);for(ca=0;15>ca;ca++)ta[ca]=ca+1;ta[15]=0;var xa=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ga=Object.prototype.hasOwnProperty,Ia={},Ya={},Fa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(dc){Fa[dc]=new z(dc,0,!1,dc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(dc){var Nc=dc[0];Fa[Nc]=new z(Nc,1,!1,dc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(dc){Fa[dc]=
new z(dc,2,!1,dc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(dc){Fa[dc]=new z(dc,2,!1,dc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(dc){Fa[dc]=new z(dc,3,!1,dc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(dc){Fa[dc]=new z(dc,3,!0,dc,null,!1,!1)});["capture","download"].forEach(function(dc){Fa[dc]=new z(dc,4,!1,dc,null,!1,!1)});["cols","rows","size","span"].forEach(function(dc){Fa[dc]=new z(dc,6,!1,dc,null,!1,!1)});["rowSpan","start"].forEach(function(dc){Fa[dc]=new z(dc,5,!1,dc.toLowerCase(),null,!1,!1)});var Ka=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(dc){var Nc=
dc.replace(Ka,C);Fa[Nc]=new z(Nc,1,!1,dc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(dc){var Nc=dc.replace(Ka,C);Fa[Nc]=new z(Nc,1,!1,dc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(dc){var Nc=dc.replace(Ka,C);Fa[Nc]=new z(Nc,1,!1,dc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(dc){Fa[dc]=new z(dc,1,!1,dc.toLowerCase(),null,!1,!1)});
Fa.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(dc){Fa[dc]=new z(dc,1,!1,dc.toLowerCase(),null,!0,!0)});var Ba=/["'&<>]/,la="function"===typeof Object.is?Object.is:h,ka=null,ua=null,na=null,oa=!1,La=!1,Oa=null,Va=0,Ma=null,Ua={readContext:function(dc){var Nc=Ma.threadID;y(dc,Nc);return dc[Nc]},useContext:function(dc){b();var Nc=Ma.threadID;y(dc,Nc);return dc[Nc]},useMemo:r,useReducer:t,useRef:function(dc){ka=
b();na=m();var Nc=na.memoizedState;return null===Nc?(dc={current:dc},na.memoizedState=dc):Nc},useState:function(dc){return t(v,dc)},useLayoutEffect:function(){},useCallback:function(dc,Nc){return r(function(){return dc},Nc)},useImperativeHandle:E,useEffect:E,useDebugValue:E,useDeferredValue:function(dc){b();return dc},useTransition:function(){b();return[function(dc){dc()},!1]},useOpaqueIdentifier:function(){return(Ma.identifierPrefix||"")+"R:"+(Ma.uniqueID++).toString(36)},useMutableSource:function(dc,
Nc){b();return Nc(dc._source)}},ib={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},vb=S({menuitem:!0},ib),yb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wa=["Webkit","ms","Moz","O"];Object.keys(yb).forEach(function(dc){Wa.forEach(function(Nc){Nc=Nc+dc.charAt(0).toUpperCase()+dc.substring(1);yb[Nc]=yb[dc]})});var hb=/([A-Z])/g,ab=/^ms-/,Qa=L.Children.toArray,
bb=ya.ReactCurrentDispatcher,Pa={listing:!0,pre:!0,textarea:!0},Lb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,xc={},oc={},pc=Object.prototype.hasOwnProperty,Cc={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},bd=function(){function dc(Qc,Ad,Xc){L.isValidElement(Qc)?Qc.type!==R?Qc=[Qc]:(Qc=Qc.props.children,Qc=L.isValidElement(Qc)?[Qc]:Qa(Qc)):Qc=Qa(Qc);Qc={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:Qc,childIndex:0,context:va,footer:""};
var sc=ta[0];if(0===sc){var Sc=ta;sc=Sc.length;var Ib=2*sc;if(!(65536>=Ib))throw Error(w(304));var lb=new Uint16Array(Ib);lb.set(Sc);ta=lb;ta[0]=sc+1;for(Sc=sc;Sc<Ib-1;Sc++)ta[Sc]=Sc+1;ta[Ib-1]=0}else ta[0]=ta[sc];this.threadID=sc;this.stack=[Qc];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=Ad;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=Xc&&Xc.identifierPrefix||""}
var Nc=dc.prototype;Nc.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var Qc=this.threadID;ta[Qc]=ta[0];ta[0]=Qc}};Nc.pushProvider=function(Qc){var Ad=++this.contextIndex,Xc=Qc.type._context,sc=this.threadID;y(Xc,sc);var Sc=Xc[sc];this.contextStack[Ad]=Xc;this.contextValueStack[Ad]=Sc;Xc[sc]=Qc.props.value};Nc.popProvider=function(){var Qc=this.contextIndex,Ad=this.contextStack[Qc],Xc=this.contextValueStack[Qc];this.contextStack[Qc]=null;this.contextValueStack[Qc]=
null;this.contextIndex--;Ad[this.threadID]=Xc};Nc.clearProviders=function(){for(var Qc=this.contextIndex;0<=Qc;Qc--)this.contextStack[Qc][this.threadID]=this.contextValueStack[Qc]};Nc.read=function(Qc){if(this.exhausted)return null;var Ad=Ma;Ma=this;var Xc=bb.current;bb.current=Ua;try{for(var sc=[""],Sc=!1;sc[0].length<Qc;){if(0===this.stack.length){this.exhausted=!0;var Ib=this.threadID;ta[Ib]=ta[0];ta[0]=Ib;break}var lb=this.stack[this.stack.length-1];if(Sc||lb.childIndex>=lb.children.length){var Db=
lb.footer;""!==Db&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===lb.type)this.currentSelectValue=null;else if(null!=lb.type&&null!=lb.type.type&&lb.type.type.$$typeof===O)this.popProvider(lb.type);else if(lb.type===ia){this.suspenseDepth--;var Gb=sc.pop();if(Sc){Sc=!1;var db=lb.fallbackFrame;if(!db)throw Error(w(303));this.stack.push(db);sc[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else sc[this.suspenseDepth]+=Gb}sc[this.suspenseDepth]+=Db}else{var rb=lb.children[lb.childIndex++],
Nb="";try{Nb+=this.render(rb,lb.context,lb.domNamespace)}catch(fc){if(null!=fc&&"function"===typeof fc.then)throw Error(w(294));throw fc;}finally{}sc.length<=this.suspenseDepth&&sc.push("");sc[this.suspenseDepth]+=Nb}}return sc[0]}finally{bb.current=Xc,Ma=Ad,D()}};Nc.render=function(Qc,Ad,Xc){if("string"===typeof Qc||"number"===typeof Qc){Xc=""+Qc;if(""===Xc)return"";if(this.makeStaticMarkup)return P(Xc);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+P(Xc);this.previousWasTextNode=!0;return P(Xc)}Ad=
H(Qc,Ad,this.threadID);Qc=Ad.child;Ad=Ad.context;if(null===Qc||!1===Qc)return"";if(!L.isValidElement(Qc)){if(null!=Qc&&null!=Qc.$$typeof){Xc=Qc.$$typeof;if(Xc===T)throw Error(w(257));throw Error(w(258,Xc.toString()));}Qc=Qa(Qc);this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,context:Ad,footer:""});return""}var sc=Qc.type;if("string"===typeof sc)return this.renderDOM(Qc,Ad,Xc);switch(sc){case pa:case ea:case G:case F:case U:case R:return Qc=Qa(Qc.props.children),this.stack.push({type:null,
domNamespace:Xc,children:Qc,childIndex:0,context:Ad,footer:""}),"";case ia:throw Error(w(294));case X:throw Error(w(343));}if("object"===typeof sc&&null!==sc)switch(sc.$$typeof){case I:ka={};var Sc=sc.render(Qc.props,Qc.ref);Sc=p(sc.render,Qc.props,Sc,Qc.ref);Sc=Qa(Sc);this.stack.push({type:null,domNamespace:Xc,children:Sc,childIndex:0,context:Ad,footer:""});return"";case Z:return Qc=[L.createElement(sc.type,S({ref:Qc.ref},Qc.props))],this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,
context:Ad,footer:""}),"";case O:return sc=Qa(Qc.props.children),Xc={type:Qc,domNamespace:Xc,children:sc,childIndex:0,context:Ad,footer:""},this.pushProvider(Qc),this.stack.push(Xc),"";case M:sc=Qc.type;Sc=Qc.props;var Ib=this.threadID;y(sc,Ib);sc=Qa(Sc.children(sc[Ib]));this.stack.push({type:Qc,domNamespace:Xc,children:sc,childIndex:0,context:Ad,footer:""});return"";case fa:throw Error(w(338));case aa:return sc=Qc.type,Sc=sc._init,sc=Sc(sc._payload),Qc=[L.createElement(sc,S({ref:Qc.ref},Qc.props))],
this.stack.push({type:null,domNamespace:Xc,children:Qc,childIndex:0,context:Ad,footer:""}),""}throw Error(w(130,null==sc?sc:typeof sc,""));};Nc.renderDOM=function(Qc,Ad,Xc){var sc=Qc.type.toLowerCase();"http://www.w3.org/1999/xhtml"===Xc&&B(sc);if(!xc.hasOwnProperty(sc)){if(!Lb.test(sc))throw Error(w(65,sc));xc[sc]=!0}var Sc=Qc.props;if("input"===sc)Sc=S({type:void 0},Sc,{defaultChecked:void 0,defaultValue:void 0,value:null!=Sc.value?Sc.value:Sc.defaultValue,checked:null!=Sc.checked?Sc.checked:Sc.defaultChecked});
else if("textarea"===sc){var Ib=Sc.value;if(null==Ib){Ib=Sc.defaultValue;var lb=Sc.children;if(null!=lb){if(null!=Ib)throw Error(w(92));if(Array.isArray(lb)){if(!(1>=lb.length))throw Error(w(93));lb=lb[0]}Ib=""+lb}null==Ib&&(Ib="")}Sc=S({},Sc,{value:void 0,children:""+Ib})}else if("select"===sc)this.currentSelectValue=null!=Sc.value?Sc.value:Sc.defaultValue,Sc=S({},Sc,{value:void 0});else if("option"===sc){lb=this.currentSelectValue;var Db=J(Sc.children);if(null!=lb){var Gb=null!=Sc.value?Sc.value+
"":Db;Ib=!1;if(Array.isArray(lb))for(var db=0;db<lb.length;db++){if(""+lb[db]===Gb){Ib=!0;break}}else Ib=""+lb===Gb;Sc=S({selected:void 0,children:void 0},Sc,{selected:Ib,children:Db})}}if(Ib=Sc){if(vb[sc]&&(null!=Ib.children||null!=Ib.dangerouslySetInnerHTML))throw Error(w(137,sc));if(null!=Ib.dangerouslySetInnerHTML){if(null!=Ib.children)throw Error(w(60));if(!("object"===typeof Ib.dangerouslySetInnerHTML&&"__html"in Ib.dangerouslySetInnerHTML))throw Error(w(61));}if(null!=Ib.style&&"object"!==
typeof Ib.style)throw Error(w(62));}Ib=Sc;lb=this.makeStaticMarkup;Db=1===this.stack.length;Gb="\x3c"+Qc.type;a:if(-1===sc.indexOf("-"))db="string"===typeof Ib.is;else switch(sc){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":db=!1;break a;default:db=!0}for(fd in Ib)if(pc.call(Ib,fd)){var rb=Ib[fd];if(null!=rb){if("style"===fd){var Nb=void 0,fc="",Bc="";for(Nb in rb)if(rb.hasOwnProperty(Nb)){var Jc=
0===Nb.indexOf("--"),ic=rb[Nb];if(null!=ic){if(Jc)var Oc=Nb;else if(Oc=Nb,oc.hasOwnProperty(Oc))Oc=oc[Oc];else{var Rc=Oc.replace(hb,"-$1").toLowerCase().replace(ab,"-ms-");Oc=oc[Oc]=Rc}fc+=Bc+Oc+":";Bc=Nb;Jc=null==ic||"boolean"===typeof ic||""===ic?"":Jc||"number"!==typeof ic||0===ic||yb.hasOwnProperty(Bc)&&yb[Bc]?(""+ic).trim():ic+"px";fc+=Jc;Bc=";"}}rb=fc||null}Nb=null;db?Cc.hasOwnProperty(fd)||(Nb=fd,Nb=c(Nb)&&null!=rb?Nb+'\x3d"'+(P(rb)+'"'):""):Nb=g(fd,rb);Nb&&(Gb+=" "+Nb)}}lb||Db&&(Gb+=' data-reactroot\x3d""');
var fd=Gb;Ib="";ib.hasOwnProperty(sc)?fd+="/\x3e":(fd+="\x3e",Ib="\x3c/"+Qc.type+"\x3e");a:{lb=Sc.dangerouslySetInnerHTML;if(null!=lb){if(null!=lb.__html){lb=lb.__html;break a}}else if(lb=Sc.children,"string"===typeof lb||"number"===typeof lb){lb=P(lb);break a}lb=null}null!=lb?(Sc=[],Pa.hasOwnProperty(sc)&&"\n"===lb.charAt(0)&&(fd+="\n"),fd+=lb):Sc=Qa(Sc.children);Qc=Qc.type;Xc=null==Xc||"http://www.w3.org/1999/xhtml"===Xc?B(Qc):"http://www.w3.org/2000/svg"===Xc&&"foreignObject"===Qc?"http://www.w3.org/1999/xhtml":
Xc;this.stack.push({domNamespace:Xc,type:sc,children:Sc,childIndex:0,context:Ad,footer:Ib});this.previousWasTextNode=!1;return fd};return dc}();Q.renderToNodeStream=function(){throw Error(w(207));};Q.renderToStaticMarkup=function(dc,Nc){dc=new bd(dc,!0,Nc);try{return dc.read(Infinity)}finally{dc.destroy()}};Q.renderToStaticNodeStream=function(){throw Error(w(208));};Q.renderToString=function(dc,Nc){dc=new bd(dc,!1,Nc);try{return dc.read(Infinity)}finally{dc.destroy()}};Q.version="17.0.2"};
shadow$provide[592]=function(ya,ca,Sa,Q){Sa.exports=ca(590)};
shadow$provide[593]=function(yg,F,xs,FD){function ys(){if(!zg&&(zg="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zg))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zg(zs)}function As(a,b=0){return(Nb[a[b+0]]+Nb[a[b+1]]+Nb[a[b+2]]+Nb[a[b+3]]+"-"+Nb[a[b+4]]+Nb[a[b+5]]+"-"+Nb[a[b+6]]+Nb[a[b+7]]+"-"+Nb[a[b+8]]+Nb[a[b+9]]+"-"+Nb[a[b+10]]+Nb[a[b+11]]+Nb[a[b+12]]+Nb[a[b+13]]+Nb[a[b+
14]]+Nb[a[b+15]]).toLowerCase()}function Bs(a){let b=0;var c=0;for(var d of a)b+=d.w*d.h,c=Math.max(c,d.w);a.sort((g,h)=>h.h-g.h);c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(b/.95)),c),h:Infinity}];let e=d=0;for(const g of a)for(a=c.length-1;0<=a;a--){var f=c[a];if(!(g.w>f.w||g.h>f.h)){g.x=f.x;g.y=f.y;e=Math.max(e,g.y+g.h);d=Math.max(d,g.x+g.w);g.w===f.w&&g.h===f.h?(f=c.pop(),a<c.length&&(c[a]=f)):g.h===f.h?(f.x+=g.w,f.w-=g.w):(g.w!==f.w&&c.push({x:f.x+g.w,y:f.y,w:f.w-g.w,h:g.h}),f.y+=g.h,f.h-=g.h);
break}}return{w:d,h:e,fill:b/(d*e)||0}}function pb(a,...b){return{didIntersect:0<b.length,message:a,points:b}}function we(a,b,c=0){const d=[a[0]+b[0]/2,a[1]+b[1]/2],e=E.rotWith(a,d,c),f=E.rotWith(E.add(a,[b[0],0]),d,c),g=E.rotWith(E.add(a,b),d,c);a=E.rotWith(E.add(a,[0,b[1]]),d,c);return[["top",[e,f]],["right",[f,g]],["bottom",[g,a]],["left",[a,e]]]}function il(a,b,c,d){const [e,f]=a,[g,h]=b,[k,l]=c,[m,p]=d;return h/g!==(p-l)/(m-k)&&(b=g*(p-l)-h*(m-k),0!==b&&(a=((f-l)*(m-k)-(e-k)*(p-l))/b,b=((f-l)*
g-(e-k)*h)/b,0<=a&&0<=b&&1>=b))?pb("intersection",[e+a*g,f+a*h]):pb("no intersection")}function Cs(a,b,c,d,e=0){return Ds(c,d,e,a,b)}function Ag(a,b,c,d=0){const {minX:e,minY:f,width:g,height:h}=c;return Cs(a,b,[e,f],[g,h],d)}function ii(a,b,c,d){var e=E.sub(a,c);c=E.sub(d,c);b=E.sub(b,a);d=c[0]*e[1]-c[1]*e[0];e=b[0]*e[1]-b[1]*e[0];c=c[1]*b[0]-c[0]*b[1];return 0===d||0===e?pb("coincident"):0===c?pb("parallel"):0!==c&&(d/=c,e/=c,0<=d&&1>=d&&0<=e&&1>=e)?pb("intersection",E.add(a,E.mul(b,d))):pb("no intersection")}
function jl(a,b,c,d){var e=(b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1]),f=2*((b[0]-a[0])*(a[0]-c[0])+(b[1]-a[1])*(a[1]-c[1]));c=f*f-4*e*(c[0]*c[0]+c[1]*c[1]+a[0]*a[0]+a[1]*a[1]-2*(c[0]*a[0]+c[1]*a[1])-d*d);if(0>c)return pb("outside");if(0===c)return pb("tangent");d=Math.sqrt(c);c=(-f+d)/(2*e);e=(-f-d)/(2*e);if((0>c||1<c)&&(0>e||1<e))return 0>c&&0>e||1<c&&1<e?pb("outside"):pb("inside");f=[];0<=c&&1>=c&&f.push(E.lrp(a,b,c));0<=e&&1>=e&&f.push(E.lrp(a,b,e));return pb("intersection",...f)}function kl(a,
b,c,d,e,f=0){if(0===d||0===e||E.isEqual(a,b))return pb("no intersection");d=0>d?d:-d;e=0>e?e:-e;a=E.sub(E.rotWith(a,c,-f),c);b=E.sub(E.rotWith(b,c,-f),c);var g=E.sub(b,a),h=g[0]*g[0]/d/d+g[1]*g[1]/e/e;g=2*a[0]*g[0]/d/d+2*a[1]*g[1]/e/e;const k=[];d=g*g-4*h*(a[0]*a[0]/d/d+a[1]*a[1]/e/e-1);0===d?k.push(-g/2/h):0<d&&(d=Math.sqrt(d),k.push((-g+d)/2/h),k.push((-g-d)/2/h));h=k.filter(l=>0<=l&&1>=l).map(l=>E.add(c,E.add(a,E.mul(E.sub(b,a),l)))).map(l=>E.rotWith(l,c,f));return pb("intersection",...h)}function xf(a,
b,c){const d=[];for(let e=1;e<c.length;e++){const f=ii(a,b,c[e-1],c[e]);f&&d.push(...f.points)}return 0===d.length?pb("no intersection"):pb("intersection",...c)}function Ds(a,b,c,d,e){return we(a,b,c).reduce((f,[g,[h,k]])=>{(h=il(d,e,h,k))&&f.push(pb(g,...h.points));return f},[]).filter(f=>f.didIntersect)}function Es(a,b,c,d){return we(a,b).reduce((e,[f,[g,h]])=>{(g=ii(c,d,g,h))&&e.push(pb(f,...g.points));return e},[]).filter(e=>e.didIntersect)}function Fs(a,b,c,d){return we(a,b).reduce((e,[f,[g,
h]])=>{(g=jl(g,h,c,d))&&e.push(V(N({},g),{message:f}));return e},[]).filter(e=>e.didIntersect)}function Gs(a,b,c,d,e,f=0){return we(a,b).reduce((g,[h,[k,l]])=>{(k=kl(k,l,c,d,e,f))&&g.push(V(N({},k),{message:h}));return g},[]).filter(g=>g.didIntersect)}function ll(a,b,c){return we(a,b).reduce((d,[e,[f,g]])=>{f=xf(f,g,c);f.didIntersect&&d.push(pb(e,...f.points));return d},[]).filter(d=>d.didIntersect)}function ml(a,b,c){return we(a,b).reduce((d,[e,[f,g]])=>{{const h=[];for(let k=1;k<c.length+1;k++){const l=
ii(f,g,c[k-1],c[k%c.length]);l&&h.push(...l.points)}f=0===h.length?pb("no intersection"):pb("intersection",...c)}f.didIntersect&&d.push(pb(e,...f.points));return d},[]).filter(d=>d.didIntersect)}function Hs(a,b,c,d=0,e,f){return b===c?Fs(e,f,a,b):Gs(e,f,a,b,c,d)}function ji(a,b,c){const {minX:d,minY:e,width:f,height:g}=a;return Es([d,e],[f,g],b,c)}function Oa(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];throw Error("number"===typeof a?"[MobX] minified error nr: "+
a+(c.length?" "+c.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+a);}function ki(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof yg?yg:"undefined"!==typeof self?self:Is}function nl(){Js||Oa("Proxy not available")}function ol(a){var b=!1;return function(){if(!b)return b=!0,a.apply(this,arguments)}}function qc(a){return"function"===typeof a}function Td(a){switch(typeof a){case "string":case "symbol":case "number":return!0}return!1}
function Bg(a){return null!==a&&"object"===typeof a}function td(a){if(!Bg(a))return!1;a=Object.getPrototypeOf(a);if(null==a)return!0;a=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return"function"===typeof a&&a.toString()===Ks}function pl(a){return(a=null==a?void 0:a.constructor)?"GeneratorFunction"===a.name||"GeneratorFunction"===a.displayName?!0:!1:!1}function Cg(a,b,c){cd(a,b,{enumerable:!1,writable:!0,configurable:!0,value:c})}function ql(a,b,c){cd(a,b,{enumerable:!1,writable:!1,
configurable:!0,value:c})}function ud(a,b){var c="isMobX"+a;b.prototype[c]=!0;return function(d){return Bg(d)&&!0===d[c]}}function xe(a){return a instanceof Map}function yf(a){return a instanceof Set}function Ls(a){var b=Object.keys(a);if(!rl)return b;var c=Object.getOwnPropertySymbols(a);return c.length?[].concat(b,c.filter(function(d){return zf.propertyIsEnumerable.call(a,d)})):b}function sl(a){return null===a?null:"object"===typeof a?""+a:a}function dd(a,b){return zf.hasOwnProperty.call(a,b)}function tl(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}function li(a,b,c){b&&tl(a.prototype,b);c&&tl(a,c);Object.defineProperty(a,"prototype",{writable:!1});return a}function ye(){ye=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return ye.apply(this,arguments)}function ul(a,b){a.prototype=
Object.create(b.prototype);a.prototype.constructor=a;mi(a,b)}function mi(a,b){mi=Object.setPrototypeOf||function(c,d){c.__proto__=d;return c};return mi(a,b)}function ni(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ms(a,b){if(a){if("string"===typeof a)return vl(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===
c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return vl(a,b)}}function vl(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function ze(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=Ms(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Mc(a){return Object.assign(function(b,c){Af(b,c,a)},a)}function Af(a,b,c){dd(a,Ac)||Cg(a,Ac,ye({},a[Ac]));c.annotationType_!==Ns&&(a[Ac][b]=c)}function Os(a){dd(a,Ac)||Cg(a,Ac,ye({},a[Ac]));return a[Ac]}function wl(a,b,c){void 0===b&&(b=Ae);void 0===c&&(c=Ae);a=new Bf(a);b!==Ae&&xl(Ps,a,b,void 0);c!==Ae&&yl(a,c);return a}function Be(a,b,c){return oi(a)?a:Array.isArray(a)?ma.array(a,{name:c}):td(a)?ma.object(a,void 0,{name:c}):xe(a)?ma.map(a,{name:c}):yf(a)?ma.set(a,{name:c}):"function"!==
typeof a||pi(a)||Dg(a)?a:pl(a)?Cf(a):Df(c,a)}function Eg(a){return a}function Ef(a,b){return{annotationType_:a,options_:b,make_:Qs,extend_:Rs}}function Qs(a,b,c,d){var e;if(null!=(e=this.options_)&&e.bound)return null===this.extend_(a,b,c,!1)?0:1;if(d===a.target_)return null===this.extend_(a,b,c,!1)?0:2;if(pi(c.value))return 1;a=zl(a,this,b,c,!1);cd(d,b,a);return 2}function Rs(a,b,c,d){c=zl(a,this,b,c);return a.defineProperty_(b,c,d)}function zl(a,b,c,d,e){var f,g,h,k,l,m,p;void 0===e&&(e=aa.safeDescriptors);
d=d.value;if(null!=(f=b.options_)&&f.bound){var q;d=d.bind(null!=(q=a.proxy_)?q:a.target_)}return{value:Ce(null!=(g=null==(h=b.options_)?void 0:h.name)?g:c.toString(),d,null!=(k=null==(l=b.options_)?void 0:l.autoAction)?k:!1,null!=(m=b.options_)&&m.bound?null!=(p=a.proxy_)?p:a.target_:void 0),configurable:e?a.isPlainObject_:!0,enumerable:!1,writable:e?!1:!0}}function Al(a,b){return{annotationType_:a,options_:b,make_:Ss,extend_:Ts}}function Ss(a,b,c,d){var e;if(d===a.target_)return null===this.extend_(a,
b,c,!1)?0:2;if(null!=(e=this.options_)&&e.bound&&(!dd(a.target_,b)||!Dg(a.target_[b]))&&null===this.extend_(a,b,c,!1))return 0;if(Dg(c.value))return 1;a=Bl(a,this,b,c,!1,!1);cd(d,b,a);return 2}function Ts(a,b,c,d){var e;c=Bl(a,this,b,c,null==(e=this.options_)?void 0:e.bound);return a.defineProperty_(b,c,d)}function Bl(a,b,c,d,e,f){void 0===f&&(f=aa.safeDescriptors);b=d.value;Dg(b)||(b=Cf(b));if(e){var g;b=b.bind(null!=(g=a.proxy_)?g:a.target_);b.isMobXFlow=!0}return{value:b,configurable:f?a.isPlainObject_:
!0,enumerable:!1,writable:f?!1:!0}}function qi(a,b){return{annotationType_:a,options_:b,make_:Us,extend_:Vs}}function Us(a,b,c){return null===this.extend_(a,b,c,!1)?0:1}function Vs(a,b,c,d){return a.defineComputedProperty_(b,ye({},this.options_,{get:c.get,set:c.set}),d)}function Fg(a,b){return{annotationType_:a,options_:b,make_:Ws,extend_:Xs}}function Ws(a,b,c){return null===this.extend_(a,b,c,!1)?0:1}function Xs(a,b,c,d){var e,f;return a.defineObservableProperty_(b,c.value,null!=(e=null==(f=this.options_)?
void 0:f.enhancer)?e:Be,d)}function Cl(a){return{annotationType_:"true",options_:a,make_:Ys,extend_:Zs}}function Ys(a,b,c,d){var e,f;if(c.get)return oa.make_(a,b,c,d);if(c.set){c=Ce(b.toString(),c.set);if(d===a.target_)return null===a.defineProperty_(b,{configurable:aa.safeDescriptors?a.isPlainObject_:!0,set:c})?0:2;cd(d,b,{configurable:!0,set:c});return 2}if(d!==a.target_&&"function"===typeof c.value){var g;if(pl(c.value)){var h;return(null!=(h=this.options_)&&h.autoBind?Cf.bound:Cf).make_(a,b,c,
d)}return(null!=(g=this.options_)&&g.autoBind?Df.bound:Df).make_(a,b,c,d)}g=!1===(null==(e=this.options_)?void 0:e.deep)?ma.ref:ma;if("function"===typeof c.value&&null!=(f=this.options_)&&f.autoBind){var k;c.value=c.value.bind(null!=(k=a.proxy_)?k:a.target_)}return g.make_(a,b,c,d)}function Zs(a,b,c,d){var e,f;if(c.get)return oa.extend_(a,b,c,d);if(c.set)return a.defineProperty_(b,{configurable:aa.safeDescriptors?a.isPlainObject_:!0,set:Ce(b.toString(),c.set)},d);if("function"===typeof c.value&&null!=
(e=this.options_)&&e.autoBind){var g;c.value=c.value.bind(null!=(g=a.proxy_)?g:a.target_)}return(!1===(null==(f=this.options_)?void 0:f.deep)?ma.ref:ma).extend_(a,b,c,d)}function Gg(a){if(!0===a.deep)var b=Be;else{if(!1===a.deep)a=Eg;else{a=a.defaultDecorator;var c;a=a?null!=(b=null==(c=a.options_)?void 0:c.enhancer)?b:Be:Be}b=a}return b}function Dl(a,b,c){if(Td(b))Af(a,b,El);else return oi(a)?a:td(a)?ma.object(a,b,c):Array.isArray(a)?ma.array(a,b):xe(a)?ma.map(a,b):yf(a)?ma.set(a,b):"object"===typeof a&&
null!==a?a:ma.box(a,b)}function Ce(a,b,c,d){function e(){a:{var f=d||this,g=arguments,h=aa.trackingDerivation,k=!c||!h;hc();var l=aa.allowStateChanges;k&&(De(),l=Ff(!0));var m=ri(!0),p=$s++,q=Hg;Hg=p;try{var t=b.apply(f,g);break a}catch(v){var r=v;throw v;}finally{Hg!==p&&Oa(30),Hg=q,void 0!==r&&(aa.suppressReactionErrors=!0),aa.allowStateChanges=l,aa.allowStateReads=m,ic(),k&&(aa.trackingDerivation=h),aa.suppressReactionErrors=!1}t=void 0}return t}void 0===c&&(c=!1);e.isMobxAction=!0;at&&(Fl.value=
a,Object.defineProperty(e,"name",Fl));return e}function Gl(a,b){a=Ff(a);try{return b()}finally{aa.allowStateChanges=a}}function Ff(a){var b=aa.allowStateChanges;aa.allowStateChanges=a;return b}function si(a){switch(a.dependenciesState_){case Ta.UP_TO_DATE_:return!1;case Ta.NOT_TRACKING_:case Ta.STALE_:return!0;case Ta.POSSIBLY_STALE_:for(var b=ri(!0),c=De(),d=a.observing_,e=d.length,f=0;f<e;f++){var g=d[f];if(Gf(g)){if(aa.disableErrorBoundaries)g.get();else try{g.get()}catch(h){return aa.trackingDerivation=
c,aa.allowStateReads=b,!0}if(a.dependenciesState_===Ta.STALE_)return aa.trackingDerivation=c,aa.allowStateReads=b,!0}}Hl(a);aa.trackingDerivation=c;aa.allowStateReads=b;return!1}}function Il(a,b,c){var d=ri(!0);Hl(a);a.newObserving_=Array(a.observing_.length+100);a.unboundDepsCount_=0;a.runId_=++aa.runId;var e=aa.trackingDerivation;aa.trackingDerivation=a;aa.inBatch++;if(!0===aa.disableErrorBoundaries)var f=b.call(c);else try{f=b.call(c)}catch(m){f=new Ud(m)}aa.inBatch--;aa.trackingDerivation=e;var g=
a.observing_;b=a.observing_=a.newObserving_;c=Ta.UP_TO_DATE_;e=0;for(var h=a.unboundDepsCount_,k=0;k<h;k++){var l=b[k];0===l.diffValue_&&(l.diffValue_=1,e!==k&&(b[e]=l),e++);l.dependenciesState_>c&&(c=l.dependenciesState_)}b.length=e;a.newObserving_=null;for(h=g.length;h--;)k=g[h],0===k.diffValue_&&Jl(k,a),k.diffValue_=0;for(;e--;)g=b[e],1===g.diffValue_&&(g.diffValue_=0,h=a,g.observers_.add(h),g.lowestObserverState_>h.dependenciesState_&&(g.lowestObserverState_=h.dependenciesState_));c!==Ta.UP_TO_DATE_&&
(a.dependenciesState_=c,a.onBecomeStale_());aa.allowStateReads=d;return f}function ti(a){var b=a.observing_;a.observing_=[];for(var c=b.length;c--;)Jl(b[c],a);a.dependenciesState_=Ta.NOT_TRACKING_}function Kl(a){var b=De();try{return a()}finally{aa.trackingDerivation=b}}function De(){var a=aa.trackingDerivation;aa.trackingDerivation=null;return a}function ri(a){var b=aa.allowStateReads;aa.allowStateReads=a;return b}function Hl(a){if(a.dependenciesState_!==Ta.UP_TO_DATE_){a.dependenciesState_=Ta.UP_TO_DATE_;
a=a.observing_;for(var b=a.length;b--;)a[b].lowestObserverState_=Ta.UP_TO_DATE_}}function bt(){(aa.pendingReactions.length||aa.inBatch||aa.isRunningReactions)&&Oa(36);Ll=!0;if(Ig){var a=ki();0===--a.__mobxInstanceCount&&(a.__mobxGlobals=void 0);aa=new Jg}}function Jl(a,b){a.observers_["delete"](b);0===a.observers_.size&&Ml(a)}function Ml(a){!1===a.isPendingUnobservation_&&(a.isPendingUnobservation_=!0,aa.pendingUnobservations.push(a))}function hc(){aa.inBatch++}function ic(){if(0===--aa.inBatch){0<
aa.inBatch||aa.isRunningReactions||Kg(Nl);for(var a=aa.pendingUnobservations,b=0;b<a.length;b++){var c=a[b];c.isPendingUnobservation_=!1;0===c.observers_.size&&(c.isBeingObserved_&&(c.isBeingObserved_=!1,c.onBUO()),c instanceof Hf&&c.suspend_())}aa.pendingUnobservations=[]}}function Ol(a){var b=aa.trackingDerivation;if(null!==b)return b.runId_!==a.lastAccessedBy_&&(a.lastAccessedBy_=b.runId_,b.newObserving_[b.unboundDepsCount_++]=a,!a.isBeingObserved_&&aa.trackingContext&&(a.isBeingObserved_=!0,a.onBO())),
a.isBeingObserved_;0===a.observers_.size&&0<aa.inBatch&&Ml(a);return!1}function Pl(a){a.lowestObserverState_!==Ta.STALE_&&(a.lowestObserverState_=Ta.STALE_,a.observers_.forEach(function(b){if(b.dependenciesState_===Ta.UP_TO_DATE_)b.onBecomeStale_();b.dependenciesState_=Ta.STALE_}))}function ct(a){a.lowestObserverState_!==Ta.STALE_&&(a.lowestObserverState_=Ta.STALE_,a.observers_.forEach(function(b){b.dependenciesState_===Ta.POSSIBLY_STALE_?b.dependenciesState_=Ta.STALE_:b.dependenciesState_===Ta.UP_TO_DATE_&&
(a.lowestObserverState_=Ta.UP_TO_DATE_)}))}function dt(a){a.lowestObserverState_===Ta.UP_TO_DATE_&&(a.lowestObserverState_=Ta.POSSIBLY_STALE_,a.observers_.forEach(function(b){b.dependenciesState_===Ta.UP_TO_DATE_&&(b.dependenciesState_=Ta.POSSIBLY_STALE_,b.onBecomeStale_())}))}function Nl(){aa.isRunningReactions=!0;for(var a=aa.pendingReactions,b=0;0<a.length;){++b===et&&(console.error("[mobx] cycle in reaction: "+a[0]),a.splice(0));for(var c=a.splice(0),d=0,e=c.length;d<e;d++)c[d].runReaction_()}aa.isRunningReactions=
!1}function ft(a){var b=Kg;Kg=function(c){return a(function(){return b(c)})}}function gt(a){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Ql(a){return function(b,c){if(qc(b))return Ce(b.name||"\x3cunnamed action\x3e",b,a);if(qc(c))return Ce(b,c,a);if(Td(c))return Af(b,c,a?Rl:Sl);if(Td(b))return Mc(Ef(a?"autoAction":Tl,{name:b,autoAction:a}))}}function pi(a){return qc(a)&&!0===a.isMobxAction}function If(a,b){function c(){a(k)}var d,e;void 0===b&&(b=ui);var f=
null!=(d=null==(e=b)?void 0:e.name)?d:"Autorun";if(b.scheduler||b.delay){var g=Ul(b),h=!1;var k=new Ee(f,function(){h||(h=!0,g(function(){h=!1;k.isDisposed_||k.track(c)}))},b.onError,b.requiresObservable)}else k=new Ee(f,function(){this.track(c)},b.onError,b.requiresObservable);k.schedule_();return k.getDisposer_()}function Ul(a){return a.scheduler?a.scheduler:a.delay?function(b){return setTimeout(b,a.delay)}:ht}function it(a,b,c){function d(){m=!1;if(!r.isDisposed_){var v=!1;r.track(function(){var y=
Gl(!1,function(){return a(r)});v=l||!t(p,y);q=p;p=y});l&&c.fireImmediately?g(p,q,r):!l&&v&&g(p,q,r);l=!1}}var e;void 0===c&&(c=ui);var f=null!=(e=c.name)?e:"Reaction",g=ja(f,c.onError?jt(c.onError,b):b),h=!c.scheduler&&!c.delay,k=Ul(c),l=!0,m=!1,p,q,t=c.compareStructural?Fe.structural:c.equals||Fe["default"],r=new Ee(f,function(){l||h?d():m||(m=!0,k(d))},c.onError,c.requiresObservable);r.schedule_();return r.getDisposer_()}function jt(a,b){return function(){try{return b.apply(this,arguments)}catch(c){a.call(this,
c)}}}function yl(a,b,c){return xl(kt,a,b,c)}function xl(a,b,c,d){var e="function"===typeof d?vd(b,c):vd(b),f=qc(d)?d:c,g=a+"L";e[g]?e[g].add(f):e[g]=new Set([f]);return function(){var h=e[g];h&&(h["delete"](f),0===h.size&&delete e[g])}}function lt(a){!0===a.isolateGlobalState&&bt();var b=a.useProxies,c=a.enforceActions;void 0!==b&&(aa.useProxies="always"===b?!0:"never"===b?!1:"undefined"!==typeof Proxy);"ifavailable"===b&&(aa.verifyProxies=!0);void 0!==c&&(b="always"===c?"always":"observed"===c,aa.enforceActions=
b,aa.allowStateChanges=!0===b||"always"===b?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(d){d in a&&(aa[d]=!!a[d])});aa.allowStateReads=!aa.observableRequiresReaction;a.reactionScheduler&&ft(a.reactionScheduler)}function mt(a,b,c,d){var e=nt(b),f=Lg(a,d)[Aa];hc();try{Mg(e).forEach(function(g){f.extend_(g,e[g],c?g in c?c[g]:!0:!0)})}finally{ic()}return a}function Vl(a){var b={name:a.name_};
a.observing_&&0<a.observing_.length&&(b.dependencies=Array.from(new Set(a.observing_)).map(Vl));return b}function Wl(){this.message="FLOW_CANCELLED"}function Dg(a){return!0===(null==a?void 0:a.isMobXFlow)}function oi(a,b){return a?void 0!==b?Ge(a)?a[Aa].values_.has(b):!1:Ge(a)||!!a[Aa]||vi(a)||Ng(a)||Gf(a):!1}function ot(a){if(Ge(a))return a[Aa].ownKeys_();Oa(38)}function Og(a,b,c){a.set(b,c);return c}function He(a,b){if(null==a||"object"!==typeof a||a instanceof Date||!oi(a))return a;if(pt(a)||Gf(a))return He(a.get(),
b);if(b.has(a))return b.get(a);if(Jf(a)){var c=Og(b,a,Array(a.length));a.forEach(function(g,h){c[h]=He(g,b)});return c}if(Vd(a)){var d=Og(b,a,new Set);a.forEach(function(g){d.add(He(g,b))});return d}if(wd(a)){var e=Og(b,a,new Map);a.forEach(function(g,h){e.set(h,He(g,b))});return e}var f=Og(b,a,{});ot(a).forEach(function(g){zf.propertyIsEnumerable.call(a,g)&&(f[g]=He(a[g],b))});return f}function Wd(a,b){return He(a,new Map)}function qt(){Oa("trace() is not available in production builds");for(var a=
!1,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];"boolean"===typeof c[c.length-1]&&(a=c.pop());a:{switch(c.length){case 0:b=aa.trackingDerivation;break a;case 1:b=vd(c[0]);break a;case 2:b=vd(c[0],c[1]);break a}b=void 0}if(!b)return Oa("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");b.isTracing_===Ie.NONE&&console.log("[mobx.trace] '"+b.name_+"' tracing enabled");b.isTracing_=a?Ie.BREAK:
Ie.LOG}function zb(a,b){void 0===b&&(b=void 0);hc();try{return a.apply(b)}finally{ic()}}function rc(a){return void 0!==a.interceptors_&&0<a.interceptors_.length}function Kf(a,b){var c=a.interceptors_||(a.interceptors_=[]);c.push(b);return ol(function(){var d=c.indexOf(b);-1!==d&&c.splice(d,1)})}function sc(a,b){var c=De();try{var d=[].concat(a.interceptors_||[]);a=0;for(var e=d.length;a<e&&((b=d[a](b))&&!b.type&&Oa(14),b);a++);return b}finally{aa.trackingDerivation=c}}function Bc(a){return void 0!==
a.changeListeners_&&0<a.changeListeners_.length}function Lf(a,b){var c=a.changeListeners_||(a.changeListeners_=[]);c.push(b);return ol(function(){var d=c.indexOf(b);-1!==d&&c.splice(d,1)})}function Cc(a,b){var c=De();if(a=a.changeListeners_){a=a.slice();for(var d=0,e=a.length;d<e;d++)a[d](b);aa.trackingDerivation=c}}function kb(a,b,c){var d=Lg(a,c)[Aa];hc();try{var e;null!=(e=b)?e:b=Os(a);Mg(b).forEach(function(f){return d.make_(f,b[f])})}finally{ic()}return a}function rt(a,b,c,d){void 0===c&&(c=
"ObservableArray");void 0===d&&(d=!1);nl();b=new wi(c,b,d,!1);ql(b.values_,Aa,b);c=new Proxy(b.values_,st);b.proxy_=c;a&&a.length&&(d=Ff(!0),b.spliceWithArray_(0,0,a),aa.allowStateChanges=d);return c}function Ab(a,b){"function"===typeof Array.prototype[a]&&(Pg[a]=b(a))}function ed(a){return function(){var b=this[Aa];b.atom_.reportObserved();b=b.dehanceValues_(b.values_);return b[a].apply(b,arguments)}}function xd(a){return function(b,c){var d=this,e=this[Aa];e.atom_.reportObserved();return e.dehanceValues_(e.values_)[a](function(f,
g){return b.call(c,f,g,d)})}}function Xl(a){return function(){var b=this,c=this[Aa];c.atom_.reportObserved();c=c.dehanceValues_(c.values_);var d=arguments[0];arguments[0]=function(e,f,g){return d(e,f,g,b)};return c[a].apply(c,arguments)}}function Jf(a){return Bg(a)&&tt(a[Aa])}function ut(a){if(xe(a)||wd(a))return a;if(Array.isArray(a))return new Map(a);if(td(a)){var b=new Map,c;for(c in a)b.set(c,a[c]);return b}return Oa(21,a)}function Lg(a,b){var c;if(dd(a,Aa))return a;var d=null!=(c=null==b?void 0:
b.name)?c:"ObservableObject";c=Yl;var e=new Map;d=String(d);var f;var g=b?null!=(f=b.defaultDecorator)?f:Cl(b):void 0;b=new c(a,e,d,g);Cg(a,Aa,b);return a}function Zl(a){return $l[a]||($l[a]={get:function(){return this[Aa].getObservablePropValue_(a)},set:function(b){return this[Aa].setObservablePropValue_(a,b)}})}function Ge(a){return Bg(a)?vt(a[Aa]):!1}function am(a){return{enumerable:!1,configurable:!0,get:function(){return this[Aa].get_(a)},set:function(b){this[Aa].set_(a,b)}}}function bm(a){if(a>
xi){for(var b=xi;b<a+100;b++)cd(yi.prototype,""+b,am(b));xi=a}}function wt(a,b,c){return new yi(a,b,c)}function vd(a,b){if("object"===typeof a&&null!==a){if(Jf(a))return void 0!==b&&Oa(23),a[Aa].atom_;if(Vd(a))return a[Aa];if(wd(a)){if(void 0===b)return a.keysAtom_;var c=a.data_.get(b)||a.hasMap_.get(b);c||Oa(25,b,zi(a));return c}if(Ge(a)){if(!b)return Oa(26);(c=a[Aa].values_.get(b))||Oa(27,b,zi(a));return c}if(vi(a)||Gf(a)||Ng(a))return a}else if(qc(a)&&Ng(a[Aa]))return a[Aa];Oa(28)}function cm(a,
b){a||Oa(29);if(void 0!==b)return cm(vd(a,b));if(vi(a)||Gf(a)||Ng(a)||wd(a)||Vd(a))return a;if(a[Aa])return a[Aa];Oa(24,a)}function zi(a,b){if(void 0!==b)a=vd(a,b);else{if(pi(a))return a.name;a=Ge(a)||wd(a)||Vd(a)?cm(a):vd(a)}return a.name_}function Ai(a,b,c){void 0===c&&(c=-1);return Bi(a,b,c)}function Bi(a,b,c,d,e){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return!1;if(a!==a)return b!==b;var f=typeof a;if("function"!==f&&"object"!==f&&"object"!=typeof b)return!1;f=dm.call(a);if(f!==dm.call(b))return!1;
switch(f){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(a)===Symbol.valueOf.call(b);case "[object Map]":case "[object Set]":0<=c&&c++}a=em(a);b=em(b);f="[object Array]"===f;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&
!(qc(g)&&g instanceof g&&qc(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}if(0===c)return!1;0>c&&(c=-1);d=d||[];e=e||[];for(g=d.length;g--;)if(d[g]===a)return e[g]===b;d.push(a);e.push(b);if(f){g=a.length;if(g!==b.length)return!1;for(;g--;)if(!Bi(a[g],b[g],c-1,d,e))return!1}else{f=Object.keys(a);g=f.length;if(Object.keys(b).length!==g)return!1;for(;g--;)if(h=f[g],!dd(b,h)||!Bi(a[h],b[h],c-1,d,e))return!1}d.pop();e.pop();return!0}function em(a){return Jf(a)?a.slice():xe(a)||wd(a)||
yf(a)||Vd(a)?Array.from(a.entries()):a}function Mf(a){a[Symbol.iterator]=xt;return a}function xt(){return this}function yt(a,b){const c=new Set(b),d=Object.values(a),e=new Set(d.filter(f=>c.has(f.toId)||c.has(f.fromId)));a=e.size;for(b=-1;0!==b;)e.forEach(f=>{f=f.fromId;for(const g of d)g.fromId===f&&e.add(g),g.toId===f&&e.add(g)}),b=e.size-a,a=e.size;return Array.from(e.values())}function Qg(a,b,c,d,e,f,g,h){if(e=b.getBindingPoint(e,f,g,h))return{id:d,type:"line",fromId:a.id,toId:b.id,handleId:c,
point:L.toFixed(e.point),distance:e.distance}}function zt(a,b){const c=a.getCenter(),d=b.getCenter();var e=lb();e=V(N({},Nf.defaultProps),{id:e,type:Nf.id,parentId:a.props.parentId,point:c});a=Qg(e,a,"start",lb(),c,c,L.uni(L.sub(d,c)),!1);b=Qg(e,b,"end",lb(),d,d,L.uni(L.sub(c,d)),!1);return a&&b?(e.handles.start.point=[0,0],e.handles.end.point=L.sub(d,c),e.handles.start.bindingId=a.id,e.handles.end.bindingId=b.id,[e,[a,b]]):null}function At(){return new Bt}function Ct(){return new WeakMap}function Ci(a){if(!a)return Di(null);
var b=a.constructor;if(b===Object)return a===Object.prototype?{}:Di(a);if(~Dt.call(b).indexOf("[native code]"))try{return new b}catch(c){}return Di(a)}function Et(a){var b="";a.global&&(b+="g");a.ignoreCase&&(b+="i");a.multiline&&(b+="m");a.unicode&&(b+="u");a.sticky&&(b+="y");return b}function Ft(a){return a.flags}function fm(a){a=Gt.call(a);return a.substring(8,a.length-1)}function Ht(a){return a[Symbol.toStringTag]||fm(a)}function It(a){return gm(a).concat(Ei(a))}function Rg(a,b,c){for(var d=Jt(a),
e=0,f=d.length,g,h;e<f;++e)if(g=d[e],"callee"!==g&&"caller"!==g)if(h=Kt(a,g)){h.get||h.set||(h.value=c.copier(h.value,c));try{Lt(b,g,h)}catch(k){b[g]=h.value}}else b[g]=c.copier(a[g],c);return b}function hm(a,b){var c=new b.Constructor;b.cache.set(a,c);a.forEach(function(d,e){c.set(e,b.copier(d,b))});return c}function Mt(a,b){var c=Ci(b.prototype);b.cache.set(a,c);for(var d in a)im.call(a,d)&&(c[d]=b.copier(a[d],b));return c}function Nt(a,b){var c=Ci(b.prototype);b.cache.set(a,c);for(var d in a)im.call(a,
d)&&(c[d]=b.copier(a[d],b));d=Ei(a);for(var e=0,f=d.length,g;e<f;++e)g=d[e],Ot.call(a,g)&&(c[g]=b.copier(a[g],b));return c}function Fi(a,b){return new b.Constructor(a.valueOf())}function Sg(a,b){return a}function jm(a,b){var c=new b.Constructor;b.cache.set(a,c);a.forEach(function(d){c.add(b.copier(d,b))});return c}function km(a){function b(f,g){g.prototype=g.Constructor=void 0;if(!f||"object"!==typeof f)return f;if(g.cache.has(f))return g.cache.get(f);g.prototype=f.__proto__||Pt(f);g.Constructor=
g.prototype&&g.prototype.constructor;if(!g.Constructor||g.Constructor===Object)return e(f,g);if(Qt(f))return d(f,g);var h=c[Rt(f)];return h?h(f,g):"function"===typeof f.then?f:e(f,g)}a=Gi({},lm,a);var c={Arguments:a.object,Array:a.array,ArrayBuffer:a.arrayBuffer,Blob:a.blob,Boolean:Fi,DataView:a.dataView,Date:a.date,Error:a.error,Float32Array:a.arrayBuffer,Float64Array:a.arrayBuffer,Int8Array:a.arrayBuffer,Int16Array:a.arrayBuffer,Int32Array:a.arrayBuffer,Map:a.map,Number:Fi,Object:a.object,Promise:Sg,
RegExp:a.regExp,Set:a.set,String:Fi,WeakMap:Sg,WeakSet:Sg,Uint8Array:a.arrayBuffer,Uint8ClampedArray:a.arrayBuffer,Uint16Array:a.arrayBuffer,Uint32Array:a.arrayBuffer,Uint64Array:a.arrayBuffer},d=c.Array,e=c.Object;return function(f){return b(f,{Constructor:void 0,cache:St(),copier:b,prototype:void 0})}}function Of(a,b){return(0,Tt.default)(a,b,{arrayMerge:(c,d,e)=>d})}function Ut(a,b,c,d=!1){const [e,f]=b,[g,h]=c;a=g+(a-e)/(f-e)*(h-g);return d?g<h?Math.max(Math.min(a,h),g):Math.max(Math.min(a,g),
h):a}function Vt(a,b){return new Promise((c,d)=>{if("video"===b){const e=document.createElement("video");e.addEventListener("loadedmetadata",function(){c([this.videoWidth,this.videoHeight])},!1);e.src=a}else if("image"===b){const e=new Image;e.onload=()=>c([e.width,e.height]);e.src=a;e.onerror=f=>d(f)}else"pdf"===b&&c([595,842])})}function Xd(a){return Object.values(Hi).includes(a)}function Ya(a,b){return Xd(a)||null==a?`var(--ls-wb-${b}-color-${a?a:"default"})`:a}function Wt(){var a;null==(a=document.getElementById("__textLabelMeasure"))?
void 0:a.remove();a=document.createElement("pre");a.id="__textLabelMeasure";Object.assign(a.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});a.tabIndex=-1;document.body.appendChild(a);return a}function Yd(a,b,c=0){var d,e,f;if(!a)return[16,
32];let g;g="string"===typeof b?b:`${null!=(d=b.fontStyle)?d:"normal"} ${null!=(e=b.fontVariant)?e:"normal"} ${null!=(f=b.fontWeight)?f:"normal"} ${b.fontSize}px/${b.fontSize*b.lineHeight}px ${b.fontFamily}`;if(!Ii.has(`${a}-${g}-${c}`)){if(!yd)return[10,10];yd.parentNode||document.body.appendChild(yd);yd.innerHTML=`${a}&#8203;`;yd.style.font=g;yd.style.padding=c+"px";b=yd.getBoundingClientRect();Ii.set(`${a}-${g}-${c}`,[Math.ceil(b.width||1),Math.ceil(b.height||1)])}return Ii.get(`${a}-${g}-${c}`)}
function Zd(a){try{if("string"!==typeof a||!Xt.test(a))throw TypeError("Invalid UUID");let b;const c=new Uint8Array(16);c[0]=(b=parseInt(a.slice(0,8),16))>>>24;c[1]=b>>>16&255;c[2]=b>>>8&255;c[3]=b&255;c[4]=(b=parseInt(a.slice(9,13),16))>>>8;c[5]=b&255;c[6]=(b=parseInt(a.slice(14,18),16))>>>8;c[7]=b&255;c[8]=(b=parseInt(a.slice(19,23),16))>>>8;c[9]=b&255;c[10]=(b=parseInt(a.slice(24,36),16))/1099511627776&255;c[11]=b/4294967296&255;c[12]=b>>>24&255;c[13]=b>>>16&255;c[14]=b>>>8&255;c[15]=b&255;return!0}catch(b){return!1}}
function Tg(a,b=0,c){let d;return function(...e){null==c?void 0:c(...e);clearTimeout(d);d=setTimeout(()=>a.apply(e),b)}}function Ji(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function Ki(){var a,b,c;return(null==(c=null==(b=null==(a=null==window?void 0:window.logseq)?void 0:a.api)?void 0:b.get_state_from_store)?void 0:c.call(b,"ui/developer-mode?"))||!1}function Ub(a){return!!a}function mm(a=0){return new Promise(b=>setTimeout(b,a))}function nm(a="noid"){Li[a]||(Li[a]=om.createContext({}));
return Li[a]}function Jb(a="noid"){return om.useContext(nm(a))}function Pf(a){const {callbacks:b}=Jb(),c=pm.useRef(-1);return pm.useMemo(()=>{const d=e=>{var f,g;const {order:h=0}=e;if(!h){var k=e.target;k.removeEventListener("pointerup",d);k.releasePointerCapture(e.pointerId);null==(f=b.onPointerUp)?void 0:f.call(b,{type:"selection",handle:a,order:h},e);f=Date.now();k=f-c.current;300<k?c.current=f:300>=k&&(null==(g=b.onDoubleClick)?void 0:g.call(b,{type:"selection",handle:a,order:h},e),c.current=
-1);e.order=h+1}};return{onPointerDown:e=>{var f;const {order:g=0}=e;if(!g){var h=qm(e.currentTarget);h.setPointerCapture(e.pointerId);h.addEventListener("pointerup",d);null==(f=b.onPointerDown)?void 0:f.call(b,{type:"selection",handle:a,order:g},e);e.order=g+1}},onPointerMove:e=>{var f;const {order:g=0}=e;g||(null==(f=b.onPointerMove)?void 0:f.call(b,{type:"selection",handle:a,order:g},e),e.order=g+1)},onPointerEnter:e=>{var f;const {order:g=0}=e;g||(null==(f=b.onPointerEnter)?void 0:f.call(b,{type:"selection",
handle:a,order:g},e),e.order=g+1)},onPointerLeave:e=>{var f;const {order:g=0}=e;g||(null==(f=b.onPointerLeave)?void 0:f.call(b,{type:"selection",handle:a,order:g},e),e.order=g+1)},onKeyDown:e=>{var f;null==(f=b.onKeyDown)?void 0:f.call(b,{type:"selection",handle:a,order:-1},e)},onKeyUp:e=>{var f;null==(f=b.onKeyUp)?void 0:f.call(b,{type:"selection",handle:a,order:-1},e)}}},[b])}function qm(a){var b;if(null==(b=a.namespaceURI)?0:b.endsWith("svg")){if(a.parentElement)return qm(a.parentElement);throw Error("Could not find a parent element of an HTML type!");
}return a}function Yt(a,b,c){const d=Qf.useRef(!1),e=Qf.useCallback(()=>{var f;if(d.current){const g=null==(f=a.current)?void 0:f.getBoundingClientRect();g&&(f={minX:g.left,maxX:g.left+g.width,minY:g.top,maxY:g.top+g.height,width:g.width,height:g.height},b.updateBounds(f),null==c?void 0:c(f))}else d.current=!0},[a,c]);Qf.useEffect(()=>{const f=a.current?Zt(a.current):document,g=Tg(e,100);f.addEventListener("scroll",g);window.addEventListener("resize",g);return()=>{f.removeEventListener("scroll",g);
window.removeEventListener("resize",g)}},[]);Qf.useLayoutEffect(()=>{const f=new ResizeObserver(g=>{g[0].contentRect&&e()});a.current&&f.observe(a.current);return()=>{f.disconnect()}},[a]);Qf.useEffect(()=>{e();setTimeout(()=>{var f,g;null==(g=null==(f=a.current)?void 0:f.querySelector(".tl-canvas"))?void 0:g.focus()})},[a])}function $t(a,b){return Object.keys(b).reduce((c,d)=>{const e=b[d];return e?c+`${`--${a}-${d}`}: ${e};
`:c},"")}function au(a,b,c=".logseq-tldraw"){Mi.useLayoutEffect(()=>{const d=document.createElement("style"),e=$t(a,b);d.setAttribute("id",`${a}-theme`);d.setAttribute("data-selector",c);d.innerHTML=`
        ${c} {
          ${e}
        }
      `;document.head.appendChild(d);return()=>{d&&document.head.contains(d)&&document.head.removeChild(d)}},[a,b,c])}function bu(a,b){Mi.useLayoutEffect(()=>{if(Ni.get(a))return()=>{};const c=document.createElement("style");c.innerHTML=b;c.setAttribute("id",a);document.head.appendChild(c);Ni.set(a,c);return()=>{c&&document.head.contains(c)&&(document.head.removeChild(c),Ni.delete(a))}},[a,b])}function cu(a,b){const c=Mi.useMemo(()=>N(N({},du),a),[a]);au("tl",c,b);bu("tl-canvas",eu)}function rm(a=
"noid"){Oi[a]||(Oi[a]=sm.createContext({}));return Oi[a]}function xa(a="noid"){return sm.useContext(rm(a))}function fu(){const a=xa(),{callbacks:b}=Jb(),c=tm.useRef(-1);return tm.useMemo(()=>({onPointerDown:d=>{var e,f,g;if(!a.settings.penMode||"pen"===d.pointerType&&d.isPrimary){var {order:h=0}=d;h||(null==(e=d.currentTarget)?void 0:e.setPointerCapture(d.pointerId));d.isPrimary&&(null==(f=b.onPointerDown)?void 0:f.call(b,{type:"canvas",order:h},d),e=Date.now(),f=e-c.current,300<f?c.current=e:300>=
f&&(null==(g=b.onDoubleClick)?void 0:g.call(b,{type:"canvas",order:h},d),c.current=-1))}},onPointerMove:d=>{var e;if(!a.settings.penMode||"pen"===d.pointerType&&d.isPrimary){var {order:f=0}=d;null==(e=b.onPointerMove)?void 0:e.call(b,{type:"canvas",order:f},d)}},onPointerUp:d=>{var e,f;if(!a.settings.penMode||"pen"===d.pointerType&&d.isPrimary){var {order:g=0}=d;g||(null==(e=d.currentTarget)?void 0:e.releasePointerCapture(d.pointerId));null==(f=b.onPointerUp)?void 0:f.call(b,{type:"canvas",order:g},
d)}},onPointerEnter:d=>{var e;if(!a.settings.penMode||"pen"===d.pointerType&&d.isPrimary){var {order:f=0}=d;null==(e=b.onPointerEnter)?void 0:e.call(b,{type:"canvas",order:f},d)}},onPointerLeave:d=>{var e;if(!a.settings.penMode||"pen"===d.pointerType&&d.isPrimary){var {order:f=0}=d;null==(e=b.onPointerLeave)?void 0:e.call(b,{type:"canvas",order:f},d)}},onDrop:d=>Ga(this,null,function*(){d.preventDefault();"clientX"in d&&a.drop(d.dataTransfer,[d.clientX,d.clientY])}),onDragOver:d=>{d.preventDefault()},
onTouchEnd:d=>{let e=a.selectedTool.id;"pencil"!==e&&"highlighter"!==e||d.preventDefault()}}),[b])}function um(a,b,c){return 0===b||Infinity===Math.abs(b)?Math.pow(a,5*c):a*b*c/(b+c*a)}function vm(a,b,c,d=.15){return 0===d?Math.max(b,Math.min(a,c)):a<b?-um(b-a,c-b,d)+b:a>c?+um(a-c,c-b,d)+c:a}function gu(a,[b,c],[d,e]){const [[f,g],[h,k]]=a;return[vm(b,f,g,d),vm(c,h,k,e)]}function vb(a,b,c){b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c;return a}function wm(a,
b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}));c.push.apply(c,d)}return c}function ib(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?wm(Object(c),!0).forEach(function(d){vb(a,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):wm(Object(c)).forEach(function(d){Object.defineProperty(a,
d,Object.getOwnPropertyDescriptor(c,d))})}return a}function xm(a){return a?a[0].toUpperCase()+a.slice(1):""}function hu(a=!1,b){return a&&!iu.includes(b)}function ju(a,b="",c=!1){const d=ym[a];b=d?d[b]||b:b;return"on"+xm(a)+xm(b)+(hu(c,b)?"Capture":"")}function ku(a){a=a.substring(2).toLowerCase();const b=!!~a.indexOf("passive");b&&(a=a.replace("passive",""));var c=lu.includes(a)?"capturecapture":"capture";(c=!!~a.indexOf(c))&&(a=a.replace("capture",""));return{device:a,capture:c,passive:b}}function mu(a,
b=""){const c=ym[a];return a+(c?c[b]||b:b)}function zm(a){return"touches"in a?"touch":"pointerType"in a?a.pointerType:"mouse"}function nu(a){return Array.from(a.touches).filter(b=>{var c,d;return b.target===a.currentTarget||(null===(c=a.currentTarget)||void 0===c?void 0:null===(d=c.contains)||void 0===d?void 0:d.call(c,b.target))})}function Am(a){return"touches"in a?("touchend"===a.type||"touchcancel"===a.type?a.changedTouches:a.targetTouches)[0]:a}function Pi(a,b){const c=b.clientX-a.clientX,d=b.clientY-
a.clientY;return{angle:-(180*Math.atan2(c,d))/Math.PI,distance:Math.hypot(c,d),origin:[(b.clientX+a.clientX)/2,(b.clientY+a.clientY)/2]}}function ou(a){return nu(a).map(b=>b.identifier)}function Bm(a,b){const [c,d]=Array.from(a.touches).filter(e=>b.includes(e.identifier));return Pi(c,d)}function Qi(a){const b=Am(a);return"touches"in a?b.identifier:b.pointerId}function Je(a){a=Am(a);return[a.clientX,a.clientY]}function Cm(a){let {deltaX:b,deltaY:c,deltaMode:d}=a;1===d?(b*=40,c*=40):2===d&&(b*=800,
c*=800);return[b,c]}function Ug(a,...b){return"function"===typeof a?a(...b):a}function pu(){}function qu(...a){return 0===a.length?pu:1===a.length?a[0]:function(){let b;for(const c of a)b=c.apply(this,arguments)||b;return b}}function ru([a,b],c){a=Math.abs(a);b=Math.abs(b);if(a>b&&a>c)return"x";if(b>a&&b>c)return"y"}function Dm(a){const [b,c]=a.overflow,[d,e]=a._delta,[f,g]=a._direction;if(0>b&&0<d&&0>f||0<b&&0>d&&0<f)a._movement[0]=a._movementBound[0];if(0>c&&0<e&&0>g||0<c&&0>e&&0<g)a._movement[1]=
a._movementBound[1]}function su(a){Ri.set(a.key,a.engine);Si.set(a.key,a.resolver)}function Vg(a={},b){const c={};for(const [d,e]of Object.entries(b))switch(typeof e){case "function":c[d]=e.call(c,a[d],d,a);break;case "object":c[d]=Vg(a[d],e);break;case "boolean":e&&(c[d]=a[d])}return c}function tu(a,b,c={}){const {target:d,eventOptions:e,window:f,enabled:g,transform:h}=a;var k=uu;if(null==a)a={};else{if(null==a)var l={};else{l={};var m=Object.keys(a),p;for(p=0;p<m.length;p++){var q=m[p];0<=k.indexOf(q)||
(l[q]=a[q])}}if(Object.getOwnPropertySymbols)for(p=Object.getOwnPropertySymbols(a),q=0;q<p.length;q++)m=p[q],0<=k.indexOf(m)||Object.prototype.propertyIsEnumerable.call(a,m)&&(l[m]=a[m]);a=l}c.shared=Vg({target:d,eventOptions:e,window:f,enabled:g,transform:h},vu);if(b){var t=Si.get(b);c[b]=Vg(ib({shared:c.shared},a),t)}else for(t in a)(b=Si.get(t))&&(c[t]=Vg(ib({shared:c.shared},a[t]),b));return c}function Ke(a,b){a.gestures.add(b);a.gestureEventStores[b]=new Em(a,b);a.gestureTimeoutStores[b]=new wu}
function Le(a,b,c,d,e,f){if(a.has(c)&&Ri.has(d)){var g=c+"Start",h=c+"End";e[d]=k=>{let l=void 0;if(k.first&&g in b)b[g](k);c in b&&(l=b[c](k));if(k.last&&h in b)b[h](k);return l};f[d]=f[d]||{}}}function xu(a,b={},c,d){const e=Ti.default.useMemo(()=>new yu(a),[]);e.applyHandlers(a,d);e.applyConfig(b,c);Ti.default.useEffect(e.effect.bind(e));Ti.default.useEffect(()=>e.clean.bind(e),[]);if(void 0===b.target)return e.bind.bind(e)}function zu(a){a.forEach(su);return function(b,c){c=c||{};const d={},e=
{},f=new Set;for(let q in b)Au.test(q)?(f.add(RegExp.lastMatch),e[q]=b[q]):d[q]=b[q];const [g,h,k]=[e,d,f];b={};Le(k,g,"onDrag","drag",b,c);Le(k,g,"onWheel","wheel",b,c);Le(k,g,"onScroll","scroll",b,c);Le(k,g,"onPinch","pinch",b,c);Le(k,g,"onMove","move",b,c);Le(k,g,"onHover","hover",b,c);const {handlers:l,nativeHandlers:m,config:p}={handlers:b,config:c,nativeHandlers:h};return xu(l,p,void 0,m)}}function Bu(a,b){return zu([Cu,Du,Eu,Fu,Gu,Hu])(a,b||{})}function Iu(a){const {viewport:b,inputs:c,callbacks:d}=
Jb(),e=Wg.useRef(void 0),f=Wg.useRef([0,0]),g=Wg.useRef(0),h=Wg.useMemo(()=>({onWheel:k=>{var l;({event:k}=k);k.preventDefault();const {deltaY:m,deltaX:p}=k;var q=0;if(k.ctrlKey||k.metaKey){q=Math.sign(k.deltaY);let y=m;10<Math.abs(k.deltaY)&&(y=10*q);q=y}const [t,r,v]=[p,m,q];"pinching"===c.state||g.current>=k.timeStamp||(g.current=k.timeStamp,(k.altKey||k.ctrlKey||k.metaKey)&&0===k.buttons?(q=b.bounds,k=null!=(l=c.currentScreenPoint)?l:[q.width/2,q.height/2],l=b.camera.zoom,b.onZoom(k,l-v/100*l)):
(l=L.mul(k.shiftKey&&!Ji()?[r,0]:[t,r],.8),L.isEqual(l,[0,0])||b.panCamera(l)))},onPinchStart:({event:k,delta:l,offset:m,origin:p})=>{var q;const t=a.current;k instanceof WheelEvent||!(k.target===t||null!=t&&t.contains(k.target))||(null==(q=d.onPinchStart)?void 0:q.call(d,{type:"canvas",order:0,delta:[...l,m[0]],offset:m,point:L.sub(p,c.containerOffset)},k),e.current=p,f.current=[0,0])},onPinchEnd:({event:k,offset:l,origin:m})=>{var p;const q=a.current;k instanceof WheelEvent||!(k.target===q||null!=
q&&q.contains(k.target))||"pinching"!==c.state||(null==(p=d.onPinchEnd)?void 0:p.call(d,{type:"canvas",order:0,delta:[0,0,l[0]],offset:l,point:L.sub(m,c.containerOffset)},k),f.current=[0,0])},onPinch:({event:k,offset:l,origin:m})=>{var p,q=a.current;if(!(k instanceof WheelEvent)&&(k.target===q||null!=q&&q.contains(k.target))){e.current||(e.current=m);q=L.sub(e.current,m);var t=L.sub(q,f.current);null==(p=d.onPinch)?void 0:p.call(d,{type:"canvas",order:0,delta:[...t,l[0]],offset:l,point:L.sub(m,c.containerOffset)},
k);f.current=q}}}),[d]);Bu(h,{target:a,eventOptions:{passive:!1},pinch:{from:[b.camera.zoom,b.camera.zoom],scaleBounds:()=>({from:b.camera.zoom,max:tc.maxZoom,min:tc.minZoom})}})}function Fm(a,b,c,d){Ui.useLayoutEffect(()=>{a.current.style.transform=`translate(
        calc(${b.minX}px - var(--tl-padding)),
        calc(${b.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[b.minX,b.minY,c,b.rotation]);Ui.useLayoutEffect(()=>{const e=a.current;e.style.width=`calc(${Math.floor(b.width)}px + (var(--tl-padding) * 2))`;e.style.height=`calc(${Math.floor(b.height)}px + (var(--tl-padding) * 2))`},[b.width,b.height]);Ui.useLayoutEffect(()=>{const e=a.current;void 0!==d&&(e.style.zIndex=d.toString())},[d])}function Ju(a,b){const {onPersist:c,onError:d,onMount:e,onCreateAssets:f,onCreateShapes:g,onDeleteAssets:h,onDeleteShapes:k,onDrop:l,onPaste:m,
onCopy:p,onCanvasDBClick:q}=b;Gm.useLayoutEffect(()=>{const t=[];if(a)return window.tlapps=window.tlapps||{},window.tlapps[a.uuid]=a,e&&e(a,null),()=>{t.forEach(r=>r());window.tlapps&&delete window.tlapps[a.uuid]}},[a]);Gm.useLayoutEffect(()=>{const t=[];c&&t.push(a.subscribe("persist",c));d&&t.push(a.subscribe("error",d));g&&t.push(a.subscribe("create-shapes",g));f&&t.push(a.subscribe("create-assets",f));k&&t.push(a.subscribe("delete-shapes",k));h&&t.push(a.subscribe("delete-assets",h));l&&t.push(a.subscribe("drop",
l));m&&t.push(a.subscribe("paste",m));p&&t.push(a.subscribe("copy",p));q&&t.push(a.subscribe("canvas-dbclick",q));return()=>t.forEach(r=>r())},[a,c,d])}function Ku(a){if("app"in a)return a.app;const [b]=Hm.useState(()=>new Lu(a.model,a.Shapes,a.Tools,a.readOnly));Hm.useLayoutEffect(()=>()=>{b.dispose()},[b]);return b}function Mu(a,b){Nu.useEffect(()=>{"model"in b&&b.model&&a.loadDocumentModel(b.model)},[b.model])}function Ou(a){const b=Jb(),{viewport:{bounds:c}}=b;Pu.useEffect(()=>{const d=g=>{g.preventDefault()},
e=g=>{if(0!==g.touches.length){var h=g.touches[0].pageX,k=g.touches[0].radiusX||0;(10>h-k||h+k>c.width-10)&&g.preventDefault()}},f=a.current;if(!f)return()=>{};f.addEventListener("touchstart",d,{passive:!0});f.addEventListener("gestureend",d,{passive:!0});f.addEventListener("gesturechange",d,{passive:!0});f.addEventListener("gesturestart",d,{passive:!0});f.addEventListener("touchstart",e,{passive:!0});return()=>{f&&(f.removeEventListener("touchstart",d),f.removeEventListener("gestureend",d),f.removeEventListener("gesturechange",
d),f.removeEventListener("gesturestart",d),f.removeEventListener("touchstart",e))}},[a,c.width])}function Qu(a,b){const {inputs:c,callbacks:d}=Jb();return Ru.useMemo(()=>({onPointerDown:e=>{var f,g;const {order:h=0}=e;h||(null==(f=e.currentTarget)?void 0:f.setPointerCapture(e.pointerId));f=a.props.handles[b];null==(g=d.onPointerDown)?void 0:g.call(d,{type:"handle",shape:a,handle:f,id:b,order:h},e);e.order=h+1},onPointerMove:e=>{var f;const {order:g=0}=e,h=a.props.handles[b];null==(f=d.onPointerMove)?
void 0:f.call(d,{type:"handle",shape:a,handle:h,id:b,order:g},e);e.order=g+1},onPointerUp:e=>{var f,g;const {order:h=0}=e;h||(null==(f=e.currentTarget)?void 0:f.releasePointerCapture(e.pointerId));f=a.props.handles[b];null==(g=d.onPointerUp)?void 0:g.call(d,{type:"handle",shape:a,handle:f,id:b,order:h},e);e.order=h+1},onPointerEnter:e=>{var f;const {order:g=0}=e,h=a.props.handles[b];null==(f=d.onPointerEnter)?void 0:f.call(d,{type:"handle",shape:a,handle:h,id:b,order:g},e);e.order=g+1},onPointerLeave:e=>
{var f;const {order:g=0}=e,h=a.props.handles[b];null==(f=d.onPointerLeave)?void 0:f.call(d,{type:"handle",shape:a,handle:h,id:b,order:g},e);e.order=g+1},onKeyUp:e=>{var f;const g=a.props.handles[b];null==(f=d.onKeyUp)?void 0:f.call(d,{type:"handle",shape:a,handle:g,id:b,order:-1},e)},onKeyDown:e=>{var f;const g=a.props.handles[b];null==(f=d.onKeyDown)?void 0:f.call(d,{type:"handle",shape:a,handle:g,id:b,order:-1},e)}}),[a.id,c,d])}function ac(a,b,c=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${b})${c?
" scale(-1,-1) translate(0, -32)":""}'>`+a.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Su(a,b,c=0){Tu.useEffect(()=>{const d=a.current;d&&(d.style.cursor=Uu[b](Ob.radiansToDegrees(c)))},[b,c])}function Vu(a){const {viewport:b}=Jb(),c=xa();Wu.useLayoutEffect(()=>If(()=>{const d=Tg(()=>{var e;null==(e=a.current)?void 0:e.style.setProperty("--tl-zoom",b.camera.zoom.toString())},200);"pinching"!==c.inputs.state&&null!=b.camera.zoom&&d()}),[])}function Xu(a,b=0){const [c,d]=
(0,Im.useState)(a);(0,Im.useEffect)(()=>{let e=!1;const f=setTimeout(()=>{e||d(a)},b);return()=>{e=!0;clearTimeout(f)}},[a,b]);return c}function Yu(){const a=xa();Jm.useEffect(()=>{it(()=>N({},a.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+a.currentPageId,JSON.stringify(a.viewport.camera))})},[a.viewport.camera]);Jm.useEffect(()=>{var b;const c=JSON.parse(null!=(b=window.sessionStorage.getItem("logseq.tldraw.camera:"+a.currentPageId))?b:"null");c?a.viewport.update(c):
a.selectedIds.size?a.api.zoomToSelection():a.api.zoomToFit()},[a])}function Zu(a){a()}function $u(a){return Vl(vd(a,void 0))}function Km(a){return{reaction:a,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+av}}function bv(a){var b=new Map,c=1,d=new a(function(e){var f=b.get(e);f&&(f.reaction.dispose(),b.delete(e))});return{addReactionToTrack:function(e,f,g){var h=c++;d.register(g,h,e);e.current=Km(f);e.current.finalizationRegistryCleanupToken=h;b.set(h,e.current);return e.current},recordReactionAsCommitted:function(e){d.unregister(e);
e.current&&e.current.finalizationRegistryCleanupToken&&b.delete(e.current.finalizationRegistryCleanupToken)},forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function cv(){function a(){void 0===d&&(d=setTimeout(b,1E4))}function b(){d=void 0;var e=Date.now();c.forEach(function(f){var g=f.current;g&&e>=g.cleanAt&&(g.reaction.dispose(),f.current=null,c.delete(f))});0<c.size&&a()}var c=new Set,d;return{addReactionToTrack:function(e,f,g){e.current=Km(f);c.add(e);
a();return e.current},recordReactionAsCommitted:function(e){c.delete(e)},forceCleanupTimerToRunNowForTests:function(){d&&(clearTimeout(d),b())},resetCleanupScheduleForTests:function(){var e;if(0<c.size){try{for(var f=dv(c),g=f.next();!g.done;g=f.next()){var h=g.value,k=h.current;k&&(k.reaction.dispose(),h.current=null)}}catch(m){var l={error:m}}finally{try{g&&!g.done&&(e=f.return)&&e.call(f)}finally{if(l)throw l.error;}}c.clear()}d&&(clearTimeout(d),d=void 0)}}}function ev(){return new fv}function Lm(a,
b){void 0===b&&(b="observed");var c=Mm(Rf.default.useState(ev),1)[0],d=Mm(Rf.default.useState(),2)[1],e=Rf.default.useRef(null);if(!e.current)var f=new Ee("observer".concat(b),function(){g.mounted?d([]):g.changedBeforeMount=!0}),g=gv(e,f,c);c=e.current.reaction;Rf.default.useDebugValue(c,$u);Rf.default.useEffect(function(){hv(e);e.current?(e.current.mounted=!0,e.current.changedBeforeMount&&(e.current.changedBeforeMount=!1,d([]))):(e.current={reaction:new Ee("observer".concat(b),function(){d([])}),
mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},d([]));return function(){e.current.reaction.dispose();e.current=null}},[]);var h,k;c.track(function(){try{h=a()}catch(l){k=l}});if(k)throw k;return h}function da(a,b){var c;if(Nm&&a.$$typeof===Nm)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");b=null!==(c=null===b||void 0===b?void 0:b.forwardRef)&&void 0!==
c?c:!1;var d=a,e=a.displayName||a.name;if(Om&&a.$$typeof===Om&&(b=!0,d=a.render,"function"!==typeof d))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");c=function(f,g){return Lm(function(){return d(f,g)},e)};""!==e&&(c.displayName=e);a.contextTypes&&(c.contextTypes=a.contextTypes);b&&(c=(0,Me.forwardRef)(c));c=(0,Me.memo)(c);iv(a,c);return c}function iv(a,b){Object.keys(a).forEach(function(c){jv[c]||Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))})}
function Vi(a){var b=a.render;a=a.children||b;return"function"!==typeof a?null:Lm(a)}function kv(a){const b=xa(),{callbacks:c}=Jb(),d=Pm.useRef(!1);Pm.useEffect(()=>{const e=k=>{var l,m;if(null==(l=a.current)?0:l.contains(document.activeElement))null==(m=c.onKeyDown)?void 0:m.call(c,{type:"canvas",order:-1},k),d.current=k.shiftKey},f=k=>{var l,m;if(null==(l=a.current)?0:l.contains(document.activeElement))null==(m=c.onKeyUp)?void 0:m.call(c,{type:"canvas",order:-1},k),d.current=k.shiftKey},g=k=>{var l,
m,p;!b.editingShape&&(null==(l=a.current)?0:l.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(p=null==(m=document.activeElement)?void 0:m.tagName)?p:"")&&(k.preventDefault(),b.paste(k,d.current))},h=k=>{var l,m,p;!b.editingShape&&0<b.selectedShapes.size&&(null==(l=a.current)?0:l.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(p=null==(m=document.activeElement)?void 0:m.tagName)?p:"")&&(k.preventDefault(),b.copy())};window.addEventListener("keydown",
e);window.addEventListener("keyup",f);document.addEventListener("paste",g);document.addEventListener("copy",h);return()=>{window.removeEventListener("keydown",e);window.removeEventListener("keyup",f);document.removeEventListener("paste",g);document.removeEventListener("copy",h)}},[])}function Qm(a){const b=xa(),{inputs:c,callbacks:d}=Jb(),e=Rm.useRef(-1);return Rm.useMemo(()=>({onPointerDown:f=>{var g,h;if(!b.settings.penMode||"pen"===f.pointerType&&f.isPrimary){var {order:k=0}=f;k||(null==(g=f.currentTarget)?
void 0:g.setPointerCapture(f.pointerId));null==(h=d.onPointerDown)?void 0:h.call(d,{type:"shape",shape:a,order:k},f);f.order=k+1}},onPointerMove:f=>{var g;if(!b.settings.penMode||"pen"===f.pointerType&&f.isPrimary){var {order:h=0}=f;null==(g=d.onPointerMove)?void 0:g.call(d,{type:"shape",shape:a,order:h},f);f.order=h+1}},onPointerUp:f=>{var g,h,k;if(!b.settings.penMode||"pen"===f.pointerType&&f.isPrimary){var {order:l=0}=f;l||(null==(g=f.currentTarget)?void 0:g.releasePointerCapture(f.pointerId));
null==(h=d.onPointerUp)?void 0:h.call(d,{type:"shape",shape:a,order:l},f);g=Date.now();h=g-e.current;300<h?e.current=g:300>=h&&(null==(k=d.onDoubleClick)?void 0:k.call(d,{type:"shape",shape:a,order:l},f),e.current=-1);f.order=l+1}},onPointerEnter:f=>{var g;if(!b.settings.penMode||"pen"===f.pointerType&&f.isPrimary){var {order:h=0}=f;null==(g=d.onPointerEnter)?void 0:g.call(d,{type:"shape",shape:a,order:h},f);f.order=h+1}},onPointerLeave:f=>{var g;if(!b.settings.penMode||"pen"===f.pointerType&&f.isPrimary){var {order:h=
0}=f;null==(g=d.onPointerLeave)?void 0:g.call(d,{type:"shape",shape:a,order:h},f);f.order=h+1}},onKeyUp:f=>{var g;null==(g=d.onKeyUp)?void 0:g.call(d,{type:"shape",shape:a,order:-1},f)},onKeyDown:f=>{var g;null==(g=d.onKeyDown)?void 0:g.call(d,{type:"shape",shape:a,order:-1},f)}}),[a.id,c,d])}function lv(a){var {viewport:b,inputs:c,callbacks:d,components:e}=a;a=fa(a,["viewport","inputs","callbacks","components"]);return(0,Sm.jsx)(mv,{id:a.id,viewport:b,inputs:c,callbacks:d,components:e,meta:a.meta,
children:(0,Sm.jsx)(nv,N({},a))})}function ca(){ca=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};return ca.apply(this,arguments)}function qa(a,b,{checkForDefaultPrevented:c=!0}={}){return function(d){null===a||void 0===a||a(d);if(!1===c||!d.defaultPrevented)return null===b||void 0===b?void 0:b(d)}}function Wi(...a){return b=>a.forEach(c=>{"function"===typeof c?c(b):
null!==c&&void 0!==c&&(c.current=b)})}function Ia(...a){return(0,ov.useCallback)(Wi(...a),a)}function uc(a,b=[]){let c=[];const d=()=>{const e=c.map(f=>(0,$d.createContext)(f));return function(f){const g=(null===f||void 0===f?void 0:f[a])||e;return(0,$d.useMemo)(()=>({[`__scope${a}`]:V(N({},f),{[a]:g})}),[f,g])}};d.scopeName=a;return[function(e,f){function g(l){const {scope:m,children:p}=l,q=fa(l,["scope","children"]);l=(null===m||void 0===m?void 0:m[a][k])||h;const t=(0,$d.useMemo)(()=>q,Object.values(q));
return(0,$d.createElement)(l.Provider,{value:t},p)}const h=(0,$d.createContext)(f),k=c.length;c=[...c,f];g.displayName=e+"Provider";return[g,function(l,m){if(m=(0,$d.useContext)((null===m||void 0===m?void 0:m[a][k])||h))return m;if(void 0!==f)return f;throw Error(`\`${l}\` must be used within \`${e}\``);}]},pv(d,...b)]}function pv(...a){const b=a[0];if(1===a.length)return b;const c=()=>{const d=a.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const f=d.reduce((g,{useScope:h,scopeName:k})=>
{h=h(e)[`__scope${k}`];return N(N({},g),h)},{});return(0,$d.useMemo)(()=>({[`__scope${b.scopeName}`]:f}),[f])}};c.scopeName=b.scopeName;return c}function qv(a){return(0,Pb.isValidElement)(a)&&a.type===Tm}function rv(a,b){const c=N({},b);for(const d in b){const e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...g)=>{f(...g);e(...g)}:e&&(c[d]=e):"style"===d?c[d]=N(N({},e),f):"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return N(N({},a),c)}function Um(a,b){a&&(0,sv.flushSync)(()=>a.dispatchEvent(b))}
function Vb(a){const b=(0,Xi.useRef)(a);(0,Xi.useEffect)(()=>{b.current=a});return(0,Xi.useMemo)(()=>(...c)=>{var d;return null===(d=b.current)||void 0===d?void 0:d.call(b,...c)},[])}function Vm(a,b=null===globalThis||void 0===globalThis?void 0:globalThis.document){const c=Vb(a);(0,tv.useEffect)(()=>{const d=e=>{"Escape"===e.key&&c(e)};b.addEventListener("keydown",d);return()=>b.removeEventListener("keydown",d)},[c,b])}function uv(a,b=null===globalThis||void 0===globalThis?void 0:globalThis.document){const c=
Vb(a),d=(0,bc.useRef)(!1),e=(0,bc.useRef)(()=>{});(0,bc.useEffect)(()=>{const f=h=>{if(h.target&&!d.current){let k=function(){Wm("dismissableLayer.pointerDownOutside",c,l,{discrete:!0})};const l={originalEvent:h};"touch"===h.pointerType?(b.removeEventListener("click",e.current),e.current=k,b.addEventListener("click",e.current,{once:!0})):k()}d.current=!1},g=window.setTimeout(()=>{b.addEventListener("pointerdown",f)},0);return()=>{window.clearTimeout(g);b.removeEventListener("pointerdown",f);b.removeEventListener("click",
e.current)}},[b,c]);return{onPointerDownCapture:()=>d.current=!0}}function vv(a,b=null===globalThis||void 0===globalThis?void 0:globalThis.document){const c=Vb(a),d=(0,bc.useRef)(!1);(0,bc.useEffect)(()=>{const e=f=>{f.target&&!d.current&&Wm("dismissableLayer.focusOutside",c,{originalEvent:f},{discrete:!1})};b.addEventListener("focusin",e);return()=>b.removeEventListener("focusin",e)},[b,c]);return{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function Xm(){const a=new CustomEvent("dismissableLayer.update");
document.dispatchEvent(a)}function Wm(a,b,c,{discrete:d}){const e=c.originalEvent.target;c=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0});d?Um(e,c):e.dispatchEvent(c)}function ae(a){const [b,c]=Ym.useState(wv());Kb(()=>{a||c(d=>null!==d&&void 0!==d?d:String(xv++))},[a]);return a||(b?`radix-${b}`:"")}function be(a){return a.split("-")[0]}function Ne(a){return["top","bottom"].includes(be(a))?"x":"y"}function Yi(a){return"y"===a?"height":"width"}function Zm(a,
b,c){let {reference:d,floating:e}=a;var f=d.x+d.width/2-e.width/2;const g=d.y+d.height/2-e.height/2;a=Ne(b);var h=Yi(a);h=d[h]/2-e[h]/2;const k="x"===a;switch(be(b)){case "top":f={x:f,y:d.y-e.height};break;case "bottom":f={x:f,y:d.y+d.height};break;case "right":f={x:d.x+d.width,y:g};break;case "left":f={x:d.x-e.width,y:g};break;default:f={x:d.x,y:d.y}}switch(b.split("-")[1]){case "start":f[a]-=h*(c&&k?-1:1);break;case "end":f[a]+=h*(c&&k?-1:1)}return f}function $m(a){return"number"!=typeof a?N({top:0,
right:0,bottom:0,left:0},a):{top:a,right:a,bottom:a,left:a}}function Xg(a){return V(N({},a),{top:a.y,left:a.x,right:a.x+a.width,bottom:a.y+a.height})}function Sf(a,b){return Ga(this,null,function*(){var c;void 0===b&&(b={});const {x:d,y:e,platform:f,rects:g,elements:h,strategy:k}=a,{boundary:l="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:q=!1,padding:t=0}=b,r=$m(t),v=h[q?"floating"===p?"reference":"floating":p],y=Xg(yield f.getClippingRect({element:null==(c=
yield null==f.isElement?void 0:f.isElement(v))||c?v:v.contextElement||(yield null==f.getDocumentElement?void 0:f.getDocumentElement(h.floating)),boundary:l,rootBoundary:m,strategy:k}));c=Xg(f.convertOffsetParentRelativeRectToViewportRelativeRect?yield f.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===p?V(N({},g.floating),{x:d,y:e}):g.reference,offsetParent:yield null==f.getOffsetParent?void 0:f.getOffsetParent(h.floating),strategy:k}):g[p]);return{top:y.top-c.top+r.top,bottom:c.bottom-
y.bottom+r.bottom,left:y.left-c.left+r.left,right:c.right-y.right+r.right}})}function Yg(a){return a.replace(/left|right|bottom|top/g,b=>yv[b])}function zv(a,b,c){void 0===c&&(c=!1);const d=a.split("-")[1],e=Ne(a);a=Yi(e);c="x"===e?d===(c?"end":"start")?"right":"left":"start"===d?"bottom":"top";return b.reference[a]>b.floating[a]&&(c=Yg(c)),{main:c,cross:Yg(c)}}function an(a){return a.replace(/start|end/g,b=>Av[b])}function bn(a,b){return{top:a.top-b.height,right:a.right-b.width,bottom:a.bottom-b.height,
left:a.left-b.width}}function cn(a){return dn.some(b=>0<=a[b])}function fd(a){return null==a?window:a&&a.document&&a.location&&a.alert&&a.setInterval?a:(a=a.ownerDocument)&&a.defaultView||window}function Tf(a){return fd(a).getComputedStyle(a)}function gd(a){return a&&a.document&&a.location&&a.alert&&a.setInterval?"":a?(a.nodeName||"").toLowerCase():""}function en(){const a=navigator.userAgentData;return null!=a&&a.brands?a.brands.map(b=>b.brand+"/"+b.version).join(" "):navigator.userAgent}function Nc(a){return a instanceof
fd(a).HTMLElement}function zd(a){return a instanceof fd(a).Element}function Zi(a){return"undefined"==typeof ShadowRoot?!1:a instanceof fd(a).ShadowRoot||a instanceof ShadowRoot}function Zg(a){const {overflow:b,overflowX:c,overflowY:d}=Tf(a);return/auto|scroll|overlay|hidden/.test(b+d+c)}function fn(a){const b=/firefox/i.test(en());a=Tf(a);return"none"!==a.transform||"none"!==a.perspective||"paint"===a.contain||["transform","perspective"].includes(a.willChange)||b&&"filter"===a.willChange||b&&!!a.filter&&
"none"!==a.filter}function gn(){return!/^((?!chrome|android).)*safari/i.test(en())}function hd(a,b,c){var d,e,f,g;void 0===b&&(b=!1);void 0===c&&(c=!1);var h=a.getBoundingClientRect();let k=1,l=1;b&&Nc(a)&&(k=0<a.offsetWidth&&$g(h.width)/a.offsetWidth||1,l=0<a.offsetHeight&&$g(h.height)/a.offsetHeight||1);a=zd(a)?fd(a):window;b=!gn()&&c;c=(h.left+(b&&null!=(d=null==(e=a.visualViewport)?void 0:e.offsetLeft)?d:0))/k;d=(h.top+(b&&null!=(f=null==(g=a.visualViewport)?void 0:g.offsetTop)?f:0))/l;f=h.width/
k;h=h.height/l;return{width:f,height:h,top:d,right:c+f,bottom:d+h,left:c,x:c,y:d}}function Ad(a){return(b=a,(b instanceof fd(b).Node?a.ownerDocument:a.document)||window.document).documentElement;var b}function ah(a){return zd(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function hn(a){return hd(Ad(a)).left+ah(a).scrollLeft}function jn(a){return"html"===gd(a)?a:a.assignedSlot||a.parentNode||(Zi(a)?a.host:null)||Ad(a)}function kn(a){return Nc(a)&&
"fixed"!==getComputedStyle(a).position?a.offsetParent:null}function $i(a){for(var b=fd(a),c=kn(a);c&&["table","td","th"].includes(gd(c))&&"static"===getComputedStyle(c).position;)c=kn(c);if(!c||"html"!==gd(c)&&("body"!==gd(c)||"static"!==getComputedStyle(c).position||fn(c))){if(!c)a:{a=jn(a);for(Zi(a)&&(a=a.host);Nc(a)&&!["html","body"].includes(gd(a));){if(fn(a)){c=a;break a}a=a.parentNode}c=null}b=c||b}return b}function ln(a){if(Nc(a))return{width:a.offsetWidth,height:a.offsetHeight};a=hd(a);return{width:a.width,
height:a.height}}function mn(a){const b=jn(a);return["html","body","#document"].includes(gd(b))?a.ownerDocument.body:Nc(b)&&Zg(b)?b:mn(b)}function bh(a,b){var c;void 0===b&&(b=[]);var d=mn(a);a=d===(null==(c=a.ownerDocument)?void 0:c.body);c=fd(d);d=a?[c].concat(c.visualViewport||[],Zg(d)?d:[]):d;b=b.concat(d);return a?b:b.concat(bh(d))}function nn(a,b,c){return"viewport"===b?Xg(function(d,e){var f=fd(d),g=Ad(d);f=f.visualViewport;d=g.clientWidth;g=g.clientHeight;let h=0,k=0;if(f){d=f.width;g=f.height;
const l=gn();(l||!l&&"fixed"===e)&&(h=f.offsetLeft,k=f.offsetTop)}return{width:d,height:g,x:h,y:k}}(a,c)):zd(b)?function(d,e){var f=hd(d,!1,"fixed"===e);e=f.top+d.clientTop;f=f.left+d.clientLeft;return{top:e,left:f,x:f,y:e,right:f+d.clientWidth,bottom:e+d.clientHeight,width:d.clientWidth,height:d.clientHeight}}(b,c):Xg(function(d){var e;const f=Ad(d);var g=ah(d);const h=null==(e=d.ownerDocument)?void 0:e.body;e=Uf(f.scrollWidth,f.clientWidth,h?h.scrollWidth:0,h?h.clientWidth:0);const k=Uf(f.scrollHeight,
f.clientHeight,h?h.scrollHeight:0,h?h.clientHeight:0);d=-g.scrollLeft+hn(d);g=-g.scrollTop;return"rtl"===Tf(h||f).direction&&(d+=Uf(f.clientWidth,h?h.clientWidth:0)-e),{width:e,height:k,x:d,y:g}}(Ad(a)))}function Bv(a){const b=bh(a),c=["absolute","fixed"].includes(Tf(a).position)&&Nc(a)?$i(a):a;return zd(c)?b.filter(d=>{var e;if(e=zd(d))a:if(e=null==c.getRootNode?void 0:c.getRootNode(),d.contains(c))e=!0;else{if(e&&Zi(e)){e=c;do{if(e&&d===e){e=!0;break a}e=e.parentNode||e.host}while(e)}e=!1}return e&&
"body"!==gd(d)}):[]}function on(a,b,c,d){void 0===d&&(d={});const {ancestorScroll:e=!0,ancestorResize:f=!0,elementResize:g=!0,animationFrame:h=!1}=d,k=e&&!h,l=f&&!h,m=k||l?[...(zd(a)?bh(a):[]),...bh(b)]:[];m.forEach(r=>{k&&r.addEventListener("scroll",c,{passive:!0});l&&r.addEventListener("resize",c)});let p,q=null;if(g){let r=!0;q=new ResizeObserver(()=>{r||c();r=!1});zd(a)&&!h&&q.observe(a);q.observe(b)}let t=h?hd(a):null;return h&&function v(){const y=hd(a);!t||y.x===t.x&&y.y===t.y&&y.width===t.width&&
y.height===t.height||c();t=y;p=requestAnimationFrame(v)}(),c(),()=>{var v;m.forEach(y=>{k&&y.removeEventListener("scroll",c);l&&y.removeEventListener("resize",c)});null==(v=q)||v.disconnect();q=null;h&&cancelAnimationFrame(p)}}function aj(a,b){if(a===b)return!0;if(typeof a!==typeof b)return!1;if("function"===typeof a&&a.toString()===b.toString())return!0;let c,d;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){var e=a.length;if(e!=b.length)return!1;for(c=e;0!==c--;)if(!aj(a[c],b[c]))return!1;return!0}d=
Object.keys(a);e=d.length;if(e!==Object.keys(b).length)return!1;for(c=e;0!==c--;)if(!Object.prototype.hasOwnProperty.call(b,d[c]))return!1;for(c=e;0!==c--;)if(e=d[c],!("_owner"===e&&a.$$typeof||aj(a[e],b[e])))return!1;return!0}return a!==a&&b!==b}function Cv(a){const b=jc.useRef(a);bj(()=>{b.current=a});return b}function pn(a){let {middleware:b,placement:c="bottom",strategy:d="absolute",whileElementsMounted:e}=void 0===a?{}:a;const f=jc.useRef(null),g=jc.useRef(null),h=Cv(e),k=jc.useRef(null),[l,
m]=jc.useState({x:null,y:null,strategy:d,placement:c,middlewareData:{}}),[p,q]=jc.useState(b);aj(null==p?void 0:p.map(w=>{({options:w}=w);return w}),null==b?void 0:b.map(w=>{({options:w}=w);return w}))||q(b);const t=jc.useCallback(()=>{f.current&&g.current&&Dv(f.current,g.current,{middleware:p,placement:c,strategy:d}).then(w=>{r.current&&Ev.flushSync(()=>{m(w)})})},[p,c,d]);bj(()=>{r.current&&t()},[t]);const r=jc.useRef(!1);bj(()=>{r.current=!0;return()=>{r.current=!1}},[]);const v=jc.useCallback(()=>
{"function"===typeof k.current&&(k.current(),k.current=null);if(f.current&&g.current)if(h.current){const w=h.current(f.current,g.current,t);k.current=w}else t()},[t,h]),y=jc.useCallback(w=>{f.current=w;v()},[v]),u=jc.useCallback(w=>{g.current=w;v()},[v]),x=jc.useMemo(()=>({reference:f,floating:g}),[]);return jc.useMemo(()=>V(N({},l),{update:t,refs:x,reference:y,floating:u}),[l,t,x,y,u])}function cj(a){const [b,c]=(0,Fv.useState)(void 0);Kb(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});
const d=new ResizeObserver(e=>{if(Array.isArray(e)&&e.length){e=e[0];if("borderBoxSize"in e){e=e.borderBoxSize;var f=Array.isArray(e)?e[0]:e;e=f.inlineSize;f=f.blockSize}else e=a.offsetWidth,f=a.offsetHeight;c({width:e,height:f})}});d.observe(a,{box:"border-box"});return()=>d.unobserve(a)}c(void 0)},[a]);return b}function Gv(a){return void 0!==a}function Hv(a){return null!==a}function qn(a){const [b,c="center"]=a.split("-");return[b,c]}function Iv(a,b){return(0,id.useReducer)((c,d)=>{d=b[c][d];return null!==
d&&void 0!==d?d:c},a)}function Jv(a){const [b,c]=(0,id.useState)(),d=(0,id.useRef)({}),e=(0,id.useRef)(a),f=(0,id.useRef)("none"),[g,h]=Iv(a?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,id.useEffect)(()=>{const k=ch(d.current);f.current="mounted"===g?k:"none"},[g]);Kb(()=>{const k=d.current,l=e.current;if(l!==a){const m=f.current,p=ch(k);a?h("MOUNT"):"none"===p||"none"===
(null===k||void 0===k?void 0:k.display)?h("UNMOUNT"):l&&m!==p?h("ANIMATION_OUT"):h("UNMOUNT");e.current=a}},[a,h]);Kb(()=>{if(b){const k=m=>{const p=ch(d.current).includes(m.animationName);m.target===b&&p&&(0,Kv.flushSync)(()=>h("ANIMATION_END"))},l=m=>{m.target===b&&(f.current=ch(d.current))};b.addEventListener("animationstart",l);b.addEventListener("animationcancel",k);b.addEventListener("animationend",k);return()=>{b.removeEventListener("animationstart",l);b.removeEventListener("animationcancel",
k);b.removeEventListener("animationend",k)}}h("ANIMATION_END")},[b,h]);return{isPresent:["mounted","unmountSuspended"].includes(g),ref:(0,id.useCallback)(k=>{k&&(d.current=getComputedStyle(k));c(k)},[])}}function ch(a){return(null===a||void 0===a?void 0:a.animationName)||"none"}function Oc({prop:a,defaultProp:b,onChange:c=()=>{}}){const [d,e]=Lv({defaultProp:b,onChange:c}),f=void 0!==a;b=f?a:d;const g=Vb(c);c=(0,dh.useCallback)(h=>{f?(h="function"===typeof h?h(a):h,h!==a&&g(h)):e(h)},[f,a,e,g]);return[b,
c]}function Lv({defaultProp:a,onChange:b}){a=(0,dh.useState)(a);const [c]=a,d=(0,dh.useRef)(c),e=Vb(b);(0,dh.useEffect)(()=>{d.current!==c&&(e(c),d.current=c)},[c,d,e]);return a}function Mv(a,b){const c=Math.abs(b.top-a.y),d=Math.abs(b.bottom-a.y),e=Math.abs(b.right-a.x);a=Math.abs(b.left-a.x);switch(Math.min(c,d,e,a)){case a:return"left";case e:return"right";case c:return"top";case d:return"bottom";default:return null}}function Nv(a){a=a.slice();a.sort((b,c)=>b.x<c.x?-1:b.x>c.x?1:b.y<c.y?-1:b.y>
c.y?1:0);return Ov(a)}function Ov(a){if(1>=a.length)return a.slice();const b=[];for(var c=0;c<a.length;c++){for(var d=a[c];2<=b.length;){var e=b[b.length-1],f=b[b.length-2];if((e.x-f.x)*(d.y-f.y)>=(e.y-f.y)*(d.x-f.x))b.pop();else break}b.push(d)}b.pop();c=[];for(d=a.length-1;0<=d;d--){for(e=a[d];2<=c.length;){f=c[c.length-1];const g=c[c.length-2];if((f.x-g.x)*(e.y-g.y)>=(f.y-g.y)*(e.x-g.x))c.pop();else break}c.push(e)}c.pop();return 1===b.length&&1===c.length&&b[0].x===c[0].x&&b[0].y===c[0].y?b:b.concat(c)}
function Oe(a){var {side:b,content:c,sideOffset:d=10}=a;a=fa(a,["side","content","sideOffset"]);return c?(0,Bd.jsx)(Pv,{delayDuration:300,children:(0,Bd.jsxs)(Qv,{children:[(0,Bd.jsx)(Rv,{asChild:!0,children:a.children}),(0,Bd.jsx)(Sv,{children:(0,Bd.jsxs)(Tv,V(N({className:"tl-tooltip-content",sideOffset:d,side:b},a),{children:[c,(0,Bd.jsx)(Uv,{className:"tl-tooltip-arrow"})]}))})]})}):(0,Bd.jsx)(Bd.Fragment,{children:a.children})}function qb(a){var {className:b,tooltip:c,tooltipSide:d}=a;a=fa(a,
["className","tooltip","tooltipSide"]);return(0,rn.jsx)(Oe,{content:c,side:d,children:(0,rn.jsx)("button",N({className:"tl-button "+(null!=b?b:"")},a))})}function Cd(a){var {toggle:b=!0,pressed:c,onPressedChange:d,className:e,tooltip:f}=a;a=fa(a,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,dj.jsx)(Oe,{content:f,children:(0,dj.jsx)("div",{className:"inline-block",children:(0,dj.jsx)(Vv,V(N({},a),{"data-toggle":b,className:"tl-toggle-input"+(e?" "+e:""),pressed:c,onPressedChange:d}))})})}
function ej(a){var b=a+"CollectionProvider";const [c,d]=uc(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=m=>{const {scope:p,children:q}=m;m=Pc.default.useRef(null);const t=Pc.default.useRef(new Map).current;return Pc.default.createElement(e,{scope:p,itemMap:t,collectionRef:m},q)};Object.assign(g,{displayName:b});const h=a+"CollectionSlot";b=Pc.default.forwardRef((m,p)=>{const {scope:q,children:t}=m;m=f(h,q);p=Ia(p,m.collectionRef);return Pc.default.createElement(Qc,{ref:p},t)});Object.assign(b,
{displayName:h});const k=a+"CollectionItemSlot",l=Pc.default.forwardRef((m,p)=>{const {scope:q,children:t}=m,r=fa(m,["scope","children"]),v=Pc.default.useRef(null);m=Ia(p,v);const y=f(k,q);Pc.default.useEffect(()=>{y.itemMap.set(v,N({ref:v},r));return()=>void y.itemMap.delete(v)});return Pc.default.createElement(Qc,{["data-radix-collection-item"]:"",ref:m},t)});Object.assign(l,{displayName:k});return[{Provider:g,Slot:b,ItemSlot:l},function(m){const p=f(a+"CollectionConsumer",m);return Pc.default.useCallback(()=>
{const q=p.collectionRef.current;if(!q)return[];const t=Array.from(q.querySelectorAll("[data-radix-collection-item]"));return Array.from(p.itemMap.values()).sort((r,v)=>t.indexOf(r.ref.current)-t.indexOf(v.ref.current))},[p.collectionRef,p.itemMap])},d]}function Vf(a){const b=(0,sn.useContext)(Wv);return a||b||"ltr"}function fj(){(0,Xv.useEffect)(()=>{var a,b;const c=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(a=c[0])&&void 0!==a?
a:tn());document.body.insertAdjacentElement("beforeend",null!==(b=c[1])&&void 0!==b?b:tn());gj++;return()=>{1===gj&&document.querySelectorAll("[data-radix-focus-guard]").forEach(d=>d.remove());gj--}},[])}function tn(){const a=document.createElement("span");a.setAttribute("data-radix-focus-guard","");a.tabIndex=0;a.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return a}function Yv(a,{select:b=!1}={}){const c=document.activeElement;for(const d of a)if(ce(d,{select:b}),
document.activeElement!==c)break}function un(a){const b=[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const d="INPUT"===c.tagName&&"hidden"===c.type;return c.disabled||c.hidden||d?NodeFilter.FILTER_SKIP:0<=c.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)b.push(a.currentNode);return b}function vn(a,b){for(const c of a)if(!Zv(c,{upTo:b}))return c}function Zv(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===
b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}function ce(a,{select:b=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0});a!==c&&a instanceof HTMLInputElement&&"select"in a&&b&&a.select()}}function wn(a,b){a=[...a];b=a.indexOf(b);-1!==b&&a.splice(b,1);return a}function $v(a){return a.filter(b=>"A"!==b.tagName)}function aw(a,b,c){a=a.key;c="rtl"!==c?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a;if("vertical"!==
b||!["ArrowLeft","ArrowRight"].includes(c))if("horizontal"!==b||!["ArrowUp","ArrowDown"].includes(c))return bw[c]}function xn(a){const b=document.activeElement;for(const c of a){if(c===b)break;c.focus();if(document.activeElement!==b)break}}function cw(a,b){return a.map((c,d)=>a[(b+d)%a.length])}function dw(a,b){var c=(0,ew.useState)(function(){return{value:a,callback:b,facade:{get current(){return c.value},set current(d){var e=c.value;e!==d&&(c.value=d,c.callback(d,e))}}}})[0];c.callback=b;return c.facade}
function fw(a,b){return dw(b||null,function(c){return a.forEach(function(d){"function"===typeof d?d(c):d&&(d.current=c);return d})})}function gw(a){return a}function hw(a,b){void 0===b&&(b=gw);var c=[],d=!1;return{read:function(){if(d)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return c.length?c[c.length-1]:a},useMedium:function(e){var f=b(e,d);c.push(f);return function(){c=c.filter(function(g){return g!==f})}},assignSyncMedium:function(e){for(d=
!0;c.length;){var f=c;c=[];f.forEach(e)}c={push:function(g){return e(g)},filter:function(){return c}}},assignMedium:function(e){d=!0;var f=[];if(c.length){var g=c;c=[];g.forEach(e);f=c}var h=function(){var k=f;f=[];k.forEach(e)};Promise.resolve().then(h);c={push:function(k){f.push(k);Promise.resolve().then(h)},filter:function(k){f=f.filter(k);return c}}}}}function iw(a){const b=document.activeElement;for(const c of a){if(c===b)break;c.focus();if(document.activeElement!==b)break}}function jw(a,b){return a.map((c,
d)=>a[(b+d)%a.length])}function kw(a,b,c){const d=1<b.length&&Array.from(b).every(f=>f===b[0])?b[0]:b,e=c?a.indexOf(c):-1;a=jw(a,Math.max(e,0));1===d.length&&(a=a.filter(f=>f!==c));a=a.find(f=>f.toLowerCase().startsWith(d.toLowerCase()));return a!==c?a:void 0}function hj(a){return b=>"mouse"===b.pointerType?a(b):void 0}function ij(a,[b,c]){return Math.min(c,Math.max(b,a))}function yn(a){const b=(0,zn.useRef)({value:a,previous:a});return(0,zn.useMemo)(()=>{b.current.value!==a&&(b.current.previous=
b.current.value,b.current.value=a);return b.current.previous},[a])}function lw(a=[],b,c){a=[...a];a[c]=b;return a.sort((d,e)=>d-e)}function An(a,b,c){return 100/(c-b)*(a-b)}function mw(a,b){if(2<b)return`Value ${a+1} of ${b}`;if(2===b)return["Minimum","Maximum"][a]}function nw(a,b){if(1===a.length)return 0;a=a.map(d=>Math.abs(d-b));const c=Math.min(...a);return a.indexOf(c)}function ow(a,b,c){a/=2;const d=jj([0,50],[0,a]);return(a-d(b)*c)*c}function pw(a){return a.slice(0,-1).map((b,c)=>a[c+1]-b)}
function jj(a,b){return c=>a[0]===a[1]||b[0]===b[1]?b[0]:b[0]+(b[1]-b[0])/(a[1]-a[0])*(c-a[0])}function qw(a,b){b=Math.pow(10,b);return Math.round(a*b)/b}function Bn(a){function b(l){return l?(0,Bb.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:l},children:(0,Bb.jsx)("div",{className:`w-full h-full bg-${l}-500`})}):(0,Bb.jsx)("div",{className:"tl-color-bg",children:(0,Bb.jsx)(ra,{name:"color-swatch"})})}var {color:c,opacity:d,popoverSide:e,setColor:f,setOpacity:g}=a;a=fa(a,["color","opacity",
"popoverSide","setColor","setOpacity"]);const {handlers:{t:h}}=Cn.default.useContext(Pa),k=Cn.default.useMemo(()=>{let l="";return Tg(m=>{f(l)},100,m=>{l=m.target.value})},[]);return(0,Bb.jsx)(Dn,V(N({},a),{border:!0,arrow:!0,side:e,label:(0,Bb.jsx)(Oe,{content:h("whiteboard/color"),side:e,sideOffset:14,children:b(c)}),children:(0,Bb.jsxs)("div",{className:"p-1",children:[(0,Bb.jsx)("div",{className:"tl-color-palette",children:Object.values(Hi).map(l=>(0,Bb.jsx)("button",{className:`tl-color-drip m-1${l===
c?" active":""}`,onClick:()=>f(l),children:b(l)},l))}),(0,Bb.jsxs)("div",{className:"flex items-center tl-custom-color",children:[(0,Bb.jsx)("div",{className:`tl-color-drip m-1 mr-3 ${Xd(c)?"":"active"}`,children:(0,Bb.jsx)("div",{className:"color-input-wrapper tl-color-bg",children:(0,Bb.jsx)("input",N({className:"color-input cursor-pointer",id:"tl-custom-color-input",type:"color",value:/^#(?:[0-9a-f]{3}){1,2}$/i.test(c)?c:"#000000",onChange:k,style:{opacity:Xd(c)?0:1}},a))})}),(0,Bb.jsx)("label",
{htmlFor:"tl-custom-color-input",className:"cursor-pointer",children:h("whiteboard/select-custom-color")})]}),g&&(0,Bb.jsx)("div",{className:"mx-1 my-2",children:(0,Bb.jsxs)(rw,{defaultValue:[null!=d?d:0],onValueCommit:l=>g(l[0]),max:1,step:.1,"aria-label":h("whiteboard/opacity"),className:"tl-slider-root",children:[(0,Bb.jsx)(sw,{className:"tl-slider-track",children:(0,Bb.jsx)(tw,{className:"tl-slider-range"})}),(0,Bb.jsx)(uw,{className:"tl-slider-thumb"})]})})]})}))}function vw(a,b){a&&(0,ww.flushSync)(()=>
a.dispatchEvent(b))}function xw(a,b=null===globalThis||void 0===globalThis?void 0:globalThis.document){const c=Vb(a),d=(0,cc.useRef)(!1),e=(0,cc.useRef)(()=>{});(0,cc.useEffect)(()=>{const f=h=>{if(h.target&&!d.current){let k=function(){En("dismissableLayer.pointerDownOutside",c,l,{discrete:!0})};const l={originalEvent:h};"touch"===h.pointerType?(b.removeEventListener("click",e.current),e.current=k,b.addEventListener("click",e.current,{once:!0})):k()}d.current=!1},g=window.setTimeout(()=>{b.addEventListener("pointerdown",
f)},0);return()=>{window.clearTimeout(g);b.removeEventListener("pointerdown",f);b.removeEventListener("click",e.current)}},[b,c]);return{onPointerDownCapture:()=>d.current=!0}}function yw(a,b=null===globalThis||void 0===globalThis?void 0:globalThis.document){const c=Vb(a),d=(0,cc.useRef)(!1);(0,cc.useEffect)(()=>{const e=f=>{f.target&&!d.current&&En("dismissableLayer.focusOutside",c,{originalEvent:f},{discrete:!1})};b.addEventListener("focusin",e);return()=>b.removeEventListener("focusin",e)},[b,
c]);return{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}function Fn(){const a=new CustomEvent("dismissableLayer.update");document.dispatchEvent(a)}function En(a,b,c,{discrete:d}){const e=c.originalEvent.target;c=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0});d?vw(e,c):e.dispatchEvent(c)}function zw(a,{select:b=!1}={}){const c=document.activeElement;for(const d of a)if(de(d,{select:b}),document.activeElement!==c)break}function Gn(a){const b=
[];for(a=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const d="INPUT"===c.tagName&&"hidden"===c.type;return c.disabled||c.hidden||d?NodeFilter.FILTER_SKIP:0<=c.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});a.nextNode();)b.push(a.currentNode);return b}function Hn(a,b){for(const c of a)if(!Aw(c,{upTo:b}))return c}function Aw(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;
a=a.parentElement}return!1}function de(a,{select:b=!1}={}){if(a&&a.focus){const c=document.activeElement;a.focus({preventScroll:!0});a!==c&&a instanceof HTMLInputElement&&"select"in a&&b&&a.select()}}function In(a,b){a=[...a];b=a.indexOf(b);-1!==b&&a.splice(b,1);return a}function Bw(a){return a.filter(b=>"A"!==b.tagName)}function Cw(a){return void 0!==a}function Dw(a){return null!==a}function Jn(a){const [b,c="center"]=a.split("-");return[b,c]}function Kn(a){const b=Vb(a),c=(0,X.useRef)(""),d=(0,X.useRef)(0);
a=(0,X.useCallback)(f=>{f=c.current+f;b(f);(function k(h){c.current=h;window.clearTimeout(d.current);""!==h&&(d.current=window.setTimeout(()=>k(""),1E3))})(f)},[b]);const e=(0,X.useCallback)(()=>{c.current="";window.clearTimeout(d.current)},[]);(0,X.useEffect)(()=>()=>window.clearTimeout(d.current),[]);return[c,a,e]}function Ln(a,b,c){const d=1<b.length&&Array.from(b).every(f=>f===b[0])?b[0]:b,e=c?a.indexOf(c):-1;a=Ew(a,Math.max(e,0));1===d.length&&(a=a.filter(f=>f!==c));a=a.find(f=>f.textValue.toLowerCase().startsWith(d.toLowerCase()));
return a!==c?a:void 0}function Ew(a,b){return a.map((c,d)=>a[(b+d)%a.length])}function Fw(a){var {options:b,tooltip:c,popoverSide:d,chevron:e=!0,value:f,onValueChange:g}=a;a=fa(a,"options tooltip popoverSide chevron value onValueChange".split(" "));const [h,k]=Gw.useState(!1);return(0,Wb.jsx)("div",V(N({},a),{className:"tl-select-input",children:(0,Wb.jsxs)(Hw,{open:h,onOpenChange:k,value:f,onValueChange:g,children:[(0,Wb.jsx)(Oe,{content:c,side:d,children:(0,Wb.jsxs)(Iw,{className:"tl-select-input-trigger",
children:[(0,Wb.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,Wb.jsx)(Jw,{})}),e&&(0,Wb.jsx)(Kw,{style:{lineHeight:1},className:"ml-1 md:ml-3",children:(0,Wb.jsx)(ra,{name:h?"chevron-up":"chevron-down"})})]})}),(0,Wb.jsx)(Lw,{className:"tl-select-input-portal",children:(0,Wb.jsxs)(Mw,{className:"tl-select-input-content",side:d,position:"popper",sideOffset:14,align:"center",onKeyDown:l=>l.stopPropagation(),children:[(0,Wb.jsx)(Nw,{}),(0,Wb.jsx)(Ow,{className:"tl-select-input-viewport",
children:b.map(l=>(0,Wb.jsx)(Pw,{className:"tl-select-input-select-item",value:l.value,children:(0,Wb.jsx)(Qw,{children:l.label})},l.value))}),(0,Wb.jsx)(Rw,{})]})})]})}))}function Mn(a){var {scaleLevel:b,compact:c,popoverSide:d}=a;fa(a,["scaleLevel","compact","popoverSide"]);const e=xa();({handlers:{t:a}}=Sw.default.useContext(Pa));const f=[{label:c?"XS":a("whiteboard/extra-small"),value:"xs"},{label:c?"SM":a("whiteboard/small"),value:"sm"},{label:c?"MD":a("whiteboard/medium"),value:"md"},{label:c?
"LG":a("whiteboard/large"),value:"lg"},{label:c?"XL":a("whiteboard/extra-large"),value:"xl"},{label:c?"XXL":a("whiteboard/huge"),value:"xxl"}];return(0,Tw.jsx)(Fw,{tooltip:a("whiteboard/scale-level"),options:f,value:b,popoverSide:d,chevron:!c,onValueChange:g=>{e.api.setScaleLevel(g)}})}function Wf(a,b){return function(c){return a(b(c))}}function Uw(a,b){return b(a)}function Nn(a,b){return function(c){return a(b,c)}}function On(a,b){return function(){return a(b)}}function eh(a,b){b(a);return a}function eb(){for(var a=
arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b}function Vw(a){a()}function Pn(a){return function(){return a}}function Ww(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(){b.map(Vw)}}function ee(){}function Za(a,b){return a(1,b)}function Qn(a,b){a(0,b)}function Xw(a){a(2)}function Yw(a){return a(4)}function za(a,b){return Za(a,Nn(b,0))}function fe(a,b){var c=a(1,function(d){c();b(d)});return c}function Ba(){var a=[];return function(b,c){switch(b){case 2:a.splice(0,
a.length);break;case 1:return a.push(c),function(){var d=a.indexOf(c);-1<d&&a.splice(d,1)};case 0:a.slice().forEach(function(d){d(c)});break;default:throw Error("unrecognized action "+b);}}}function ka(a){var b=a,c=Ba();return function(d,e){switch(d){case 1:e(b);break;case 0:b=e;break;case 4:return b}return c(d,e)}}function Zw(a){var b,c;return function(d,e){switch(d){case 1:if(e){if(c===e)break;b&&b();c=e;return b=a(1,e)}b&&b();return ee;case 2:b&&b();c=null;break;default:throw Error("unrecognized action "+
d);}}}function kc(a){return eh(Ba(),function(b){return za(a,b)})}function Xb(a,b){return eh(ka(b),function(c){return za(a,c)})}function $w(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(d){return b.reduceRight(Uw,d)}}function ia(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];var e=$w.apply(void 0,c);return function(f,g){switch(f){case 1:return Za(a,e(g));case 2:a(2);break;default:throw Error("unrecognized action "+f);}}}function Rn(a,
b){return a===b}function jb(a){void 0===a&&(a=Rn);var b;return function(c){return function(d){a(b,d)||(b=d,c(d))}}}function Ja(a){return function(b){return function(c){a(c)&&b(c)}}}function na(a){return function(b){return Wf(b,a)}}function Dd(a){return function(b){return function(){return b(a)}}}function jd(a,b){return function(c){return function(d){return c(b=a(b,d))}}}function fh(a){return function(b){return function(c){0<a?a--:b(c)}}}function Pe(a){var b,c;return function(d){return function(e){b=
e;c||=setTimeout(function(){c=void 0;d(b)},a)}}}function Sn(a){var b,c;return function(d){return function(e){b=e;c&&clearTimeout(c);c=setTimeout(function(){d(b)},a)}}}function Qa(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=Array(b.length),e=0,f=null,g=Math.pow(2,b.length)-1;b.forEach(function(h,k){var l=Math.pow(2,k);Za(h,function(m){var p=e;e|=l;d[k]=m;p!==g&&e===g&&f&&(f(),f=null)})});return function(h){return function(k){var l=function(){return h([k].concat(d))};
e===g?l():f=l}}}function Tn(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(d,e){switch(d){case 1:return Ww.apply(void 0,b.map(function(f){return f(1,e)}));case 2:break;default:throw Error("unrecognized action "+d);}}}function Ma(a,b){void 0===b&&(b=Rn);return ia(a,jb(b))}function Qb(){for(var a=Ba(),b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=Array(c.length),f=0,g=Math.pow(2,c.length)-1;c.forEach(function(h,k){var l=Math.pow(2,k);Za(h,function(m){e[k]=
m;f|=l;f===g&&a(0,e)})});return function(h,k){switch(h){case 1:return f===g&&k(e),a(1,k);case 2:a(2);break;default:throw Error("unrecognized action "+h);}}}function Va(a,b,c){void 0===b&&(b=[]);c=(void 0===c?{singleton:!0}:c).singleton;return{id:Symbol(),constructor:a,dependencies:b,singleton:c}}function ax(a){var b=new Map;return function e(d){var f=d.id,g=d.constructor,h=d.dependencies;if((d=d.singleton)&&b.has(f))return b.get(f);g=g(h.map(function(k){return e(k)}));d&&b.set(f,g);return g}(a)}function bx(a,
b){if(null==a)return{};var c={},d=Object.keys(a),e;for(e=0;e<d.length;e++){var f=d[e];0<=b.indexOf(f)||(c[f]=a[f])}return c}function cx(a,b){if(a){if("string"===typeof a)return Un(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return Un(a,b)}}function Un(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=
a[c];return d}function kj(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=cx(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function dx(a,b){for(var c={},d={},e=0,f=a.length;e<
f;)d[a[e]]=1,e+=1;for(var g in b)d.hasOwnProperty(g)||(c[g]=b[g]);return c}function lj(a,b,c){function d(p,q){p.propsReady&&(0,p.propsReady)(0,!1);for(var t=kj(g),r;!(r=t()).done;)r=r.value,(0,p[b.required[r]])(0,q[r]);for(t=kj(h);!(r=t()).done;)if(r=r.value,r in q)(0,p[b.optional[r]])(0,q[r]);p.propsReady&&(0,p.propsReady)(0,!0)}function e(p){return k.reduce(function(q,t){q[t]=function(r){(0,p[b.methods[t]])(0,r)};return q},{})}function f(p){return l.reduce(function(q,t){q[t]=Zw(p[b.events[t]]);
return q},{})}var g=Object.keys(b.required||{}),h=Object.keys(b.optional||{}),k=Object.keys(b.methods||{}),l=Object.keys(b.events||{}),m=(0,dc.createContext)({});return{Component:(0,dc.forwardRef)(function(p,q){var t=p.children,r=bx(p,ex),v=(0,dc.useState)(function(){return eh(ax(a),function(u){return d(u,r)})})[0],y=(0,dc.useState)(On(f,v))[0];gh(function(){for(var u=kj(l),x;!(x=u()).done;)if(x=x.value,x in r)(0,y[x])(1,r[x]);return function(){Object.values(y).map(Xw)}},[r,y,v]);gh(function(){d(v,
r)});(0,dc.useImperativeHandle)(q,Pn(e(v)));return(0,dc.createElement)(m.Provider,{value:v},c?(0,dc.createElement)(c,dx([].concat(g,h,l),r),t):t)}),usePublisher:function(p){return(0,dc.useCallback)(Nn(Qn,(0,dc.useContext)(m)[p]),[p])},useEmitterValue:function(p){var q=(0,dc.useContext)(m)[p];p=(0,dc.useState)(On(Yw,q));var t=p[0],r=p[1];gh(function(){return Za(q,function(v){v!==t&&r(Pn(v))})},[q,t]);return t},useEmitter:function(p,q){var t=(0,dc.useContext)(m)[p];gh(function(){return t(1,q)},[q,t])}}}
function Da(){return Da=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},Da.apply(this,arguments)}function Qe(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)0<=b.indexOf(c=f[d])||(e[c]=a[c]);return e}function Vn(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function ge(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||
a["@@iterator"];if(c)return(c=c.call(a)).next.bind(c);if(Array.isArray(a)||(c=function(e,f){if(e){if("string"==typeof e)return Vn(e,f);var g=Object.prototype.toString.call(e).slice(8,-1);return"Object"===g&&e.constructor&&(g=e.constructor.name),"Map"===g||"Set"===g?Array.from(e):"Arguments"===g||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g)?Vn(e,f):void 0}}(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0;return function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function mj(a,b){void 0===b&&(b=!0);var c=(0,Fa.useRef)(null),d=function(f){};if("undefined"!=typeof ResizeObserver){var e=new ResizeObserver(function(f){f=f[0].target;null!==f.offsetParent&&a(f)});d=function(f){f&&b?(e.observe(f),c.current=f):(c.current&&e.unobserve(c.current),c.current=null)}}return{ref:c,callbackRef:d}}function Rc(a,b){return void 0===b&&(b=!0),mj(a,b).callbackRef}function Wn(a,b,c,d,e,f,g){return mj(function(h){for(var k=function(p,q,t,r){t=p.length;if(0===t)return null;for(var v=
[],y=0;y<t;y++){var u=p.item(y);if(u&&void 0!==u.dataset.index){var x=parseInt(u.dataset.index),w=parseFloat(u.dataset.knownSize),z=q(u,"offsetHeight");if(0===z&&r("Zero-sized element, this should not happen",{child:u},Cb.ERROR),z!==w)u=v[v.length-1],0===v.length||u.size!==z||u.endIndex!==x-1?v.push({startIndex:x,endIndex:x,size:z}):v[v.length-1].endIndex++}}return v}(h.children,b,0,e),l=h.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var m="window"===l.firstElementChild.dataset.viewportType;
d({scrollTop:Math.max(g?g.scrollTop:m?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop,0),scrollHeight:g?g.scrollHeight:m?document.documentElement.scrollHeight:l.scrollHeight,viewportHeight:g?g.offsetHeight:m?window.innerHeight:l.offsetHeight});null==f||f(function(p,q,t){return"normal"===q||null!=q&&q.endsWith("px")||t("row-gap was not resolved to pixel value correctly",q,Cb.WARN),"normal"===q?0:parseInt(null!=q?q:"0",10)}(0,getComputedStyle(h).rowGap,e));null!==k&&a(k)},c)}function Dc(a,
b){return Math.round(a.getBoundingClientRect()[b])}function Xn(a,b,c,d,e){void 0===d&&(d=ee);var f=(0,Fa.useRef)(null),g=(0,Fa.useRef)(null),h=(0,Fa.useRef)(null),k=(0,Fa.useRef)(!1),l=(0,Fa.useCallback)(function(m){m=m.target;var p=m===window||m===document,q=p?window.pageYOffset||document.documentElement.scrollTop:m.scrollTop,t=p?document.documentElement.scrollHeight:m.scrollHeight,r=p?window.innerHeight:m.offsetHeight;m=function(){a({scrollTop:Math.max(q,0),scrollHeight:t,viewportHeight:r})};k.current?
(0,fx.flushSync)(m):m();k.current=!1;null!==g.current&&(q===g.current||0>=q||q===t-r)&&(g.current=null,b(!0),h.current&&(clearTimeout(h.current),h.current=null))},[a,b]);return(0,Fa.useEffect)(function(){var m=e||f.current;return d(e||f.current),l({target:m}),m.addEventListener("scroll",l,{passive:!0}),function(){d(null);m.removeEventListener("scroll",l)}},[f,l,c,d,e]),{scrollerRef:f,scrollByCallback:function(m){k.current=!0;f.current.scrollBy(m)},scrollToCallback:function(m){var p=f.current;if(p&&
!("offsetHeight"in p&&0===p.offsetHeight)){var q,t,r,v="smooth"===m.behavior;if(p===window?(t=Math.max(Dc(document.documentElement,"height"),document.documentElement.scrollHeight),q=window.innerHeight,r=document.documentElement.scrollTop):(t=p.scrollHeight,q=Dc(p,"height"),r=p.scrollTop),m.top=Math.ceil(Math.max(Math.min(t-q,m.top),0)),1.01>Math.abs(q-t)||m.top===r)return a({scrollTop:r,scrollHeight:t,viewportHeight:q}),void(v&&b(!0));v?(g.current=m.top,h.current&&clearTimeout(h.current),h.current=
setTimeout(function(){h.current=null;g.current=null;b(!0)},1E3)):g.current=null;p.scrollTo(m)}}}}function Yn(a,b,c,d,e){return void 0===d&&(d=La),void 0===e&&(e=La),{k:a,v:b,lvl:c,l:d,r:e}}function nj(a,b){if(a===La)return La;var c=a.k,d=a.l,e=a.r;if(b===c){if(d===La)return e;if(e===La)return d;b=Zn(d);return oj(Rb(a,{k:b[0],v:b[1],l:$n(d)}))}return oj(Rb(a,b<c?{l:nj(d,b)}:{r:nj(e,b)}))}function Sc(a,b,c){return(void 0===c&&(c="k"),a===La)?[-Infinity,void 0]:a[c]===b?[a.k,a.v]:a[c]<b?(b=Sc(a.r,b,
c),-Infinity===b[0]?[a.k,a.v]:b):Sc(a.l,b,c)}function Tc(a,b,c){return a===La?Yn(b,c,1):b===a.k?Rb(a,{k:b,v:c}):pj(ao(Rb(a,b<a.k?{l:Tc(a.l,b,c)}:{r:Tc(a.r,b,c)})))}function qj(a,b,c){if(a===La)return[];var d=a.k,e=a.v,f=a.r,g=[];return d>b&&(g=g.concat(qj(a.l,b,c))),d>=b&&d<=c&&g.push({k:d,v:e}),d<=c&&(g=g.concat(qj(f,b,c))),g}function hh(a){return a===La?[]:[].concat(hh(a.l),[{k:a.k,v:a.v}],hh(a.r))}function Zn(a){return a.r===La?[a.k,a.v]:Zn(a.r)}function $n(a){return a.r===La?a.l:oj(Rb(a,{r:$n(a.r)}))}
function Rb(a,b){return Yn(void 0!==b.k?b.k:a.k,void 0!==b.v?b.v:a.v,void 0!==b.lvl?b.lvl:a.lvl,void 0!==b.l?b.l:a.l,void 0!==b.r?b.r:a.r)}function rj(a){return a===La||a.lvl>a.r.lvl}function oj(a){var b=a.l,c=a.r,d=a.lvl;if(c.lvl>=d-1&&b.lvl>=d-1)return a;if(d>c.lvl+1){if(rj(b))return ao(Rb(a,{lvl:d-1}));if(b===La||b.r===La)throw Error("Unexpected empty nodes");return Rb(b.r,{l:Rb(b,{r:b.r.l}),r:Rb(a,{l:b.r.r,lvl:d-1}),lvl:d})}if(rj(a))return pj(Rb(a,{lvl:d-1}));if(c===La||c.l===La)throw Error("Unexpected empty nodes");
b=c.l;var e=rj(b)?c.lvl-1:c.lvl;return Rb(b,{l:Rb(a,{r:b.l,lvl:d-1}),r:pj(Rb(c,{l:b.r,lvl:e})),lvl:b.lvl+1})}function ih(a,b,c){return a===La?[]:bo(qj(a,Sc(a,b)[0],c),function(d){return{index:d.k,value:d.v}})}function bo(a,b){var c=a.length;if(0===c)return[];var d=b(a[0]),e=d.index;d=d.value;for(var f=[],g=1;g<c;g++){var h=b(a[g]),k=h.index;h=h.value;f.push({start:e,end:k-1,value:d});e=k;d=h}return f.push({start:e,end:Infinity,value:d}),f}function pj(a){var b=a.r,c=a.lvl;return b===La||b.r===La||
b.lvl!==c||b.r.lvl!==c?a:Rb(b,{l:Rb(a,{r:b.l}),lvl:c+1})}function ao(a){var b=a.l;return b===La||b.lvl!==a.lvl?a:Rb(b,{r:Rb(a,{l:b.r})})}function Xf(a,b,c,d){void 0===d&&(d=0);for(var e=a.length-1;d<=e;){var f=Math.floor((d+e)/2),g=c(a[f],b);if(0===g)return f;if(-1===g){if(2>e-d)return f-1;e=f-1}else{if(e===d)return f;d=f+1}}throw Error("Failed binary finding record in array - "+a.join(",")+", searched for "+b);}function gx(a){var b=a.size,c=a.startIndex,d=a.endIndex;return function(e){return e.start===
c&&(e.end===d||Infinity===e.end)&&e.value===b}}function sj(a,b){a=a.index;return b===a?0:b<a?-1:1}function hx(a,b){a=a.offset;return b===a?0:b<a?-1:1}function ix(a){return{index:a.index,value:a}}function co(a,b,c,d){var e=0,f=0,g=0,h;0!==b?(g=a[h=Xf(a,b-1,sj)].offset,f=Sc(c,b-1),e=f[0],f=f[1],a.length&&a[h].size===Sc(c,b)[1]&&--h,a=a.slice(0,h+1)):a=[];for(b=ge(ih(c,b,Infinity));!(c=b()).done;)h=c.value,c=h.start,h=h.value,e=c-e,g=e*f+g+e*d,a.push({offset:g,size:h,index:c}),e=c,f=h;return{offsetTree:a,
lastIndex:e,lastOffset:g,lastSize:f}}function jx(a,b){var c=b[0],d=b[1],e=b[3];0<c.length&&(0,b[2])("received item sizes",c,Cb.DEBUG);var f=a.sizeTree;b=f;var g=0;if(0<d.length&&f===La&&2===c.length){var h=c[0].size,k=c[1].size;b=d.reduce(function(m,p){return Tc(Tc(m,p,h),p+1,k)},b)}else c=function(m,p){var q,t=m===La?0:Infinity;for(p=ge(p);!(q=p()).done;){var r=q.value;q=r.size;var v=r.startIndex,y=r.endIndex;if(t=Math.min(t,v),m===La)m=Tc(m,0,q);else{var u=ih(m,v-1,y+1);if(!u.some(gx(r))){var x,
w=r=!1;for(u=ge(u);!(x=u()).done;){var z=x.value;x=z.start;var A=z.end;z=z.value;r?(y>=x||q===z)&&(m=nj(m,x)):(w=z!==q,r=!0);A>y&&y>=x&&z!==q&&(m=Tc(m,y+1,z))}w&&(m=Tc(m,v,q))}}}return[m,t]}(b,c),b=c[0],g=c[1];if(b===f)return a;a=co(a.offsetTree,g,b,e);var l=a.offsetTree;return{sizeTree:b,offsetTree:l,lastIndex:a.lastIndex,lastOffset:a.lastOffset,lastSize:a.lastSize,groupOffsetTree:d.reduce(function(m,p){return Tc(m,p,Yf(p,l,e))},La),groupIndices:d}}function Yf(a,b,c){if(0===b.length)return 0;b=b[Xf(b,
a,sj)];a-=b.index;a=b.size*a+(a-1)*c+b.offset;return 0<a?a+c:a}function eo(a,b,c){if(void 0!==a.groupIndex)return b.groupIndices[a.groupIndex]+1;a=fo("LAST"===a.index?c:a.index,b);return Math.max(0,a,Math.min(c,a))}function fo(a,b){if(b.groupOffsetTree===La)return a;for(var c=0;b.groupIndices[c]<=a+c;)c++;return a+c}function go(a){a="number"==typeof a?{index:a}:a;return a.align||(a.align="start"),a.behavior&&kx||(a.behavior="auto"),a.offset||(a.offset=0),a}function ho(a){return!!a&&("smooth"===a?
"smooth":"auto")}function lx(a){return a.reduce(function(b,c){return b.groupIndices.push(b.totalCount),b.totalCount+=c+1,b},{totalCount:0,groupIndices:[]})}function Zf(a,b){return!(!a||a[0]!==b[0]||a[1]!==b[1])}function io(a,b){return!(!a||a.startIndex!==b.startIndex||a.endIndex!==b.endIndex)}function jo(a,b,c){return"number"==typeof a?"up"===c&&"top"===b||"down"===c&&"bottom"===b?a:0:"up"===c?"top"===b?a.main:a.reverse:"bottom"===b?a.main:a.reverse}function ko(a,b,c){if(0===a.length)return[];if(b.groupOffsetTree===
La)return a.map(function(k){return Da({},k,{index:k.index+c,originalIndex:k.index})});var d,e=[],f=ih(b.groupOffsetTree,a[0].index,a[a.length-1].index),g=void 0,h=0;for(a=ge(a);!(d=a()).done;)d=d.value,(!g||g.end<d.index)&&(g=f.shift(),h=b.groupIndices.indexOf(g.start)),e.push(Da({},d.index===g.start?{type:"group",index:h}:{index:d.index-(h+1)+c,groupIndex:h},{size:d.size,offset:d.offset,originalIndex:d.index,data:d.data}));return e}function jh(a,b,c,d,e,f){var g=0,h=0;0<a.length&&(g=a[0].offset,
h=a[a.length-1],h=h.offset+h.size);var k=c-e.lastIndex,l=g;d=e.lastOffset+k*e.lastSize+(k-1)*d-h;return{items:ko(a,e,f),topItems:ko(b,e,f),topListHeight:b.reduce(function(m,p){return p.size+m},0),offsetTop:g,offsetBottom:d,top:l,bottom:h,totalCount:c,firstItemIndex:f}}function lo(a){var b,c=!1;return function(){return c||(c=!0,b=a()),b}}function tj(a,b){var c=(0,Fa.useRef)(null),d=(0,Fa.useCallback)(function(k){if(null!==k&&k.offsetParent){var l=k.getBoundingClientRect();k=l.width;if(b){var m=b.getBoundingClientRect();
l=l.top-m.top;m=m.height-Math.max(0,l);l+=b.scrollTop}else m=window.innerHeight-Math.max(0,l.top),l=l.top+window.pageYOffset;c.current={offsetTop:l,visibleHeight:m,visibleWidth:k};a(c.current)}},[a,b]),e=mj(d),f=e.callbackRef,g=e.ref,h=(0,Fa.useCallback)(function(){d(g.current)},[d,g]);return(0,Fa.useEffect)(function(){if(b){b.addEventListener("scroll",h);var k=new ResizeObserver(h);return k.observe(b),function(){b.removeEventListener("scroll",h);k.unobserve(b)}}return window.addEventListener("scroll",
h),window.addEventListener("resize",h),function(){window.removeEventListener("scroll",h);window.removeEventListener("resize",h)}},[h,b]),f}function uj(a){return a}function Re(a,b){var c=Ba();return Za(c,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+b,"color: red;","color: inherit;","color: blue;")}),za(c,a),c}function rb(a,b){if("string"!=typeof a)return{context:b}}function vj(a){var b=a.usePublisher,c=a.useEmitter,d=a.useEmitterValue;return va.memo(function(e){var f=
e.style,g=e.children;e=Qe(e,mx);var h=b("scrollContainerState"),k=d("ScrollerComponent"),l=b("smoothScrollTargetReached"),m=d("scrollerRef"),p=d("context");h=Xn(h,l,k,m);l=h.scrollerRef;m=h.scrollByCallback;return c("scrollTo",h.scrollToCallback),c("scrollBy",m),(0,Fa.createElement)(k,Da({ref:l,style:Da({},nx,f),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},e,rb(k,p)),g)})}function wj(a){var b=a.usePublisher,c=a.useEmitter,d=a.useEmitterValue;return va.memo(function(e){var f=
e.style,g=e.children;e=Qe(e,ox);var h=b("windowScrollContainerState"),k=d("ScrollerComponent"),l=b("smoothScrollTargetReached"),m=d("totalListHeight"),p=d("deviation"),q=d("customScrollParent"),t=d("context");l=Xn(h,l,k,ee,q);var r=l.scrollerRef;h=l.scrollByCallback;l=l.scrollToCallback;return px(function(){return r.current=q||window,function(){r.current=null}},[r,q]),c("windowScrollTo",l),c("scrollBy",h),(0,Fa.createElement)(k,Da({style:Da({position:"relative"},f,0!==m?{height:m+p}:{}),"data-virtuoso-scroller":!0},
e,rb(k,t)),g)})}function xj(a,b,c){return Array.from({length:b-a+1}).map(function(d,e){return{index:e+a,data:null==c?void 0:c[e+a]}})}function qx(a,b){return a&&a.column===b.column&&a.row===b.row}function mo(a,b,c,d){var e=c.height;return void 0===e||0===d.length?{top:0,bottom:0}:{top:yj(a,b,c,d[0].index),bottom:yj(a,b,c,d[d.length-1].index)+e}}function yj(a,b,c,d){var e=b.column;a=Se(1,kh((a.width+e)/(c.width+e)));d=kh(d/a);c=d*c.height+Se(0,d-1)*b.row;return 0<c?c+b.row:c}function no(a,b,c){return"normal"===
b||null!=b&&b.endsWith("px")||c(a+" was not resolved to pixel value correctly",b,Cb.WARN),"normal"===b?0:parseInt(null!=b?b:"0",10)}function $f(a,b){$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,d){c.__proto__=d;return c};return $f(a,b)}function rx(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;$f(a,b)}function zj(a){zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(b){return b.__proto__||Object.getPrototypeOf(b)};return zj(a)}function sx(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function Aj(a,b,c){Aj=sx()?Reflect.construct.bind():function(d,e,f){var g=[null];g.push.apply(g,e);d=new (Function.bind.apply(d,g));f&&$f(d,f.prototype);return d};return Aj.apply(null,arguments)}function Bj(a){var b="function"===typeof Map?new Map:void 0;Bj=function(c){function d(){return Aj(c,
arguments,zj(this).constructor)}if(null===c||-1===Function.toString.call(c).indexOf("[native code]"))return c;if("function"!==typeof c)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof b){if(b.has(c))return b.get(c);b.set(c,d)}d.prototype=Object.create(c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});return $f(d,c)};return Bj(a)}function tx(a,b,c){return Math.round(255*a)+","+Math.round(255*b)+","+Math.round(255*c)}function ag(a,
b,c,d){void 0===d&&(d=tx);if(0===b)return d(c,c,c);a=(a%360+360)%360/60;var e=(1-Math.abs(2*c-1))*b,f=e*(1-Math.abs(a%2-1)),g=b=0,h=0;0<=a&&1>a?(b=e,g=f):1<=a&&2>a?(b=f,g=e):2<=a&&3>a?(g=e,h=f):3<=a&&4>a?(g=f,h=e):4<=a&&5>a?(b=f,h=e):5<=a&&6>a&&(b=e,h=f);c-=e/2;return d(b+c,g+c,h+c)}function ux(a){if("string"!==typeof a)throw new Uc(3);if("string"===typeof a){var b=a.toLowerCase();a=oo[b]?"#"+oo[b]:a}if(a.match(vx))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+
a[5]+a[6],16)};if(a.match(wx))return b=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:b};if(a.match(xx))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(yx))return b=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2)),{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:b};if(b=Cj.exec(a))return{red:parseInt(""+
b[1],10),green:parseInt(""+b[2],10),blue:parseInt(""+b[3],10)};if(b=zx.exec(a.substring(0,50)))return{red:parseInt(""+b[1],10),green:parseInt(""+b[2],10),blue:parseInt(""+b[3],10),alpha:1<parseFloat(""+b[4])?parseFloat(""+b[4])/100:parseFloat(""+b[4])};var c=Ax.exec(a);if(c){b=parseInt(""+c[1],10);var d=parseInt(""+c[2],10)/100;c=parseInt(""+c[3],10)/100;b="rgb("+ag(b,d,c)+")";d=Cj.exec(b);if(!d)throw new Uc(4,a,b);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10)}}if(b=
Bx.exec(a.substring(0,50))){d=parseInt(""+b[1],10);c=parseInt(""+b[2],10)/100;var e=parseInt(""+b[3],10)/100;d="rgb("+ag(d,c,e)+")";c=Cj.exec(d);if(!c)throw new Uc(4,a,d);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10),alpha:1<parseFloat(""+b[4])?parseFloat(""+b[4])/100:parseFloat(""+b[4])}}throw new Uc(5);}function kd(a){a=a.toString(16);return 1===a.length?"0"+a:a}function po(a,b,c){return Dj("#"+kd(Math.round(255*a))+kd(Math.round(255*b))+kd(Math.round(255*
c)))}function qo(a,b,c){if("number"===typeof a&&"number"===typeof b&&"number"===typeof c)return Dj("#"+kd(a)+kd(b)+kd(c));if("object"===typeof a&&void 0===b&&void 0===c)return Dj("#"+kd(a.red)+kd(a.green)+kd(a.blue));throw new Uc(6);}function Cx(a){if("object"!==typeof a)throw new Uc(8);if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?qo(a.red,a.green,a.blue):"rgba("+a.red+","+a.green+","+a.blue+","+a.alpha+
")";else throw new Uc(7);return a}if("number"===typeof a.red&&"number"===typeof a.green&&"number"===typeof a.blue&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha))return qo(a);if("number"===typeof a.hue&&"number"===typeof a.saturation&&"number"===typeof a.lightness&&"number"===typeof a.alpha){if("object"===typeof a)a=1<=a.alpha?ag(a.hue,a.saturation,a.lightness,po):"rgba("+ag(a.hue,a.saturation,a.lightness)+","+a.alpha+")";else throw new Uc(2);return a}if("number"===typeof a.hue&&"number"===
typeof a.saturation&&"number"===typeof a.lightness&&("number"!==typeof a.alpha||"undefined"===typeof a.alpha)){if("object"===typeof a)a=ag(a.hue,a.saturation,a.lightness,po);else throw new Uc(1);return a}throw new Uc(8);}function ro(a,b,c){return function(){var d=c.concat(Array.prototype.slice.call(arguments));return d.length>=b?a.apply(this,d):ro(a,b,d)}}function so(a,b){if("transparent"===b)return b;b=ux(b);var c=b.red/255,d=b.green/255,e=b.blue/255,f=Math.max(c,d,e),g=Math.min(c,d,e),h=(f+g)/2;
if(f===g)b=void 0!==b.alpha?{hue:0,saturation:0,lightness:h,alpha:b.alpha}:{hue:0,saturation:0,lightness:h};else{var k=f-g;g=.5<h?k/(2-f-g):k/(f+g);switch(f){case c:c=(d-e)/k+(d<e?6:0);break;case d:c=(e-c)/k+2;break;default:c=(c-d)/k+4}c*=60;b=void 0!==b.alpha?{hue:c,saturation:g,lightness:h,alpha:b.alpha}:{hue:c,saturation:g,lightness:h}}h=ca;a=b.lightness-parseFloat(a);return Cx(h({},b,{lightness:Math.max(0,Math.min(1,a))}))}function Ec(a,b){var c;void 0!==b.strokeWidth&&(b.strokeWidth=Math.max(b.strokeWidth,
1));void 0!==b.opacity&&(b.opacity=Math.min(1,Math.max(b.opacity,0)));let d=null!=(c=b.fill)?c:a.props.fill;void 0===d||Xd(d)||"var(--ls-secondary-background-color)"===d||b.noFill||!Dx.includes(a.props.type)||(a=Ex(.3,d),b.stroke=a);return b}function Ej({strokeWidth:a,size:b,mode:c}){return"svg"===c?(0,to.jsx)("rect",{className:"tl-binding-indicator",x:a,y:a,rx:2,ry:2,width:Math.max(0,b[0]-2*a),height:Math.max(0,b[1]-2*a),strokeWidth:4*a}):(0,to.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",
left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function lh(){const a=xa();return"panning"===a.inputs.state||"pinching"===a.inputs.state}function uo({left:a,middle:b,right:c,stroke:d,strokeWidth:e}){return(0,Fj.jsxs)("g",{children:[(0,Fj.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${a} L ${b} ${c}`}),(0,Fj.jsx)("path",{d:`M ${a} L ${b} ${c}`,fill:"none",stroke:d,strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function Gj(a,
b,c){b=jl(a,b,a,c).points;if(!b)return console.warn("Could not find an intersection for the arrow head."),{left:a,right:a};b=(c=b[0])?L.rotWith(c,a,Math.PI/6):a;a=c?L.rotWith(c,a,-Math.PI/6):a;return{left:b,right:a}}function vo(a,b,c){const {left:d,right:e}=Gj(a,b,c);return`M ${d} L ${a} ${e}`}function Fx(a,b,c,d,e){a=a.strokeWidth;var f=L.dist(b,c);a=Math.min(f/3,16*a);f=[];f.push(`M ${b} L ${c}`);d&&f.push(vo(b,c,a));e&&f.push(vo(c,b,a));return f.join(" ")}function Gx({id:a,bounds:b,labelSize:c,
offset:d,scale:e=1}){return(0,mh.jsx)("defs",{children:(0,mh.jsxs)("mask",{id:a+"_clip",children:[(0,mh.jsx)("rect",{x:-100,y:-100,width:b.width+200,height:b.height+200,fill:"white"}),(0,mh.jsx)("rect",{x:b.width/2-c[0]/2*e+((null==d?void 0:d[0])||0),y:b.height/2-c[1]/2*e+((null==d?void 0:d[1])||0),width:c[0]*e,height:c[1]*e,rx:4*e,ry:4*e,fill:"black"})]})})}function wo(a,b,c,d=e=>e){return a*d(.5-b*(.5-c))}function Hx(a){return[-a[0],-a[1]]}function Fc(a,b){return[a[0]+b[0],a[1]+b[1]]}function lc(a,
b){return[a[0]-b[0],a[1]-b[1]]}function Gc(a,b){return[a[0]*b,a[1]*b]}function bg(a){return[a[1],-a[0]]}function Ix(a,b){return a[0]===b[0]&&a[1]===b[1]}function xo(a){return a[0]*a[0]+a[1]*a[1]}function yo(a){var b=Math.hypot(a[0],a[1]);return[a[0]/b,a[1]/b]}function Jx(a,b){return Math.hypot(a[1]-b[1],a[0]-b[0])}function cg(a,b,c){let d=Math.sin(c);c=Math.cos(c);let e=a[0]-b[0];a=a[1]-b[1];return[e*c-a*d+b[0],e*d+a*c+b[1]]}function Hj(a,b,c){return Fc(a,Gc(lc(b,a),c))}function zo(a,b,c){return Fc(a,
Gc(b,c))}function Kx(a,b={}){let {size:c=16,smoothing:d=.5,thinning:e=.5,simulatePressure:f=!0,easing:g=H=>H,start:h={},end:k={},last:l=!1}=b,{cap:m=!0,easing:p=H=>H*(2-H)}=h,{cap:q=!0,easing:t=H=>--H*H*H+1}=k;if(0===a.length||0>=c)return[];var r=a[a.length-1].runningLength;let v=!1===h.taper?0:!0===h.taper?Math.max(c,r):h.taper,y=!1===k.taper?0:!0===k.taper?Math.max(c,r):k.taper;var u=Math.pow(c*d,2);b=[];let x=[];var w=a.slice(0,10).reduce((H,B)=>{var G=B.pressure;f&&(B=Te(1,B.distance/c),G=Te(1,
1-B),G=Te(1,H+.275*(G-H)*B));return(H+G)/2},a[0].pressure),z=wo(c,e,a[a.length-1].pressure,g),A;let D=a[0].vector;var J=a[0].point;let Q=J;var K=J;let O=Q;var W=!1;for(var R=0;R<a.length;R++){var {pressure:T}=a[R];let {point:H,vector:B,distance:G,runningLength:P}=a[R];if(R<a.length-1&&3>r-P)continue;e?(f&&(z=Te(1,G/c),T=Te(1,1-z),T=Te(1,w+.275*(T-w)*z)),z=wo(c,e,T,g)):z=c/2;void 0===A&&(A=z);var I=P<v?p(P/v):1,C=r-P<y?t((r-P)/y):1;z=Math.max(.01,z*Math.min(I,C));C=(R<a.length-1?a[R+1]:a[R]).vector;
let S=R<a.length-1?B[0]*C[0]+B[1]*C[1]:1;I=null!==S&&0>S;if(0>B[0]*D[0]+B[1]*D[1]&&!W||I){J=Gc(bg(D),z);for(let ha=1/13,la=0;1>=la;la+=ha)K=cg(lc(H,J),H,dg*la),b.push(K),O=cg(Fc(H,J),H,dg*-la),x.push(O);J=K;Q=O;I&&(W=!0)}else(W=!1,R===a.length-1)?(T=Gc(bg(B),z),b.push(lc(H,T)),x.push(Fc(H,T))):(w=Gc(bg(Hj(C,B,S)),z),K=lc(H,w),(1>=R||xo(lc(J,K))>u)&&(b.push(K),J=K),O=Fc(H,w),(1>=R||xo(lc(Q,O))>u)&&(x.push(O),Q=O),w=T,D=B)}r=a[0].point.slice(0,2);u=1<a.length?a[a.length-1].point.slice(0,2):Fc(a[0].point,
[1,1]);K=[];W=[];if(1===a.length){if(!v&&!y||l){a=zo(r,yo(bg(lc(r,u))),-(A||z));b=[];for(let H=1/13,B=H;1>=B;B+=H)b.push(cg(a,r,2*dg*B));return b}}else{if(!(v||y&&1===a.length))if(m)for(let H=1/13,B=H;1>=B;B+=H)A=cg(x[0],r,dg*B),K.push(A);else R=lc(b[0],x[0]),A=Gc(R,.5),R=Gc(R,.51),K.push(lc(r,A),lc(r,R),Fc(r,R),Fc(r,A));A=bg(Hx(a[a.length-1].vector));if(y||v&&1===a.length)W.push(u);else if(q){a=zo(u,A,z);for(let H=1/29,B=H;1>B;B+=H)W.push(cg(a,u,3*dg*B))}else W.push(Fc(u,Gc(A,z)),Fc(u,Gc(A,.99*z)),
lc(u,Gc(A,.99*z)),lc(u,Gc(A,z)))}return b.concat(W,x.reverse(),K)}function Lx(a,b={}){var c;let {streamline:d=.5,size:e=16,last:f=!1}=b;if(0===a.length)return[];b=.15+.85*(1-d);a=Array.isArray(a[0])?a:a.map(({x:p,y:q,pressure:t=.5})=>[p,q,t]);if(2===a.length){var g=a[1];a=a.slice(0,-1);for(var h=1;5>h;h++)a.push(Hj(a[0],g,h/4))}1===a.length&&(a=[...a,[...Fc(a[0],[1,1]),...a[0].slice(2)]]);g=[{point:[a[0][0],a[0][1]],pressure:0<=a[0][2]?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];h=!1;let k=
0,l=g[0],m=a.length-1;for(let p=1;p<a.length;p++){let q=f&&p===m?a[p].slice(0,2):Hj(l.point,a[p],b);if(Ix(l.point,q))continue;let t=Jx(q,l.point);if(k+=t,p<m&&!h){if(k<e)continue;h=!0}l={point:q,pressure:0<=a[p][2]?a[p][2]:.5,vector:yo(lc(l.point,q)),distance:t,runningLength:k};g.push(l)}return g[0].vector=(null==(c=g[1])?void 0:c.vector)||[0,0],g}function Mx(a,b=4/3){return(new Ij(a)).exportAsSVG(b)}function Nx(a,b=4/3){return(new Ij(a)).generatePreviewJsx(void 0,b)}function Ao({id:a,type:b,onRemove:c,
showContent:d}){const e=xa(),{handlers:f}=Bo.default.useContext(Pa),g=f.t;return(0,$a.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,$a.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,$a.jsx)(Co,{id:a,showReferenceContent:d})}),(0,$a.jsx)("div",{className:"flex-1"}),f.getBlockPageName(a)!==e.currentPage.name&&(0,$a.jsx)(qb,{tooltip:g("whiteboard/open-page"),type:"button",onClick:()=>null==f?void 0:f.redirectToPage(a),
children:(0,$a.jsx)(ra,{name:"open-as-page"})}),(0,$a.jsx)(qb,{tooltip:g("whiteboard/open-page-in-sidebar"),type:"button",onClick:()=>null==f?void 0:f.sidebarAddBlock(a,"B"===b?"block":"page"),children:(0,$a.jsx)(ra,{name:"move-to-sidebar-right"})}),c&&(0,$a.jsx)(qb,{className:"tl-shape-links-panel-item-remove-button",tooltip:g("whiteboard/remove-link"),type:"button",onClick:c,children:(0,$a.jsx)(ra,{name:"x",className:"!translate-y-0"})})]})}function Ox({options:a,value:b,onValueChange:c}){return(0,Ed.jsx)(Do,
{className:"tl-toggle-group-input",type:"single",value:b,onValueChange:c,children:a.map(d=>(0,Ed.jsx)(Oe,{content:d.tooltip,children:(0,Ed.jsx)("div",{className:"inline-block",children:(0,Ed.jsx)(Eo,{className:"tl-toggle-group-input-button",value:d.value,disabled:d.value===b,children:(0,Ed.jsx)(ra,{name:d.icon})})})},d.value))})}function Px({options:a,value:b,onValueChange:c}){return(0,Ed.jsx)(Do,{className:"tl-toggle-group-input",type:"multiple",value:b,onValueChange:c,children:a.map(d=>(0,Ed.jsx)(Eo,
{className:"tl-toggle-group-input-button",value:d.value,children:(0,Ed.jsx)(ra,{name:d.icon})},d.value))})}function Hc(a){return xa().selectedShapesArray.filter(b=>!b.props.isLocked).filter(b=>{var c;return null==(c=Jj[b.props.type])?void 0:c.includes(a)})}function Fo(a){var b;a=a.match(/\.[0-9a-z]+$/i);if(!a)return"unknown";const c=a[0].toLowerCase();[a]=null!=(b=Object.entries(Qx).find(([,d])=>d.includes(c)))?b:["unknown",null];return a}function nh(...a){return(...b)=>Ga(this,null,function*(){for(const c of a){const d=
yield c(...b);if(d&&0<d.length)return d}return null})}function Kj(a,b){return Ga(this,null,function*(){return a.types.includes(b)?a instanceof DataTransfer?a.getData(b):yield(yield a.getType(b)).text():null})}function Go(){const {handlers:a}=Ho.useContext(Pa);return Ho.useCallback((b,c)=>Ga(this,null,function*(){if(c.shiftKey&&1===b.selectedShapesArray.length){var d=yield navigator.clipboard.read();let e;0<d.length&&(d=(yield(yield d[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(d)&&
40===d.length?(d=d.slice(2,-2),Zd(d)&&(e=d)):/^\[\[.*\]\]$/.test(d)&&(e=d.slice(2,-2)));if(e){b.selectedShapesArray[0].update({refs:[e]});b.persist();return}}Rx(b,c,a)}),[])}function Sx(){const a=Go();return Tx.useCallback((b,c)=>Ga(this,[b,c],function*(d,{dataTransfer:e,point:f}){a(d,{point:f,shiftKey:!1,dataTransfer:e,fromDrop:!0})}),[])}function Ux(){const {handlers:a}=Io.useContext(Pa);return Io.useCallback((b,{text:c,html:d})=>{a.copyToClipboard(c,d)},[])}function Vx(){return Wx.default.useCallback(a=>
Ga(this,null,function*(){setTimeout(()=>{a.transition("logseq-portal").selectedTool.transition("creating")},100)}),[])}var Xx=Object.create,Ue=Object.defineProperty,Yx=Object.defineProperties,Jo=Object.getOwnPropertyDescriptor,Zx=Object.getOwnPropertyDescriptors,Ko=Object.getOwnPropertyNames,oh=Object.getOwnPropertySymbols,$x=Object.getPrototypeOf,Lj=Object.prototype.hasOwnProperty,Lo=Object.prototype.propertyIsEnumerable,Mj=(a,b,c)=>b in a?Ue(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):
a[b]=c,N=(a,b)=>{for(var c in b||={})Lj.call(b,c)&&Mj(a,c,b[c]);if(oh)for(c of oh(b))Lo.call(b,c)&&Mj(a,c,b[c]);return a},V=(a,b)=>Yx(a,Zx(b)),fa=(a,b)=>{var c={},d;for(d in a)Lj.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&oh)for(d of oh(a))0>b.indexOf(d)&&Lo.call(a,d)&&(c[d]=a[d]);return c},ph=(a,b)=>function(){return b||(0,a[Ko(a)[0]])((b={exports:{}}).exports,b),b.exports},Mo=(a,b,c,d)=>{if(b&&"object"===typeof b||"function"===typeof b)for(let e of Ko(b))Lj.call(a,e)||e===c||Ue(a,e,{get:()=>
b[e],enumerable:!(d=Jo(b,e))||d.enumerable});return a},ea=(a,b,c)=>(c=null!=a?Xx($x(a)):{},Mo(!b&&a&&a.__esModule?c:Ue(c,"default",{value:a,enumerable:!0}),a)),M=(a,b,c,d)=>{for(var e=1<d?void 0:d?Jo(b,c):b,f=a.length-1,g;0<=f;f--)if(g=a[f])e=(d?g(b,c,e):g(e))||e;d&&e&&Ue(b,c,e);return e},n=(a,b,c)=>{Mj(a,"symbol"!==typeof b?b+"":b,c);return c},Ga=(a,b,c)=>new Promise((d,e)=>{var f=k=>{try{h(c.next(k))}catch(l){e(l)}},g=k=>{try{h(c.throw(k))}catch(l){e(l)}},h=k=>k.done?d(k.value):Promise.resolve(k.value).then(f,
g);h((c=c.apply(a,b)).next())}),ay=ph({["../../node_modules/rbush/rbush.min.js"](a,b){!function(c,d){"object"==typeof a&&"undefined"!=typeof b?b.exports=d():"function"==typeof define&&define.amd?define(d):(c=c||self).RBush=d()}(a,function(){function c(u,x,w,z,A){!function R(J,Q,K,O,W){for(;O>K;){if(600<O-K){var T=O-K+1,I=Q-K+1,C=Math.log(T),H=.5*Math.exp(2*C/3);C=.5*Math.sqrt(C*H*(T-H)/T)*(0>I-T/2?-1:1);R(J,Q,Math.max(K,Math.floor(Q-I*H/T+C)),Math.min(O,Math.floor(Q+(T-I)*H/T+C)),W)}T=J[Q];I=K;H=
O;d(J,K,Q);for(0<W(J[O],T)&&d(J,K,O);I<H;){d(J,I,H);I++;for(H--;0>W(J[I],T);)I++;for(;0<W(J[H],T);)H--}0===W(J[K],T)?d(J,K,H):d(J,++H,O);H<=Q&&(K=H+1);Q<=H&&(O=H-1)}}(u,x,w||0,z||u.length-1,A||e)}function d(u,x,w){var z=u[x];u[x]=u[w];u[w]=z}function e(u,x){return u<x?-1:u>x?1:0}function f(u,x){g(u,0,u.children.length,x,u)}function g(u,x,w,z,A){A||=r(null);A.minX=1/0;A.minY=1/0;A.maxX=-1/0;for(A.maxY=-1/0;x<w;x++){var D=u.children[x];h(A,u.leaf?z(D):D)}return A}function h(u,x){return u.minX=Math.min(u.minX,
x.minX),u.minY=Math.min(u.minY,x.minY),u.maxX=Math.max(u.maxX,x.maxX),u.maxY=Math.max(u.maxY,x.maxY),u}function k(u,x){return u.minX-x.minX}function l(u,x){return u.minY-x.minY}function m(u){return(u.maxX-u.minX)*(u.maxY-u.minY)}function p(u){return u.maxX-u.minX+(u.maxY-u.minY)}function q(u,x){return u.minX<=x.minX&&u.minY<=x.minY&&x.maxX<=u.maxX&&x.maxY<=u.maxY}function t(u,x){return x.minX<=u.maxX&&x.minY<=u.maxY&&x.maxX>=u.minX&&x.maxY>=u.minY}function r(u){return{children:u,height:1,leaf:!0,
minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(u,x,w,z,A){for(var D=[x,w];D.length;)if(!((w=D.pop())-(x=D.pop())<=z)){var J=x+Math.ceil((w-x)/z/2)*z;c(u,J,x,w,A);D.push(x,J,J,w)}}var y=function(u){void 0===u&&(u=9);this._maxEntries=Math.max(4,u);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return y.prototype.all=function(){return this._all(this.data,[])},y.prototype.search=function(u){var x=this.data,w=[];if(!t(u,x))return w;for(var z=this.toBBox,A=[];x;){for(var D=
0;D<x.children.length;D++){var J=x.children[D],Q=x.leaf?z(J):J;t(u,Q)&&(x.leaf?w.push(J):q(u,Q)?this._all(J,w):A.push(J))}x=A.pop()}return w},y.prototype.collides=function(u){var x=this.data;if(!t(u,x))return!1;for(var w=[];x;){for(var z=0;z<x.children.length;z++){var A=x.children[z],D=x.leaf?this.toBBox(A):A;if(t(u,D)){if(x.leaf||q(u,D))return!0;w.push(A)}}x=w.pop()}return!1},y.prototype.load=function(u){if(!u||!u.length)return this;if(u.length<this._minEntries){for(var x=0;x<u.length;x++)this.insert(u[x]);
return this}u=this._build(u.slice(),0,u.length-1,0);this.data.children.length?this.data.height===u.height?this._splitRoot(this.data,u):(this.data.height<u.height&&(x=this.data,this.data=u,u=x),this._insert(u,this.data.height-u.height-1,!0)):this.data=u;return this},y.prototype.insert=function(u){return u&&this._insert(u,this.data.height-1),this},y.prototype.clear=function(){return this.data=r([]),this},y.prototype.remove=function(u,x){if(!u)return this;for(var w,z,A,D=this.data,J=this.toBBox(u),Q=
[],K=[];D||Q.length;){if(D||(D=Q.pop(),z=Q[Q.length-1],w=K.pop(),A=!0),D.leaf){a:{var O=u;var W=D.children,R=x;if(R){for(var T=0;T<W.length;T++)if(R(O,W[T])){O=T;break a}O=-1}else O=W.indexOf(O)}if(-1!==O)return D.children.splice(O,1),Q.push(D),this._condense(Q),this}A||D.leaf||!q(D,J)?z?(w++,D=z.children[w],A=!1):D=null:(Q.push(D),K.push(w),w=0,z=D,D=D.children[0])}return this},y.prototype.toBBox=function(u){return u},y.prototype.compareMinX=function(u,x){return u.minX-x.minX},y.prototype.compareMinY=
function(u,x){return u.minY-x.minY},y.prototype.toJSON=function(){return this.data},y.prototype.fromJSON=function(u){return this.data=u,this},y.prototype._all=function(u,x){for(var w=[];u;)u.leaf?x.push.apply(x,u.children):w.push.apply(w,u.children),u=w.pop();return x},y.prototype._build=function(u,x,w,z){var A,D=w-x+1,J=this._maxEntries;if(D<=J)return f(A=r(u.slice(x,w+1)),this.toBBox),A;z||(z=Math.ceil(Math.log(D)/Math.log(J)),J=Math.ceil(D/Math.pow(J,z-1)));(A=r([])).leaf=!1;A.height=z;D=Math.ceil(D/
J);J=D*Math.ceil(Math.sqrt(J));for(v(u,x,w,J,this.compareMinX);x<=w;x+=J){var Q=Math.min(x+J-1,w);v(u,x,Q,D,this.compareMinY);for(var K=x;K<=Q;K+=D)A.children.push(this._build(u,K,Math.min(K+D-1,Q),z-1))}return f(A,this.toBBox),A},y.prototype._chooseSubtree=function(u,x,w,z){for(;z.push(x),!x.leaf&&z.length-1!==w;){for(var A=1/0,D=1/0,J=void 0,Q=0;Q<x.children.length;Q++){var K=x.children[Q],O=m(K),W=(R=u,T=K,(Math.max(T.maxX,R.maxX)-Math.min(T.minX,R.minX))*(Math.max(T.maxY,R.maxY)-Math.min(T.minY,
R.minY))-O);W<D?(D=W,A=O<A?O:A,J=K):W===D&&O<A&&(A=O,J=K)}x=J||x.children[0]}var R,T;return x},y.prototype._insert=function(u,x,w){w=w?u:this.toBBox(u);var z=[],A=this._chooseSubtree(w,this.data,x,z);A.children.push(u);for(h(A,w);0<=x&&z[x].children.length>this._maxEntries;)this._split(z,x),x--;this._adjustParentBBoxes(w,z,x)},y.prototype._split=function(u,x){var w=u[x],z=w.children.length,A=this._minEntries;this._chooseSplitAxis(w,A,z);z=this._chooseSplitIndex(w,A,z);z=r(w.children.splice(z,w.children.length-
z));z.height=w.height;z.leaf=w.leaf;f(w,this.toBBox);f(z,this.toBBox);x?u[x-1].children.push(z):this._splitRoot(w,z)},y.prototype._splitRoot=function(u,x){this.data=r([u,x]);this.data.height=u.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},y.prototype._chooseSplitIndex=function(u,x,w){for(var z,A,D,J,Q,K,O,W=1/0,R=1/0,T=x;T<=w-x;T++){var I=g(u,0,T,this.toBBox),C=g(u,T,w,this.toBBox),H=(A=I,D=C,J=void 0,Q=void 0,K=void 0,O=void 0,J=Math.max(A.minX,D.minX),Q=Math.max(A.minY,D.minY),K=Math.min(A.maxX,
D.maxX),O=Math.min(A.maxY,D.maxY),Math.max(0,K-J)*Math.max(0,O-Q));I=m(I)+m(C);H<W?(W=H,z=T,R=I<R?I:R):H===W&&I<R&&(R=I,z=T)}return z||w-x},y.prototype._chooseSplitAxis=function(u,x,w){var z=u.leaf?this.compareMinX:k,A=u.leaf?this.compareMinY:l;this._allDistMargin(u,x,w,z)<this._allDistMargin(u,x,w,A)&&u.children.sort(z)},y.prototype._allDistMargin=function(u,x,w,z){u.children.sort(z);z=this.toBBox;for(var A=g(u,0,x,z),D=g(u,w-x,w,z),J=p(A)+p(D),Q=x;Q<w-x;Q++){var K=u.children[Q];h(A,u.leaf?z(K):
K);J+=p(A)}for(w=w-x-1;w>=x;w--)A=u.children[w],h(D,u.leaf?z(A):A),J+=p(D);return J},y.prototype._adjustParentBBoxes=function(u,x,w){for(;0<=w;w--)h(x[w],u)},y.prototype._condense=function(u){for(var x=u.length-1,w=void 0;0<=x;x--)0===u[x].children.length?0<x?(w=u[x-1].children).splice(w.indexOf(u[x]),1):this.clear():f(u[x],this.toBBox)},y})}}),by=ph({["../../node_modules/fast-deep-equal/index.js"](a,b){b.exports=function f(d,e){if(d===e)return!0;if(d&&e&&"object"==typeof d&&"object"==typeof e){if(d.constructor!==
e.constructor)return!1;var g;if(Array.isArray(d)){var h=d.length;if(h!=e.length)return!1;for(g=h;0!==g--;)if(!f(d[g],e[g]))return!1;return!0}if(d.constructor===RegExp)return d.source===e.source&&d.flags===e.flags;if(d.valueOf!==Object.prototype.valueOf)return d.valueOf()===e.valueOf();if(d.toString!==Object.prototype.toString)return d.toString()===e.toString();var k=Object.keys(d);h=k.length;if(h!==Object.keys(e).length)return!1;for(g=h;0!==g--;)if(!Object.prototype.hasOwnProperty.call(e,k[g]))return!1;
for(g=h;0!==g--;)if(h=k[g],!f(d[h],e[h]))return!1;return!0}return d!==d&&e!==e}}}),cy=ph({["../../../node_modules/deepmerge/dist/cjs.js"](a,b){function c(p,q){return!1!==q.clone&&q.isMergeableObject(p)?k(Array.isArray(p)?[]:{},p,q):p}function d(p,q,t){return p.concat(q).map(function(r){return c(r,t)})}function e(p){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(p).filter(function(q){return Object.propertyIsEnumerable.call(p,q)}):[]}function f(p){return Object.keys(p).concat(e(p))}
function g(p,q){try{return q in p}catch(t){return!1}}function h(p,q,t){var r={};t.isMergeableObject(p)&&f(p).forEach(function(v){r[v]=c(p[v],t)});f(q).forEach(function(v){if(!g(p,v)||Object.hasOwnProperty.call(p,v)&&Object.propertyIsEnumerable.call(p,v))if(g(p,v)&&t.isMergeableObject(q[v])){if(t.customMerge){var y=t.customMerge(v);y="function"===typeof y?y:k}else y=k;r[v]=y(p[v],q[v],t)}else r[v]=c(q[v],t)});return r}function k(p,q,t){t=t||{};t.arrayMerge=t.arrayMerge||d;t.isMergeableObject=t.isMergeableObject||
l;t.cloneUnlessOtherwiseSpecified=c;var r=Array.isArray(q),v=Array.isArray(p);return r!==v?c(q,t):r?t.arrayMerge(p,q,t):h(p,q,t)}var l=function(p){var q;if(q=!!p&&"object"===typeof p)q=Object.prototype.toString.call(p),q=!("[object RegExp]"===q||"[object Date]"===q||p.$$typeof===m);return q},m="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;k.all=function(p,q){if(!Array.isArray(p))throw Error("first argument should be an array");return p.reduce(function(t,r){return k(t,r,
q)},{})};b.exports=k}}),dy=ph({["../../node_modules/tslib/tslib.js"](a,b){var c,d,e,f,g,h,k,l,m,p,q,t,r,v,y,u,x,w,z,A,D,J,Q,K,O;(function(W){function R(I,C){I!==T&&("function"===typeof Object.create?Object.defineProperty(I,"__esModule",{value:!0}):I.__esModule=!0);return function(H,B){return I[H]=C?C(H,B):B}}var T="object"===typeof yg?yg:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(I){W(R(T,R(I)))}):"object"===
typeof b&&"object"===typeof b.exports?W(R(T,R(b.exports))):W(R(T))})(function(W){var R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,C){I.__proto__=C}||function(I,C){for(var H in C)Object.prototype.hasOwnProperty.call(C,H)&&(I[H]=C[H])};c=function(I,C){function H(){this.constructor=I}if("function"!==typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");R(I,C);I.prototype=null===C?Object.create(C):(H.prototype=C.prototype,new H)};
d=Object.assign||function(I){for(var C,H=1,B=arguments.length;H<B;H++){C=arguments[H];for(var G in C)Object.prototype.hasOwnProperty.call(C,G)&&(I[G]=C[G])}return I};e=function(I,C){var H={},B;for(B in I)Object.prototype.hasOwnProperty.call(I,B)&&0>C.indexOf(B)&&(H[B]=I[B]);if(null!=I&&"function"===typeof Object.getOwnPropertySymbols){var G=0;for(B=Object.getOwnPropertySymbols(I);G<B.length;G++)0>C.indexOf(B[G])&&Object.prototype.propertyIsEnumerable.call(I,B[G])&&(H[B[G]]=I[B[G]])}return H};f=function(I,
C,H,B){var G=arguments.length,P=3>G?C:null===B?B=Object.getOwnPropertyDescriptor(C,H):B,S;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)P=Reflect.decorate(I,C,H,B);else for(var ha=I.length-1;0<=ha;ha--)if(S=I[ha])P=(3>G?S(P):3<G?S(C,H,P):S(C,H))||P;return 3<G&&P&&Object.defineProperty(C,H,P),P};g=function(I,C){return function(H,B){C(H,B,I)}};h=function(I,C){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(I,C)};k=function(I,C,H,B){function G(P){return P instanceof
H?P:new H(function(S){S(P)})}return new (H||=Promise)(function(P,S){function ha(pa){try{U(B.next(pa))}catch(ba){S(ba)}}function la(pa){try{U(B["throw"](pa))}catch(ba){S(ba)}}function U(pa){pa.done?P(pa.value):G(pa.value).then(ha,la)}U((B=B.apply(I,C||[])).next())})};l=function(I,C){function H(U){return function(pa){return B([U,pa])}}function B(U){if(P)throw new TypeError("Generator is already executing.");for(;G;)try{if(P=1,S&&(ha=U[0]&2?S["return"]:U[0]?S["throw"]||((ha=S["return"])&&ha.call(S),
0):S.next)&&!(ha=ha.call(S,U[1])).done)return ha;if(S=0,ha)U=[U[0]&2,ha.value];switch(U[0]){case 0:case 1:ha=U;break;case 4:return G.label++,{value:U[1],done:!1};case 5:G.label++;S=U[1];U=[0];continue;case 7:U=G.ops.pop();G.trys.pop();continue;default:if(!(ha=G.trys,ha=0<ha.length&&ha[ha.length-1])&&(6===U[0]||2===U[0])){G=0;continue}if(3===U[0]&&(!ha||U[1]>ha[0]&&U[1]<ha[3]))G.label=U[1];else if(6===U[0]&&G.label<ha[1])G.label=ha[1],ha=U;else if(ha&&G.label<ha[2])G.label=ha[2],G.ops.push(U);else{ha[2]&&
G.ops.pop();G.trys.pop();continue}}U=C.call(I,G)}catch(pa){U=[6,pa],S=0}finally{P=ha=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}var G={label:0,sent:function(){if(ha[0]&1)throw ha[1];return ha[1]},trys:[],ops:[]},P,S,ha,la;return la={next:H(0),"throw":H(1),"return":H(2)},"function"===typeof Symbol&&(la[Symbol.iterator]=function(){return this}),la};m=function(I,C){for(var H in I)"default"===H||Object.prototype.hasOwnProperty.call(C,H)||O(C,I,H)};O=Object.create?function(I,C,H,B){void 0===
B&&(B=H);var G=Object.getOwnPropertyDescriptor(C,H);if(!G||("get"in G?!C.__esModule:G.writable||G.configurable))G={enumerable:!0,get:function(){return C[H]}};Object.defineProperty(I,B,G)}:function(I,C,H,B){void 0===B&&(B=H);I[B]=C[H]};p=function(I){var C="function"===typeof Symbol&&Symbol.iterator,H=C&&I[C],B=0;if(H)return H.call(I);if(I&&"number"===typeof I.length)return{next:function(){I&&B>=I.length&&(I=void 0);return{value:I&&I[B++],done:!I}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.");
};q=function(I,C){var H="function"===typeof Symbol&&I[Symbol.iterator];if(!H)return I;I=H.call(I);var B,G=[];try{for(;(void 0===C||0<C--)&&!(B=I.next()).done;)G.push(B.value)}catch(S){var P={error:S}}finally{try{B&&!B.done&&(H=I["return"])&&H.call(I)}finally{if(P)throw P.error;}}return G};t=function(){for(var I=[],C=0;C<arguments.length;C++)I=I.concat(q(arguments[C]));return I};r=function(){for(var I=0,C=0,H=arguments.length;C<H;C++)I+=arguments[C].length;I=Array(I);var B=0;for(C=0;C<H;C++)for(var G=
arguments[C],P=0,S=G.length;P<S;P++,B++)I[B]=G[P];return I};v=function(I,C,H){if(H||2===arguments.length)for(var B=0,G=C.length,P;B<G;B++)!P&&B in C||(P||=Array.prototype.slice.call(C,0,B),P[B]=C[B]);return I.concat(P||Array.prototype.slice.call(C))};y=function(I){return this instanceof y?(this.v=I,this):new y(I)};u=function(I,C,H){function B(ba){la[ba]&&(U[ba]=function(sa){return new Promise(function(ya,Ra){1<pa.push([ba,sa,ya,Ra])||G(ba,sa)})})}function G(ba,sa){try{var ya=la[ba](sa);ya.value instanceof
y?Promise.resolve(ya.value.v).then(P,S):ha(pa[0][2],ya)}catch(Ra){ha(pa[0][3],Ra)}}function P(ba){G("next",ba)}function S(ba){G("throw",ba)}function ha(ba,sa){(ba(sa),pa.shift(),pa.length)&&G(pa[0][0],pa[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var la=H.apply(I,C||[]),U,pa=[];return U={},B("next"),B("throw"),B("return"),U[Symbol.asyncIterator]=function(){return this},U};x=function(I){function C(G,P){H[G]=I[G]?function(S){return(B=!B)?{value:y(I[G](S)),
done:"return"===G}:P?P(S):S}:P}var H,B;return H={},C("next"),C("throw",function(G){throw G;}),C("return"),H[Symbol.iterator]=function(){return this},H};w=function(I){function C(P){G[P]=I[P]&&function(S){return new Promise(function(ha,la){S=I[P](S);H(ha,la,S.done,S.value)})}}function H(P,S,ha,la){Promise.resolve(la).then(function(U){P({value:U,done:ha})},S)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var B=I[Symbol.asyncIterator],G;return B?B.call(I):(I="function"===
typeof p?p(I):I[Symbol.iterator](),G={},C("next"),C("throw"),C("return"),G[Symbol.asyncIterator]=function(){return this},G)};z=function(I,C){Object.defineProperty?Object.defineProperty(I,"raw",{value:C}):I.raw=C;return I};var T=Object.create?function(I,C){Object.defineProperty(I,"default",{enumerable:!0,value:C})}:function(I,C){I["default"]=C};A=function(I){if(I&&I.__esModule)return I;var C={};if(null!=I)for(var H in I)"default"!==H&&Object.prototype.hasOwnProperty.call(I,H)&&O(C,I,H);T(C,I);return C};
D=function(I){return I&&I.__esModule?I:{"default":I}};J=function(I,C,H,B){if("a"===H&&!B)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof C?I!==C||!B:!C.has(I))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===H?B:"a"===H?B.call(I):B?B.value:C.get(I)};Q=function(I,C,H,B,G){if("m"===B)throw new TypeError("Private method is not writable");if("a"===B&&!G)throw new TypeError("Private accessor was defined without a setter");
if("function"===typeof C?I!==C||!G:!C.has(I))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===B?G.call(I,H):G?G.value=H:C.set(I,H),H};K=function(I,C){if(null===C||"object"!==typeof C&&"function"!==typeof C)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof I?C===I:I.has(C)};W("__extends",c);W("__assign",d);W("__rest",e);W("__decorate",f);W("__param",g);W("__metadata",h);W("__awaiter",k);W("__generator",
l);W("__exportStar",m);W("__createBinding",O);W("__values",p);W("__read",q);W("__spread",t);W("__spreadArrays",r);W("__spreadArray",v);W("__await",y);W("__asyncGenerator",u);W("__asyncDelegator",x);W("__asyncValues",w);W("__makeTemplateObject",z);W("__importStar",A);W("__importDefault",D);W("__classPrivateFieldGet",J);W("__classPrivateFieldSet",Q);W("__classPrivateFieldIn",K)})}}),No={};((a,b)=>{for(var c in b)Ue(a,c,{get:b[c],enumerable:!0})})(No,{App:()=>ey,PreviewManager:()=>Ij,generateJSXFromModel:()=>
Nx,generateSVGFromModel:()=>Mx});xs.exports=(a=>Mo(Ue({},"__esModule",{value:!0}),a))(No);var Hi=(a=>{a.Yellow="yellow";a.Red="red";a.Pink="pink";a.Green="green";a.Blue="blue";a.Purple="purple";a.Gray="gray";a.Default="";return a})(Hi||{}),Ve=(a=>{a.Box="box";a.Ellipse="ellipse";a.Polygon="polygon";return a})(Ve||{}),zg,zs=new Uint8Array(16),Xt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Nb=[];for(let a=0;256>a;++a)Nb.push((a+
256).toString(16).slice(1));var Oo,Nj,Oj=0,Pj=0,lb=function(a,b,c){c=b&&c||0;const d=b||Array(16);a=a||{};let e=a.node||Oo;var f=void 0!==a.clockseq?a.clockseq:Nj;if(null==e||null==f){var g=a.random||(a.rng||ys)();null==e&&(e=Oo=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]);null==f&&(f=Nj=(g[6]<<8|g[7])&16383)}g=void 0!==a.msecs?a.msecs:Date.now();let h=void 0!==a.nsecs?a.nsecs:Pj+1;const k=g-Oj+(h-Pj)/1E4;0>k&&void 0===a.clockseq&&(f=f+1&16383);(0>k||g>Oj)&&void 0===a.nsecs&&(h=0);if(1E4<=h)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");
Oj=g;Pj=h;Nj=f;g+=122192928E5;a=(1E4*(g&268435455)+h)%4294967296;d[c++]=a>>>24&255;d[c++]=a>>>16&255;d[c++]=a>>>8&255;d[c++]=a&255;a=g/4294967296*1E4&268435455;d[c++]=a>>>8&255;d[c++]=a&255;d[c++]=a>>>24&15|16;d[c++]=a>>>16&255;d[c++]=f>>>8|128;d[c++]=f&255;for(f=0;6>f;++f)d[c+f]=e[f];return b||As(d)},Ca=class{static clamp(a,b,c){return Math.max(b,"undefined"!==typeof c?Math.min(a,c):a)}static clampV(a,b,c){return a.map(d=>c?Ca.clamp(d,b,c):Ca.clamp(d,b))}static cross(a,b,c){return(b[0]-a[0])*(c[1]-
a[1])-(c[0]-a[0])*(b[1]-a[1])}static snap(a,b=1){return[Math.round(a[0]/b)*b,Math.round(a[1]/b)*b]}},E=Ca;E.neg=a=>[-a[0],-a[1]];E.add=(a,b)=>[a[0]+b[0],a[1]+b[1]];E.addScalar=(a,b)=>[a[0]+b,a[1]+b];E.sub=(a,b)=>[a[0]-b[0],a[1]-b[1]];E.subScalar=(a,b)=>[a[0]-b,a[1]-b];E.vec=(a,b)=>[b[0]-a[0],b[1]-a[1]];E.mul=(a,b)=>[a[0]*b,a[1]*b];E.mulV=(a,b)=>[a[0]*b[0],a[1]*b[1]];E.div=(a,b)=>[a[0]/b,a[1]/b];E.divV=(a,b)=>[a[0]/b[0],a[1]/b[1]];E.per=a=>[a[1],-a[0]];E.dpr=(a,b)=>a[0]*b[0]+a[1]*b[1];E.cpr=(a,b)=>
a[0]*b[1]-b[0]*a[1];E.len2=a=>a[0]*a[0]+a[1]*a[1];E.len=a=>Math.hypot(a[0],a[1]);E.pry=(a,b)=>Ca.dpr(a,b)/Ca.len(b);E.uni=a=>Ca.div(a,Ca.len(a));E.normalize=a=>Ca.uni(a);E.tangent=(a,b)=>Ca.uni(Ca.sub(a,b));E.dist2=(a,b)=>Ca.len2(Ca.sub(a,b));E.dist=(a,b)=>Math.hypot(a[1]-b[1],a[0]-b[0]);E.fastDist=(a,b)=>{a=[b[0]-a[0],b[1]-a[1]];b=[Math.abs(a[0]),Math.abs(a[1])];let c=1/Math.max(b[0],b[1]);c*=1.29289-(b[0]+b[1])*c*.29289;return[a[0]*c,a[1]*c]};E.ang=(a,b)=>Math.atan2(Ca.cpr(a,b),Ca.dpr(a,b));E.angle=
(a,b)=>Math.atan2(b[1]-a[1],b[0]-a[0]);E.med=(a,b)=>Ca.mul(Ca.add(a,b),.5);E.rot=(a,b=0)=>[a[0]*Math.cos(b)-a[1]*Math.sin(b),a[0]*Math.sin(b)+a[1]*Math.cos(b)];E.rotWith=(a,b,c=0)=>{if(0===c)return a;const d=Math.sin(c);c=Math.cos(c);const e=a[0]-b[0];a=a[1]-b[1];return[e*c-a*d+b[0],e*d+a*c+b[1]]};E.isEqual=(a,b)=>a[0]===b[0]&&a[1]===b[1];E.lrp=(a,b,c)=>Ca.add(a,Ca.mul(Ca.sub(b,a),c));E.int=(a,b,c,d,e=1)=>{c=(Ca.clamp(c,d)-c)/(d-c);return Ca.add(Ca.mul(a,1-c),Ca.mul(b,e))};E.ang3=(a,b,c)=>{a=Ca.vec(b,
a);b=Ca.vec(b,c);return Ca.ang(a,b)};E.abs=a=>[Math.abs(a[0]),Math.abs(a[1])];E.rescale=(a,b)=>{const c=Ca.len(a);return[b*a[0]/c,b*a[1]/c]};E.isLeft=(a,b,c)=>(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1]);E.clockwise=(a,b,c)=>0<Ca.isLeft(a,b,c);E.toFixed=a=>a.map(b=>Math.round(100*b)/100);E.nearestPointOnLineThroughPoint=(a,b,c)=>Ca.add(a,Ca.mul(b,Ca.pry(Ca.sub(c,a),b)));E.distanceToLineThroughPoint=(a,b,c)=>Ca.dist(c,Ca.nearestPointOnLineThroughPoint(a,b,c));E.nearestPointOnLineSegment=(a,b,c,
d=!0)=>{const e=Ca.uni(Ca.sub(b,a));c=Ca.add(a,Ca.mul(e,Ca.pry(Ca.sub(c,a),e)));if(d){if(c[0]<Math.min(a[0],b[0]))return a[0]<b[0]?a:b;if(c[0]>Math.max(a[0],b[0]))return a[0]>b[0]?a:b;if(c[1]<Math.min(a[1],b[1]))return a[1]<b[1]?a:b;if(c[1]>Math.max(a[1],b[1]))return a[1]>b[1]?a:b}return c};E.distanceToLineSegment=(a,b,c,d=!0)=>Ca.dist(c,Ca.nearestPointOnLineSegment(a,b,c,d));E.nudge=(a,b,c)=>Ca.isEqual(a,b)?a:Ca.add(a,Ca.mul(Ca.uni(Ca.sub(b,a)),c));E.nudgeAtAngle=(a,b,c)=>[Math.cos(b)*c+a[0],Math.sin(b)*
c+a[1]];E.toPrecision=(a,b=4)=>[+a[0].toPrecision(b),+a[1].toPrecision(b)];E.pointsBetween=(a,b,c=6)=>Array.from(Array(c)).map((d,e)=>{d=e/(c-1);e=Math.min(1,.5+Math.abs(.5-d));return[...Ca.lrp(a,b,d),e]});E.slope=(a,b)=>a[0]===b[0]?NaN:(a[1]-b[1])/(a[0]-b[0]);E.toAngle=a=>{a=Math.atan2(a[1],a[0]);return 0>a?a+2*Math.PI:a};E.max=(...a)=>[Math.max(...a.map(b=>b[0])),Math.max(...a.map(b=>b[1]))];E.min=(...a)=>[Math.min(...a.map(b=>b[0])),Math.min(...a.map(b=>b[1]))];var L=E,Y=class{static getRectangleSides(a,
b,c=0){const d=[a[0]+b[0]/2,a[1]+b[1]/2],e=E.rotWith(a,d,c),f=E.rotWith(E.add(a,[b[0],0]),d,c),g=E.rotWith(E.add(a,b),d,c);a=E.rotWith(E.add(a,[0,b[1]]),d,c);return[["top",[e,f]],["right",[f,g]],["bottom",[g,a]],["left",[a,e]]]}static getBoundsSides(a){return Y.getRectangleSides([a.minX,a.minY],[a.width,a.height])}static expandBounds(a,b){return{minX:a.minX-b,minY:a.minY-b,maxX:a.maxX+b,maxY:a.maxY+b,width:a.width+2*b,height:a.height+2*b}}static boundsCollide(a,b){return!(a.maxX<b.minX||a.minX>b.maxX||
a.maxY<b.minY||a.minY>b.maxY)}static boundsContain(a,b){return Array.isArray(b)?a.minX<b[0]&&a.minY<b[1]&&a.maxY>b[1]&&a.maxX>b[0]:a.minX<b.minX&&a.minY<b.minY&&a.maxY>b.maxY&&a.maxX>b.maxX}static boundsContained(a,b){return Y.boundsContain(b,a)}static boundsAreEqual(a,b){return!(b.maxX!==a.maxX||b.minX!==a.minX||b.maxY!==a.maxY||b.minY!==a.minY)}static getBoundsFromPoints(a,b=0){let c=Infinity,d=Infinity,e=-Infinity,f=-Infinity;if(2>a.length)d=c=0,f=e=1;else for(const g of a)c=Math.min(g[0],c),d=
Math.min(g[1],d),e=Math.max(g[0],e),f=Math.max(g[1],f);return 0!==b?Y.getBoundsFromPoints(a.map(g=>E.rotWith(g,[(c+e)/2,(d+f)/2],b))):{minX:c,minY:d,maxX:e,maxY:f,width:Math.max(1,e-c),height:Math.max(1,f-d)}}static centerBounds(a,b){const c=Y.getBoundsCenter(a);return Y.translateBounds(a,[b[0]-c[0],b[1]-c[1]])}static snapBoundsToGrid(a,b){const c=Math.round(a.minX/b)*b,d=Math.round(a.minY/b)*b,e=Math.round(a.maxX/b)*b;a=Math.round(a.maxY/b)*b;return{minX:c,minY:d,maxX:e,maxY:a,width:Math.max(1,e-
c),height:Math.max(1,a-d)}}static translateBounds(a,b){return{minX:a.minX+b[0],minY:a.minY+b[1],maxX:a.maxX+b[0],maxY:a.maxY+b[1],width:a.width,height:a.height}}static multiplyBounds(a,b){const c=Y.getBoundsCenter(a);return Y.centerBounds({minX:a.minX*b,minY:a.minY*b,maxX:a.maxX*b,maxY:a.maxY*b,width:a.width*b,height:a.height*b},[c[0]*b,c[1]*b])}static divideBounds(a,b){const c=Y.getBoundsCenter(a);return Y.centerBounds({minX:a.minX/b,minY:a.minY/b,maxX:a.maxX/b,maxY:a.maxY/b,width:a.width/b,height:a.height/
b},[c[0]/b,c[1]/b])}static getRotatedBounds(a,b=0){a=Y.getRotatedCorners(a,b);let c=b=Infinity,d=-Infinity,e=-Infinity;for(const f of a)b=Math.min(f[0],b),c=Math.min(f[1],c),d=Math.max(f[0],d),e=Math.max(f[1],e);return{minX:b,minY:c,maxX:d,maxY:e,width:Math.max(1,d-b),height:Math.max(1,e-c),rotation:0}}static getRotatedEllipseBounds(a,b,c,d,e=0){var f=Math.cos(e);const g=Math.sin(e);e=Math.hypot(c*f,d*g);f=Math.hypot(c*g,d*f);return{minX:a+c-e,minY:b+d-f,maxX:a+c+e,maxY:b+d+f,width:2*e,height:2*f}}static getExpandedBounds(a,
b){const c=Math.min(a.minX,b.minX),d=Math.min(a.minY,b.minY),e=Math.max(a.maxX,b.maxX);a=Math.max(a.maxY,b.maxY);return{minX:c,minY:d,maxX:e,maxY:a,width:Math.abs(e-c),height:Math.abs(a-d)}}static getCommonBounds(a){if(2>a.length)return a[0];let b=a[0];for(let c=1;c<a.length;c++)b=Y.getExpandedBounds(b,a[c]);return b}static getRotatedCorners(a,b=0){const c=[a.minX+a.width/2,a.minY+a.height/2];a=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]];return b?a.map(d=>E.rotWith(d,c,b)):a}static getTransformedBoundingBox(a,
b,c,d=0,e=!1){const [f,g]=[a.minX,a.minY],[h,k]=[a.maxX,a.maxY];let [l,m]=[a.minX,a.minY],[p,q]=[a.maxX,a.maxY];if("center"===b)return{minX:l+c[0],minY:m+c[1],maxX:p+c[0],maxY:q+c[1],width:p-l,height:q-m,scaleX:1,scaleY:1};const [t,r]=E.rot(c,-d);switch(b){case "top_edge":case "top_left_corner":case "top_right_corner":m+=r;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":q+=r}switch(b){case "left_edge":case "top_left_corner":case "bottom_left_corner":l+=t;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":p+=
t}var v=h-f;const y=k-g;var u=(p-l)/v,x=(q-m)/y;a=0>u;c=0>x;var w=Math.abs(p-l),z=Math.abs(q-m);if(e)switch(e=v/y,v=e<w/z,x=1/e*(0>x?1:-1)*w,u=z*(0>u?1:-1)*e,b){case "top_left_corner":v?m=q+x:l=p+u;break;case "top_right_corner":v?m=q+x:p=l-u;break;case "bottom_right_corner":v?q=m-x:p=l-u;break;case "bottom_left_corner":v?q=m-x:l=p+u;break;case "bottom_edge":case "top_edge":w=(l+p)/2;z*=e;l=w-z/2;p=w+z/2;break;case "left_edge":case "right_edge":z=(m+q)/2,w/=e,m=z-w/2,q=z+w/2}if(0!==d%(2*Math.PI)){w=
[0,0];z=E.med([f,g],[h,k]);u=E.med([l,m],[p,q]);switch(b){case "top_left_corner":w=E.sub(E.rotWith([p,q],u,d),E.rotWith([h,k],z,d));break;case "top_right_corner":w=E.sub(E.rotWith([l,q],u,d),E.rotWith([f,k],z,d));break;case "bottom_right_corner":w=E.sub(E.rotWith([l,m],u,d),E.rotWith([f,g],z,d));break;case "bottom_left_corner":w=E.sub(E.rotWith([p,m],u,d),E.rotWith([h,g],z,d));break;case "top_edge":w=E.sub(E.rotWith(E.med([l,q],[p,q]),u,d),E.rotWith(E.med([f,k],[h,k]),z,d));break;case "left_edge":w=
E.sub(E.rotWith(E.med([p,m],[p,q]),u,d),E.rotWith(E.med([h,g],[h,k]),z,d));break;case "bottom_edge":w=E.sub(E.rotWith(E.med([l,m],[p,m]),u,d),E.rotWith(E.med([f,g],[h,g]),z,d));break;case "right_edge":w=E.sub(E.rotWith(E.med([l,m],[l,q]),u,d),E.rotWith(E.med([f,g],[f,k]),z,d))}[l,m]=E.sub([l,m],w);[p,q]=E.sub([p,q],w)}p<l&&([p,l]=[l,p]);q<m&&([q,m]=[m,q]);return{minX:l,minY:m,maxX:p,maxY:q,width:p-l,height:q-m,scaleX:(p-l)/(h-f||1)*(a?-1:1),scaleY:(q-m)/(k-g||1)*(c?-1:1)}}static getTransformAnchor(a,
b,c){let d=a;switch(a){case "top_left_corner":d=b&&c?"bottom_right_corner":b?"top_right_corner":c?"bottom_left_corner":"bottom_right_corner";break;case "top_right_corner":d=b&&c?"bottom_left_corner":b?"top_left_corner":c?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":d=b&&c?"top_left_corner":b?"bottom_left_corner":c?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":d=b&&c?"top_right_corner":b?"bottom_right_corner":c?"top_left_corner":"top_right_corner"}return d}static getRelativeTransformedBoundingBox(a,
b,c,d,e){d=a.minX+(d?b.maxX-c.maxX:c.minX-b.minX)/b.width*a.width;e=a.minY+(e?b.maxY-c.maxY:c.minY-b.minY)/b.height*a.height;const f=c.width/b.width*a.width;a=c.height/b.height*a.height;return{minX:d,minY:e,maxX:d+f,maxY:e+a,width:f,height:a}}static getRotatedSize(a,b){const c=E.div(a,2);a=[[0,0],[a[0],0],a,[0,a[1]]].map(d=>E.rotWith(d,c,b));a=Y.getBoundsFromPoints(a);return[a.width,a.height]}static getBoundsCenter(a){return[a.minX+a.width/2,a.minY+a.height/2]}static getBoundsWithCenter(a){const b=
Y.getBoundsCenter(a);return V(N({},a),{midX:b[0],midY:b[1]})}static getCommonTopLeft(a){const b=[Infinity,Infinity];a.forEach(c=>{b[0]=Math.min(b[0],c[0]);b[1]=Math.min(b[1],c[1])});return b}static getTLSnapPoints(a,b,c){const d=N({},a);a=[0,0];const e=[],f={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},g=["midX","minX","maxX"],h=["midY","minY","maxY"];b=b.map(q=>
{const t=g.flatMap((v,y)=>g.map((u,x)=>{const w=d[v]-q[u];return{f:v,t:u,gap:w,distance:Math.abs(w),isCareful:0===y||3===y+x}})),r=h.flatMap((v,y)=>h.map((u,x)=>{const w=d[v]-q[u];return{f:v,t:u,gap:w,distance:Math.abs(w),isCareful:0===y||3===y+x}}));return[q,t,r]});let k=Infinity,l=Infinity,m=Infinity,p=Infinity;b.forEach(([,q,t])=>{q.forEach(r=>{r.distance<c&&r.distance<m&&(m=r.distance,k=r.gap)});t.forEach(r=>{r.distance<c&&r.distance<p&&(p=r.distance,l=r.gap)})});b.forEach(([q,t,r])=>{Infinity!==
k&&t.forEach(v=>{2>Math.abs(v.gap-k)&&(f[v.f]=V(N({},f[v.f]),{isSnapped:!0,to:q[v.t],B:q,distance:v.distance}))});Infinity!==l&&r.forEach(v=>{2>Math.abs(v.gap-l)&&(f[v.f]=V(N({},f[v.f]),{isSnapped:!0,to:q[v.t],B:q,distance:v.distance}))})});a[0]=Infinity===k?0:k;a[1]=Infinity===l?0:l;d.minX-=a[0];d.midX-=a[0];d.maxX-=a[0];d.minY-=a[1];d.midY-=a[1];d.maxY-=a[1];g.forEach(q=>{q=f[q];if(q.isSnapped){var {id:t,B:r}=q;q=d[t];e.push("minX"===t?[[q,d.midY],[q,r.minY],[q,r.maxY]]:[[q,d.minY],[q,d.maxY],[q,
r.minY],[q,r.maxY]])}});h.forEach(q=>{q=f[q];if(q.isSnapped){var {id:t,B:r}=q;q=d[t];e.push("midY"===t?[[d.midX,q],[r.minX,q],[r.maxX,q]]:[[d.minX,q],[d.maxX,q],[r.minX,q],[r.maxX,q]])}});return{offset:a,snapLines:e}}static ensureRatio(a,b){const {width:c,height:d}=a,e=N({},a);c/d<b?(e.width=d*b,e.maxX+=c-a.width):(e.height=c/b,e.maxY+=d-a.height);return e}static getDistributions(a,b){var c=a.map(f=>{const g=f.getBounds();return{id:f.id,point:[g.minX,g.minY],bounds:g,center:f.getCenter()}});a=c.length;
var d=Y.getCommonBounds(c.map(({bounds:f})=>f));const e=[];switch(b){case "horizontal":b=c.reduce((f,g)=>f+g.bounds.width,0);if(b>d.width){const f=c.sort((l,m)=>l.bounds.minX-m.bounds.minX)[0],g=c.sort((l,m)=>m.bounds.maxX-l.bounds.maxX)[0];d=c.filter(l=>l!==f&&l!==g).sort((l,m)=>l.center[0]-m.center[0]);const h=(g.center[0]-f.center[0])/(a-1),k=f.center[0]+h;d.forEach(({id:l,point:m,bounds:p},q)=>{e.push({id:l,prev:m,next:[k+h*q-p.width/2,p.minY]})})}else{c=c.sort((h,k)=>h.center[0]-k.center[0]);
let f=d.minX;const g=(d.width-b)/(a-1);c.forEach(({id:h,point:k,bounds:l})=>{e.push({id:h,prev:k,next:[f,l.minY]});f+=l.width+g})}break;case "vertical":if(b=c.reduce((f,g)=>f+g.bounds.height,0),b>d.height){const f=c.sort((l,m)=>l.bounds.minY-m.bounds.minY)[0],g=c.sort((l,m)=>m.bounds.maxY-l.bounds.maxY)[0];d=c.filter(l=>l!==f&&l!==g).sort((l,m)=>l.center[1]-m.center[1]);const h=(g.center[1]-f.center[1])/(a-1),k=f.center[1]+h;d.forEach(({id:l,point:m,bounds:p},q)=>{e.push({id:l,prev:m,next:[p.minX,
k+h*q-p.height/2]})})}else{c=c.sort((h,k)=>h.center[1]-k.center[1]);let f=d.minY;const g=(d.height-b)/(a-1);c.forEach(({id:h,point:k,bounds:l})=>{e.push({id:h,prev:k,next:[l.minX,f]});f+=l.height+g})}}return e}static getPackedDistributions(a){const b=Y.getCommonBounds(a.map(({bounds:e})=>e)),c=[b.minX,b.minY],d=Object.fromEntries(a.map(e=>[e.id,[e.bounds.minX,e.bounds.minY]]));a=a.filter(e=>{var f,g,h,k;return!((null==(g=null==(f=e.props.handles)?void 0:f.start)?0:g.bindingId)||(null==(k=null==(h=
e.props.handles)?void 0:h.end)?0:k.bindingId))}).map(e=>{const f=e.getBounds();return{id:e.id,w:f.width+16,h:f.height+16,x:f.minX,y:f.minY}});Bs(a);return a.map(({id:e,x:f,y:g})=>({id:e,prev:d[e],next:[f+c[0],g+c[1]]}))}},he=class{static pointInCircle(a,b,c){return E.dist(a,b)<=c}static pointInEllipse(a,b,c,d,e=0){e=e||0;var f=Math.cos(e);e=Math.sin(e);b=E.sub(a,b);a=f*b[0]+e*b[1];f=e*b[0]-f*b[1];return 1>=a*a/(c*c)+f*f/(d*d)}static pointInRect(a,b){return!(a[0]<b[0]||a[0]>a[0]+b[0]||a[1]<b[1]||a[1]>
a[1]+b[1])}static pointInPolygon(a,b){let c=0;b.forEach((d,e)=>{e=b[(e+1)%b.length];d[1]<=a[1]?e[1]>a[1]&&0<E.cross(d,e,a)&&(c+=1):e[1]<=a[1]&&0>E.cross(d,e,a)&&--c});return 0!==c}static pointInBounds(a,b){return!(a[0]<b.minX||a[0]>b.maxX||a[1]<b.minY||a[1]>b.maxY)}static pointInPolyline(a,b,c=3){for(let d=1;d<b.length;d++)if(E.distanceToLineSegment(b[d-1],b[d],a)<c)return!0;return!1}static _getSqSegDist(a,b,c){let d=b[0];b=b[1];let e=c[0]-d,f=c[1]-b;if(0!==e||0!==f){const g=((a[0]-d)*e+(a[1]-b)*
f)/(e*e+f*f);1<g?(d=c[0],b=c[1]):0<g&&(d+=e*g,b+=f*g)}e=a[0]-d;f=a[1]-b;return e*e+f*f}static _simplifyStep(a,b,c,d,e){let f=d,g=-1;for(let h=b+1;h<c;h++){const k=he._getSqSegDist(a[h],a[b],a[c]);k>f&&(g=h,f=k)}-1<g&&f>d&&(1<g-b&&he._simplifyStep(a,b,g,d,e),e.push(a[g]),1<c-g&&he._simplifyStep(a,g,c,d,e))}static simplify2(a,b=1){if(2>=a.length)return a;b*=b;var c=a[0],d=a[1];const e=[c];for(let f=1,g=a.length;f<g;f++)d=a[f],(d[0]-c[0])*(d[0]-c[0])+(d[1]-c[1])*(d[1]-c[1])>b&&(e.push(d),c=d);c!==d&&
e.push(d);c=e.length-1;d=[e[0]];he._simplifyStep(e,0,c,b,d);d.push(e[c],a[a.length-1]);return d}static pointNearToPolyline(a,b,c=8){const d=b.length;for(let e=1;e<d;e++)if(E.distanceToLineSegment(b[e-1],b[e],a)<c)return!0;return!1}},sb=he;n(sb,"simplify",(a,b=1)=>{var c=a.length;const d=a[0],e=a[c-1],[f,g]=d,[h,k]=e;if(2<c){let l=0,m=0;const p=E.len2([k-g,h-f]);for(let q=1;q<c-1;q++){const [t,r]=a[q],v=Math.pow(t*(k-g)+f*(r-k)+h*(g-r),2)/p;l>v||(l=v,m=q)}if(l>b)return c=he.simplify(a.slice(0,m+1),
b),a=he.simplify(a.slice(m+1),b),c.concat(a.slice(1))}return[d,e]});var vc=Math.PI,Vc=vc/2,Db=2*vc,qh={},rh={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",
background:"grab"},Ob=class{static circleFromThreePoints(a,b,c){const [d,e]=a,[f,g]=b,[h,k]=c;b=d*(g-k)-e*(f-h)+f*k-h*g;a=-((d*d+e*e)*(k-g)+(f*f+g*g)*(e-k)+(h*h+k*k)*(g-e))/(2*b);b=-((d*d+e*e)*(f-h)+(f*f+g*g)*(h-d)+(h*h+k*k)*(d-f))/(2*b);return[a,b,Math.hypot(a-d,b-e)]}static perimeterOfEllipse(a,b){const c=Math.pow(a-b,2)/Math.pow(a+b,2);return vc*(a+b)*(1+3*c/(10+Math.sqrt(4-3*c)))}static shortAngleDist(a,b){a=(b-a)%Db;return 2*a%Db-a}static longAngleDist(a,b){return Db-Ob.shortAngleDist(a,b)}static lerpAngles(a,
b,c){return a+Ob.shortAngleDist(a,b)*c}static angleDelta(a,b){return Ob.shortAngleDist(a,b)}static getSweep(a,b,c){return Ob.angleDelta(L.angle(a,b),L.angle(a,c))}static clampRadians(a){return(Db+a)%Db}static snapAngleToSegments(a,b){b=Db/b;a=Math.floor((Ob.clampRadians(a)+b/2)/b)*b%Db;a<vc&&(a+=Db);a>vc&&(a-=Db);return a}static isAngleBetween(a,b,c){if(c===a||c===b)return!0;b=(b-a+Vc)%Vc;return b<=vc!==(c-a+Vc)%Vc>b}static degreesToRadians(a){return a*vc/180}static radiansToDegrees(a){return 180*
a/vc}static getArcLength(a,b,c,d){a=Ob.getSweep(a,c,d);return a/Db*Db*b}static getSweepFlag(a,b,c){c=L.angle(a,c);return 0<(L.angle(a,b)-c+3*vc)%Db-vc?0:1}static getLargeArcFlag(a,b,c){a=L.angle(c,a);b=(L.angle(c,b)-a+3*vc)%Db-vc;return Math.abs(b)>Vc?0:1}static getArcDashOffset(a,b,c,d,e){const f=Ob.getSweepFlag(a,c,d);b=Ob.getArcLength(a,b,c,d);return-(0>f?b:Db*a[2]-b)/2+e}static getEllipseDashOffset(a,b){return-(Db*a[2])/2+-b}static radiansToCardinalDirection(a){return a<.25*Math.PI?"north":a<
.75*Math.PI?"east":a<1.25*Math.PI?"south":a<1.75*Math.PI?"west":"north"}},wb=class{static getPolygonCentroid(a){var b=a.map(c=>c[0]);a=a.map(c=>c[1]);b=Math.min(...b)+Math.max(...b);a=Math.min(...a)+Math.max(...a);return[b?b/2:0,a?a/2:0]}};n(wb,"getEdges",a=>{const b=a.length;return a.map((c,d)=>[c,a[(d+1)%b]])});n(wb,"getEdgeOutwardNormal",(a,b)=>L.per(L.uni(L.sub(b,a))));n(wb,"getEdgeInwardNormal",(a,b)=>L.neg(wb.getEdgeOutwardNormal(a,b)));n(wb,"getOffsetEdge",(a,b,c)=>{c=L.mul(L.per(L.uni(L.sub(b,
a))),c);return[L.add(a,c),L.add(b,c)]});n(wb,"getOffsetEdges",(a,b)=>a.map(([c,d])=>wb.getOffsetEdge(c,d,b)));n(wb,"getOffsetPolygon",(a,b)=>{if(1>a.length)throw Error("Expected at least one point.");if(1===a.length)return a=a[0],[L.add(a,[-b,-b]),L.add(a,[b,-b]),L.add(a,[b,b]),L.add(a,[-b,b])];if(2===a.length){const [c,d]=a;return[...wb.getOffsetEdge(c,d,b),...wb.getOffsetEdge(d,c,b)]}return wb.getOffsetEdges(wb.getEdges(a),b).flatMap((c,d,e)=>{{d=e[(d+1)%e.length];const f=E.slope(c[0],c[1]);e=E.slope(d[0],
d[1]);f!==e?Number.isNaN(f)&&!Number.isNaN(e)?c=[c[0][0],(c[0][0]-d[0][0])*e+d[0][1]]:Number.isNaN(e)&&!Number.isNaN(f)?c=[d[0][0],(d[0][0]-c[0][0])*f+c[0][1]]:(c=(f*c[0][0]-e*d[0][0]+d[0][1]-c[0][1])/(f-e),c=[c,e*(c-d[0][0])+d[0][1]]):c=void 0}if(void 0===c)throw Error("Expected an intersection");return c})});n(wb,"getPolygonVertices",(a,b,c=0,d=1)=>{a=L.div(a,2);const [e,f]=[Math.max(1,a[0]-c),Math.max(1,a[1]-c)];c=[];for(let l=0,m=Db/b;l<b;l++){var g=(-Vc+l*m)%Db,h=(-Vc+(l+1)*m)%Db;g=L.add(a,[e*
Math.cos(g),f*Math.sin(g)]);h=L.add(a,[e*Math.cos(h),f*Math.sin(h)]);var k=L.med(g,h);k=L.nudge(k,a,L.dist(a,k)*(1-d));c.push(g,k,h)}return c});n(wb,"getTriangleVertices",(a,b=0,c=1)=>{const [d,e]=a;var f=1-c;a=[d/2,b/2];c=[d-b,e-b];b=[b/2,e-b];const g=wb.getPolygonCentroid([a,c,b]),h=L.med(a,c),k=L.med(c,b),l=L.med(b,a),m=L.dist(h,g)*f,p=L.dist(k,g)*f;f*=L.dist(l,g);return[a,m?L.nudge(h,g,m):h,c,p?L.nudge(k,g,p):k,b,f?L.nudge(l,g,f):l]});n(wb,"getStarVertices",(a,b,c,d=1)=>{const e=L.div(b,2),f=
L.mul(e,d/2),g=Db/c/2;return Array.from(Array(2*c)).map((h,k)=>{h=-Vc+k*g;const [l,m]=k%2?f:e;return L.add(a,[l*Math.cos(h),m*Math.sin(h)])})});var Qj=class{static getCurvedPathForPolygon(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const b=["M",...a[0].slice(0,2),"Q"],c=a.length;for(let d=1;d<c;d++){const [e,f]=a[d],[g,h]=a[(d+1)%c];b.push(e,f,(e+g)/2,(f+h)/2)}b.push("Z");return b.join(" ")}static getCurvedPathForPoints(a){if(3>a.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";
const b=["M",...a[0].slice(0,2),"Q"],c=a.length;for(let d=1;d<c-1;d++){const [e,f]=a[d],[g,h]=a[d+1];b.push(e,f,(e+g)/2,(f+h)/2)}return b.join(" ")}static getSvgPathFromStroke(a,b=!0){const c=a.length;if(4>c)return"";let d=a[0],e=a[1];var f=a[2];f=`M${d[0].toFixed(2)},${d[1].toFixed(2)} Q${e[0].toFixed(2)},${e[1].toFixed(2)} ${((e[0]+f[0])/2).toFixed(2)},${((e[1]+f[1])/2).toFixed(2)} T`;for(let g=2,h=c-1;g<h;g++)d=a[g],e=a[g+1],f+=`${((d[0]+e[0])/2).toFixed(2)},${((d[1]+e[1])/2).toFixed(2)} `;b&&
(f+="Z");return f}static getSvgPathFromStrokePoints(a,b=!1){const c=a.length;if(4>c)return"";let d=a[0].point,e=a[1].point;var f=a[2].point;f=`M${d[0].toFixed(2)},${d[1].toFixed(2)} Q${e[0].toFixed(2)},${e[1].toFixed(2)} ${((e[0]+f[0])/2).toFixed(2)},${((e[1]+f[1])/2).toFixed(2)} T`;for(let g=2,h=c-1;g<h;g++)d=a[g].point,e=a[g+1].point,f+=`${((d[0]+e[0])/2).toFixed(2)},${((d[1]+e[1])/2).toFixed(2)} `;b&&(f+="Z");return f}};n(Qj,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var Is=
{},fy=Object.assign,sh=Object.getOwnPropertyDescriptor,cd=Object.defineProperty,zf=Object.prototype,Rj=[];Object.freeze(Rj);var ui={};Object.freeze(ui);var Js="undefined"!==typeof Proxy,Ks=Object.toString(),Ae=function(){},rl="undefined"!==typeof Object.getOwnPropertySymbols,Mg="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:rl?function(a){return Object.getOwnPropertyNames(a).concat(Object.getOwnPropertySymbols(a))}:Object.getOwnPropertyNames,nt=Object.getOwnPropertyDescriptors||function(a){var b=
{};Mg(a).forEach(function(c){b[c]=sh(a,c)});return b},Ac=Symbol("mobx-stored-annotations"),Aa=Symbol("mobx administration"),Bf=function(){function a(c){void 0===c&&(c="Atom");this.name_=void 0;this.isBeingObserved_=this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=Ta.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=c}var b=a.prototype;b.onBO=function(){this.onBOL&&this.onBOL.forEach(function(c){return c()})};b.onBUO=function(){this.onBUOL&&
this.onBUOL.forEach(function(c){return c()})};b.reportObserved=function(){return Ol(this)};b.reportChanged=function(){hc();Pl(this);ic()};b.toString=function(){return this.name_};return a}(),vi=ud("Atom",Bf),Fe={identity:function(a,b){return a===b},structural:function(a,b){return Ai(a,b)},"default":function(a,b){return Object.is?Object.is(a,b):a===b?0!==a||1/a===1/b:a!==a&&b!==b},shallow:function(a,b){return Ai(a,b,1)}},Ns="override",gy=Cl(),eg={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};
Object.freeze(eg);var El=Fg("observable"),hy=Fg("observable.ref",{enhancer:Eg}),iy=Fg("observable.shallow",{enhancer:function(a,b,c){if(void 0===a||null===a||Ge(a)||Jf(a)||wd(a)||Vd(a))return a;if(Array.isArray(a))return ma.array(a,{name:c,deep:!1});if(td(a))return ma.object(a,void 0,{name:c,deep:!1});if(xe(a))return ma.map(a,{name:c,deep:!1});if(yf(a))return ma.set(a,{name:c,deep:!1})}}),jy=Fg("observable.struct",{enhancer:function(a,b){return Ai(a,b)?b:a}}),Po=Mc(El);Object.assign(Dl,Po);var ly=
{box:function(a,b){b=b||eg;return new ie(a,Gg(b),b.name,!0,b.equals)},array:function(a,b){b=b||eg;return(!1===aa.useProxies||!1===b.proxy?wt:rt)(a,Gg(b),b.name)},map:function(a,b){b=b||eg;return new Qo(a,Gg(b),b.name)},set:function(a,b){b=b||eg;return new Ro(a,Gg(b),b.name)},object:function(a,b,c){if(!1===aa.useProxies||!1===(null==c?void 0:c.proxy))c=Lg({},c);else{var d={},e,f;nl();d=Lg(d,c);c=null!=(f=(e=d[Aa]).proxy_)?f:e.proxy_=new Proxy(d,ky)}return mt(c,a,b)},ref:Mc(hy),shallow:Mc(iy),deep:Po,
struct:Mc(jy)},ma=fy(Dl,ly),So=qi("computed"),my=qi("computed.struct",{equals:Fe.structural}),oa=function(a,b){if(Td(b))return Af(a,b,So);if(td(a))return Mc(qi("computed",a));b=td(b)?b:{};b.get=a;b.name||(b.name=a.name||"");return new Hf(b)};Object.assign(oa,So);oa.struct=Mc(my);var To,Uo,Hg=0,$s=1,at=null!=(To=null==(Uo=sh(function(){},"name"))?void 0:Uo.configurable)?To:!1,Fl={value:"action",configurable:!0,writable:!1,enumerable:!1};var ny=Symbol.toPrimitive;var ie=function(a){function b(d,e,f,
g,h){void 0===f&&(f="ObservableValue");void 0===h&&(h=Fe["default"]);g=a.call(this,f)||this;g.enhancer=void 0;g.equals=void 0;g.hasUnreportedChange_=!1;g.interceptors_=void 0;g.changeListeners_=void 0;g.value_=void 0;g.dehancer=void 0;g.enhancer=e;g.name_=f;g.equals=h;g.value_=e(d,void 0,f);return g}ul(b,a);var c=b.prototype;c.dehanceValue=function(d){return void 0!==this.dehancer?this.dehancer(d):d};c.set=function(d){d=this.prepareNewValue_(d);d!==aa.UNCHANGED&&this.setNewValue_(d)};c.prepareNewValue_=
function(d){if(rc(this)){d=sc(this,{object:this,type:Wc,newValue:d});if(!d)return aa.UNCHANGED;d=d.newValue}d=this.enhancer(d,this.value_,this.name_);return this.equals(this.value_,d)?aa.UNCHANGED:d};c.setNewValue_=function(d){var e=this.value_;this.value_=d;this.reportChanged();Bc(this)&&Cc(this,{type:Wc,object:this,newValue:d,oldValue:e})};c.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};c.intercept_=function(d){return Kf(this,d)};c.observe_=function(d,e){e&&d({observableKind:"value",
debugObjectName:this.name_,object:this,type:Wc,newValue:this.value_,oldValue:void 0});return Lf(this,d)};c.raw=function(){return this.value_};c.toJSON=function(){return this.get()};c.toString=function(){return this.name_+"["+this.value_+"]"};c.valueOf=function(){return sl(this.get())};c[ny]=function(){return this.valueOf()};return b}(Bf),pt=ud("ObservableValue",ie);var oy=Symbol.toPrimitive;var Hf=function(){function a(c){this.dependenciesState_=Ta.NOT_TRACKING_;this.observing_=[];this.newObserving_=
null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=Ta.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new Ud(null);this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Ie.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;c.get||Oa(31);this.derivation=c.get;this.name_=
c.name||"ComputedValue";c.set&&(this.setter_=Ce("ComputedValue-setter",c.set));this.equals_=c.equals||(c.compareStructural||c.struct?Fe.structural:Fe["default"]);this.scope_=c.context;this.requiresReaction_=c.requiresReaction;this.keepAlive_=!!c.keepAlive}var b=a.prototype;b.onBecomeStale_=function(){dt(this)};b.onBO=function(){this.onBOL&&this.onBOL.forEach(function(c){return c()})};b.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(c){return c()})};b.get=function(){this.isComputing_&&
Oa(32,this.name_,this.derivation);if(0!==aa.inBatch||0!==this.observers_.size||this.keepAlive_){if(Ol(this),si(this)){var c=aa.trackingContext;this.keepAlive_&&!c&&(aa.trackingContext=this);this.trackAndCompute()&&ct(this);aa.trackingContext=c}}else si(this)&&(this.warnAboutUntrackedRead_(),hc(),this.value_=this.computeValue_(!1),ic());c=this.value_;if(c instanceof Ud)throw c.cause;return c};b.set=function(c){if(this.setter_){this.isRunningSetter_&&Oa(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,
c)}finally{this.isRunningSetter_=!1}}else Oa(34,this.name_)};b.trackAndCompute=function(){var c=this.value_,d=this.dependenciesState_===Ta.NOT_TRACKING_,e=this.computeValue_(!0);if(c=d||c instanceof Ud||e instanceof Ud||!this.equals_(c,e))this.value_=e;return c};b.computeValue_=function(c){this.isComputing_=!0;var d=Ff(!1);if(c)var e=Il(this,this.derivation,this.scope_);else if(!0===aa.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(f){e=
new Ud(f)}aa.allowStateChanges=d;this.isComputing_=!1;return e};b.suspend_=function(){this.keepAlive_||(ti(this),this.value_=void 0)};b.observe_=function(c,d){var e=this,f=!0,g=void 0;return If(function(){var h=e.get();if(!f||d){var k=De();c({observableKind:"computed",debugObjectName:e.name_,type:Wc,object:e,newValue:h,oldValue:g});aa.trackingDerivation=k}f=!1;g=h})};b.warnAboutUntrackedRead_=function(){};b.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};b.valueOf=function(){return sl(this.get())};
b[oy]=function(){return this.valueOf()};return a}(),Gf=ud("ComputedValue",Hf),Ta;(function(a){a[a.NOT_TRACKING_=-1]="NOT_TRACKING_";a[a.UP_TO_DATE_=0]="UP_TO_DATE_";a[a.POSSIBLY_STALE_=1]="POSSIBLY_STALE_";a[a.STALE_=2]="STALE_"})(Ta||={});var Ie;(function(a){a[a.NONE=0]="NONE";a[a.LOG=1]="LOG";a[a.BREAK=2]="BREAK"})(Ie||={});var Ud=function(a){this.cause=void 0;this.cause=a},Jg=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=
this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},Ig=!0,Ll=!1,aa=function(){var a=ki();0<a.__mobxInstanceCount&&!a.__mobxGlobals&&
(Ig=!1);a.__mobxGlobals&&a.__mobxGlobals.version!==(new Jg).version&&(Ig=!1);if(Ig){if(a.__mobxGlobals)return a.__mobxInstanceCount+=1,a.__mobxGlobals.UNCHANGED||(a.__mobxGlobals.UNCHANGED={}),a.__mobxGlobals;a.__mobxInstanceCount=1;return a.__mobxGlobals=new Jg}setTimeout(function(){Ll||Oa(35)},1);return new Jg}(),Ee=function(){function a(c,d,e,f){void 0===c&&(c="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=
Ta.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Ie.NONE;this.name_=c;this.onInvalidate_=d;this.errorHandler_=e;this.requiresObservable_=f}var b=a.prototype;b.onBecomeStale_=function(){this.schedule_()};b.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,aa.pendingReactions.push(this),0<aa.inBatch||aa.isRunningReactions||Kg(Nl))};b.isScheduled=function(){return this.isScheduled_};
b.runReaction_=function(){if(!this.isDisposed_){hc();this.isScheduled_=!1;var c=aa.trackingContext;aa.trackingContext=this;if(si(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(d){this.reportExceptionInDerivation_(d)}}aa.trackingContext=c;ic()}};b.track=function(c){if(!this.isDisposed_){hc();this.isRunning_=!0;var d=aa.trackingContext;aa.trackingContext=this;c=Il(this,c,void 0);aa.trackingContext=d;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&ti(this);c instanceof Ud&&this.reportExceptionInDerivation_(c.cause);
ic()}};b.reportExceptionInDerivation_=function(c){var d=this;if(this.errorHandler_)this.errorHandler_(c,this);else{if(aa.disableErrorBoundaries)throw c;aa.suppressReactionErrors||console.error("[mobx] uncaught error in '"+this+"'",c);aa.globalReactionErrorHandlers.forEach(function(e){return e(c,d)})}};b.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(hc(),ti(this),ic()))};b.getDisposer_=function(){var c=this.dispose.bind(this);c[Aa]=this;return c};b.toString=function(){return"Reaction["+
this.name_+"]"};b.trace=function(c){void 0===c&&(c=!1);qt(this,c)};return a}(),et=100,Kg=function(a){return a()},Ng=ud("Reaction",Ee),Tl="action",Sl=Ef(Tl),py=Ef("action.bound",{bound:!0}),Rl=Ef("autoAction",{autoAction:!0}),qy=Ef("autoAction.bound",{autoAction:!0,bound:!0}),ja=Ql(!1);Object.assign(ja,Sl);var Df=Ql(!0);Object.assign(Df,Rl);ja.bound=Mc(py);Df.bound=Mc(qy);var ht=function(a){return a()},Ps="onBO",kt="onBUO",ry=0;Wl.prototype=Object.create(Error.prototype);var Vo=Al("flow"),sy=Al("flow.bound",
{bound:!0}),Cf=Object.assign(function(a,b){if(Td(b))return Af(a,b,Vo);var c=a.name||"\x3cunnamed flow\x3e";b=function(){var d=arguments,e=++ry,f=ja(c+" - runid: "+e+" - init",a).apply(this,d),g,h=void 0;d=new Promise(function(k,l){function m(r){h=void 0;try{var v=ja(c+" - runid: "+e+" - yield "+t++,f.next).call(f,r)}catch(y){return l(y)}q(v)}function p(r){h=void 0;try{var v=ja(c+" - runid: "+e+" - yield "+t++,f["throw"]).call(f,r)}catch(y){return l(y)}q(v)}function q(r){if(qc(null==r?void 0:r.then))r.then(q,
l);else{if(r.done)return k(r.value);h=Promise.resolve(r.value);return h.then(m,p)}}var t=0;g=l;m(void 0)});d.cancel=ja(c+" - runid: "+e+" - cancel",function(){try{if(h){var k=h;qc(k.cancel)&&k.cancel()}var l=f["return"](void 0),m=Promise.resolve(l.value);m.then(Ae,Ae);qc(m.cancel)&&m.cancel();g(new Wl)}catch(p){g(p)}});return d};b.isMobXFlow=!0;return b},Vo);Cf.bound=Mc(sy);var ky={has:function(a,b){return a[Aa].has_(b)},get:function(a,b){return a[Aa].get_(b)},set:function(a,b,c){var d;return Td(b)?
null!=(d=a[Aa].set_(b,c,!0))?d:!0:!1},deleteProperty:function(a,b){var c;return Td(b)?null!=(c=a[Aa].delete_(b,!0))?c:!0:!1},defineProperty:function(a,b,c){var d;return null!=(d=a[Aa].defineProperty_(b,c))?d:!0},ownKeys:function(a){return a[Aa].ownKeys_()},preventExtensions:function(a){Oa(13)}},Wc="update",st={get:function(a,b){var c=a[Aa];return b===Aa?c:"length"===b?c.getArrayLength_():"string"!==typeof b||isNaN(b)?dd(Pg,b)?Pg[b]:a[b]:c.get_(parseInt(b))},set:function(a,b,c){var d=a[Aa];"length"===
b&&d.setArrayLength_(c);"symbol"===typeof b||isNaN(b)?a[b]=c:d.set_(parseInt(b),c);return!0},preventExtensions:function(){Oa(15)}},wi=function(){function a(c,d,e,f){void 0===c&&(c="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=e;this.legacyMode_=f;this.atom_=new Bf(c);this.enhancer_=function(g,h){return d(g,h,"ObservableArray[..]")}}var b=
a.prototype;b.dehanceValue_=function(c){return void 0!==this.dehancer?this.dehancer(c):c};b.dehanceValues_=function(c){return void 0!==this.dehancer&&0<c.length?c.map(this.dehancer):c};b.intercept_=function(c){return Kf(this,c)};b.observe_=function(c,d){void 0===d&&(d=!1);d&&c({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Lf(this,c)};b.getArrayLength_=function(){this.atom_.reportObserved();
return this.values_.length};b.setArrayLength_=function(c){("number"!==typeof c||isNaN(c)||0>c)&&Oa("Out of range: "+c);var d=this.values_.length;if(c!==d)if(c>d){for(var e=Array(c-d),f=0;f<c-d;f++)e[f]=void 0;this.spliceWithArray_(d,0,e)}else this.spliceWithArray_(c,d-c)};b.updateArrayLength_=function(c,d){c!==this.lastKnownLength_&&Oa(16);this.lastKnownLength_+=d;this.legacyMode_&&0<d&&bm(c+d+1)};b.spliceWithArray_=function(c,d,e){var f=this,g=this.values_.length;void 0===c?c=0:c>g?c=g:0>c&&(c=Math.max(0,
g+c));d=1===arguments.length?g-c:void 0===d||null===d?0:Math.max(0,Math.min(d,g-c));void 0===e&&(e=Rj);if(rc(this)){var h=sc(this,{object:this.proxy_,type:"splice",index:c,removedCount:d,added:e});if(!h)return Rj;d=h.removedCount;e=h.added}e=0===e.length?e:e.map(function(k){return f.enhancer_(k,void 0)});this.legacyMode_&&this.updateArrayLength_(g,e.length-d);g=this.spliceItemsIntoValues_(c,d,e);0===d&&0===e.length||this.notifyArraySplice_(c,e,g);return this.dehanceValues_(g)};b.spliceItemsIntoValues_=
function(c,d,e){if(1E4>e.length){var f;return(f=this.values_).splice.apply(f,[c,d].concat(e))}f=this.values_.slice(c,c+d);var g=this.values_.slice(c+d);this.values_.length+=e.length-d;for(d=0;d<e.length;d++)this.values_[c+d]=e[d];for(d=0;d<g.length;d++)this.values_[c+e.length+d]=g[d];return f};b.notifyArrayChildUpdate_=function(c,d,e){var f=!this.owned_&&!1,g=Bc(this);c=g||f?{observableKind:"array",object:this.proxy_,type:Wc,debugObjectName:this.atom_.name_,index:c,newValue:d,oldValue:e}:null;this.atom_.reportChanged();
g&&Cc(this,c)};b.notifyArraySplice_=function(c,d,e){var f=!this.owned_&&!1,g=Bc(this);c=g||f?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:c,removed:e,added:d,removedCount:e.length,addedCount:d.length}:null;this.atom_.reportChanged();g&&Cc(this,c)};b.get_=function(c){if(this.legacyMode_&&c>=this.values_.length)console.warn("[mobx] Out of bounds read: "+c);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[c])};b.set_=function(c,
d){var e=this.values_;this.legacyMode_&&c>e.length&&Oa(17,c,e.length);if(c<e.length){var f=e[c];if(rc(this)){d=sc(this,{type:Wc,object:this.proxy_,index:c,newValue:d});if(!d)return;d=d.newValue}d=this.enhancer_(d,f);d!==f&&(e[c]=d,this.notifyArrayChildUpdate_(c,d,f))}else{c=Array(c+1-e.length);for(f=0;f<c.length-1;f++)c[f]=void 0;c[c.length-1]=d;this.spliceWithArray_(e.length,0,c)}};return a}(),Pg={clear:function(){return this.splice(0)},replace:function(a){var b=this[Aa];return b.spliceWithArray_(0,
b.values_.length,a)},toJSON:function(){return this.slice()},splice:function(a,b){for(var c=arguments.length,d=Array(2<c?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];c=this[Aa];switch(arguments.length){case 0:return[];case 1:return c.spliceWithArray_(a);case 2:return c.spliceWithArray_(a,b)}return c.spliceWithArray_(a,b,d)},spliceWithArray:function(a,b,c){return this[Aa].spliceWithArray_(a,b,c)},push:function(){for(var a=this[Aa],b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.spliceWithArray_(a.values_.length,
0,c);return a.values_.length},pop:function(){return this.splice(Math.max(this[Aa].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var a=this[Aa],b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];a.spliceWithArray_(0,0,c);return a.values_.length},reverse:function(){aa.trackingDerivation&&Oa(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){aa.trackingDerivation&&Oa(37,"sort");var a=this.slice();a.sort.apply(a,arguments);
this.replace(a);return this},remove:function(a){var b=this[Aa];a=b.dehanceValues_(b.values_).indexOf(a);return-1<a?(this.splice(a,1),!0):!1}};Ab("concat",ed);Ab("flat",ed);Ab("includes",ed);Ab("indexOf",ed);Ab("join",ed);Ab("lastIndexOf",ed);Ab("slice",ed);Ab("toString",ed);Ab("toLocaleString",ed);Ab("every",xd);Ab("filter",xd);Ab("find",xd);Ab("findIndex",xd);Ab("flatMap",xd);Ab("forEach",xd);Ab("map",xd);Ab("some",xd);Ab("reduce",Xl);Ab("reduceRight",Xl);var tt=ud("ObservableArrayAdministration",
wi),ty={};var uy=Symbol.iterator;var vy=Symbol.toStringTag;var Qo=function(){function a(c,d,e){var f=this;void 0===d&&(d=Be);void 0===e&&(e="ObservableMap");this.name_=this.enhancer_=void 0;this[Aa]=ty;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=d;this.name_=e;qc(Map)||Oa(18);this.keysAtom_=wl("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Gl(!0,function(){f.merge(c)})}var b=a.prototype;b.has_=function(c){return this.data_.has(c)};
b.has=function(c){var d=this;if(!aa.trackingDerivation)return this.has_(c);var e=this.hasMap_.get(c);if(!e){var f=e=new ie(this.has_(c),Eg,"ObservableMap.key?",!1);this.hasMap_.set(c,f);yl(f,function(){return d.hasMap_["delete"](c)})}return e.get()};b.set=function(c,d){var e=this.has_(c);if(rc(this)){d=sc(this,{type:e?Wc:"add",object:this,newValue:d,name:c});if(!d)return this;d=d.newValue}e?this.updateValue_(c,d):this.addValue_(c,d);return this};b["delete"]=function(c){var d=this;if(rc(this)&&!sc(this,
{type:"delete",object:this,name:c}))return!1;if(this.has_(c)){var e=Bc(this),f=e?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(c).value_,name:c}:null;zb(function(){var g;d.keysAtom_.reportChanged();null==(g=d.hasMap_.get(c))?void 0:g.setNewValue_(!1);d.data_.get(c).setNewValue_(void 0);d.data_["delete"](c)});e&&Cc(this,f);return!0}return!1};b.updateValue_=function(c,d){var e=this.data_.get(c);d=e.prepareNewValue_(d);if(d!==aa.UNCHANGED){var f=Bc(this);
c=f?{observableKind:"map",debugObjectName:this.name_,type:Wc,object:this,oldValue:e.value_,name:c,newValue:d}:null;e.setNewValue_(d);f&&Cc(this,c)}};b.addValue_=function(c,d){var e=this;zb(function(){var h,k=new ie(d,e.enhancer_,"ObservableMap.key",!1);e.data_.set(c,k);d=k.value_;null==(h=e.hasMap_.get(c))?void 0:h.setNewValue_(!0);e.keysAtom_.reportChanged()});var f=Bc(this),g=f?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:c,newValue:d}:null;f&&Cc(this,g)};b.get=function(c){return this.has(c)?
this.dehanceValue_(this.data_.get(c).get()):this.dehanceValue_(void 0)};b.dehanceValue_=function(c){return void 0!==this.dehancer?this.dehancer(c):c};b.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};b.values=function(){var c=this,d=this.keys();return Mf({next:function(){var e=d.next(),f=e.done;e=e.value;return{done:f,value:f?void 0:c.get(e)}}})};b.entries=function(){var c=this,d=this.keys();return Mf({next:function(){var e=d.next(),f=e.done;e=e.value;return{done:f,value:f?
void 0:[e,c.get(e)]}}})};b[uy]=function(){return this.entries()};b.forEach=function(c,d){for(var e=ze(this),f;!(f=e()).done;)f=f.value,c.call(d,f[1],f[0],this)};b.merge=function(c){var d=this;wd(c)&&(c=new Map(c));zb(function(){td(c)?Ls(c).forEach(function(e){return d.set(e,c[e])}):Array.isArray(c)?c.forEach(function(e){return d.set(e[0],e[1])}):xe(c)?(c.constructor!==Map&&Oa(19,c),c.forEach(function(e,f){return d.set(f,e)})):null!==c&&void 0!==c&&Oa(20,c)});return this};b.clear=function(){var c=
this;zb(function(){Kl(function(){for(var d=ze(c.keys()),e;!(e=d()).done;)c["delete"](e.value)})})};b.replace=function(c){var d=this;zb(function(){for(var e=ut(c),f=new Map,g=!1,h=ze(d.data_.keys()),k;!(k=h()).done;)if(k=k.value,!e.has(k))if(d["delete"](k))g=!0;else{var l=d.data_.get(k);f.set(k,l)}for(e=ze(e.entries());!(h=e()).done;)k=h.value,h=k[0],l=k[1],k=d.data_.has(h),d.set(h,l),d.data_.has(h)&&(l=d.data_.get(h),f.set(h,l),k||(g=!0));if(!g)if(d.data_.size!==f.size)d.keysAtom_.reportChanged();
else for(g=d.data_.keys(),e=f.keys(),h=g.next(),k=e.next();!h.done;){if(h.value!==k.value){d.keysAtom_.reportChanged();break}h=g.next();k=e.next()}d.data_=f});return this};b.toString=function(){return"[object ObservableMap]"};b.toJSON=function(){return Array.from(this)};b.observe_=function(c,d){return Lf(this,c)};b.intercept_=function(c){return Kf(this,c)};li(a,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:vy,get:function(){return"Map"}}]);return a}(),wd=
ud("ObservableMap",Qo),wy={};var xy=Symbol.iterator;var yy=Symbol.toStringTag;var Ro=function(){function a(c,d,e){void 0===d&&(d=Be);void 0===e&&(e="ObservableSet");this.name_=void 0;this[Aa]=wy;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=e;qc(Set)||Oa(22);this.atom_=wl(this.name_);this.enhancer_=function(f,g){return d(f,g,e)};c&&this.replace(c)}var b=a.prototype;b.dehanceValue_=function(c){return void 0!==this.dehancer?this.dehancer(c):
c};b.clear=function(){var c=this;zb(function(){Kl(function(){for(var d=ze(c.data_.values()),e;!(e=d()).done;)c["delete"](e.value)})})};b.forEach=function(c,d){for(var e=ze(this),f;!(f=e()).done;)f=f.value,c.call(d,f,f,this)};b.add=function(c){var d=this;if(rc(this)&&!sc(this,{type:"add",object:this,newValue:c}))return this;if(!this.has(c)){zb(function(){d.data_.add(d.enhancer_(c,void 0));d.atom_.reportChanged()});var e=Bc(this),f=e?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:c}:null;e&&Cc(this,f)}return this};b["delete"]=function(c){var d=this;if(rc(this)&&!sc(this,{type:"delete",object:this,oldValue:c}))return!1;if(this.has(c)){var e=Bc(this),f=e?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:c}:null;zb(function(){d.atom_.reportChanged();d.data_["delete"](c)});e&&Cc(this,f);return!0}return!1};b.has=function(c){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(c))};b.entries=function(){var c=0,d=Array.from(this.keys()),
e=Array.from(this.values());return Mf({next:function(){var f=c;c+=1;return f<e.length?{value:[d[f],e[f]],done:!1}:{done:!0}}})};b.keys=function(){return this.values()};b.values=function(){this.atom_.reportObserved();var c=this,d=0,e=Array.from(this.data_.values());return Mf({next:function(){return d<e.length?{value:c.dehanceValue_(e[d++]),done:!1}:{done:!0}}})};b.replace=function(c){var d=this;Vd(c)&&(c=new Set(c));zb(function(){Array.isArray(c)?(d.clear(),c.forEach(function(e){return d.add(e)})):
yf(c)?(d.clear(),c.forEach(function(e){return d.add(e)})):null!==c&&void 0!==c&&Oa("Cannot initialize set from "+c)});return this};b.observe_=function(c,d){return Lf(this,c)};b.intercept_=function(c){return Kf(this,c)};b.toJSON=function(){return Array.from(this)};b.toString=function(){return"[object ObservableSet]"};b[xy]=function(){return this.values()};li(a,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:yy,get:function(){return"Set"}}]);return a}(),Vd=ud("ObservableSet",
Ro),$l=Object.create(null),Yl=function(){function a(c,d,e,f){void 0===d&&(d=new Map);void 0===f&&(f=gy);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=c;this.values_=d;this.name_=e;this.defaultAnnotation_=f;this.keysAtom_=new Bf("ObservableObject.keys");this.isPlainObject_=td(this.target_)}var b=a.prototype;b.getObservablePropValue_=function(c){return this.values_.get(c).get()};
b.setObservablePropValue_=function(c,d){var e=this.values_.get(c);if(e instanceof Hf)return e.set(d),!0;if(rc(this)){d=sc(this,{type:Wc,object:this.proxy_||this.target_,name:c,newValue:d});if(!d)return null;d=d.newValue}d=e.prepareNewValue_(d);if(d!==aa.UNCHANGED){var f=Bc(this);c=f?{type:Wc,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:e.value_,name:c,newValue:d}:null;e.setNewValue_(d);f&&Cc(this,c)}return!0};b.get_=function(c){aa.trackingDerivation&&
!dd(this.target_,c)&&this.has_(c);return this.target_[c]};b.set_=function(c,d,e){void 0===e&&(e=!1);if(dd(this.target_,c)){if(this.values_.has(c))return this.setObservablePropValue_(c,d);if(e)return Reflect.set(this.target_,c,d);this.target_[c]=d;return!0}return this.extend_(c,{value:d,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,e)};b.has_=function(c){if(!aa.trackingDerivation)return c in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var d=this.pendingKeys_.get(c);
d||(d=new ie(c in this.target_,Eg,"ObservableObject.key?",!1),this.pendingKeys_.set(c,d));return d.get()};b.make_=function(c,d){!0===d&&(d=this.defaultAnnotation_);if(!1!==d){if(!(c in this.target_)){var e;if(null!=(e=this.target_[Ac])&&e[c])return;Oa(1,d.annotationType_,this.name_+"."+c.toString())}for(e=this.target_;e&&e!==zf;){var f=sh(e,c);if(f){f=d.make_(this,c,f,e);if(0===f)return;if(1===f)break}e=Object.getPrototypeOf(e)}var g;null==(g=this.target_[Ac])?!0:delete g[c]}};b.extend_=function(c,
d,e,f){void 0===f&&(f=!1);!0===e&&(e=this.defaultAnnotation_);if(!1===e)return this.defineProperty_(c,d,f);if(d=e.extend_(this,c,d,f)){var g;null==(g=this.target_[Ac])?!0:delete g[c]}return d};b.defineProperty_=function(c,d,e){void 0===e&&(e=!1);try{hc();var f=this.delete_(c);if(!f)return f;if(rc(this)){var g=sc(this,{object:this.proxy_||this.target_,name:c,type:"add",newValue:d.value});if(!g)return null;var h=g.newValue;d.value!==h&&(d=ye({},d,{value:h}))}if(e){if(!Reflect.defineProperty(this.target_,
c,d))return!1}else cd(this.target_,c,d);this.notifyPropertyAddition_(c,d.value)}finally{ic()}return!0};b.defineObservableProperty_=function(c,d,e,f){void 0===f&&(f=!1);try{hc();var g=this.delete_(c);if(!g)return g;if(rc(this)){var h=sc(this,{object:this.proxy_||this.target_,name:c,type:"add",newValue:d});if(!h)return null;d=h.newValue}var k=Zl(c),l={configurable:aa.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:k.get,set:k.set};if(f){if(!Reflect.defineProperty(this.target_,c,l))return!1}else cd(this.target_,
c,l);var m=new ie(d,e,"ObservableObject.key",!1);this.values_.set(c,m);this.notifyPropertyAddition_(c,m.value_)}finally{ic()}return!0};b.defineComputedProperty_=function(c,d,e){void 0===e&&(e=!1);try{hc();var f=this.delete_(c);if(!f)return f;if(rc(this)&&!sc(this,{object:this.proxy_||this.target_,name:c,type:"add",newValue:void 0}))return null;d.name||(d.name="ObservableObject.key");d.context=this.proxy_||this.target_;var g=Zl(c),h={configurable:aa.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,
get:g.get,set:g.set};if(e){if(!Reflect.defineProperty(this.target_,c,h))return!1}else cd(this.target_,c,h);this.values_.set(c,new Hf(d));this.notifyPropertyAddition_(c,void 0)}finally{ic()}return!0};b.delete_=function(c,d){void 0===d&&(d=!1);if(!dd(this.target_,c))return!0;if(rc(this)&&!sc(this,{object:this.proxy_||this.target_,name:c,type:"remove"}))return null;try{var e,f;hc();var g=Bc(this),h=this.values_.get(c),k=void 0;if(!h&&g){var l;k=null==(l=sh(this.target_,c))?void 0:l.value}if(d){if(!Reflect.deleteProperty(this.target_,
c))return!1}else delete this.target_[c];h&&(this.values_["delete"](c),h instanceof ie&&(k=h.value_),Pl(h));this.keysAtom_.reportChanged();null==(e=this.pendingKeys_)?void 0:null==(f=e.get(c))?void 0:f.set(c in this.target_);if(g){var m={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:k,name:c};g&&Cc(this,m)}}finally{ic()}return!0};b.observe_=function(c,d){return Lf(this,c)};b.intercept_=function(c){return Kf(this,c)};b.notifyPropertyAddition_=
function(c,d){var e,f,g=Bc(this);g&&(d=g?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:c,newValue:d}:null,g&&Cc(this,d));null==(e=this.pendingKeys_)?void 0:null==(f=e.get(c))?void 0:f.set(!0);this.keysAtom_.reportChanged()};b.ownKeys_=function(){this.keysAtom_.reportObserved();return Mg(this.target_)};b.keys_=function(){this.keysAtom_.reportObserved();return Object.keys(this.target_)};return a}(),vt=ud("ObservableObjectAdministration",Yl),zy=
am(0),xi=0,Wo=function(){};(function(a,b){Object.setPrototypeOf?Object.setPrototypeOf(a.prototype,b):void 0!==a.prototype.__proto__?a.prototype.__proto__=b:a.prototype=b})(Wo,Array.prototype);var yi=function(a,b,c){function d(f,g,h,k){void 0===h&&(h="ObservableArray");void 0===k&&(k=!1);var l=a.call(this)||this;g=new wi(h,g,k,!0);g.proxy_=ni(l);ql(ni(l),Aa,g);f&&f.length&&(g=Ff(!0),l.spliceWithArray(0,0,f),aa.allowStateChanges=g);Object.defineProperty(ni(l),"0",zy);return l}ul(d,a);var e=d.prototype;
e.concat=function(){this[Aa].atom_.reportObserved();for(var f=arguments.length,g=Array(f),h=0;h<f;h++)g[h]=arguments[h];return Array.prototype.concat.apply(this.slice(),g.map(function(k){return Jf(k)?k.slice():k}))};e[c]=function(){var f=this,g=0;return Mf({next:function(){return g<f.length?{value:f[g++],done:!1}:{done:!0,value:void 0}}})};li(d,[{key:"length",get:function(){return this[Aa].getArrayLength_()},set:function(f){this[Aa].setArrayLength_(f)}},{key:b,get:function(){return"Array"}}]);return d}(Wo,
Symbol.toStringTag,Symbol.iterator);Object.entries(Pg).forEach(function(a){var b=a[0];a=a[1];"concat"!==b&&Cg(yi.prototype,b,a)});bm(1E3);var dm=zf.toString;["Symbol","Map","Set"].forEach(function(a){"undefined"===typeof ki()[a]&&Oa("MobX requires global '"+a+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:gt,extras:{getDebugName:zi},$mobx:Aa});var Ay=F(589),Eb=class{constructor(a){n(this,"props");n(this,"aspectRatio");
n(this,"type");n(this,"hideCloneHandles",!1);n(this,"hideResizeHandles",!1);n(this,"hideRotateHandle",!1);n(this,"hideContextBar",!1);n(this,"hideSelectionDetail",!1);n(this,"hideSelection",!1);n(this,"canChangeAspectRatio",!0);n(this,"canUnmount",!0);n(this,"canResize",[!0,!0]);n(this,"canScale",!0);n(this,"canFlip",!0);n(this,"canEdit",!1);n(this,"canBind",!1);n(this,"nonce");n(this,"bindingDistance",4);n(this,"isDirty",!1);n(this,"lastSerialized");n(this,"getCenter",()=>Y.getBoundsCenter(this.bounds));
n(this,"getRotatedBounds",()=>{const {bounds:f,props:{rotation:g}}=this;return g?Y.getBoundsFromPoints(Y.getRotatedCorners(f,g)):f});n(this,"hitTestPoint",f=>{var g=this.rotatedBounds;if(!this.props.rotation)return sb.pointInBounds(f,g);g=Y.getRotatedCorners(g,this.props.rotation);return sb.pointInPolygon(f,g)});n(this,"hitTestLineSegment",(f,g)=>{const h=Y.getBoundsFromPoints([f,g]),{rotatedBounds:k,props:{rotation:l=0}}=this;return Y.boundsContain(k,h)||l?xf(f,g,Y.getRotatedCorners(this.bounds)).didIntersect:
0<ji(k,f,g).length});n(this,"hitTestBounds",f=>{const {rotatedBounds:g,props:{rotation:h=0}}=this,k=Y.getRotatedCorners(this.bounds,h);return Y.boundsContain(f,g)||0<ml([f.minX,f.minY],[f.width,f.height],k).length});n(this,"getExpandedBounds",()=>Y.expandBounds(this.getBounds(),this.bindingDistance));n(this,"getBindingPoint",(f,g,h,k)=>{var l=this.getBounds(),m=this.getExpandedBounds();if(sb.pointInBounds(f,m)){var p=Ag(g,h,m).filter(q=>q.didIntersect).map(q=>q.points[0]);if(p.length)return h=this.getCenter(),
p=p.sort((q,t)=>L.dist(t,g)-L.dist(q,g))[0],p=L.med(f,p),k?(k=2>L.dist(f,h)?h:f,l=0):(k=2>L.distanceToLineSegment(f,p,h)?h:p,l=sb.pointInBounds(f,l)?this.bindingDistance:Math.max(this.bindingDistance,Y.getBoundsSides(l).map(q=>L.distanceToLineSegment(q[1][0],q[1][1],f)).sort((q,t)=>q-t)[0])),m=L.divV(L.sub(k,[m.minX,m.minY]),[m.width,m.height]),{point:L.clampV(m,0,1),distance:l}}});n(this,"getSerialized",()=>Wd(V(N({},this.props),{type:this.type,nonce:this.nonce})));n(this,"getCachedSerialized",()=>
{!this.isDirty&&this.lastSerialized||zb(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});n(this,"validateProps",f=>f);n(this,"update",(f,g=!1,h=!1)=>{g||this.isDirty||this.setIsDirty(!0);g||h||this.incNonce();Object.assign(this.props,this.validateProps(f));return this});n(this,"clone",()=>new this.constructor(this.serialized));n(this,"onResetBounds",f=>this);n(this,
"scale",[1,1]);n(this,"onResizeStart",f=>{var g;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this});n(this,"onResize",(f,g)=>{const {bounds:h,rotation:k,scale:[l,m]}=g;f=[...this.scale];0>l&&(f[0]*=-1);0>m&&(f[1]*=-1);this.update({point:[h.minX,h.minY],scale:f,rotation:k});return this});n(this,"onHandleChange",(f,{id:g,delta:h})=>{if(void 0!==f.handles){var k=je(f.handles);k[g]=V(N({},k[g]),{point:L.add(h,f.handles[g].point)});var l=Y.getCommonTopLeft(Object.values(k).map(m=>m.point));
Object.values(k).forEach(m=>{m.point=L.sub(m.point,l)});this.update({point:L.add(f.point,l),handles:k})}});var b,c;const d=this.constructor.id,e=null!=(b=this.constructor.defaultProps)?b:{};this.type=d;this.props=N(N({scale:[1,1]},e),a);this.nonce=null!=(c=a.nonce)?c:Date.now();kb(this)}get id(){return this.props.id}setNonce(a){this.nonce=a}incNonce(){this.nonce++}setIsDirty(a){this.isDirty=a}setLastSerialized(a){this.lastSerialized=a}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(a){a=
this.getBounds();const {stroke:b,strokeWidth:c,strokeType:d,opacity:e,fill:f,noFill:g,borderRadius:h}=this.props;return(0,Ay.jsx)("rect",{fill:g?"none":Ya(f,"background"),stroke:Ya(b,"stroke"),strokeWidth:null!=c?c:2,strokeDasharray:"dashed"===d?"8 2":void 0,fillOpacity:null!=e?e:.2,width:a.width,height:a.height,rx:h,ry:h})}};n(Eb,"type");M([ma],Eb.prototype,"props",2);M([ma],Eb.prototype,"canResize",2);M([ma],Eb.prototype,"nonce",2);M([ma],Eb.prototype,"isDirty",2);M([ma],Eb.prototype,"lastSerialized",
2);M([oa],Eb.prototype,"id",1);M([ja],Eb.prototype,"setNonce",1);M([ja],Eb.prototype,"incNonce",1);M([ja],Eb.prototype,"setIsDirty",1);M([ja],Eb.prototype,"setLastSerialized",1);M([oa],Eb.prototype,"center",1);M([oa],Eb.prototype,"bounds",1);M([oa],Eb.prototype,"rotatedBounds",1);M([oa],Eb.prototype,"serialized",1);M([ja],Eb.prototype,"update",2);var Sb=class extends Eb{constructor(a={}){super(a);n(this,"canBind",!0);n(this,"getBounds",()=>{const [b,c]=this.props.point,[d,e]=this.props.size;return{minX:b,
minY:c,maxX:b+d,maxY:c+e,width:d,height:e}});n(this,"getRotatedBounds",()=>Y.getBoundsFromPoints(Y.getRotatedCorners(this.bounds,this.props.rotation)));n(this,"onResize",(b,c)=>{const {bounds:d,rotation:e,scale:[f,g]}=c;b=[...this.scale];0>f&&(b[0]*=-1);0>g&&(b[1]*=-1);this.update({point:[d.minX,d.minY],scale:b,rotation:e});return this.update({rotation:e,point:[d.minX,d.minY],size:[Math.max(1,d.width),Math.max(1,d.height)],scale:b})});n(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],
1),b.size[1]=Math.max(b.size[1],1));return b});kb(this)}};n(Sb,"id","box");n(Sb,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var We=class extends Eb{constructor(a={}){super(a);n(this,"getBounds",()=>{const {pointBounds:b,props:{point:c}}=this;return Y.translateBounds(b,c)});n(this,"getRotatedBounds",()=>{const {props:{rotation:b,point:c},bounds:d,rotatedPoints:e}=this;return b?Y.translateBounds(Y.getBoundsFromPoints(e),c):d});n(this,"normalizedPoints",[]);n(this,
"isResizeFlippedX",!1);n(this,"isResizeFlippedY",!1);n(this,"onResizeStart",()=>{var b;const {bounds:c,props:{points:d}}=this;this.scale=[...(null!=(b=this.props.scale)?b:[1,1])];const e=[c.width,c.height];this.normalizedPoints=d.map(f=>E.divV(f,e));return this});n(this,"onResize",(b,c)=>{const {bounds:d,scale:[e,f]}=c,g=[d.width,d.height];b=[...this.scale];0>e&&(b[0]*=-1);0>f&&(b[1]*=-1);return this.update(e||f?{point:[d.minX,d.minY],points:this.normalizedPoints.map(h=>E.mulV(h,g).concat(h[2])),
scale:b}:{point:[d.minX,d.minY],points:this.normalizedPoints.map(h=>E.mulV(h,g).concat(h[2]))})});n(this,"hitTestPoint",b=>{const {props:{points:c,point:d}}=this;return sb.pointNearToPolyline(E.sub(b,d),c)});n(this,"hitTestLineSegment",(b,c)=>{const {bounds:d,props:{points:e,point:f}}=this;if(sb.pointInBounds(b,d)||sb.pointInBounds(c,d)||0<ji(d,b,c).length){const g=E.sub(b,f),h=E.sub(c,f);return xf(g,h,e).didIntersect||!!e.find(k=>5>E.dist(g,k)||5>E.dist(h,k))}return!1});n(this,"hitTestBounds",b=>
{const {rotatedBounds:c,props:{points:d,point:e}}=this,f=Y.translateBounds(b,E.neg(e));return Y.boundsContain(b,c)||d.every(g=>sb.pointInBounds(g,f))||Y.boundsCollide(b,c)&&0<ll([f.minX,f.minY],[f.width,f.height],d).length});kb(this)}get pointBounds(){const {props:{points:a}}=this;return Y.getBoundsFromPoints(a)}get rotatedPoints(){const {props:{point:a,points:b,rotation:c},center:d}=this;if(!c)return b;const e=E.sub(d,a);return b.map(f=>E.rotWith(f,e,c))}};n(We,"id","draw");n(We,"defaultProps",{id:"draw",
type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});M([oa],We.prototype,"pointBounds",1);M([oa],We.prototype,"rotatedPoints",1);var Sj=class extends Sb{constructor(a={}){super(a);n(this,"getBounds",()=>{const {props:{point:[b,c],size:[d,e]}}=this;return Y.getRotatedEllipseBounds(b,c,d/2,e/2,0)});n(this,"getRotatedBounds",()=>{const {props:{point:[b,c],size:[d,e],rotation:f}}=this;return Y.getRotatedEllipseBounds(b,c,d/2,e/2,f)});n(this,"hitTestPoint",b=>{const {props:{size:c,rotation:d},
center:e}=this;return sb.pointInEllipse(b,e,c[0],c[1],d||0)});n(this,"hitTestLineSegment",(b,c)=>{const {props:{size:[d,e],rotation:f=0},center:g}=this;return kl(b,c,g,d,e,f).didIntersect});n(this,"hitTestBounds",b=>{const {props:{size:[c,d],rotation:e=0},rotatedBounds:f}=this;var g;if(!(g=Y.boundsContain(b,f))){const {minX:h,minY:k,width:l,height:m}=b;g=0<Hs(this.center,c/2,d/2,e,[h,k],[l,m]).length}return g});kb(this)}};n(Sj,"id","ellipse");n(Sj,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",
point:[0,0],size:[100,100]});var Tj=class extends Sb{constructor(a={}){super(a);n(this,"onResetBounds",b=>{const {clipping:c,size:d,point:e}=this.props;if(c){const [f,g,h,k]=Array.isArray(c)?c:[c,c,c,c];return this.update({clipping:0,point:[e[0]-k,e[1]-f],size:[d[0]+(k-g),d[1]+(f-h)]})}if(b.asset){const {size:[f,g]}=b.asset;this.update({clipping:0,point:[e[0]+d[0]/2-f/2,e[1]+d[1]/2-g/2],size:[f,g]})}return this});n(this,"onResize",(b,c)=>{const {bounds:d,clip:e,scale:f}=c;({clipping:c}=this.props);
const {clipping:g}=b;if(e){const {point:[h,k],size:[l,m]}=b,[p,q,t,r]=g?Array.isArray(g)?g:[g,g,g,g]:[0,0,0,0];c=[p+(d.minY-k),q+(d.maxX-(h+l)),t+(d.maxY-(k+m)),r+(d.minX-h)]}else void 0!==g&&(c=Array.isArray(g)?g:[g,g,g,g],c=[c[0]*f[1],c[1]*f[0],c[2]*f[1],c[3]*f[0]]);if(c&&Array.isArray(c)){const h=c;h.every((k,l)=>0===l||k===h[l-1])&&(c=h[0])}return this.update({point:[d.minX,d.minY],size:[Math.max(1,d.width),Math.max(1,d.height)],clipping:c})});kb(this)}};n(Tj,"id","ellipse");n(Tj,"defaultProps",
{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Xo=class extends Eb{constructor(a={}){super(a);n(this,"getBounds",()=>{const {points:b,props:{point:c}}=this;return Y.translateBounds(Y.getBoundsFromPoints(b),c)});n(this,"getRotatedBounds",()=>{const {rotatedPoints:b,props:{point:c}}=this;return Y.translateBounds(Y.getBoundsFromPoints(b),c)});n(this,"normalizedHandles",[]);n(this,"onResizeStart",()=>{var b;const {props:{handles:c},
bounds:d}=this;this.scale=[...(null!=(b=this.props.scale)?b:[1,1])];const e=[d.width,d.height];this.normalizedHandles=Object.values(c).map(f=>E.divV(f.point,e));return this});n(this,"onResize",(b,c)=>{const {bounds:d,scale:[e,f]}=c,{props:{handles:g},normalizedHandles:h}=this,k=[d.width,d.height];b=[...this.scale];0>e&&(b[0]*=-1);0>f&&(b[1]*=-1);return this.update({point:[d.minX,d.minY],handles:Object.values(g).map((l,m)=>V(N({},l),{point:E.mulV(h[m],k)})),scale:b})});n(this,"hitTestPoint",b=>{const {points:c}=
this;return sb.pointNearToPolyline(E.sub(b,this.props.point),c)});n(this,"hitTestLineSegment",(b,c)=>{const {bounds:d,points:e,props:{point:f}}=this;if(sb.pointInBounds(b,d)||sb.pointInBounds(c,d)||0<ji(d,b,c).length){const g=E.sub(b,f),h=E.sub(c,f);return xf(g,h,e).didIntersect||!!e.find(k=>5>E.dist(g,k)||5>E.dist(h,k))}return!1});n(this,"hitTestBounds",b=>{const {rotatedBounds:c,points:d,props:{point:e}}=this,f=Y.translateBounds(b,E.neg(e));return Y.boundsContain(b,c)||d.every(g=>sb.pointInBounds(g,
f))||Y.boundsCollide(b,c)&&0<ll([f.minX,f.minY],[f.width,f.height],d).length});n(this,"validateProps",b=>{b.point&&(b.point=[0,0]);void 0!==b.handles&&1>Object.values(b.handles).length&&(b.handles=Xo.defaultProps.handles);return b});kb(this)}get points(){return Object.values(this.props.handles).map(a=>a.point)}get centroid(){const {points:a}=this;return wb.getPolygonCentroid(a)}get rotatedPoints(){const {centroid:a,props:{handles:b,rotation:c}}=this;return c?Object.values(b).map(d=>E.rotWith(d.point,
a,c)):this.points}},Xe=Xo;n(Xe,"id","polyline");n(Xe,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});M([oa],Xe.prototype,"points",1);M([oa],Xe.prototype,"centroid",1);M([oa],Xe.prototype,"rotatedPoints",1);var Yo=class extends Xe{constructor(a={}){super(a);n(this,"hideResizeHandles",!0);n(this,"hideRotateHandle",!0);n(this,"validateProps",b=>{b.point&&(b.point=[0,0]);void 0!==b.handles&&1>Object.values(b.handles).length&&(b.handles=Yo.defaultProps.handles);return b});
n(this,"getHandlesChange",(b,c)=>{var d=Of(b.handles,c);d=Of(d,{start:{point:L.toFixed(d.start.point)},end:{point:L.toFixed(d.end.point)}});if(!L.isEqual(d.start.point,d.end.point)){c={point:b.point,handles:je(d)};b=b.point;d=Y.translateBounds(Y.getBoundsFromPoints(Object.values(d).map(f=>f.point)),c.point);var e=L.sub([d.minX,d.minY],b);L.isEqual(e,[0,0])||(Object.values(c.handles).forEach(f=>{f.point=L.toFixed(L.sub(f.point,e))}),c.point=L.toFixed(L.add(c.point,e)));return c}});kb(this)}},Nf=Yo;
n(Nf,"id","line");n(Nf,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Fd=class extends Sb{constructor(a={}){super(a);n(this,"getRotatedBounds",()=>{const {rotatedVertices:b,props:{point:c},offset:d}=this;return Y.translateBounds(Y.getBoundsFromPoints(b),E.add(c,d))});n(this,"hitTestPoint",b=>{const {vertices:c}=this;return sb.pointInPolygon(E.add(b,this.props.point),c)});n(this,"hitTestLineSegment",
(b,c)=>{const {vertices:d,props:{point:e}}=this;return xf(E.sub(b,e),E.sub(c,e),d).didIntersect});n(this,"hitTestBounds",b=>{const {rotatedBounds:c,offset:d,rotatedVertices:e,props:{point:f}}=this,g=Y.translateBounds(b,E.neg(E.add(f,d)));return Y.boundsContain(b,c)||e.every(h=>sb.pointInBounds(h,g))||0<ml([g.minX,g.minY],[g.width,g.height],e).length});n(this,"validateProps",b=>{b.point&&(b.point=[0,0]);void 0!==b.sides&&3>b.sides&&(b.sides=3);return b});kb(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:a},
vertices:b}=this;return b.map(c=>E.add(c,a))}get centroid(){const {vertices:a}=this;return wb.getPolygonCentroid(a)}get rotatedVertices(){const {vertices:a,centroid:b,props:{rotation:c}}=this;return c?a.map(d=>E.rotWith(d,b,c)):a}get offset(){const {props:{size:[a,b]}}=this,c=Y.getBoundsCenter(Y.getBoundsFromPoints(this.vertices));return E.sub(E.div([a,b],2),c)}getVertices(a=0){const {ratio:b,sides:c,size:d}=this.props;return 3===c?wb.getTriangleVertices(d,a,b):wb.getPolygonVertices(d,c,a,b)}};n(Fd,
"id","polygon");n(Fd,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});M([oa],Fd.prototype,"vertices",1);M([oa],Fd.prototype,"pageVertices",1);M([oa],Fd.prototype,"centroid",1);M([oa],Fd.prototype,"rotatedVertices",1);M([oa],Fd.prototype,"offset",1);var Uj=class extends Sb{constructor(a={}){super(a);n(this,"canEdit",!0);n(this,"canFlip",!1);kb(this)}};n(Uj,"id","text");n(Uj,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,
point:[0,0],size:[16,32],text:""});var th=class extends Sb{constructor(a={}){super(a);n(this,"canEdit",!1);n(this,"canFlip",!1);n(this,"getBounds",()=>0===this.shapes.length?(xa().deleteShapes([this.id]),{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}):Y.getCommonBounds(this.shapes.map(b=>b.getBounds())));kb(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};n(th,"id","group");n(th,"defaultProps",{id:"group",type:"group",
parentId:"page",point:[0,0],size:[0,0],children:[]});M([oa],th.prototype,"shapes",1);var Ye=class{constructor(){n(this,"_id");n(this,"_initial");n(this,"_states");n(this,"_isActive",!1);n(this,"cursor");n(this,"_disposables",[]);n(this,"children",new Map([]));n(this,"registerStates",c=>{c.forEach(d=>this.children.set(d.id,new d(this,this)));return this});n(this,"deregisterStates",c=>{c.forEach(d=>{var e;null==(e=this.children.get(d.id))?void 0:e.dispose();this.children.delete(d.id)});return this});
n(this,"currentState",{});n(this,"transition",(c,d={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${c}.`);const e=this.children.get(c),f=this.currentState;if(!e)throw Error(`Could not find a state named ${c}.`);zb(()=>{this.currentState?(f._events.onExit(V(N({},d),{toId:c})),f.dispose(),this.setCurrentState(e),this._events.onTransition(V(N({},d),{fromId:f.id,toId:c})),e._events.onEnter(V(N({},d),{fromId:f.id}))):(this.currentState=e,e._events.onEnter(V(N({},
d),{fromId:""})))});return this});n(this,"isIn",c=>{c=c.split(".").reverse();let d=this;for(;0<c.length;){const e=c.pop();if(!e)return!0;if(d.currentState.id===e){if(0===c.length)return!0;d=d.currentState}else break}return!1});n(this,"isInAny",(...c)=>c.some(this.isIn));n(this,"forwardEvent",(c,...d)=>{var e,f;(null==(f=null==(e=this.currentState)?void 0:e._events)?0:f[c])&&zb(()=>{var g;return null==(g=this.currentState._events)?void 0:g[c](...d)})});n(this,"_events",{onTransition:c=>{var d;null==
(d=this.onTransition)?void 0:d.call(this,c)},onEnter:c=>{var d;this._isActive=!0;this.initial&&this.transition(this.initial,c);null==(d=this.onEnter)?void 0:d.call(this,c)},onExit:c=>{var d,e,f;this._isActive=!1;null==(e=null==(d=this.currentState)?void 0:d.onExit)?void 0:e.call(d,{toId:"parent"});null==(f=this.onExit)?void 0:f.call(this,c)},onPointerDown:(c,d)=>{var e;null==(e=this.onPointerDown)?void 0:e.call(this,c,d);this.forwardEvent("onPointerDown",c,d)},onPointerUp:(c,d)=>{var e;null==(e=this.onPointerUp)?
void 0:e.call(this,c,d);this.forwardEvent("onPointerUp",c,d)},onPointerMove:(c,d)=>{var e;null==(e=this.onPointerMove)?void 0:e.call(this,c,d);this.forwardEvent("onPointerMove",c,d)},onPointerEnter:(c,d)=>{var e;null==(e=this.onPointerEnter)?void 0:e.call(this,c,d);this.forwardEvent("onPointerEnter",c,d)},onPointerLeave:(c,d)=>{var e;null==(e=this.onPointerLeave)?void 0:e.call(this,c,d);this.forwardEvent("onPointerLeave",c,d)},onDoubleClick:(c,d)=>{var e;null==(e=this.onDoubleClick)?void 0:e.call(this,
c,d);this.forwardEvent("onDoubleClick",c,d)},onKeyDown:(c,d)=>{var e;this._events.onModifierKey(c,d);null==(e=this.onKeyDown)?void 0:e.call(this,c,d);this.forwardEvent("onKeyDown",c,d)},onKeyUp:(c,d)=>{var e;this._events.onModifierKey(c,d);null==(e=this.onKeyUp)?void 0:e.call(this,c,d);this.forwardEvent("onKeyUp",c,d)},onPinchStart:(c,d)=>{var e;null==(e=this.onPinchStart)?void 0:e.call(this,c,d);this.forwardEvent("onPinchStart",c,d)},onPinch:(c,d)=>{var e;null==(e=this.onPinch)?void 0:e.call(this,
c,d);this.forwardEvent("onPinch",c,d)},onPinchEnd:(c,d)=>{var e;null==(e=this.onPinchEnd)?void 0:e.call(this,c,d);this.forwardEvent("onPinchEnd",c,d)},onModifierKey:(c,d)=>{switch(d.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(c,d)}}});n(this,"onEnter");n(this,"onExit");n(this,"onTransition");n(this,"onPointerDown");n(this,"onPointerUp");n(this,"onPointerMove");n(this,"onPointerEnter");n(this,"onPointerLeave");n(this,"onDoubleClick");n(this,"onKeyDown");n(this,"onKeyUp");
n(this,"onPinchStart");n(this,"onPinch");n(this,"onPinchEnd");const a=this.constructor.initial,b=this.constructor.states;this._id=this.constructor.id;this._initial=a;this._states=b}dispose(){this._disposables.forEach(a=>a());this._disposables=[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(a=>[a,...a.descendants])}setCurrentState(a){this.currentState=
a}};n(Ye,"id");n(Ye,"shortcuts");M([ma],Ye.prototype,"currentState",2);M([ja],Ye.prototype,"setCurrentState",1);var Vj=class extends Ye{constructor(a,b){var c,d;super();n(this,"_root");n(this,"_parent");n(this,"children",new Map([]));n(this,"registerStates",e=>{e.forEach(f=>this.children.set(f.id,new f(this,this._root)));return this});n(this,"deregisterStates",e=>{e.forEach(f=>{var g;null==(g=this.children.get(f.id))?void 0:g.dispose();this.children.delete(f.id)});return this});this._parent=a;this._root=
b;this.states&&0<this.states.length&&(this.registerStates(this.states),a=null!=(c=this.initial)?c:this.states[0].id,c=this.children.get(a))&&(this.setCurrentState(c),null==(d=this.currentState)?void 0:d._events.onEnter({fromId:"initial"}));kb(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,this]:[this]}};n(Vj,"cursor");var Gd=class extends Vj{constructor(){super(...arguments);
n(this,"isLocked",!1);n(this,"previous");n(this,"onEnter",({fromId:a})=>{this.previous=a;this.cursor&&this.app.cursors.setCursor(this.cursor)});n(this,"onTransition",a=>{({toId:a}=a);a=this.children.get(a);this.app.cursors.reset();a.cursor?this.app.cursors.setCursor(a.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},Ka=class extends Vj{get app(){return this.root}get tool(){return this.parent}},Zo=class extends Ka{constructor(){super(...arguments);n(this,
"cursor","crosshair");n(this,"creatingShape");n(this,"aspectRatio");n(this,"initialBounds",{});n(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:b,currentPoint:c}}=this.app;var {Shape:d}=this.tool;d=new d({id:lb(),type:d.id,parentId:a.id,point:[...b],fill:this.app.settings.color,stroke:this.app.settings.color,size:L.abs(L.sub(c,b))});this.initialBounds={minX:b[0],minY:b[1],maxX:b[0]+1,maxY:b[1]+1,width:1,height:1};d.canChangeAspectRatio||(d.aspectRatio?(this.aspectRatio=d.aspectRatio,
this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=d;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);this.app.currentPage.addShapes(d);this.app.setSelectedShapes([d])});n(this,"onPointerMove",a=>{if(!a.order){if(!this.creatingShape)throw Error("Expected a creating shape.");var {initialBounds:b}=this,{currentPoint:c,originPoint:d,
shiftKey:e}=this.app.inputs;a=e||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio;b=Y.getTransformedBoundingBox(b,"bottom_right_corner",L.sub(c,d),0,a);this.app.settings.snapToGrid&&!a&&(b=Y.snapBoundsToGrid(b,8));this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});n(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape?(this.app.setSelectedShapes([this.creatingShape]),this.app.api.editShape(this.creatingShape)):this.app.transition("select");
this.app.persist()});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};n(Zo,"id","creating");var $o=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||this.tool.transition("pointing")});n(this,"onPinchStart",(...a)=>{var b,c;this.app.transition("select",{returnTo:this.app.currentState.id});null==(c=(b=this.app._events).onPinchStart)?
void 0:c.call(b,...a)});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}})}};n($o,"id","idle");var ap=class extends Ka{constructor(){super(...arguments);n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});n(this,"onPointerUp",()=>{this.tool.transition("idle")})}};n(ap,"id","pointing");var ld=class extends Gd{constructor(){super(...arguments);
n(this,"cursor","crosshair")}};n(ld,"id","box");n(ld,"states",[$o,ap,Zo]);n(ld,"initial","idle");var bp=class extends Ka{constructor(){super(...arguments);n(this,"shape",{});n(this,"points",[[0,0,.5]]);n(this,"persistDebounced",Tg(this.app.persist,200));n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onEnter",()=>{var a;const {Shape:b,previousShape:c}=this.tool;var {originPoint:d}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&c){this.shape=
c;var {shape:e}=this;var f=e.props.points[e.props.points.length-1];const h=E.sub(d,e.props.point).concat(null!=(a=d[2])?a:.5);this.points=[...e.props.points,f,f];const k=Math.ceil(E.dist(f,d)/16);for(let l=0,m=l/(k-1);l<k;l++){a=this.points;d=a.push;e=E.lrp(f,h,m);var g=f[2];d.call(a,e.concat.call(e,g+(h[2]-g)*m))}this.addNextPoint(h)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(f=d[2])?f:.5]],this.shape=new b({id:lb(),type:b.id,parentId:this.app.currentPage.id,point:d.slice(0,2),
points:this.points,isComplete:!1,fill:this.app.settings.color,stroke:this.app.settings.color}),this.shape.setScaleLevel(this.app.settings.scaleLevel),this.app.currentPage.addShapes(this.shape)});n(this,"onPointerMove",()=>{const {shape:a}=this,{currentPoint:b,previousPoint:c}=this.app.inputs;E.isEqual(c,b)||this.addNextPoint(E.sub(b,a.props.point).concat(b[2]))});n(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,
points:this.tool.simplify?sb.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});this.tool.previousShape=this.shape;this.tool.transition("idle");let a=this.app.selectedTool.id;"pencil"===a||"highlighter"===a?this.persistDebounced():this.app.persist()});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(a){const {shape:b}=this,c=E.min(a,
[0,0]);this.points.push(a);0>c[0]||0>c[1]?(this.points=this.points.map(d=>E.sub(d,c).concat(d[2])),b.update({point:E.add(b.props.point,c),points:this.points})):b.update({points:this.points})}};n(bp,"id","creating");var cp=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||this.app.readOnly||this.tool.transition("creating")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}})}};
n(cp,"id","idle");var dp=class extends Ka{constructor(){super(...arguments);n(this,"origin",[0,0]);n(this,"prevDelta",[0,0]);n(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});n(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});n(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};n(dp,"id","pinching");var fg=class extends Gd{constructor(){super(...arguments);n(this,"cursor","crosshair");n(this,"simplify",!0);n(this,"simplifyTolerance",1);n(this,
"previousShape");n(this,"onPinchStart",(a,b)=>{this.transition("pinching",{info:a,event:b})})}};n(fg,"id","draw");n(fg,"states",[cp,bp,dp]);n(fg,"initial","idle");var ep=class extends Ka{constructor(){super(...arguments);n(this,"points",[[0,0,.5]]);n(this,"hitShapes",new Set);n(this,"onEnter",()=>{const {originPoint:a}=this.app.inputs;this.points=[a];this.hitShapes.clear()});n(this,"onPointerMove",()=>{const {currentPoint:a,previousPoint:b}=this.app.inputs;E.isEqual(b,a)||(this.points.push(a),this.app.shapesInViewport.filter(c=>
c.hitTestLineSegment(b,a)).forEach(c=>this.hitShapes.add(c)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});n(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};n(ep,"id","erasing");var fp=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||this.tool.transition("pointing")});
n(this,"onPinchStart",(...a)=>{var b,c;this.app.transition("select",{returnTo:this.app.currentState.id});null==(c=(b=this.app._events).onPinchStart)?void 0:c.call(b,...a)});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}})}};n(fp,"id","idle");var gp=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",()=>{const {currentPoint:a}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(b=>b.hitTestPoint(a)))});n(this,"onPointerMove",
()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});n(this,"onPointerUp",()=>{const a=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(a);this.tool.transition("idle")})}};n(gp,"id","pointing");var uh=class extends Gd{constructor(){super(...arguments);n(this,"cursor","crosshair")}};n(uh,"id","erase");n(uh,"states",[fp,gp,ep]);n(uh,"initial","idle");var Wj=class extends Ka{constructor(){super(...arguments);
n(this,"handle",{});n(this,"handleId","end");n(this,"currentShape",{});n(this,"initialShape",{});n(this,"bindableShapeIds",[]);n(this,"startBindingShapeId");n(this,"newStartBindingId","");n(this,"draggedBindingId","");n(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,previousPoint:b,originPoint:c,currentPoint:d,modKey:e,altKey:f},settings:{snapToGrid:g}}=this.app;var h=this.app.getShapeById(this.initialShape.id),{handles:k}=this.initialShape,l=this.handleId,m="start"===this.handleId?"end":"start";
if(!L.isEqual(b,d)){var p=L.sub(d,c);if(a){var q=k[m].point,t=L.add(k[l].point,p),r=L.angle(q,t);q=L.rotWith(t,q,Ob.snapAngleToSegments(r,24)-r);p=L.add(p,L.sub(q,t))}p=L.add(k[l].point,p);k={[l]:V(N({},k[l]),{point:g?L.snap(p,8):L.toFixed(p),bindingId:void 0})};var v=this.currentShape.getHandlesChange(this.initialShape,k);if(v){k=Of(h.props,v);var y={},u;l=k.handles[l];m=k.handles[m];if(this.startBindingShapeId){var x;if(p=this.app.getShapeById(this.startBindingShapeId)){t=p.getCenter();q=k.handles.end;
var w=L.add(k.handles.start.point,k.point);L.isEqual(w,t)&&w[1]++;r=p.hitTestPoint(d);w=L.uni(L.sub(w,t));const z=void 0!==this.app.currentPage.bindings[this.newStartBindingId];e||p.hitTestPoint(L.add(k.point,q.point))||(x=Qg(h.props,p,"start",this.newStartBindingId,t,t,w,r));x&&!z?(y[this.newStartBindingId]=x,k.handles.start.bindingId=x.id):!x&&z&&(console.log("removing start binding"),delete y[this.newStartBindingId],k.handles.start.bindingId=void 0)}}if(!e){x=L.add(m.point,k.point);m=L.add(l.point,
k.point);l=L.uni(L.sub(m,x));const z=L.add(k.point,k.handles.start.point),A=L.add(k.point,k.handles.end.point);p=this.bindableShapeIds.map(D=>this.app.getShapeById(D)).sort((D,J)=>J.nonce-D.nonce).filter(D=>![z,A].every(J=>D.hitTestPoint(J)));for(const D of p)if(u=Qg(h.props,D,this.handleId,this.draggedBindingId,m,x,l,f))break}u?(y[this.draggedBindingId]=u,k=Of(k,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):(h=h.props.handles[this.handleId].bindingId,void 0!==h&&(delete y[h],k=
Of(k,{handles:{[this.handleId]:{bindingId:void 0}}})));v=this.currentShape.getHandlesChange(k,k.handles);zb(()=>{var z;if(v){this.currentShape.update(v);this.app.currentPage.updateBindings(y);const A=Object.values(null!=(z=v.handles)?z:{}).map(D=>D.bindingId).map(D=>this.app.currentPage.bindings[D]).filter(Boolean).flatMap(D=>[D.toId,D.fromId].filter(Boolean));this.app.setBindingShapes(A)}})}}});n(this,"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);
this.app.transition("select");this.app.persist()});n(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};n(Wj,"id","creating");var hp=class extends Wj{constructor(){super(...arguments);n(this,"onEnter",()=>{var a;this.app.history.pause();this.newStartBindingId=lb();this.draggedBindingId=lb();this.bindableShapeIds=this.app.currentPage.getBindableShapes();
var {Shape:b}=this.tool;const {originPoint:c}=this.app.inputs;b=new b(V(N({},b.defaultProps),{id:lb(),type:b.id,parentId:this.app.currentPage.id,point:this.app.settings.snapToGrid?L.snap(c,8):c,fill:this.app.settings.color,stroke:this.app.settings.color,scaleLevel:this.app.settings.scaleLevel}));this.initialShape=Wd(b.props);this.currentShape=b;this.app.currentPage.addShapes(b);this.app.setSelectedShapes([b]);if(this.startBindingShapeId=null==(a=this.bindableShapeIds.map(d=>this.app.getShapeById(d)).filter(d=>
sb.pointInBounds(c,d.bounds))[0])?void 0:a.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};n(hp,"id","creating");var ip=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||this.tool.transition("pointing")});n(this,"onPinchStart",(...a)=>{var b,c;this.app.transition("select",{returnTo:this.app.currentState.id});null==(c=(b=this.app._events).onPinchStart)?void 0:
c.call(b,...a)});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}});n(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a)}});n(this,"onPointerLeave",a=>{a.order||"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};n(ip,"id","idle");var jp=class extends Ka{constructor(){super(...arguments);
n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};n(jp,"id","pointing");var vh=class extends Gd{constructor(){super(...arguments);n(this,"cursor","crosshair")}};n(vh,"id","line");n(vh,"states",[ip,jp,hp]);n(vh,"initial","idle");var kp=class extends Ka{constructor(){super(...arguments);n(this,"cursor","crosshair");n(this,"creatingShape");n(this,
"aspectRatio");n(this,"initialBounds",{});n(this,"onEnter",()=>{const {currentPage:a,inputs:{originPoint:b}}=this.app,{Shape:c}=this.tool,d=new c({id:lb(),type:c.id,parentId:a.id,point:[...b],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=d;this.creatingShape.setScaleLevel(this.app.settings.scaleLevel);zb(()=>{this.app.currentPage.addShapes(d);const e=this.app.settings.snapToGrid?L.snap([...b],8):b,{bounds:f}=d;d.update({point:L.sub(e,
[f.width/2,f.height/2])});this.app.transition("select");this.app.setSelectedShapes([d]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};n(kp,"id","creating");var lp=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||this.app.readOnly||this.tool.transition("creating")});n(this,"onPinchStart",(...a)=>{var b,c;this.app.transition("select",{returnTo:this.app.currentState.id});null==(c=(b=this.app._events).onPinchStart)?
void 0:c.call(b,...a)});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}})}};n(lp,"id","idle");var wh=class extends Gd{constructor(){super(...arguments);n(this,"cursor","crosshair")}};n(wh,"id","box");n(wh,"states",[lp,kp]);n(wh,"initial","idle");var By=ea(ay()),Cy=class extends By.default{constructor(){super(...arguments);n(this,"toBBox",a=>a.rotatedBounds)}},mp=class extends Ka{constructor(){super(...arguments);n(this,"initialSelectedIds",[]);n(this,"initialSelectedShapes",
[]);n(this,"tree",new Cy);n(this,"onEnter",()=>{const {selectedShapes:a,currentPage:b,selectedIds:c}=this.app;this.initialSelectedIds=Array.from(c.values());this.initialSelectedShapes=Array.from(a.values());this.tree.load(b.shapes)});n(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});n(this,"onPointerMove",()=>{const {inputs:{shiftKey:a,ctrlKey:b,originPoint:c,currentPoint:d}}=this.app,e=Y.getBoundsFromPoints([d,c],0);this.app.setBrush(e);const f=[...(new Set(this.tree.search(e).filter(g=>
b?Y.boundsContain(e,g.rotatedBounds):g.hitTestBounds(e)).filter(g=>"group"!==g.type).map(g=>{var h;return null!=(h=this.app.getParentGroup(g))?h:g})))];a?f.every(g=>this.initialSelectedShapes.includes(g))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(g=>!f.includes(g))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...f]))]):this.app.setSelectedShapes(f);this.app.viewport.panToPointWhenNearBounds(d)});n(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});
n(this,"handleModifierKey",(a,b)=>{switch(b.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};n(mp,"id","brushing");var np=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",a=>{var b;const {selectedIds:c,inputs:{shiftKey:d}}=this.app;if("shape"===a.type&&!c.has(a.shape.id)){const e=null!=(b=this.app.getParentGroup(a.shape))?b:a.shape;d?this.app.setSelectedShapes([...Array.from(c.values()),e.id]):this.app.setSelectedShapes([e])}});
n(this,"onPointerDown",()=>{this.tool.transition("idle")})}};n(np,"id","contextMenu");var op=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",a=>{"pinching"===a.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});n(this,"onExit",()=>{});n(this,"onPointerEnter",a=>{if(!a.order)switch(a.type){case "shape":this.app.setHoveredShape(a.shape.id);break;case "selection":"background"!==a.handle&&"center"!==a.handle&&this.tool.transition("hoveringSelectionHandle",a);
break;case "canvas":this.app.setHoveredShape(void 0)}});n(this,"onPointerDown",(a,b)=>{const {selectedShapes:c,inputs:{ctrlKey:d}}=this.app;if(2===b.button)this.tool.transition("contextMenu",a);else if(d)this.tool.transition("pointingCanvas");else switch(a.type){case "selection":switch(a.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",
a)}break;case "shape":if(c.has(a.shape))this.tool.transition("pointingSelectedShape",a);else{const {selectionBounds:e,inputs:f}=this.app;e&&sb.pointInBounds(f.currentPoint,e)?this.tool.transition("pointingShapeBehindBounds",a):this.tool.transition("pointingShape",a)}break;case "handle":this.tool.transition("pointingHandle",a);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",N(N({},b),a))}});n(this,"onPointerLeave",a=>{a.order||
"shape"===a.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onDoubleClick",a=>{if(!a.order&&1===this.app.selectedShapesArray.length&&!this.app.readOnly){var b=this.app.selectedShapesArray[0];if(b.canEdit&&!b.props.isLocked)switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",
target:b})}}});n(this,"onKeyDown",(a,b)=>{({selectedShapesArray:a}=this.app);switch(b.key){case "Enter":1===a.length&&a[0].canEdit&&!this.app.readOnly&&this.tool.transition("editingShape",{type:"shape",shape:a[0],order:0});break;case "Escape":a.length&&this.app.setSelectedShapes([])}})}};n(op,"id","idle");var pp=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",a=>{var b;const {selectedIds:c,inputs:{shiftKey:d}}=this.app,e=null!=(b=this.app.getParentGroup(a.shape))?b:a.shape;d?this.app.setSelectedShapes([...Array.from(c.values()),
e.id]):this.app.setSelectedShapes([e])});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&this.tool.transition("translating")});n(this,"onPointerUp",()=>{this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(pp,"id","pointingShape");var qp=class extends Ka{constructor(){super(...arguments);n(this,"cursor","move");n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=
this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&this.tool.transition("translating")});n(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(qp,"id","pointingBoundsBackground");var rp=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",()=>{var a;const {shiftKey:b}=this.app.inputs;b||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(a=window.getSelection())?
void 0:a.removeAllRanges())});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&this.tool.transition("brushing")});n(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};n(rp,"id","pointingCanvas");var sp=class extends Ka{constructor(){super(...arguments);
n(this,"cursor","move");n(this,"isCloning",!1);n(this,"didClone",!1);n(this,"initialPoints",{});n(this,"initialShapePoints",{});n(this,"initialClonePoints",{});n(this,"clones",[]);n(this,"onEnter",()=>{var a;this.app.history.pause();const {allSelectedShapesArray:b,inputs:c}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(b.map(({id:d,props:{point:e}})=>[d,e.slice()]));document.querySelectorAll("input,textarea").forEach(d=>d.blur());null==(a=document.getSelection())?void 0:a.empty();
c.altKey?this.startCloning():this.moveSelectedShapesToPointer()});n(this,"onExit",()=>{this.app.history.resume();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});n(this,"onPointerMove",()=>{const {inputs:{currentPoint:a}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenNearBounds(a)});n(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});n(this,
"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(c=>{c.update({point:this.initialPoints[c.id]})}),this.tool.transition("idle")}});n(this,"onKeyUp",(a,b)=>{switch(b.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:c,allSelectedShapes:d}=this.app;c.removeShapes(...d);this.initialPoints=
this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:a,originPoint:b,currentPoint:c}}=this.app,{initialPoints:d}=this,e=E.sub(c,b);a&&(Math.abs(e[0])<Math.abs(e[1])?e[0]=0:e[1]=0);zb(()=>{this.app.allSelectedShapesArray.filter(f=>!f.props.isLocked).forEach(f=>{let g=E.add(d[f.id],e);this.app.settings.snapToGrid&&(g=E.snap(g,8));f.update({point:g})})})}startCloning(){this.didClone||
(this.clones=this.app.allSelectedShapesArray.map(a=>{const b=this.app.getShapeClass(a.type);if(!b)throw Error("Could not find that shape class.");return new b(V(N({},a.serialized),{id:lb(),type:a.type,point:this.initialPoints[a.id],rotation:a.props.rotation,isLocked:!1}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:a,props:{point:b}})=>[a,b.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(a=>{a.update({point:this.initialPoints[a.id]})});this.initialPoints=this.initialClonePoints;
this.app.currentPage.addShapes(...this.clones);this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};n(sp,"id","translating");var tp=class extends Ka{constructor(){super(...arguments);n(this,"pointedSelectedShape");n(this,"onEnter",a=>{this.pointedSelectedShape=a.shape});n(this,"onExit",()=>{this.pointedSelectedShape=void 0});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&
this.tool.transition("translating")});n(this,"onPointerUp",()=>{const {shiftKey:a,currentPoint:b}=this.app.inputs;var {selectedShapesArray:c}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(a)({selectedIds:c}=this.app),c=Array.from(c.values()),c.splice(c.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(c);else{if(1===c.length&&this.pointedSelectedShape.canEdit&&!this.app.readOnly&&!this.pointedSelectedShape.props.isLocked&&this.pointedSelectedShape instanceof
Sb&&sb.pointInBounds(b,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(tp,"id","pointingSelectedShape");var up=class extends Ka{constructor(){super(...arguments);n(this,"info",{});n(this,"onEnter",a=>{this.info=a;this.updateCursor()});n(this,
"onExit",()=>{this.app.cursors.reset()});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&this.tool.transition("resizing",this.info)});n(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}updateCursor(){this.app.cursors.setCursor(rh[this.info.handle],this.app.selectionBounds.rotation)}};n(up,"id","pointingResizeHandle");var vp=class extends Ka{constructor(){super(...arguments);
n(this,"isSingle",!1);n(this,"handle","bottom_right_corner");n(this,"snapshots",{});n(this,"initialCommonBounds",{});n(this,"selectionRotation",0);n(this,"resizeType","corner");n(this,"onEnter",a=>{var b,c;const {history:d,selectedShapesArray:e,selectionBounds:f}=this.app;if(!f)throw Error("Expected a selected bounds.");this.handle=a.handle;this.resizeType="left_edge"===a.handle||"right_edge"===a.handle?"horizontal-edge":"top_edge"===a.handle||"bottom_edge"===a.handle?"vertical-edge":"corner";this.app.cursors.setCursor(vp.CURSORS[a.handle],
null==(b=this.app.selectionBounds)?void 0:b.rotation);d.pause();const g=Y.getBoundsFromPoints(e.map(h=>Y.getBoundsCenter(h.bounds)));this.selectionRotation=(this.isSingle=1===e.length)?null!=(c=e[0].props.rotation)?c:0:0;this.initialCommonBounds=N({},f);this.snapshots=Object.fromEntries(e.map(h=>{const k=N({},h.bounds),[l,m]=Y.getBoundsCenter(k);return[h.id,{props:h.serialized,bounds:k,transformOrigin:[(l-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(m-this.initialCommonBounds.minY)/
this.initialCommonBounds.height],innerTransformOrigin:[(l-g.minX)/g.width,(m-g.minY)/g.height],isAspectRatioLocked:h.props.isAspectRatioLocked||!(h.canChangeAspectRatio&&!h.props.rotation)}]}));e.forEach(h=>{var k;null==(k=h.onResizeStart)?void 0:k.call(h,{isSingle:this.isSingle})})});n(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});n(this,"onPointerMove",()=>{const {inputs:{altKey:a,shiftKey:b,ctrlKey:c,
originPoint:d,currentPoint:e}}=this.app,{handle:f,snapshots:g,initialCommonBounds:h}=this;let k=E.sub(e,d);a&&(k=E.mul(k,2));const l=this.app.selectedShapes.values().next().value;let m=Y.getTransformedBoundingBox(h,f,k,this.selectionRotation,b||this.isSingle&&(c?!("clipping"in l.props):!l.canChangeAspectRatio||l.props.isAspectRatioLocked));a&&(m=N(N({},m),Y.centerBounds(m,Y.getBoundsCenter(h))));const {scaleX:p,scaleY:q}=m;this.app.selectedShapes.forEach(t=>{var r,v;const {isAspectRatioLocked:y,props:u,
bounds:x,transformOrigin:w}=g[t.id];let z=Y.getRelativeTransformedBoundingBox(m,h,x,0>p,0>q);if(t.canResize.some(J=>J)||t.props.isSizeLocked||!this.isSingle){var A=[p,q],D=null!=(r=u.rotation)?r:0;r=Y.getBoundsCenter(z);t.canFlip||(A=E.abs(A));t.canScale||(A=null!=(v=u.scale)?v:[1,1]);if(D&&0>p&&0<=q||0>q&&0<=p)D*=-1;this.app.settings.snapToGrid&&!y&&(z=Y.snapBoundsToGrid(z,8));t.onResize(u,{center:r,rotation:D,scale:A,bounds:z,type:f,clip:c,transformOrigin:w})}});this.updateCursor(p,q);this.app.viewport.panToPointWhenNearBounds(e)});
n(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.selectedShapes.forEach(c=>{c.update(N({},this.snapshots[c.id].props))}),this.tool.transition("idle")}})}updateCursor(a,b){var c,d,e,f;const g=0>a&&0<=b;a=0>b&&0<=a;switch(this.handle){case "top_left_corner":case "bottom_right_corner":g||a?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(c=this.app.selectionBounds)?
void 0:c.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(d=this.app.selectionBounds)?void 0:d.rotation);break;case "top_right_corner":case "bottom_left_corner":g||a?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(e=this.app.selectionBounds)?void 0:e.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(f=this.app.selectionBounds)?void 0:f.rotation)}}},Xj=vp;n(Xj,
"id","resizing");n(Xj,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var wp=class extends Ka{constructor(){super(...arguments);n(this,"cursor","rotate");n(this,"handle","");n(this,"onEnter",a=>{this.app.history.pause();this.handle=a.handle;this.updateCursor()});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=
this.app.inputs;5<E.dist(a,b)&&this.tool.transition("rotating",{handle:this.handle})});n(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}updateCursor(){this.app.cursors.setCursor(rh[this.handle],this.app.selectionRotation)}};n(wp,"id","pointingRotateHandle");var xp=class extends Ka{constructor(){super(...arguments);n(this,"info",{});n(this,"onEnter",a=>{this.info=a});
n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&!this.app.readOnly&&this.tool.transition("translating")});n(this,"onPointerUp",()=>{const {selectedIds:a,inputs:{shiftKey:b}}=this.app;b?this.app.setSelectedShapes([...Array.from(a.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(xp,"id","pointingShapeBehindBounds");
var Yj=class extends Ka{constructor(){super(...arguments);n(this,"cursor","rotate");n(this,"snapshot",{});n(this,"initialCommonCenter",[0,0]);n(this,"initialCommonBounds",{});n(this,"initialAngle",0);n(this,"initialSelectionRotation",0);n(this,"handle","");n(this,"onEnter",a=>{const {history:b,selectedShapesArray:c,selectionBounds:d}=this.app;if(!d)throw Error("Expected selected bounds.");b.pause();this.handle=a.handle;this.initialSelectionRotation=this.app.selectionRotation;this.initialCommonBounds=
N({},d);this.initialCommonCenter=Y.getBoundsCenter(d);this.initialAngle=E.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(c.map(e=>[e.id,{point:[...e.props.point],center:[...e.center],rotation:e.props.rotation,handles:"handles"in e?je(e.handles):void 0}]));this.updateCursor()});n(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});n(this,"onPointerMove",()=>{const {selectedShapes:a,inputs:{shiftKey:b,currentPoint:c}}=this.app,{snapshot:d,initialCommonCenter:e,
initialAngle:f,initialSelectionRotation:g}=this;let h=E.angle(e,c)-f;b&&(h=Ob.snapAngleToSegments(h,24));a.forEach(l=>{var m=d[l.id];let p=0;if(b){var {rotation:q=0}=m;p=Ob.snapAngleToSegments(q,24)-q}const t=E.sub(m.center,m.point);q=E.rotWith(m.center,e,h);if("handles"in l){m=m.handles;const r=m.map(y=>E.rotWith(y.point,t,h)),v=Y.getCommonTopLeft(r);l.update({point:E.add(v,E.sub(q,t)),handles:m.map((y,u)=>V(N({},y),{point:E.sub(r[u],v)}))})}else l.update({point:E.sub(q,t),rotation:Ob.clampRadians((m.rotation||
0)+h+p)})});const k=Ob.clampRadians(g+h);this.app.setSelectionRotation(b?Ob.snapAngleToSegments(k,24):k);this.updateCursor()});n(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.selectedShapes.forEach(c=>{c.update(this.snapshot[c.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(rh[this.handle],this.app.selectionRotation)}};n(Yj,"id","rotating");var yp=
class extends Ka{constructor(){super(...arguments);n(this,"onPinch",(a,b)=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});n(this,"onPinchEnd",()=>{this.tool.transition("idle")});n(this,"onPointerDown",()=>{this.tool.transition("idle")})}};n(yp,"id","pinching");var zp=class extends Wj{constructor(){super(...arguments);n(this,"cursor","grabbing");n(this,"onEnter",a=>{this.app.history.pause();this.newStartBindingId=lb();this.draggedBindingId=lb();this.bindableShapeIds=this.app.currentPage.getBindableShapes();
this.handleId=a.id;this.currentShape=a.shape;this.initialShape=Wd(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};n(zp,"id","translatingHandle");var Ap=class extends Ka{constructor(){super(...arguments);n(this,"cursor","grabbing");n(this,"info",{});n(this,"onEnter",a=>{this.info=a});n(this,"onPointerMove",()=>{const {currentPoint:a,originPoint:b}=this.app.inputs;5<E.dist(a,b)&&this.tool.transition("translatingHandle",this.info)});n(this,"onPointerUp",()=>{this.tool.transition("idle")});
n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(Ap,"id","pointingHandle");var Bp=class extends Ka{constructor(){super(...arguments);n(this,"handle");n(this,"onEnter",a=>{var b;this.app.cursors.setCursor(rh[a.handle],null!=(b=this.app.selectionBounds.rotation)?b:0);this.handle=a.handle});n(this,"onExit",()=>{this.app.cursors.reset()});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onPointerDown",a=>{switch(a.type){case "selection":switch(a.handle){case "center":break;
case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",a);break;default:this.tool.transition("pointingResizeHandle",a)}}});n(this,"onPointerLeave",()=>{this.tool.transition("idle")});n(this,"onDoubleClick",a=>{var b;if(!a.order&&1===this.app.selectedShapes.size){var c=this.app.selectedShapes.values().next().value;if(!c.canEdit||this.app.readOnly||c.props.isLocked)c.onResetBounds({asset:c.props.assetId?
this.app.assets[c.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle");else switch(a.type){case "shape":this.tool.transition("editingShape",a);break;case "selection":null==(b=c.onResetBounds)?void 0:b.call(c,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:c})}}})}};n(Bp,"id","hoveringSelectionHandle");var Cp=class extends Ka{constructor(){super(...arguments);n(this,"editingShape",
{});n(this,"onEnter",a=>{this.editingShape=a.shape;this.app.setEditingShape(a.shape)});n(this,"onExit",()=>{var a;if(this.editingShape&&"text"in this.editingShape.props){const b=this.editingShape.props.text.trim();""===b&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:b}))}this.app.persist();this.app.setEditingShape();null==(a=document.querySelector(".tl-canvas"))?void 0:a.focus()});n(this,"onPinchStart",
(a,b)=>{this.tool.transition("pinching",{info:a,event:b})});n(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===this.editingShape)break;this.tool.transition("idle",a);break;case "canvas":a.order||this.tool.transition("idle",a)}});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":zb(()=>{b.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};n(Cp,"id","editingShape");var Dp=class extends Ka{constructor(){super(...arguments);n(this,
"minimapZoom",1);n(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});n(this,"getCameraPoint",a=>{const b=document.querySelector(".tl-preview-minimap svg");var c=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(b&&c){const d=b.getBoundingClientRect();this.minimapRect.height=d.height;this.minimapRect.width=d.width;this.minimapRect.minX=d.left;this.minimapRect.minY=d.top;this.minimapRect.maxX=d.right;this.minimapRect.maxY=d.bottom;this.minimapZoom=+b.dataset.commonBoundWidth/
this.minimapRect.width;a=E.sub(a,[this.minimapRect.minX,this.minimapRect.minY]);c=c.getBoundingClientRect();c=E.mul(E.sub(a,[c.left+c.width/2,c.top+c.height/2]),this.minimapZoom);return E.sub(this.app.viewport.camera.point,c)}});n(this,"onEnter",a=>{(a=this.getCameraPoint([a.clientX,a.clientY]))?this.app.viewport.update({point:a}):this.tool.transition("idle")});n(this,"onPointerMove",(a,b)=>{"clientX"in b&&(a=this.getCameraPoint([b.clientX,b.clientY]))&&this.app.viewport.update({point:a})});n(this,
"onPointerUp",()=>{this.tool.transition("idle")})}};n(Dp,"id","pointingMinimap");var Ze=class extends Gd{constructor(){super(...arguments);n(this,"returnTo","");n(this,"onEnter",a=>{this.returnTo=null==a?void 0:a.returnTo})}};n(Ze,"id","select");n(Ze,"initial","idle");n(Ze,"shortcut","whiteboard/select");n(Ze,"states",[op,mp,np,rp,pp,xp,tp,qp,Bp,up,wp,Dp,Ap,zp,sp,Xj,Yj,Yj,yp,Cp]);var Ep=class extends Ka{constructor(){super(...arguments);n(this,"cursor","grabbing");n(this,"originalScreenPoint",[]);
n(this,"originalCameraPoint",[]);n(this,"prevState","idle");n(this,"onEnter",a=>{this.prevState=null==a?void 0:a.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});n(this,"onPointerMove",(a,b)=>{a=L.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:L.sub(this.originalCameraPoint,L.div(a,this.app.viewport.camera.zoom))})});n(this,"onPointerUp",()=>{var a;this.tool.transition(null!=
(a=this.prevState)?a:"idle")})}};n(Ep,"id","panning");var Fp=class extends Ka{constructor(){super(...arguments);n(this,"onEnter",a=>{this.parent.prevTool&&a.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});n(this,"onPointerDown",(a,b)=>{a.order||this.tool.transition("panning")})}};n(Fp,"id","idle");var Gp=class extends Ka{constructor(){super(...arguments);n(this,"onPointerDown",(a,b)=>{a.order||
this.tool.transition("panning",{prevState:"idleHold"})});n(this,"onPinchStart",(a,b)=>{this.tool.transition("pinching",{info:a,event:b})})}};n(Gp,"id","idleHold");var Hp=class extends Ka{constructor(){super(...arguments);n(this,"origin",[0,0]);n(this,"prevDelta",[0,0]);n(this,"onEnter",a=>{this.prevDelta=a.info.delta;this.origin=a.info.point});n(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])});n(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};n(Hp,"id","pinching");
var $e=class extends Gd{constructor(){super(...arguments);n(this,"cursor","grab");n(this,"prevTool",null);n(this,"onEnter",a=>{this.prevTool=null==a?void 0:a.prevTool});n(this,"onKeyDown",(a,b)=>{switch(b.key){case "Escape":this.app.transition("select")}});n(this,"onPinchStart",(a,b)=>{this.transition("pinching",{info:a,event:b})})}};n($e,"id","move");n($e,"shortcut","whiteboard/pan");n($e,"states",[Fp,Gp,Ep,Hp]);n($e,"initial","idle");var Fb=class{constructor(a,b={}){n(this,"lastShapesNounces",null);
n(this,"app");n(this,"id");n(this,"name");n(this,"shapes",[]);n(this,"bindings",{});n(this,"nonce",0);n(this,"bringForward",h=>{const k=this.parseShapesArg(h);k.sort((l,m)=>this.shapes.indexOf(m)-this.shapes.indexOf(l)).map(l=>this.shapes.indexOf(l)).forEach(l=>{if(l!==this.shapes.length-1&&!k.includes(this.shapes[l+1])){var m=this.shapes[l];this.shapes[l]=this.shapes[l+1];this.shapes[l+1]=m}});this.app.persist();return this});n(this,"sendBackward",h=>{const k=this.parseShapesArg(h);k.sort((l,m)=>
this.shapes.indexOf(l)-this.shapes.indexOf(m)).map(l=>this.shapes.indexOf(l)).forEach(l=>{if(0!==l&&!k.includes(this.shapes[l-1])){var m=this.shapes[l];this.shapes[l]=this.shapes[l-1];this.shapes[l-1]=m}});this.app.persist();return this});n(this,"bringToFront",h=>{const k=this.parseShapesArg(h);this.shapes=this.shapes.filter(l=>!k.includes(l)).concat(k);this.app.persist();return this});n(this,"sendToBack",h=>{const k=this.parseShapesArg(h);this.shapes=k.concat(this.shapes.filter(l=>!k.includes(l)));
this.app.persist();return this});n(this,"flip",(h,k)=>{h=this.parseShapesArg(h);const l=Y.getCommonBounds(h.map(m=>m.bounds));h.forEach(m=>{var p;const q=Y.getRelativeTransformedBoundingBox(l,l,m.bounds,"horizontal"===k,"vertical"===k);if(m.serialized)m.onResize(m.serialized,{bounds:q,center:Y.getBoundsCenter(q),rotation:null!=(p=m.props.rotation)?p:-0,type:"top_left_corner",scale:m.canFlip&&m.props.scale?"horizontal"===k?[-m.props.scale[0],1]:[1,-m.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,
.5]})});this.app.persist();return this});n(this,"getShapeById",h=>this.shapes.find(k=>k.id===h));n(this,"cleanup",h=>{h=yt(this.bindings,h);const k=new Set;let l=!1,m=!1;const p=je(this.bindings);h.forEach(q=>{var t;if(this.bindings[q.id]){var r=this.getShapeById(q.toId),v=this.getShapeById(q.fromId);r&&v?k.has(v.id)||(q=this.updateArrowBindings(v),k.add(v.id),q&&(r=N(N({},v.props),q),l=!0,null==(t=this.getShapeById(r.id))?void 0:t.update(r,!1,(0,Dy.default)(null==q?void 0:q.handles,null==v?void 0:
v.props.handles)))):(delete p[q.id],m=!0)}});Object.keys(p).forEach(q=>{const t=this.bindings[q];0===this.shapes.filter(r=>r.id===t.fromId||r.id===t.toId).length&&(delete p[q],m=!0)});m&&this.update({bindings:p});(l||m)&&this.app.persist(!0)});n(this,"updateArrowBindings",h=>{var k,l,m,p={start:je(h.props.handles.start),end:je(h.props.handles.end)},q={isBound:!1,handle:h.props.handles.start,point:L.add(h.props.handles.start.point,h.props.point)},t={isBound:!1,handle:h.props.handles.end,point:L.add(h.props.handles.end.point,
h.props.point)};if(h.props.handles.start.bindingId){var r=void 0!==(null==(k=h.props.decorations)?void 0:k.start);k=h.props.handles.start;var v=this.bindings[h.props.handles.start.bindingId],y=this.getShapeById(null==v?void 0:v.toId);if(y){q=y.getBounds();var u=y.getExpandedBounds(),x=Y.expandBounds(q,r?v.distance:1);const {minX:w,minY:z,width:A,height:D}=u,J=L.add([w,z],L.mulV([A,D],L.rotWith(v.point,[.5,.5],y.props.rotation||0)));q={isBound:!0,hasDecoration:r,binding:v,handle:k,point:J,target:y,
bounds:q,expandedBounds:u,intersectBounds:x,center:y.getCenter()}}}if(h.props.handles.end.bindingId&&(r=void 0!==(null==(l=h.props.decorations)?void 0:l.end),l=h.props.handles.end,k=this.bindings[h.props.handles.end.bindingId],v=this.getShapeById(null==k?void 0:k.toId))){t=v.getBounds();y=v.getExpandedBounds();u=r?Y.expandBounds(t,k.distance):t;const {minX:w,minY:z,width:A,height:D}=y;x=L.add([w,z],L.mulV([A,D],L.rotWith(k.point,[.5,.5],v.props.rotation||0)));t={isBound:!0,hasDecoration:r,binding:k,
handle:l,point:x,target:v,bounds:t,expandedBounds:y,intersectBounds:u,center:v.getCenter()}}for(const w of["end","start"]){l="start"===w?q:t;const z="start"===w?t:q;if(l.isBound)if(l.binding.distance){if(r=L.uni(L.sub(l.point,z.point)),k=Ag(z.point,r,l.intersectBounds,l.target.props.rotation).filter(A=>A.didIntersect).map(A=>A.points[0]).sort((A,D)=>L.dist(A,z.point)-L.dist(D,z.point)),k[0])if(v=void 0,z.isBound&&(v=Ag(z.point,r,z.intersectBounds,z.target.props.rotation).filter(A=>A.didIntersect).map(A=>
A.points[0]).sort((A,D)=>L.dist(A,z.point)-L.dist(D,z.point))[0]),z.isBound&&(2>k.length||v&&k[0]&&10>Math.ceil(L.dist(k[0],v))||Y.boundsContain(l.expandedBounds,z.expandedBounds)||Y.boundsCollide(l.expandedBounds,z.expandedBounds)))r=L.uni(L.sub(z.point,l.point)),k=Ag(l.point,r,l.bounds,l.target.props.rotation).filter(A=>A.didIntersect).map(A=>A.points[0]),k[0]&&(p[w].point=L.toFixed(L.sub(k[0],h.props.point)),p["start"===w?"end":"start"].point=L.toFixed(L.add(L.sub(k[0],h.props.point),L.mul(r,Math.min(L.dist(k[0],
z.point),10*(Y.boundsContain(z.bounds,l.intersectBounds)?-1:1))))));else{if(!z.isBound&&(k[0]&&10>L.dist(k[0],z.point)||sb.pointInBounds(z.point,l.intersectBounds)))return p=L.uni(L.sub(l.center,z.point)),null==(m=h.getHandlesChange)?void 0:m.call(h,h.props,{[w]:V(N({},h.props.handles[w]),{point:L.toFixed(L.add(L.sub(z.point,h.props.point),L.mul(p,10)))})});k[0]&&(p[w].point=L.toFixed(L.sub(k[0],h.props.point)))}}else p[w].point=L.sub(l.point,h.props.point)}return h.getHandlesChange(h.props,p)});
const {id:c,name:d,shapes:e=[],bindings:f={},nonce:g}=b;this.id=c;this.name=d;this.bindings=Object.assign({},f);this.app=a;this.nonce=g||0;this.addShapes(...e);kb(this);If(()=>{const h=0<this.shapes.length?Object.fromEntries(this.shapes.map(k=>[k.id,k.nonce])):null;if(this.lastShapesNounces&&h){const k=this.lastShapesNounces,l=[...(new Set([...Object.keys(h),...Object.keys(k)]))].filter(m=>k[m]!==h[m]);requestAnimationFrame(()=>{this.cleanup(l)})}h&&(this.lastShapesNounces=h)})}get serialized(){return{id:this.id,
name:this.name,shapes:this.shapes.map(a=>a.serialized).filter(a=>!!a).map(a=>Wd(a)),bindings:je(this.bindings),nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(a=>[a.id,a]))}update(a){Object.assign(this,a);return this}updateBindings(a){Object.assign(this.bindings,a);return this}updateShapesIndex(a){this.shapes.sort((b,c)=>a.indexOf(b.id)-a.indexOf(c.id));return this}addShapes(...a){if(0!==a.length)return a="getBounds"in a[0]?a:a.map(b=>new (this.app.getShapeClass(b.type))(b)),
this.shapes.push(...a),a}parseShapesArg(a){return"string"===typeof a[0]?this.shapes.filter(b=>a.includes(b.id)):a}removeShapes(...a){const b=this.parseShapesArg(a);this.shapes=this.shapes.filter(c=>!b.includes(c));return b}getBindableShapes(){return this.shapes.filter(a=>a.canBind).sort((a,b)=>b.nonce-a.nonce).map(a=>a.id)}};M([ma],Fb.prototype,"id",2);M([ma],Fb.prototype,"name",2);M([ma],Fb.prototype,"shapes",2);M([ma],Fb.prototype,"bindings",2);M([oa],Fb.prototype,"serialized",1);M([oa],Fb.prototype,
"shapesById",1);M([ma],Fb.prototype,"nonce",2);M([ja],Fb.prototype,"update",1);M([ja],Fb.prototype,"updateBindings",1);M([ja],Fb.prototype,"updateShapesIndex",1);M([ja],Fb.prototype,"addShapes",1);M([ja],Fb.prototype,"removeShapes",1);M([ja],Fb.prototype,"bringForward",2);M([ja],Fb.prototype,"sendBackward",2);M([ja],Fb.prototype,"bringToFront",2);M([ja],Fb.prototype,"sendToBack",2);M([ja],Fb.prototype,"cleanup",2);var ab=class{constructor(){n(this,"shiftKey",!1);n(this,"ctrlKey",!1);n(this,"modKey",
!1);n(this,"altKey",!1);n(this,"spaceKey",!1);n(this,"isPinching",!1);n(this,"currentScreenPoint",[0,0]);n(this,"currentPoint",[0,0]);n(this,"previousScreenPoint",[0,0]);n(this,"previousPoint",[0,0]);n(this,"originScreenPoint",[0,0]);n(this,"originPoint",[0,0]);n(this,"pointerIds",new Set);n(this,"state","idle");n(this,"containerOffset",[0,0]);n(this,"onPointerDown",(a,b)=>{this.pointerIds.add(b.pointerId);this.updateModifiers(b);this.originScreenPoint=this.currentScreenPoint;this.originPoint=a;this.state=
"pointing"});n(this,"onPointerMove",(a,b)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(b),this.previousPoint=this.currentPoint,this.currentPoint=a)});n(this,"onPointerUp",(a,b)=>{this.pointerIds.clear();this.updateModifiers(b);this.state="idle"});n(this,"onKeyDown",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!0}});n(this,"onKeyUp",a=>{this.updateModifiers(a);switch(a.key){case " ":this.spaceKey=!1}});n(this,"onPinchStart",(a,b)=>
{this.updateModifiers(b);this.state="pinching"});n(this,"onPinch",(a,b)=>{"pinching"===this.state&&this.updateModifiers(b)});n(this,"onPinchEnd",(a,b)=>{"pinching"===this.state&&(this.updateModifiers(b),this.state="idle")});kb(this)}updateContainerOffset(a){Object.assign(this.containerOffset,a)}updateModifiers(a){a.isPrimary&&("clientX"in a&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=L.sub([a.clientX,a.clientY],this.containerOffset)),"shiftKey"in a&&(this.shiftKey=a.shiftKey,
this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.modKey=Ji()?a.metaKey:a.ctrlKey))}};M([ma],ab.prototype,"shiftKey",2);M([ma],ab.prototype,"ctrlKey",2);M([ma],ab.prototype,"modKey",2);M([ma],ab.prototype,"altKey",2);M([ma],ab.prototype,"spaceKey",2);M([ma],ab.prototype,"isPinching",2);M([ma],ab.prototype,"currentScreenPoint",2);M([ma],ab.prototype,"currentPoint",2);M([ma],ab.prototype,"previousScreenPoint",2);M([ma],ab.prototype,"previousPoint",2);M([ma],ab.prototype,"originScreenPoint",2);M([ma],
ab.prototype,"originPoint",2);M([ma],ab.prototype,"state",2);M([ma],ab.prototype,"containerOffset",2);M([ja],ab.prototype,"updateContainerOffset",1);M([ja],ab.prototype,"updateModifiers",1);M([ja],ab.prototype,"onPointerDown",2);M([ja],ab.prototype,"onPointerMove",2);M([ja],ab.prototype,"onPointerUp",2);M([ja],ab.prototype,"onKeyDown",2);M([ja],ab.prototype,"onKeyUp",2);M([ja],ab.prototype,"onPinchStart",2);M([ja],ab.prototype,"onPinch",2);M([ja],ab.prototype,"onPinchEnd",2);var Ey=(a,b=100)=>-(Math.cos(Math.PI*
E.clamp(a/b,0,1))-1)/2,ke=class{constructor(){n(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});n(this,"camera",{point:[0,0],zoom:1});n(this,"updateBounds",a=>{this.bounds=a;return this});n(this,"panCamera",a=>this.update({point:E.sub(this.camera.point,E.div(a,this.camera.zoom))}));n(this,"panToPointWhenNearBounds",a=>{const b=E.div([ke.panThreshold,ke.panThreshold],this.camera.zoom),c=E.sub([this.currentView.maxX,this.currentView.maxY],E.add(a,b));a=E.sub([this.currentView.minX,
this.currentView.minY],E.sub(a,b));this.panCamera(E.mul([0>c[0]?c[0]:0<a[0]?a[0]:0,0>c[1]?c[1]:0<a[1]?a[1]:0],-ke.panMultiplier*this.camera.zoom))});n(this,"update",({point:a,zoom:b})=>{void 0===a||isNaN(a[0])||isNaN(a[1])||(this.camera.point=a);void 0===b||isNaN(b)||(this.camera.zoom=Math.min(4,Math.max(.1,b)));return this});n(this,"getPagePoint",a=>{const {camera:b,bounds:c}=this;return E.sub(E.div(E.sub(a,[c.minX,c.minY]),b.zoom),b.point)});n(this,"getScreenPoint",a=>{const {camera:b}=this;return E.mul(E.add(a,
b.point),b.zoom)});n(this,"onZoom",(a,b,c=!1)=>this.pinchZoom(a,[0,0],b,c));n(this,"pinchZoom",(a,b,c,d=!1)=>{var {camera:e}=this;b=E.sub(e.point,E.div(b,e.zoom));c=E.clamp(c,ke.minZoom,ke.maxZoom);e=E.div(a,e.zoom);a=E.div(a,c);a=E.toFixed(E.add(b,E.sub(a,e)));d?this.animateCamera({point:a,zoom:c}):this.update({point:a,zoom:c});return this});n(this,"setZoom",(a,b=!1)=>{const {bounds:c}=this;this.onZoom([c.width/2,c.height/2],a,b)});n(this,"zoomIn",()=>{const {camera:a}=this;this.setZoom(a.zoom/.8,
!0)});n(this,"zoomOut",()=>{const {camera:a}=this;this.setZoom(.8*a.zoom,!0)});n(this,"resetZoom",()=>{this.setZoom(1,!0);return this});n(this,"animateCamera",({point:a,zoom:b})=>this.animateToViewport({minX:-a[0],minY:-a[1],maxX:this.bounds.width/b-a[0],maxY:this.bounds.height/b-a[1],width:this.bounds.width/b,height:this.bounds.height/b}));n(this,"animateToViewport",a=>{const b=performance.now(),c=N({},this.currentView),d=()=>{var e=performance.now()-b;e=Ey(e);var f=c.minX+(a.minX-c.minX)*e;this.update({point:[-f,
-(c.minY+(a.minY-c.minY)*e)],zoom:this.bounds.width/(c.maxX+(a.maxX-c.maxX)*e-f)});1>e&&requestAnimationFrame(d)};d()});n(this,"zoomToBounds",({width:a,height:b,minX:c,minY:d})=>{const {bounds:e,camera:f}=this;let g=Math.min((e.width-100)/a,(e.height-100)/b);g=Math.min(1,Math.max(ke.minZoom,f.zoom===g||1>f.zoom?Math.min(1,g):g));a=E.add([-c,-d],[(e.width-a*g)/2/g,(e.height-b*g)/2/g]);this.animateCamera({point:a,zoom:g})});kb(this)}get currentView(){const {bounds:a,camera:{point:b,zoom:c}}=this,d=
a.width/c,e=a.height/c;return{minX:-b[0],minY:-b[1],maxX:d-b[0],maxY:e-b[1],width:d,height:e}}},tc=ke;n(tc,"minZoom",.1);n(tc,"maxZoom",4);n(tc,"panMultiplier",.05);n(tc,"panThreshold",100);M([ma],tc.prototype,"bounds",2);M([ma],tc.prototype,"camera",2);M([ja],tc.prototype,"updateBounds",2);M([ja],tc.prototype,"update",2);M([oa],tc.prototype,"currentView",1);var Fy=class{constructor(a){n(this,"app");n(this,"editShape",b=>{(null==b?0:b.props.isLocked)||this.app.transition("select").selectedTool.transition("editingShape",
{shape:b});return this});n(this,"hoverShape",b=>{this.app.setHoveredShape(b);return this});n(this,"createShapes",(...b)=>{this.app.createShapes(b);return this});n(this,"updateShapes",(...b)=>{this.app.updateShapes(b);return this});n(this,"deleteShapes",(...b)=>{this.app.deleteShapes(b.length?b:this.app.selectedShapesArray);return this});n(this,"selectShapes",(...b)=>{this.app.setSelectedShapes(b);return this});n(this,"deselectShapes",(...b)=>{const c="string"===typeof b[0]?b:b.map(d=>d.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(d=>
!c.includes(d.id)));return this});n(this,"flipHorizontal",(...b)=>{this.app.flipHorizontal(b);return this});n(this,"flipVertical",(...b)=>{this.app.flipVertical(b);return this});n(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(b=>!this.app.shapesInGroups().includes(b)));return this});n(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});n(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});n(this,"zoomOut",()=>{this.app.viewport.zoomOut();
return this});n(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});n(this,"zoomToFit",()=>{var {shapes:b}=this.app.currentPage;if(0===b.length)return this;b=Y.getCommonBounds(b.map(c=>c.bounds));this.app.viewport.zoomToBounds(b);return this});n(this,"cameraToCenter",()=>{var {shapes:b}=this.app.currentPage;if(0===b.length)return this;b=Y.getCommonBounds(b.map(c=>c.bounds));this.app.viewport.update({point:L.add(L.neg(Y.getBoundsCenter(b)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/
2])});return this});n(this,"zoomToSelection",()=>{const {selectionBounds:b}=this.app;if(!b)return this;this.app.viewport.zoomToBounds(b);return this});n(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:L.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});n(this,"toggleGrid",()=>{const {settings:b}=this.app;b.update({showGrid:!b.showGrid});return this});n(this,"toggleSnapToGrid",()=>{const {settings:b}=this.app;b.update({snapToGrid:!b.snapToGrid});
return this});n(this,"togglePenMode",()=>{const {settings:b}=this.app;b.update({penMode:!b.penMode});return this});n(this,"setColor",b=>{const {settings:c}=this.app;c.update({color:b});this.app.selectedShapesArray.forEach(d=>{d.props.isLocked||d.update({fill:b,stroke:b})});this.app.persist();return this});n(this,"setScaleLevel",b=>{const {settings:c}=this.app;c.update({scaleLevel:b});this.app.selectedShapes.forEach(d=>{d.props.isLocked||d.setScaleLevel(b)});this.app.persist();return this});n(this,
"undo",()=>{this.app.undo();return this});n(this,"redo",()=>{this.app.redo();return this});n(this,"persist",()=>{this.app.persist();return this});n(this,"createNewLineBinding",(b,c)=>this.app.createNewLineBinding(b,c));n(this,"clone",b=>{if(!this.app.readOnly&&1===this.app.selectedShapesArray.length&&Object.values(Ve).some(q=>q===this.app.selectedShapesArray[0].type)){var c=this.app.allSelectedShapesArray[0],d=this.app.getShapeClass(c.type),{minX:e,minY:f,maxX:g,maxY:h,width:k,height:l}=c.bounds,
m=[0,0];switch(b){case "down":m=[e,h+100];break;case "up":m=[e,f-100-l];break;case "left":m=[e-100-k,f];break;case "right":m=[g+100,f]}var p=new d(V(N({},c.serialized),{id:lb(),nonce:Date.now(),refs:[],label:"",point:m}));this.app.history.pause();this.app.currentPage.addShapes(p);this.app.createNewLineBinding(c,p);this.app.history.resume();this.app.persist();setTimeout(()=>this.editShape(p))}});n(this,"cloneShapes",({shapes:b,assets:c,bindings:d,point:e=[0,0]})=>{const f=Y.getCommonBounds(b.filter(k=>
"group"!==k.type).map(k=>{var l,m,p,q,t,r,v,y,u,x,w,z,A,D,J,Q;return{minX:null!=(m=null==(l=k.point)?void 0:l[0])?m:e[0],minY:null!=(q=null==(p=k.point)?void 0:p[1])?q:e[1],width:null!=(r=null==(t=k.size)?void 0:t[0])?r:4,height:null!=(y=null==(v=k.size)?void 0:v[1])?y:4,maxX:(null!=(x=null==(u=k.point)?void 0:u[0])?x:e[0])+(null!=(z=null==(w=k.size)?void 0:w[0])?z:4),maxY:(null!=(D=null==(A=k.point)?void 0:A[1])?D:e[1])+(null!=(Q=null==(J=k.size)?void 0:J[1])?Q:4)}})),g=b.map(k=>V(N({},k),{id:lb(),
point:[e[0]+k.point[0]-f.minX,e[1]+k.point[1]-f.minY]}));g.forEach(k=>{var l;k.children&&0<(null==(l=k.children)?void 0:l.length)&&(k.children=k.children.map(m=>{var p;return null==(p=g[b.findIndex(q=>q.id===m)])?void 0:p.id}).filter(Ub))});const h=[];g.flatMap(k=>{var l;return Object.values(null!=(l=k.handles)?l:{})}).forEach(k=>{if(k.bindingId){var l=d[k.bindingId];if(l){var m=b.findIndex(q=>q.id===l.fromId);const p=b.findIndex(q=>q.id===l.toId);l&&-1!==m&&-1!==p?(m=V(N({},l),{id:lb(),fromId:g[m].id,
toId:g[p].id}),h.push(m),k.bindingId=m.id):k.bindingId=void 0}else console.warn("binding not found",k.bindingId)}});c=c.filter(k=>g.some(l=>l.assetId===k.id));return{shapes:g,assets:c,bindings:h}});n(this,"getClonedShapesFromTldrString",(b,c)=>{try{{var d;const l=null==(d=b.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:d[1];if(l){try{var e=JSON.parse(l)}catch(m){e=null}var f=e}else f=void 0}b=f;if(!b)return null;const {shapes:g,bindings:h,assets:k}=b;return this.cloneShapes({shapes:g,
bindings:h,assets:k,point:c})}catch(g){console.log(g)}return null});n(this,"cloneShapesIntoCurrentPage",b=>{(b=this.cloneShapes(b))&&this.addClonedShapes(b);return this});n(this,"addClonedShapes",b=>{const {shapes:c,assets:d,bindings:e}=b;0<d.length&&this.app.createAssets(d);0<c.length&&this.app.createShapes(c);this.app.currentPage.updateBindings(Object.fromEntries(e.map(f=>[f.id,f])));this.app.selectedTool.transition("idle");return this});n(this,"addClonedShapesFromTldrString",(b,c)=>{(b=this.getClonedShapesFromTldrString(b,
c))&&this.addClonedShapes(b);return this});n(this,"doGroup",(b=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){var c=[...b.filter(d=>"group"===d.type),...b.map(d=>this.app.getParentGroup(d))].filter(Ub);this.app.currentPage.removeShapes(...c);b=b.filter(d=>"group"!==d.type);1<b.length&&(c=this.app.getShapeClass("group"),c=new c({id:lb(),type:c.id,parentId:this.app.currentPage.id,children:b.map(d=>d.id)}),this.app.currentPage.addShapes(c),this.app.setSelectedShapes([c]),this.app.bringForward(b));
this.app.persist()}});n(this,"unGroup",(b=this.app.allSelectedShapesArray)=>{if(!this.app.readOnly){b=[...b.filter(d=>"group"===d.type),...b.map(d=>this.app.getParentGroup(d))].filter(Ub);var c=this.app.shapesInGroups(b);0<b.length&&(this.app.currentPage.removeShapes(...b),this.app.persist(),this.app.setSelectedShapes(c))}});n(this,"convertShapes",(b,c=this.app.allSelectedShapesArray)=>{const d=this.app.getShapeClass(b);this.app.currentPage.removeShapes(...c);c=c.map(e=>new d(V(N({},e.serialized),
{type:b,nonce:Date.now()})));this.app.currentPage.addShapes(...c);this.app.persist();this.app.setSelectedShapes(c)});n(this,"setCollapsed",(b,c=this.app.allSelectedShapesArray)=>{c.forEach(d=>{"logseq-portal"===d.props.type&&d.setCollapsed(b)});this.app.persist()});this.app=a}},af=class{constructor(){n(this,"cursor","default");n(this,"rotation",0);n(this,"reset",()=>{this.cursor="default"});n(this,"setCursor",(a,b=0)=>{if(a!==this.cursor||b!==this.rotation)this.cursor=a,this.rotation=b});n(this,"setRotation",
a=>{a!==this.rotation&&(this.rotation=a)});kb(this)}};M([ma],af.prototype,"cursor",2);M([ma],af.prototype,"rotation",2);M([ja],af.prototype,"reset",2);M([ja],af.prototype,"setCursor",2);M([ja],af.prototype,"setRotation",2);var bf=class{constructor(a){n(this,"app");n(this,"stack",[]);n(this,"isPaused",!0);n(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});n(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});n(this,"persist",(b=!1)=>{this.isPaused||this.creating||this.app.notify("persist",
{replace:b})});n(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});n(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});n(this,"instantiateShape",b=>new (this.app.getShapeClass(b.type))(b));n(this,"deserialize",b=>{zb(()=>{var c,{pages:d}=b;const e=this.isPaused;this.pause();const f=[...this.app.selectedIds];try{const g=new Map(this.app.pages),h=[];for(const k of d){const l=
g.get(k.id);if(void 0!==l){const m=new Map(l.shapes.map(p=>[p.props.id,p]));d=[];for(const p of k.shapes){const q=m.get(p.id);void 0!==q?(q.nonce!==p.nonce&&(q.update(p,!0),q.nonce=p.nonce,q.setLastSerialized(p)),m.delete(p.id)):d.push(this.instantiateShape(p))}0<m.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&l.removeShapes(...m.values());0<d.length&&l.addShapes(...d);g.delete(k.id);l.updateBindings(k.bindings);l.nonce=null!=(c=k.nonce)?c:0}else{const {id:m,name:p,shapes:q,bindings:t,
nonce:r}=k;h.push(new Fb(this.app,{id:m,name:p,nonce:r,bindings:t,shapes:q.map(v=>this.instantiateShape(v))}))}}0<h.length&&this.app.addPages(h);0<g.size&&this.app.removePages(Array.from(g.values()));this.app.setSelectedShapes(f).setErasingShapes([])}catch(g){console.warn(g)}e||this.resume()})});this.app=a;kb(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};M([ma],bf.prototype,"stack",2);M([ja],bf.prototype,"persist",2);M([ja],bf.prototype,"undo",2);M([ja],bf.prototype,
"redo",2);M([ja],bf.prototype,"deserialize",2);var Hd=class{constructor(){n(this,"mode","light");n(this,"showGrid",!0);n(this,"snapToGrid",!0);n(this,"penMode",!1);n(this,"scaleLevel","md");n(this,"color","");kb(this)}update(a){Object.assign(this,a)}};M([ma],Hd.prototype,"mode",2);M([ma],Hd.prototype,"showGrid",2);M([ma],Hd.prototype,"snapToGrid",2);M([ma],Hd.prototype,"penMode",2);M([ma],Hd.prototype,"scaleLevel",2);M([ma],Hd.prototype,"color",2);M([ja],Hd.prototype,"update",1);var ta=class extends Ye{constructor(a,
b,c,d){var e,f;super();n(this,"uuid",lb());n(this,"readOnly");n(this,"api");n(this,"inputs",new ab);n(this,"cursors",new af);n(this,"viewport",new tc);n(this,"settings",new Hd);n(this,"Tools",[]);n(this,"history",new bf(this));n(this,"persist",this.history.persist);n(this,"undo",this.history.undo);n(this,"redo",this.history.redo);n(this,"saving",!1);n(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});n(this,"load",
()=>{this.notify("load",null);return this});n(this,"save",()=>{this.notify("save",null);return this});n(this,"pages",new Map([["page",new Fb(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));n(this,"getPageById",g=>{const h=this.pages.get(g);if(!h)throw Error(`Could not find a page named ${g}.`);return h});n(this,"getShapeById",(g,h=this.currentPage.id)=>{var k;return null==(k=this.getPageById(h))?void 0:k.shapesById[g]});n(this,"createShapes",g=>{if(this.readOnly)return this;(g=this.currentPage.addShapes(...g))&&
this.notify("create-shapes",g);this.persist();return this});n(this,"updateShapes",g=>{if(this.readOnly)return this;g.forEach(h=>{const k=this.getShapeById(h.id);null==k?void 0:k.update(h);h.type!==(null==k?void 0:k.type)&&this.api.convertShapes(h.type,[k])});this.persist();return this});n(this,"deleteShapes",g=>{if(0===g.length||this.readOnly)return this;g=g.map(m=>"string"===typeof m?this.getShapeById(m):m).filter(Ub).filter(m=>!m.props.isLocked);const h=this.shapesInGroups(g);g.forEach(m=>{this.getParentGroup(m)&&
h.push(m)});let k=new Set([...g,...h].map(m=>m.id));h.forEach(m=>{var p;const q=this.getParentGroup(m);if(q){const t=null==(p=q.props.children)?void 0:p.filter(r=>r!==m.id);!t||1>=(null==t?void 0:t.length)?k.add(q.id):q.update({children:t})}});const l=(m,p)=>{var q;[...k].includes(m)&&"line"===(null==(q=this.getShapeById(p))?void 0:q.type)&&k.add(p)};this.currentPage.shapes.filter(m=>!m.props.isLocked).flatMap(m=>{var p;return Object.values(null!=(p=m.props.handles)?p:{})}).flatMap(m=>m.bindingId).filter(Ub).map(m=>
{var p,q;const t=null==(p=this.currentPage.bindings[m])?void 0:p.toId;m=null==(q=this.currentPage.bindings[m])?void 0:q.fromId;t&&m&&(l(t,m),l(m,t))});g=[...k].map(m=>this.getShapeById(m));this.setSelectedShapes(this.selectedShapesArray.filter(m=>!k.has(m.id)));(g=this.currentPage.removeShapes(...g))&&this.notify("delete-shapes",g);this.persist();return this});n(this,"bringForward",(g=this.selectedShapesArray)=>{0<g.length&&!this.readOnly&&this.currentPage.bringForward(g);return this});n(this,"sendBackward",
(g=this.selectedShapesArray)=>{0<g.length&&!this.readOnly&&this.currentPage.sendBackward(g);return this});n(this,"sendToBack",(g=this.selectedShapesArray)=>{0<g.length&&!this.readOnly&&this.currentPage.sendToBack(g);return this});n(this,"bringToFront",(g=this.selectedShapesArray)=>{0<g.length&&!this.readOnly&&this.currentPage.bringToFront(g);return this});n(this,"flipHorizontal",(g=this.selectedShapesArray)=>{this.currentPage.flip(g,"horizontal");return this});n(this,"flipVertical",(g=this.selectedShapesArray)=>
{this.currentPage.flip(g,"vertical");return this});n(this,"align",(g,h=this.selectedShapesArray)=>{if(2>h.length||this.readOnly)return this;const k=h.map(t=>{const r=t.getBounds();return{id:t.id,point:[r.minX,r.minY],bounds:r}}),l=Y.getCommonBounds(k.map(({bounds:t})=>t)),m=l.minX+l.width/2,p=l.minY+l.height/2,q=Object.fromEntries(k.map(({id:t,point:r,bounds:v})=>[t,{prev:r,next:{top:[r[0],l.minY],centerVertical:[r[0],p-v.height/2],bottom:[r[0],l.maxY-v.height],left:[l.minX,r[1]],centerHorizontal:[m-
v.width/2,r[1]],right:[l.maxX-v.width,r[1]]}[g]}]));h.forEach(t=>{q[t.id]&&t.update({point:q[t.id].next})});this.persist();return this});n(this,"distribute",(g,h=this.selectedShapesArray)=>{if(2>h.length||this.readOnly)return this;const k=Object.fromEntries(Y.getDistributions(h,g).map(l=>[l.id,l]));h.forEach(l=>{k[l.id]&&l.update({point:k[l.id].next})});this.persist();return this});n(this,"packIntoRectangle",(g=this.selectedShapesArray)=>{if(2>g.length||this.readOnly)return this;const h=Object.fromEntries(Y.getPackedDistributions(g).map(k=>
[k.id,k]));g.forEach(k=>{h[k.id]&&k.update({point:h[k.id].next})});this.persist();return this});n(this,"setLocked",g=>{if(0===this.selectedShapesArray.length||this.readOnly)return this;this.selectedShapesArray.forEach(h=>{h.update({isLocked:g})});this.persist();return this});n(this,"assets",{});n(this,"removeUnusedAssets",()=>{const g=this.getCleanUpAssets();Object.keys(this.assets).forEach(h=>{g.some(k=>k.id===h)||delete this.assets[h]});this.persist();return this});n(this,"copy",()=>{if(0<this.selectedShapesArray.length&&
!this.editingShape){const h=this.allSelectedShapesArray;var g=JSON.stringify({shapes:h.map(l=>l.serialized),assets:this.getCleanUpAssets().filter(l=>h.some(m=>m.props.assetId===l.id)),bindings:Wd(this.currentPage.bindings)});g=encodeURIComponent(`<whiteboard-tldr>${g}</whiteboard-tldr>`);const k=this.selectedShapesArray.map(l=>`((${l.props.id}))`).join(" ");this.notify("copy",{text:k,html:g})}});n(this,"paste",(g,h)=>{var k;this.editingShape||this.readOnly||this.notify("paste",{point:this.inputs.currentPoint,
shiftKey:!!h,dataTransfer:null!=(k=null==g?void 0:g.clipboardData)?k:void 0})});n(this,"cut",()=>{this.copy();this.api.deleteShapes()});n(this,"drop",(g,h)=>{this.notify("drop",{dataTransfer:g,point:h?this.viewport.getPagePoint(h):Y.getBoundsCenter(this.viewport.currentView)})});n(this,"selectTool",(g,h={})=>{this.readOnly&&!["select","move"].includes(g)||this.transition(g,h)});n(this,"editingId");n(this,"setEditingShape",g=>{this.editingId="string"===typeof g?g:null==g?void 0:g.id;return this});
n(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});n(this,"hoveredId");n(this,"setHoveredShape",g=>{this.hoveredId="string"===typeof g?g:null==g?void 0:g.id;return this});n(this,"selectedIds",new Set);n(this,"selectedShapes",new Set);n(this,"selectionRotation",0);n(this,"setSelectedShapes",g=>{var h;const {selectedIds:k,selectedShapes:l}=this;k.clear();l.clear();g[0]&&"string"===typeof g[0]?g.forEach(p=>k.add(p)):g.forEach(p=>k.add(p.id));const m=
this.currentPage.shapes.filter(p=>k.has(p.id));m.forEach(p=>l.add(p));this.selectionRotation=1===m.length?null!=(h=m[0].props.rotation)?h:0:0;0===g.length&&this.setEditingShape();return this});n(this,"erasingIds",new Set);n(this,"erasingShapes",new Set);n(this,"setErasingShapes",g=>{const {erasingIds:h,erasingShapes:k}=this;h.clear();k.clear();g[0]&&"string"===typeof g[0]?g.forEach(l=>h.add(l)):g.forEach(l=>h.add(l.id));this.currentPage.shapes.filter(l=>h.has(l.id)).forEach(l=>k.add(l));return this});
n(this,"bindingIds");n(this,"setBindingShapes",g=>{this.bindingIds=g;return this});n(this,"clearBindingShape",()=>this.setBindingShapes());n(this,"createNewLineBinding",(g,h)=>{g="string"===typeof g?this.getShapeById(g):g;h="string"===typeof h?this.getShapeById(h):h;if((null==g?0:g.canBind)&&(null==h?0:h.canBind)&&(h=zt(g,h))){const [k,l]=h;this.createShapes([k]);this.currentPage.updateBindings(Object.fromEntries(l.map(m=>[m.id,m])));this.persist();return!0}return!1});n(this,"brush");n(this,"setBrush",
g=>{this.brush=g;return this});n(this,"setCamera",(g,h)=>{this.viewport.update({point:g,zoom:h});return this});n(this,"getPagePoint",g=>{const {camera:h}=this.viewport;return E.sub(E.div(g,h.zoom),h.point)});n(this,"getScreenPoint",g=>{const {camera:h}=this.viewport;return E.mul(E.add(g,h.point),h.zoom)});n(this,"Shapes",new Map);n(this,"registerShapes",g=>{g.forEach(h=>{if("group"===h.id){const k=this;h.prototype.getShapes=function(){var l,m;return null!=(m=null==(l=this.props.children)?void 0:l.map(p=>
k.getShapeById(p)).filter(Boolean))?m:[]}}return this.Shapes.set(h.id,h)})});n(this,"deregisterShapes",g=>{g.forEach(h=>this.Shapes.delete(h.id))});n(this,"getShapeClass",g=>{if(!g)throw Error("No shape type provided.");const h=this.Shapes.get(g);if(!h)throw Error(`Could not find shape class for ${g}`);return h});n(this,"wrapUpdate",g=>{zb(()=>{const h=!this.history.isPaused;h&&this.history.pause();g();h&&(this.history.resume(),this.persist())})});n(this,"subscriptions",new Set([]));n(this,"subscribe",
(g,h)=>{if(void 0===h)throw Error("Callback is required.");const k={event:g,callback:h};this.subscriptions.add(k);return()=>this.unsubscribe(k)});n(this,"unsubscribe",g=>{this.subscriptions.delete(g);return this});n(this,"notify",(g,h)=>{this.subscriptions.forEach(k=>{k.event===g&&k.callback(this,h)});return this});n(this,"onTransition",()=>{});n(this,"onPointerDown",(g,h)=>{if(!this.editingShape&&1===h.button&&!this.isIn("move"))this.temporaryTransitionToMove(h);else if(2===h.button&&!this.editingShape)h.preventDefault(),
this.transition("select");else if("clientX"in h)this.inputs.onPointerDown([...this.viewport.getPagePoint([h.clientX,h.clientY]),h.pressure],h)});n(this,"onPointerUp",(g,h)=>{if(!this.editingShape&&1===h.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),h.stopPropagation(),h.preventDefault();else if("clientX"in h)this.inputs.onPointerUp([...this.viewport.getPagePoint([h.clientX,h.clientY]),h.pressure],h)});n(this,"onPointerMove",(g,h)=>{if("clientX"in h)this.inputs.onPointerMove([...this.viewport.getPagePoint([h.clientX,
h.clientY]),h.pressure],h)});n(this,"onKeyDown",(g,h)=>{if(this.editingShape||" "!==h.key||this.isIn("move"))this.inputs.onKeyDown(h);else this.temporaryTransitionToMove(h)});n(this,"onKeyUp",(g,h)=>{if(!this.editingShape&&" "===h.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),h.stopPropagation(),h.preventDefault();else this.inputs.onKeyUp(h)});n(this,"onPinchStart",(g,h)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(g.point),.5],h)});n(this,"onPinch",(g,h)=>{this.inputs.onPinch([...this.viewport.getPagePoint(g.point),
.5],h)});n(this,"onPinchEnd",(g,h)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(g.point),.5],h)});this._states=[Ze,$e];this.readOnly=d;this.history.pause();this.states&&0<this.states.length&&(this.registerStates(this.states),d=null!=(e=this.initial)?e:this.states[0].id,e=this.children.get(d))&&(this.currentState=e,null==(f=this.currentState)?void 0:f._events.onEnter({fromId:"initial"}));b&&this.registerShapes(b);c&&this.registerTools(c);this.history.resume();a&&this.history.deserialize(a);
this.api=new Fy(this);kb(this);this.notify("mount",null)}loadDocumentModel(a){this.history.deserialize(a);a.assets&&0<a.assets.length&&this.addAssets(a.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(a){a.forEach(b=>this.pages.set(b.id,b));this.persist();return this}removePages(a){a.forEach(b=>this.pages.delete(b.id));this.persist();return this}shapesInGroups(a=this.shapes){return a.flatMap(b=>
b.props.children).filter(Ub).map(b=>this.getShapeById(b)).filter(Ub)}getParentGroup(a){return this.shapes.find(b=>{var c;return null==(c=b.props.children)?void 0:c.includes(a.id)})}addAssets(a){a.forEach(b=>this.assets[b.id]=b);return this}removeAssets(a){"string"===typeof a[0]?a.forEach(b=>delete this.assets[b]):a.forEach(b=>delete this.assets[b.id]);this.persist();return this}getCleanUpAssets(){const a=new Set;this.pages.forEach(b=>b.shapes.forEach(c=>{c.props.assetId&&this.assets[c.props.assetId]&&
a.add(this.assets[c.props.assetId])}));return Array.from(a)}createAssets(a){this.addAssets(a);this.notify("create-assets",{assets:a});this.persist();return this}get selectedTool(){return this.currentState}registerTools(a){this.Tools=a;return this.registerStates(a)}get editingShape(){const {editingId:a,currentPage:b}=this;return a?b.shapes.find(c=>c.id===a):void 0}get hoveredShape(){const {hoveredId:a,currentPage:b}=this;return a?b.shapes.find(c=>c.id===a):void 0}get hoveredGroup(){const {hoveredShape:a}=
this;return a?this.shapes.find(b=>{var c;return"group"===b.type&&(null==(c=b.props.children)?void 0:c.includes(a.id))}):void 0}get selectedShapesArray(){const {selectedShapes:a,selectedTool:b}=this;return"select"!==b.id?[]:Array.from(a.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:a}=this;return[...(new Set([...a,...this.shapesInGroups(a)]))]}setSelectionRotation(a){this.selectionRotation=a}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var a;
const b=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(d=>{var e;return Object.values(null!=(e=d.props.handles)?e:{})}).flatMap(d=>d.bindingId).filter(Ub).flatMap(d=>{var e,f;return[null==(e=this.currentPage.bindings[d])?void 0:e.fromId,null==(f=this.currentPage.bindings[d])?void 0:f.toId]}).filter(Ub):[],c=[...(null!=(a=this.bindingIds)?a:[]),...b];return c?this.currentPage.shapes.filter(d=>null==c?void 0:c.includes(d.id)):void 0}get currentGrid(){const {zoom:a}=this.viewport.camera;
return.15>a?128:1>a?32:8}get shapes(){const {currentPage:{shapes:a}}=this;return Array.from(a.values())}get shapesInViewport(){const {selectedShapes:a,currentPage:b,viewport:{currentView:c}}=this;return b.shapes.filter(d=>!d.canUnmount||a.has(d)||Y.boundsContain(c,d.rotatedBounds)||Y.boundsCollide(c,d.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:a,viewport:{currentView:b}}=this;if(a&&!Y.boundsContain(b,a)&&!Y.boundsCollide(b,a)){var c=Y.getBoundsCenter(a);return E.clampV([(c[0]-
b.minX-b.width/2)/b.width,(c[1]-b.minY-b.height/2)/b.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:a}=this;if(0!==a.length)return 1===a.length?V(N({},a[0].bounds),{rotation:a[0].props.rotation}):Y.getCommonBounds(this.selectedShapesArray.map(b=>b.rotatedBounds))}get showSelection(){var a;const {selectedShapesArray:b}=this;return this.isIn("select")&&!this.isInAny("select.translating","select.pinching","select.rotating")&&(1===b.length&&!(null==(a=b[0])?0:a.hideSelection)||1<b.length)}get showSelectionDetail(){return this.isIn("select")&&
!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(a=>a.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<a.length&&!this.readOnly&&!a.every(b=>b.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<a.length&&!this.readOnly&&!a.some(b=>b.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:a}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape","select.pointingRotateHandle","select.pointingResizeHandle")&&1===a.length&&!this.readOnly&&!a.every(b=>b.hideResizeHandles)}get showCloneHandles(){const {selectedShapesArray:a}=
this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape")&&1===a.length&&Object.values(Ve).some(b=>b===this.selectedShapesArray[0].type)&&!this.readOnly}temporaryTransitionToMove(a){a.stopPropagation();a.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};n(ta,"id","app");n(ta,"initial","select");M([oa],ta.prototype,"serialized",1);M([ma],ta.prototype,"pages",2);M([oa],
ta.prototype,"currentPageId",1);M([oa],ta.prototype,"currentPage",1);M([ja],ta.prototype,"addPages",1);M([ja],ta.prototype,"removePages",1);M([ja],ta.prototype,"createShapes",2);M([ja],ta.prototype,"updateShapes",2);M([ja],ta.prototype,"deleteShapes",2);M([ma],ta.prototype,"assets",2);M([ja],ta.prototype,"addAssets",1);M([ja],ta.prototype,"removeAssets",1);M([ja],ta.prototype,"removeUnusedAssets",2);M([oa],ta.prototype,"selectedTool",1);M([ma],ta.prototype,"editingId",2);M([oa],ta.prototype,"editingShape",
1);M([ja],ta.prototype,"setEditingShape",2);M([ma],ta.prototype,"hoveredId",2);M([oa],ta.prototype,"hoveredShape",1);M([oa],ta.prototype,"hoveredGroup",1);M([ja],ta.prototype,"setHoveredShape",2);M([ma],ta.prototype,"selectedIds",2);M([ma],ta.prototype,"selectedShapes",2);M([ma],ta.prototype,"selectionRotation",2);M([oa],ta.prototype,"selectedShapesArray",1);M([oa],ta.prototype,"allSelectedShapes",1);M([oa],ta.prototype,"allSelectedShapesArray",1);M([ja],ta.prototype,"setSelectedShapes",2);M([ja],
ta.prototype,"setSelectionRotation",1);M([ma],ta.prototype,"erasingIds",2);M([ma],ta.prototype,"erasingShapes",2);M([oa],ta.prototype,"erasingShapesArray",1);M([ja],ta.prototype,"setErasingShapes",2);M([ma],ta.prototype,"bindingIds",2);M([oa],ta.prototype,"bindingShapes",1);M([ja],ta.prototype,"setBindingShapes",2);M([ja],ta.prototype,"createNewLineBinding",2);M([ma],ta.prototype,"brush",2);M([ja],ta.prototype,"setBrush",2);M([ja],ta.prototype,"setCamera",2);M([oa],ta.prototype,"currentGrid",1);M([oa],
ta.prototype,"shapes",1);M([oa],ta.prototype,"shapesInViewport",1);M([oa],ta.prototype,"selectionDirectionHint",1);M([oa],ta.prototype,"selectionBounds",1);M([oa],ta.prototype,"showSelection",1);M([oa],ta.prototype,"showSelectionDetail",1);M([oa],ta.prototype,"showSelectionRotation",1);M([oa],ta.prototype,"showContextBar",1);M([oa],ta.prototype,"showRotateHandles",1);M([oa],ta.prototype,"showResizeHandles",1);M([oa],ta.prototype,"showCloneHandles",1);var Dt=Function.prototype.toString,Di=Object.create,
Gt=Object.prototype.toString,Bt=function(){function a(){this._keys=[];this._values=[]}a.prototype.has=function(b){return!!~this._keys.indexOf(b)};a.prototype.get=function(b){return this._values[this._keys.indexOf(b)]};a.prototype.set=function(b,c){this._keys.push(b);this._values.push(c)};return a}(),St="undefined"!==typeof WeakMap?Ct:At,Gy="g"===/test/g.flags?Ft:Et,Rt="undefined"!==typeof Symbol?Ht:fm,Lt=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,gm=Object.getOwnPropertyNames,Ei=Object.getOwnPropertySymbols,
Ip=Object.prototype,im=Ip.hasOwnProperty,Ot=Ip.propertyIsEnumerable,Jp="function"===typeof Ei,Jt=Jp?It:gm,Qt=Array.isArray,Gi=Object.assign,Pt=Object.getPrototypeOf,lm={array:function(a,b){var c=new b.Constructor;b.cache.set(a,c);for(var d=0,e=a.length;d<e;++d)c[d]=b.copier(a[d],b);return c},arrayBuffer:function(a,b){return a.slice(0)},blob:function(a,b){return a.slice(0,a.size,a.type)},dataView:function(a,b){return new b.Constructor(a.buffer.slice(0))},date:function(a,b){return new b.Constructor(a.getTime())},
error:Sg,map:hm,object:Jp?Nt:Mt,regExp:function(a,b){b=new b.Constructor(a.source,Gy(a));b.lastIndex=a.lastIndex;return b},set:jm},Hy=Gi({},lm,{array:function(a,b){var c=new b.Constructor;b.cache.set(a,c);return Rg(a,c,b)},map:function(a,b){return Rg(a,hm(a,b),b)},object:function(a,b){var c=Ci(b.prototype);b.cache.set(a,c);return Rg(a,c,b)},set:function(a,b){return Rg(a,jm(a,b),b)}});km(Gi({},Hy,{}));var Iy=km({}),Dy=ea(by()),Tt=ea(cy()),je=Iy,mc=class{static insertTextFirefox(a,b){a.setRangeText(b,
a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:b,inputType:"insertText",isComposing:!1}))}static insert(a,b){const c=a.ownerDocument,d=c.activeElement;d!==a&&a.focus();c.execCommand("insertText",!1,b)||mc.insertTextFirefox(a,b);d===c.body?a.blur():d instanceof HTMLElement&&d!==a&&d.focus()}static set(a,b){a.select();mc.insert(a,b)}static getSelection(a){const {selectionStart:b,selectionEnd:c}=a;return a.value.slice(b?b:void 0,c?c:void 0)}static wrapSelection(a,
b,c){const {selectionStart:d,selectionEnd:e}=a,f=mc.getSelection(a);mc.insert(a,b+f+(null!=c?c:b));a.selectionStart=(d||0)+b.length;a.selectionEnd=(e||0)+b.length}static replace(a,b,c){let d=0;a.value.replace(b,(...e)=>{const f=d+e[e.length-2],g=e[0].length;a.selectionStart=f;a.selectionEnd=f+g;e="string"===typeof c?c:c(...e);mc.insert(a,e);a.selectionStart=f;d+=e.length-g;return e})}static findLineEnd(a,b){const c=a.lastIndexOf("\n",b-1)+1;return"\t"!==a.charAt(c)?b:c+1}static indent(a){var b;const {selectionStart:c,
selectionEnd:d,value:e}=a;var f=e.slice(c,d);if((f=null==(b=/\n/g.exec(f))?void 0:b.length)&&0<f){b=e.lastIndexOf("\n",c-1)+1;var g=a.value.slice(b,d-1);f=g.replace(/^|\n/g,`$&${mc.INDENT}`);g=f.length-g.length;a.setSelectionRange(b,d-1);mc.insert(a,f);a.setSelectionRange(c+1,d+g)}else mc.insert(a,mc.INDENT)}static unindent(a){const {selectionStart:b,selectionEnd:c,value:d}=a;var e=d.lastIndexOf("\n",b-1)+1;const f=mc.findLineEnd(d,c);var g=a.value.slice(e,f);const h=g.replace(/(^|\n)(\t| {1,2})/g,
"$1");g=g.length-h.length;a.setSelectionRange(e,f);mc.insert(a,h);e=(e=/\t| {1,2}/.exec(d.slice(e,b)))?e[0].length:0;a.setSelectionRange(b-e,Math.max(b-e,c-g))}static normalizeText(a){return a.replace(mc.fixNewLines,"\n")}},cf=mc;n(cf,"fixNewLines",/\r?\n|\r/g);n(cf,"INDENT","  ");var yd;"undefined"!==typeof window&&(yd=Wt());var Ii=new Map,Kp=Ji()?"⌘":"ctrl",Lu=class extends ta{},pm=ea(F(19)),Jy=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var om=ea(F(19)),Li={},Qf=ea(F(19)),
Zt=a=>{for(a=a.parentElement;a&&a!==document.body;){const {overflowY:b}=window.getComputedStyle(a);if(a.scrollHeight>a.clientHeight&&("auto"===b||"scroll"===b||"overlay"===b))return a;a=a.parentElement}return document},Mi=ea(F(19)),Ni=new Map,du={accent:"var(--lx-accent-09, hsl(var(--primary)))",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedStroke)",selectFill:"var(--color-selectedFill)",
binding:"var(--color-binding, rgba(65, 132, 244, 0.5))",background:"var(--ls-primary-background-color, hsl(var(--background)))",foreground:"var(--ls-primary-text-color, hsl(var(--foreground)))",grid:"var(--ls-quaternary-background-color, hsl(var(--secondary)))"},eu=((a,...b)=>a.reduce((c,d,e)=>c+d+(e<b.length?b[e]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: calc(64px / var(--tl-zoom));;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-clone-handle:hover {
    fill: var(--tl-selectStroke);
    cursor: pointer;
  }

  .tl-clone-handle:hover line {
    stroke: var(--tl-background);
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,tm=ea(F(19)),sm=ea(F(19)),Oi={},bb={toVector(a,b){void 0===a&&(a=b);return Array.isArray(a)?a:[a,a]},add(a,b){return[a[0]+b[0],a[1]+b[1]]},sub(a,b){return[a[0]-b[0],a[1]-b[1]]},addTo(a,b){a[0]+=b[0];a[1]+=b[1]},subTo(a,b){a[0]-=b[0];a[1]-=b[1]}},ym={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},iu=["enter","leave"],lu=["gotpointercapture","lostpointercapture"],
Lp=class{constructor(a,b,c){this.ctrl=a;this.args=b;this.key=c;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(a){this.ctrl.state[this.key]=a}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:a,
shared:b,ingKey:c,args:d}=this;b[c]=a._active=a.active=a._blocked=a._force=!1;a._step=[!1,!1];a.intentional=!1;a._movement=[0,0];a._distance=[0,0];a._direction=[0,0];a._delta=[0,0];a._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];a.args=d;a.axis=void 0;a.memo=void 0;a.elapsedTime=0;a.direction=[0,0];a.distance=[0,0];a.overflow=[0,0];a._movementBound=[!1,!1];a.velocity=[0,0];a.movement=[0,0];a.delta=[0,0];a.timeStamp=0}start(a){const b=this.state,c=this.config;b._active||(this.reset(),this.computeInitial(),
b._active=!0,b.target=a.target,b.currentTarget=a.currentTarget,b.lastOffset=c.from?Ug(c.from,b):b.offset,b.offset=b.lastOffset);b.startTime=b.timeStamp=a.timeStamp}computeValues(a){const b=this.state;b._values=a;b.values=this.config.transform(a)}computeInitial(){const a=this.state;a._initial=a._values;a.initial=a.values}compute(a){const {state:b,config:c,shared:d}=this;b.args=this.args;var e=0;if(a){b.event=a;c.preventDefault&&a.cancelable&&b.event.preventDefault();b.type=a.type;d.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;d.locked=!!document.pointerLockElement;e=Object;var f=e.assign,g={};"buttons"in a&&(g.buttons=a.buttons);if("shiftKey"in a){const {shiftKey:z,altKey:A,metaKey:D,ctrlKey:J}=a;Object.assign(g,{shiftKey:z,altKey:A,metaKey:D,ctrlKey:J})}f.call(e,d,g);d.down=d.pressed=1===d.buttons%2||0<d.touches;e=a.timeStamp-b.timeStamp;b.timeStamp=a.timeStamp;b.elapsedTime=b.timeStamp-b.startTime}b._active&&(f=b._delta.map(Math.abs),bb.addTo(b._distance,f));this.axisIntent&&this.axisIntent(a);
const [h,k]=b._movement,[l,m]=c.threshold,{_step:p,values:q}=b;c.hasCustomTransform?(!1===p[0]&&(p[0]=Math.abs(h)>=l&&q[0]),!1===p[1]&&(p[1]=Math.abs(k)>=m&&q[1])):(!1===p[0]&&(p[0]=Math.abs(h)>=l&&Math.sign(h)*l),!1===p[1]&&(p[1]=Math.abs(k)>=m&&Math.sign(k)*m));b.intentional=!1!==p[0]||!1!==p[1];if(b.intentional){f=[0,0];if(c.hasCustomTransform){const [z,A]=q;f[0]=!1!==p[0]?z-p[0]:0;f[1]=!1!==p[1]?A-p[1]:0}else f[0]=!1!==p[0]?h-p[0]:0,f[1]=!1!==p[1]?k-p[1]:0;this.restrictToAxis&&!b._blocked&&this.restrictToAxis(f);
g=b.offset;var t=b._active&&!b._blocked||b.active;t&&(b.first=b._active&&!b.active,b.last=!b._active&&b.active,b.active=d[this.ingKey]=b._active,a&&(b.first&&("bounds"in c&&(b._bounds=Ug(c.bounds,b)),this.setup&&this.setup()),b.movement=f,this.computeOffset()));var [r,v]=b.offset,[[y,u],[x,w]]=b._bounds;b.overflow=[r<y?-1:r>u?1:0,v<x?-1:v>w?1:0];b._movementBound[0]=b.overflow[0]?!1===b._movementBound[0]?b._movement[0]:b._movementBound[0]:!1;b._movementBound[1]=b.overflow[1]?!1===b._movementBound[1]?
b._movement[1]:b._movementBound[1]:!1;b.offset=gu(b._bounds,b.offset,b._active?c.rubberband||[0,0]:[0,0]);b.delta=bb.sub(b.offset,g);this.computeMovement();t&&(!b.last||32<e)&&(b.delta=bb.sub(b.offset,g),a=b.delta.map(Math.abs),bb.addTo(b.distance,a),b.direction=b.delta.map(Math.sign),b._direction=b._delta.map(Math.sign),!b.first&&0<e&&(b.velocity=[a[0]/e,a[1]/e]))}}emit(){const a=this.state;var b=this.shared;const c=this.config;a._active||this.clean();if(!a._blocked&&a.intentional||a._force||c.triggerAllEvents)b=
this.handler(ib(ib(ib({},b),a),{},{[this.aliasKey]:a.values})),void 0!==b&&(a.memo=b)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},gg=class extends Lp{constructor(...a){super(...a);vb(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=bb.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=bb.sub(this.state.offset,this.state.lastOffset)}axisIntent(a){const b=
this.state,c=this.config;!b.axis&&a&&(a="object"===typeof c.axisThreshold?c.axisThreshold[zm(a)]:c.axisThreshold,b.axis=ru(b._movement,a));b._blocked=(c.lockDirection||!!c.axis)&&!b.axis||!!c.axis&&c.axis!==b.axis}restrictToAxis(a){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":a[1]=0;break;case "y":a[0]=0}}},Ky=a=>a,Mp={enabled(a=!0){return a},eventOptions(a,b,c){return ib(ib({},c.shared.eventOptions),a)},preventDefault(a=!1){return a},triggerAllEvents(a=!1){return a},
rubberband(a=0){switch(a){case !0:return[.15,.15];case !1:return[0,0];default:return bb.toVector(a)}},from(a){if("function"===typeof a)return a;if(null!=a)return bb.toVector(a)},transform(a,b,c){a=a||c.shared.transform;this.hasCustomTransform=!!a;return a||Ky},threshold(a){return bb.toVector(a,0)}},le=ib(ib({},Mp),{},{axis(a,b,{axis:c}){this.lockDirection="lock"===c;if(!this.lockDirection)return c},axisThreshold(a=0){return a},bounds(a={}){if("function"===typeof a)return f=>le.bounds(a(f));if("current"in
a)return()=>a.current;if("function"===typeof HTMLElement&&a instanceof HTMLElement)return a;const {left:b=-Infinity,right:c=Infinity,top:d=-Infinity,bottom:e=Infinity}=a;return[[b,c],[d,e]]}}),Np={ArrowRight:(a=1)=>[10*a,0],ArrowLeft:(a=1)=>[-10*a,0],ArrowUp:(a=1)=>[0,-10*a],ArrowDown:(a=1)=>[0,10*a]},Ly=class extends gg{constructor(...a){super(...a);vb(this,"ingKey","dragging")}reset(){super.reset();const a=this.state;a._pointerId=void 0;a._pointerActive=!1;a._keyboardActive=!1;a._preventScroll=
!1;a._delayed=!1;a.swipe=[0,0];a.tap=!1;a.canceled=!1;a.cancel=this.cancel.bind(this)}setup(){const a=this.state;if(a._bounds instanceof HTMLElement){const b=a._bounds.getBoundingClientRect(),c=a.currentTarget.getBoundingClientRect();a._bounds=le.bounds({left:b.left-c.left+a.offset[0],right:b.right-c.right+a.offset[0],top:b.top-c.top+a.offset[1],bottom:b.bottom-c.bottom+a.offset[1]})}}cancel(){const a=this.state;a.canceled||(a.canceled=!0,a._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=
this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(a){const b=this.config,c=this.state;if(null==a.buttons||(Array.isArray(b.pointerButtons)?b.pointerButtons.includes(a.buttons):-1===b.pointerButtons||b.pointerButtons===a.buttons)){var d=this.ctrl.setEventIds(a);b.pointerCapture&&a.target.setPointerCapture(a.pointerId);d&&1<d.size&&c._pointerActive||(this.start(a),this.setupPointer(a),
c._pointerId=Qi(a),c._pointerActive=!0,this.computeValues(Je(a)),this.computeInitial(),b.preventScrollAxis&&"mouse"!==zm(a)?(c._active=!1,this.setupScrollPrevention(a)):0<b.delay?(this.setupDelayTrigger(a),b.triggerAllEvents&&(this.compute(a),this.emit())):this.startPointerDrag(a))}}startPointerDrag(a){const b=this.state;b._active=!0;b._preventScroll=!0;b._delayed=!1;this.compute(a);this.emit()}pointerMove(a){const b=this.state,c=this.config;if(b._pointerActive&&(b.type!==a.type||a.timeStamp!==b.timeStamp)){var d=
Qi(a);if(void 0===b._pointerId||d===b._pointerId)d=Je(a),document.pointerLockElement===a.target?b._delta=[a.movementX,a.movementY]:(b._delta=bb.sub(d,b._values),this.computeValues(d)),bb.addTo(b._movement,b._delta),this.compute(a),b._delayed&&b.intentional?(this.timeoutStore.remove("dragDelay"),b.active=!1,this.startPointerDrag(a)):c.preventScrollAxis&&!b._preventScroll?b.axis&&(b.axis===c.preventScrollAxis||"xy"===c.preventScrollAxis?(b._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),
this.startPointerDrag(a))):this.emit()}}pointerUp(a){this.ctrl.setEventIds(a);try{this.config.pointerCapture&&a.target.hasPointerCapture(a.pointerId)&&a.target.releasePointerCapture(a.pointerId)}catch(g){}const b=this.state,c=this.config;if(b._active&&b._pointerActive){var d=Qi(a);if(void 0===b._pointerId||d===b._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(a);var [e,f]=b._distance;b.tap=e<=c.tapsThreshold&&f<=c.tapsThreshold;if(b.tap&&c.filterTaps)b._force=!0;else{const [g,
h]=b.direction,[k,l]=b.velocity,[m,p]=b.movement,[q,t]=c.swipe.velocity,[r,v]=c.swipe.distance;b.elapsedTime<c.swipe.duration&&(Math.abs(k)>q&&Math.abs(m)>r&&(b.swipe[0]=g),Math.abs(l)>t&&Math.abs(p)>v&&(b.swipe[1]=h))}this.emit()}}}pointerClick(a){!this.state.tap&&0<a.detail&&(a.preventDefault(),a.stopPropagation())}setupPointer(a){const b=this.config,c=b.device;b.pointerLock&&a.currentTarget.requestPointerLock();b.pointerCapture||(this.eventStore.add(this.sharedConfig.window,c,"change",this.pointerMove.bind(this)),
this.eventStore.add(this.sharedConfig.window,c,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,c,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(a){this.state._preventScroll&&a.cancelable&&a.preventDefault()}setupScrollPrevention(a){this.state._preventScroll=!1;"persist"in a&&"function"===typeof a.persist&&a.persist();const b=this.eventStore.add(this.sharedConfig.window,
"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",b);this.eventStore.add(this.sharedConfig.window,"touch","cancel",b);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,a)}setupDelayTrigger(a){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0];this.startPointerDrag(a)},this.config.delay)}keyDown(a){const b=Np[a.key];if(b){const c=this.state,
d=a.shiftKey?10:a.altKey?.1:1;this.start(a);c._delta=b(d);c._keyboardActive=!0;bb.addTo(c._movement,c._delta);this.compute(a);this.emit()}}keyUp(a){a.key in Np&&(this.state._keyboardActive=!1,this.setActive(),this.compute(a),this.emit())}bind(a){const b=this.config.device;a(b,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(a(b,"change",this.pointerMove.bind(this)),a(b,"end",this.pointerUp.bind(this)),a(b,"cancel",this.pointerUp.bind(this)),a("lostPointerCapture","",this.pointerUp.bind(this)));
this.config.keys&&(a("key","down",this.keyDown.bind(this)),a("key","up",this.keyUp.bind(this)));this.config.filterTaps&&a("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},me="undefined"!==typeof window&&window.document&&window.document.createElement;try{var Op="constructor"in GestureEvent}catch(a){Op=!1}var My=Op,hg=me&&"ontouchstart"in window||me&&1<window.navigator.maxTouchPoints,Pp=me&&"ontouchstart"in window||me&&1<window.navigator.maxTouchPoints,Qp=me&&"onpointerdown"in window,
Ny=me&&"exitPointerLock"in window.document,Rp={mouse:0,touch:0,pen:8},Oy=ib(ib({},le),{},{device(a,b,{pointer:{touch:c=!1,lock:d=!1,mouse:e=!1}={}}){this.pointerLock=d&&Ny;return hg&&c?"touch":this.pointerLock?"mouse":Qp&&!e?"pointer":hg?"touch":"mouse"},preventScrollAxis(a,b,{preventScroll:c}){this.preventScrollDelay="number"===typeof c?c:c||void 0===c&&a?250:void 0;if(Pp&&!1!==c)return a?a:void 0!==c?"y":void 0},pointerCapture(a,b,{pointer:{capture:c=!0,buttons:d=1,keys:e=!0}={}}){this.pointerButtons=
d;this.keys=e;return!this.pointerLock&&"pointer"===this.device&&c},threshold(a,b,{filterTaps:c=!1,tapsThreshold:d=3,axis:e}){a=bb.toVector(a,c?d:e?1:0);this.filterTaps=c;this.tapsThreshold=d;return a},swipe({velocity:a=.5,distance:b=50,duration:c=250}={}){return{velocity:this.transform(bb.toVector(a)),distance:this.transform(bb.toVector(b)),duration:c}},delay(a=0){switch(a){case !0:return 180;case !1:return 0;default:return a}},axisThreshold(a){return a?ib(ib({},Rp),a):Rp}}),Py=class extends Lp{constructor(...a){super(...a);
vb(this,"ingKey","pinching");vb(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const a=this.state;a._touchIds=[];a.canceled=!1;a.cancel=this.cancel.bind(this);a.turns=0}computeOffset(){const {type:a,movement:b,lastOffset:c}=this.state;this.state.offset="wheel"===a?bb.add(b,c):[(1+b[0])*c[0],b[1]+c[1]]}computeMovement(){const {offset:a,lastOffset:b}=this.state;this.state.movement=[a[0]/b[0],a[1]-b[1]]}axisIntent(){const a=
this.state,[b,c]=a._movement;if(!a.axis){const d=30*Math.abs(b)-Math.abs(c);0>d?a.axis="angle":0<d&&(a.axis="scale")}}restrictToAxis(a){this.config.lockDirection&&("scale"===this.state.axis?a[1]=0:"angle"===this.state.axis&&(a[0]=0))}cancel(){const a=this.state;a.canceled||setTimeout(()=>{a.canceled=!0;a._active=!1;this.compute();this.emit()},0)}touchStart(a){this.ctrl.setEventIds(a);var b=this.state;const c=this.ctrl.touchIds;b._active&&b._touchIds.every(d=>c.has(d))||2>c.size||(this.start(a),b._touchIds=
Array.from(c).slice(0,2),b=Bm(a,b._touchIds),this.pinchStart(a,b))}pointerStart(a){if(null==a.buttons||1===a.buttons%2){this.ctrl.setEventIds(a);a.target.setPointerCapture(a.pointerId);var b=this.state,c=b._pointerEvents,d=this.ctrl.pointerIds;b._active&&Array.from(c.keys()).every(e=>d.has(e))||(2>c.size&&c.set(a.pointerId,a),2>b._pointerEvents.size||(this.start(a),b=Pi(...Array.from(c.values())),this.pinchStart(a,b)))}}pinchStart(a,b){this.state.origin=b.origin;this.computeValues([b.distance,b.angle]);
this.computeInitial();this.compute(a);this.emit()}touchMove(a){if(this.state._active){var b=Bm(a,this.state._touchIds);this.pinchMove(a,b)}}pointerMove(a){var b=this.state._pointerEvents;b.has(a.pointerId)&&b.set(a.pointerId,a);this.state._active&&(b=Pi(...Array.from(b.values())),this.pinchMove(a,b))}pinchMove(a,b){const c=this.state,d=b.angle-c._values[1];let e=0;270<Math.abs(d)&&(e+=Math.sign(d));this.computeValues([b.distance,b.angle-360*e]);c.origin=b.origin;c.turns=e;c._movement=[c._values[0]/
c._initial[0]-1,c._values[1]-c._initial[1]];this.compute(a);this.emit()}touchEnd(a){this.ctrl.setEventIds(a);this.state._active&&this.state._touchIds.some(b=>!this.ctrl.touchIds.has(b))&&(this.state._active=!1,this.compute(a),this.emit())}pointerEnd(a){const b=this.state;this.ctrl.setEventIds(a);try{a.target.releasePointerCapture(a.pointerId)}catch(c){}b._pointerEvents.has(a.pointerId)&&b._pointerEvents.delete(a.pointerId);b._active&&2>b._pointerEvents.size&&(b._active=!1,this.compute(a),this.emit())}gestureStart(a){a.cancelable&&
a.preventDefault();const b=this.state;b._active||(this.start(a),this.computeValues([a.scale,a.rotation]),b.origin=[a.clientX,a.clientY],this.compute(a),this.emit())}gestureMove(a){a.cancelable&&a.preventDefault();if(this.state._active){var b=this.state;this.computeValues([a.scale,a.rotation]);b.origin=[a.clientX,a.clientY];var c=b._movement;b._movement=[a.scale-1,a.rotation];b._delta=bb.sub(b._movement,c);this.compute(a);this.emit()}}gestureEnd(a){this.state._active&&(this.state._active=!1,this.compute(a),
this.emit())}wheel(a){const b=this.config.modifierKey;if(!b||a[b])this.state._active?this.wheelChange(a):this.wheelStart(a),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(a){this.start(a);this.wheelChange(a)}wheelChange(a){"uv"in a||a.cancelable&&a.preventDefault();const b=this.state;b._delta=[-Cm(a)[1]/100*b.offset[0],0];bb.addTo(b._movement,b._delta);Dm(b);this.state.origin=[a.clientX,a.clientY];this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=
!1,this.compute(),this.emit())}bind(a){const b=this.config.device;b&&(a(b,"start",this[b+"Start"].bind(this)),a(b,"change",this[b+"Move"].bind(this)),a(b,"end",this[b+"End"].bind(this)),a(b,"cancel",this[b+"End"].bind(this)));this.config.pinchOnWheel&&a("wheel","",this.wheel.bind(this),{passive:!1})}},Qy=ib(ib({},Mp),{},{device(a,b,{shared:c,pointer:{touch:d=!1}={}}){if(c.target&&!hg&&My)return"gesture";if(hg&&d)return"touch";if(Pp){if(Qp)return"pointer";if(hg)return"touch"}},bounds(a,b,{scaleBounds:c=
{},angleBounds:d={}}){const e=g=>{g=Ug(c,g);g=Object.assign({},{min:-Infinity,max:Infinity},g||{});return[g.min,g.max]},f=g=>{g=Ug(d,g);g=Object.assign({},{min:-Infinity,max:Infinity},g||{});return[g.min,g.max]};return"function"!==typeof c&&"function"!==typeof d?[e(),f()]:g=>[e(g),f(g)]},threshold(a,b,c){this.lockDirection="lock"===c.axis;return bb.toVector(a,this.lockDirection?[.1,3]:0)},modifierKey(a){return void 0===a?"ctrlKey":a},pinchOnWheel(a=!0){return a}}),Ry=class extends gg{constructor(...a){super(...a);
vb(this,"ingKey","moving")}move(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.state._active?this.moveChange(a):this.moveStart(a),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(a){this.start(a);this.computeValues(Je(a));this.compute(a);this.computeInitial();this.emit()}moveChange(a){if(this.state._active){var b=Je(a),c=this.state;c._delta=bb.sub(b,c._values);bb.addTo(c._movement,c._delta);this.computeValues(b);this.compute(a);this.emit()}}moveEnd(a){this.state._active&&
(this.state._active=!1,this.compute(a),this.emit())}bind(a){a("pointer","change",this.move.bind(this));a("pointer","leave",this.moveEnd.bind(this))}},Sy=ib(ib({},le),{},{mouseOnly:(a=!0)=>a}),Ty=class extends gg{constructor(...a){super(...a);vb(this,"ingKey","scrolling")}scroll(a){this.state._active||this.start(a);this.scrollChange(a);this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(a){a.cancelable&&a.preventDefault();const b=this.state;var c,d;const {scrollX:e,scrollY:f,
scrollLeft:g,scrollTop:h}=a.currentTarget;var k=[null!==(c=null!==e&&void 0!==e?e:g)&&void 0!==c?c:0,null!==(d=null!==f&&void 0!==f?f:h)&&void 0!==d?d:0];b._delta=bb.sub(k,b._values);bb.addTo(b._movement,b._delta);this.computeValues(k);this.compute(a);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("scroll","",this.scroll.bind(this))}},Uy=le,Vy=class extends gg{constructor(...a){super(...a);vb(this,"ingKey","wheeling")}wheel(a){this.state._active||
this.start(a);this.wheelChange(a);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(a){const b=this.state;b._delta=Cm(a);bb.addTo(b._movement,b._delta);Dm(b);this.compute(a);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(a){a("wheel","",this.wheel.bind(this))}},Wy=le,Xy=class extends gg{constructor(...a){super(...a);vb(this,"ingKey","hovering")}enter(a){this.config.mouseOnly&&"mouse"!==a.pointerType||(this.start(a),this.computeValues(Je(a)),
this.compute(a),this.emit())}leave(a){if(!this.config.mouseOnly||"mouse"===a.pointerType){var b=this.state;if(b._active){b._active=!1;var c=Je(a);b._movement=b._delta=bb.sub(c,b._values);this.computeValues(c);this.compute(a);b.delta=b.movement;this.emit()}}}bind(a){a("pointer","enter",this.enter.bind(this));a("pointer","leave",this.leave.bind(this))}},Yy=ib(ib({},le),{},{mouseOnly:(a=!0)=>a}),Ri=new Map,Si=new Map,Cu={key:"drag",engine:Ly,resolver:Oy},Hu={key:"hover",engine:Xy,resolver:Yy},Gu={key:"move",
engine:Ry,resolver:Sy},Du={key:"pinch",engine:Py,resolver:Qy},Eu={key:"scroll",engine:Ty,resolver:Uy},Fu={key:"wheel",engine:Vy,resolver:Wy},Ti=ea(F(19)),vu={target(a){if(a)return()=>"current"in a?a.current:a},enabled(a=!0){return a},window(a=me?window:void 0){return a},eventOptions({passive:a=!0,capture:b=!1}={}){return{passive:a,capture:b}},transform(a){return a}},uu=["target","eventOptions","window","enabled","transform"],Em=class{constructor(a,b){vb(this,"_listeners",new Set);this._ctrl=a;this._gestureKey=
b}add(a,b,c,d,e){const f=this._listeners,g=mu(b,c),h=ib(ib({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),e);a.addEventListener(g,d,h);const k=()=>{a.removeEventListener(g,d,h);f.delete(k)};f.add(k);return k}clean(){this._listeners.forEach(a=>a());this._listeners.clear()}},wu=class{constructor(){vb(this,"_timeouts",new Map)}add(a,b,c=140,...d){this.remove(a);this._timeouts.set(a,window.setTimeout(b,c,...d))}remove(a){(a=this._timeouts.get(a))&&window.clearTimeout(a)}clean(){this._timeouts.forEach(a=>
void window.clearTimeout(a));this._timeouts.clear()}},yu=class{constructor(a){vb(this,"gestures",new Set);vb(this,"_targetEventStore",new Em(this));vb(this,"gestureEventStores",{});vb(this,"gestureTimeoutStores",{});vb(this,"handlers",{});vb(this,"config",{});vb(this,"pointerIds",new Set);vb(this,"touchIds",new Set);vb(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});a.drag&&Ke(this,"drag");a.wheel&&Ke(this,"wheel");a.scroll&&Ke(this,"scroll");a.move&&Ke(this,"move");a.pinch&&
Ke(this,"pinch");a.hover&&Ke(this,"hover")}setEventIds(a){if("touches"in a)return this.touchIds=new Set(ou(a));if("pointerId"in a)return"pointerup"===a.type||"pointercancel"===a.type?this.pointerIds.delete(a.pointerId):"pointerdown"===a.type&&this.pointerIds.add(a.pointerId),this.pointerIds}applyHandlers(a,b){this.handlers=a;this.nativeHandlers=b}applyConfig(a,b){this.config=tu(a,b,this.config)}clean(){this._targetEventStore.clean();for(const a of this.gestures)this.gestureEventStores[a].clean(),
this.gestureTimeoutStores[a].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...a){var b=this.config.shared;const c={};let d;if(b.target&&(d=b.target(),!d))return;if(b.enabled){for(const e of this.gestures){const f=this.config[e],g=Sp(c,f.eventOptions,!!d);f.enabled&&(new (Ri.get(e))(this,a,e)).bind(g)}b=Sp(c,b.eventOptions,!!d);for(const e in this.nativeHandlers)b(e,"",f=>this.nativeHandlers[e](ib(ib({},this.state.shared),{},{event:f,args:a})),
void 0,!0)}for(const e in c)c[e]=qu(...c[e]);if(!d)return c;for(const e in c){const {device:f,capture:g,passive:h}=ku(e);this._targetEventStore.add(d,f,"",c[e],{capture:g,passive:h})}}},Sp=(a,b,c)=>(d,e,f,g={},h=!1)=>{var k,l;const m=null!==(k=g.capture)&&void 0!==k?k:b.capture;g=null!==(l=g.passive)&&void 0!==l?l:b.passive;d=h?d:ju(d,e,m);c&&g&&(d+="Passive");a[d]=a[d]||[];a[d].push(f)},Au=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,Wg=ea(F(19)),Ui=ea(F(19)),Gm=ea(F(19)),Hm=ea(F(19)),Nu=ea(F(19)),
Pu=ea(F(19)),Ru=ea(F(19)),Tu=ea(F(19)),Uu={none:(a,b)=>"none",["default"]:(a,b)=>"default",pointer:(a,b)=>"pointer",crosshair:(a,b)=>"crosshair",move:(a,b)=>"move",wait:(a,b)=>"wait",progress:(a,b)=>"progress",grab:(a,b)=>ac('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
a,b),grabbing:(a,b)=>ac("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
a,b),text:(a,b)=>ac("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
a,b),["resize-edge"]:(a,b)=>ac("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,b),["resize-corner"]:(a,b)=>ac("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a,b),["ew-resize"]:(a,b)=>ac("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",a,b),["ns-resize"]:(a,b)=>ac("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
a+90,b),["nesw-resize"]:(a,b)=>ac("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",a,b),["nwse-resize"]:(a,b)=>ac("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
a+90,b),rotate:(a,b)=>ac('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+45,b),["nwse-rotate"]:(a,b)=>ac('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a,b),["nesw-rotate"]:(a,b)=>ac('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+90,b),["senw-rotate"]:(a,b)=>ac('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+180,b),["swne-rotate"]:(a,b)=>ac('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
a+270,b)},Wu=ea(F(19));ea(F(19));var Im=F(19),Jm=ea(F(19));if(!F(19).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!kb)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Zy=F(20),Rf=ea(F(19)),Tp="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,av=1E4,dv=function(a){var b="function"===typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"===typeof a.length)return{next:function(){a&&d>=
a.length&&(a=void 0);return{value:a&&a[d++],done:!a}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.");},Up=Tp?bv(Tp):cv(),gv=Up.addReactionToTrack,hv=Up.recordReactionAsCommitted,Mm=function(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[];try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(g){var f={error:g}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error;}}return e},
fv=function(){return function(){}}(),Me=F(19),Vp="function"===typeof Symbol&&Symbol.for,Om=Vp?Symbol.for("react.forward_ref"):"function"===typeof Me.forwardRef&&(0,Me.forwardRef)(function(a){return null}).$$typeof,Nm=Vp?Symbol.for("react.memo"):"function"===typeof Me.memo&&(0,Me.memo)(function(a){return null}).$$typeof,jv={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Vi.displayName="Observer";F(19);F(19);F(19);(function(a){a||=Zu;lt({reactionScheduler:a})})(Zy.unstable_batchedUpdates);
var $y=ea(F(19)),Zj=F(589),nc=$y.forwardRef(function(a,b){var {children:c,opacity:d,centered:e,className:f=""}=a,g=fa(a,["children","opacity","centered","className"]);return(0,Zj.jsx)(Vi,{children:()=>(0,Zj.jsx)("div",{ref:b,className:`tl-positioned-div ${f}`,style:d?{opacity:d}:void 0,draggable:!1,children:(0,Zj.jsx)("div",V(N({className:`tl-positioned-inner ${e?"tl-centered":""}`},g),{children:c}))})})}),az=ea(F(19)),ak=F(589),wc=az.forwardRef(function(a,b){var {id:c,className:d="",style:e,children:f}=
a,g=fa(a,["id","className","style","children"]);return(0,ak.jsx)(Vi,{children:()=>(0,ak.jsx)("svg",{ref:b,style:e,className:`tl-positioned-svg ${d}`,children:(0,ak.jsx)("g",V(N({id:c,className:"tl-centered-g"},g),{children:f}))})})}),ig=ea(F(19)),Pm=ea(F(19)),xh=ea(F(19)),bz=F(589),Id=da(function(a){var {id:b,bounds:c,zIndex:d,rotation:e=0,className:f="",children:g}=a;a=fa(a,"id bounds zIndex rotation className children".split(" "));const h=xh.useRef(null);xh.useLayoutEffect(()=>{h.current.style.transform=
`translate(
        calc(${c.minX}px - var(--tl-padding)),
        calc(${c.minY}px - var(--tl-padding)))
        rotate(${e+(c.rotation||0)}rad)`},[c.minX,c.minY,e,c.rotation]);xh.useLayoutEffect(()=>{const k=h.current;k.style.width=`calc(${Math.floor(c.width)}px + (var(--tl-padding) * 2))`;k.style.height=`calc(${Math.floor(c.height)}px + (var(--tl-padding) * 2))`},[c.width,c.height]);xh.useLayoutEffect(()=>{const k=h.current;void 0!==d&&(k.style.zIndex=d.toString())},[d]);return(0,bz.jsx)("div",V(N({id:b,ref:h,className:`tl-positioned ${f}`,"aria-label":"container"},a),{children:g}))}),cz=ea(F(19)),
Wp=F(589),dz=da(function({shapes:a,hidden:b,bounds:c,rotation:d=0}){const {components:{ContextBar:e},viewport:{bounds:f,camera:{point:[g,h],zoom:k}}}=Jb(),l=cz.useRef(null);var m=Y.getRotatedBounds(c,d);m=Y.multiplyBounds(m,k);Fm(l,c,d,10005);if(!e)throw Error("Expected a ContextBar component.");const p=Y.translateBounds(m,[g*k,h*k]);return(0,Wp.jsx)("div",{ref:l,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container","data-html2canvas-ignore":"true",children:(0,Wp.jsx)(e,{hidden:b,
shapes:a,bounds:c,offsets:{left:p.minX,right:f.width-p.maxX,top:p.minY,bottom:f.height-p.maxY,width:p.width,height:p.height},scaledBounds:m,rotation:d})})}),Xp=ea(F(19)),ez=F(589),Yp=da(function({children:a}){const b=Xp.useRef(null),{viewport:c}=Jb(),d=b.current,{zoom:e,point:f}=c.camera;Xp.useEffect(()=>{d&&(d.style.transform=`scale(${e}) translate3d(${f[0]}px, ${f[1]}px, 0)`)},[e,f,d]);return(0,ez.jsx)("div",{ref:b,className:"tl-absolute tl-layer",children:a})}),yh=F(589),Zp=da(function({shape:a,
isHovered:b=!1,isSelected:c=!1,isBinding:d=!1,isEditing:e=!1,isLocked:f=!1,meta:g}){const {bounds:h,props:{scale:k,rotation:l=0},ReactIndicator:m}=a;return(0,yh.jsx)(Id,{"data-type":"Indicator","data-html2canvas-ignore":"true",bounds:h,rotation:l,scale:k,zIndex:e?1E3:1E4,children:(0,yh.jsx)(wc,{children:(0,yh.jsx)("g",{className:`tl-indicator-container ${c?"tl-selected":"tl-hovered"} ${f?"tl-locked":""}`,children:(0,yh.jsx)(m,{isEditing:e,isBinding:d,isHovered:b,isLocked:f,isSelected:c,isErasing:!1,
meta:g})})})})}),Rm=ea(F(19)),zh=F(589),fz=da(function({bounds:a,shape:b}){const {viewport:{camera:{zoom:c}},components:{QuickLinks:d}}=Jb();var e=xa();const f=Qm(b);if(!d)throw Error("Expected a QuickLinks component.");e=50>a.height*c||!e.selectedShapesArray.includes(b);return(0,zh.jsx)(Id,{bounds:a,className:"tl-quick-links-container","data-html2canvas-ignore":"true",children:(0,zh.jsx)(nc,{children:(0,zh.jsx)("span",V(N({style:{position:"absolute",top:"100%",pointerEvents:"all",transformOrigin:"left top",
paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},f),{onPointerDown:g=>g.stopPropagation(),children:(0,zh.jsx)(d,{className:"tl-backlinks-count "+(e?"tl-backlinks-count-rounded":""),id:b.id,shape:b})}))})})}),Ah=F(589),gz=da(function({bounds:a,shape:b}){const {viewport:{camera:{zoom:c}},components:{BacklinksCount:d}}=Jb();var e=xa();if(!d)throw Error("Expected a BacklinksCount component.");const f=g=>g.stopPropagation();e=50>a.height*c||!e.selectedShapesArray.includes(b)||b.hideSelection;
return(0,Ah.jsx)(Id,{bounds:a,className:"tl-backlinks-count-container",children:(0,Ah.jsx)(nc,{children:(0,Ah.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:f,onWheelCapture:f,onKeyDown:f,title:"Shape Backlinks",children:(0,Ah.jsx)(d,{className:"tl-backlinks-count "+(e?"tl-backlinks-count-rounded":""),id:b.id,shape:b})})})})}),hz=ea(F(19)),$p=F(589),iz=da(function({bounds:a,hidden:b,
shapes:c,rotation:d=0,detail:e="size"}){const {components:{SelectionDetail:f},viewport:{camera:{zoom:g}}}=Jb(),h=hz.useRef(null),k=Y.multiplyBounds(a,g);Fm(h,a,d,10003);if(!f)throw Error("Expected a SelectionDetail component.");return(0,$p.jsx)("div",{ref:h,className:`tl-counter-scaled-positioned ${b?"tl-fade-out":""}`,"aria-label":"bounds-detail-container","data-html2canvas-ignore":"true",children:(0,$p.jsx)(f,{shapes:c,bounds:a,scaledBounds:k,zoom:g,rotation:d,detail:e})})}),aq=F(589),jz=da(function({shape:a,
isHovered:b=!1,isSelected:c=!1,isBinding:d=!1,isErasing:e=!1,isEditing:f=!1,onEditingEnd:g,asset:h,meta:k,zIndex:l}){const {bounds:m,props:{rotation:p,scale:q},ReactComponent:t}=a,r=xa(),v=Qm(a);var y=r.getParentGroup(a);y=r.selectedIds.has(null==y?void 0:y.id);return(0,aq.jsx)(Id,{"data-shape-id":a.id,"data-html2canvas-ignore":!c&&!y&&0!==r.selectedShapes.size||null,zIndex:l,"data-type":"Shape",bounds:m,rotation:p,scale:q,children:(0,aq.jsx)(t,{meta:k,isEditing:f,isBinding:d,isHovered:b,isSelected:c,
isErasing:e,events:v,asset:h,onEditingEnd:g})})}),df=F(589),bq=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],kz=da(function({size:a}){const {viewport:{camera:{point:b,zoom:c}}}=Jb();return(0,df.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg","data-html2canvas-ignore":"true",children:[(0,df.jsx)("defs",{children:bq.map(([d,e,f],g)=>{f=f*a*c;var h=b[0]*c,k=b[1]*c;h=0<h?h%f:f+h%f;k=0<k?k%f:f+k%f;d=Ut(c,[d,e],[0,1]);return(0,df.jsx)("pattern",{id:`grid-${g}`,width:f,
height:f,patternUnits:"userSpaceOnUse",children:!(2<d||.1>d)&&(0,df.jsx)("circle",{className:"tl-grid-dot",cx:h,cy:k,r:1.5,opacity:Math.max(0,Math.min(d,1))})},`grid-pattern-${g}`)})}),bq.map((d,e)=>(0,df.jsx)("rect",{width:"100%",height:"100%",fill:`url(#grid-${e})`},`grid-rect-${e}`))]})}),cq=da(function({size:a}){return(0,df.jsx)(kz,{size:a})}),dq=F(589),eq=da(function({bounds:a}){const b=Pf("background");return(0,dq.jsx)(wc,V(N({"data-html2canvas-ignore":"true"},b),{children:(0,dq.jsx)("rect",
{className:"tl-bounds-bg",width:Math.max(1,a.width),height:Math.max(1,a.height),pointerEvents:"all",rx:8,ry:8})}))});F(19);var fq=F(589),gq=da(function({scaledBounds:a,shapes:b,detail:c="size",rotation:d=0}){var e;const f=1===b.length?d:null!=(e=a.rotation)?e:0;return(0,fq.jsx)(nc,{centered:!0,children:(0,fq.jsx)("div",{className:"tl-bounds-detail",style:{transform:f<Vc||f>3*Vc?`rotate(${f}rad) translateY(${a.height/2+24}px)`:`rotate(${Math.PI+f}rad) translateY(${a.height/2+32}px)`,padding:"2px 3px",
borderRadius:"1px"},children:1===b.length&&"line"===b[0].type?`${L.dist(b[0].props.handles.start.point,b[0].props.handles.end.point).toFixed()}`:"size"===c?`${a.width.toFixed()} \xD7 ${a.height.toFixed()}`:`\u2220${Ob.radiansToDegrees(Ob.clampRadians(d)).toFixed()}\xB0`})})}),bk=F(589),lz={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Bh=da(function({cx:a,cy:b,size:c,targetSize:d,corner:e,isHidden:f}){const g=
Pf(e);return(0,bk.jsxs)("g",V(N({opacity:f?0:1},g),{children:[(0,bk.jsx)("rect",{className:"tl-transparent "+(f?"":lz[e]),"aria-label":`${e} target`,x:a-1.25*d,y:b-1.25*d,width:2.5*d,height:2.5*d,pointerEvents:f?"none":"all"}),(0,bk.jsx)("rect",{className:"tl-corner-handle","aria-label":`${e} handle`,x:a-c/2,y:b-c/2,width:c,height:c,pointerEvents:"none"})]}))}),Ch=F(589),ck=da(function({cx:a,cy:b,size:c,direction:d,isHidden:e}){const f=xa();return(0,Ch.jsxs)("g",{className:"tl-clone-handle",opacity:e?
0:1,children:[(0,Ch.jsx)("circle",{"aria-label":`${d} handle`,pointerEvents:"all",onPointerDown:g=>f.api.clone(d),cx:a,cy:b,r:c}),(0,Ch.jsx)("line",{x1:a-c/2,y1:b,x2:a+c/2,y2:b}),(0,Ch.jsx)("line",{x1:a,y1:b-c/2,x2:a,y2:b+c/2})]})}),mz=F(589),nz={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Dh=da(function({x:a,y:b,width:c,height:d,targetSize:e,edge:f,disabled:g,isHidden:h}){const k=Pf(f);return(0,mz.jsx)("rect",N({pointerEvents:h||g?"none":
"all",className:"tl-transparent tl-edge-handle "+(h?"":nz[f]),"aria-label":`${f} target`,opacity:h?0:1,x:a-e,y:b-e,width:Math.max(1,c+2*e),height:Math.max(1,d+2*e)},k))}),dk=F(589);da(function({cx:a,cy:b,size:c,targetSize:d,isHidden:e}){const f=Pf("rotate");return(0,dk.jsxs)("g",V(N({opacity:e?0:1},f),{children:[(0,dk.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:a,cy:b,r:d,pointerEvents:e?"none":"all"}),(0,dk.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",
cx:a,cy:b,r:c/2,pointerEvents:"none"})]}))});F(19);var hq=F(589),Eh=da(function({cx:a,cy:b,targetSize:c,corner:d,isHidden:e}){const f=Pf(d);return(0,hq.jsx)("g",V(N({opacity:e?0:1},f),{children:(0,hq.jsx)("rect",{className:"tl-transparent","aria-label":`${d} target`,x:a-2.5*c,y:b-2.5*c,width:3*c,height:3*c,pointerEvents:e?"none":"all"})}))}),tb=F(589),iq=da(function({bounds:a,showResizeHandles:b,showRotateHandles:c,showCloneHandles:d,shapes:e}){var f,g;const h=xa();let {width:k,height:l}=a;var m=
h.viewport.camera.zoom;a=8/m;const p=6/m;m=30/m;const q=2*a,t=1===e.length?e[0].canResize:[!0,!0],r=null!=(g=null==(f=h.editingShape)?void 0:f.props.borderRadius)?g:0;return(0,tb.jsx)(tb.Fragment,{children:0<e.length&&(0,tb.jsxs)(wc,{children:[!h.editingShape&&(0,tb.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(k,1),height:Math.max(l,1),rx:r,ry:r,pointerEvents:"none"}),(0,tb.jsx)(Dh,{x:2*p,y:0,width:k-4*p,height:0,targetSize:p,edge:"top_edge",disabled:!t[1],isHidden:!b}),(0,tb.jsx)(Dh,{x:k,
y:2*p,width:0,height:l-4*p,targetSize:p,edge:"right_edge",disabled:!t[0],isHidden:!b}),(0,tb.jsx)(Dh,{x:2*p,y:l,width:k-4*p,height:0,targetSize:p,edge:"bottom_edge",disabled:!t[1],isHidden:!b}),(0,tb.jsx)(Dh,{x:0,y:2*p,width:0,height:l-4*p,targetSize:p,edge:"left_edge",disabled:!t[0],isHidden:!b}),(0,tb.jsx)(Eh,{cx:0,cy:0,targetSize:p,corner:"top_left_resize_corner",isHidden:!c}),(0,tb.jsx)(Eh,{cx:k+2*p,cy:0,targetSize:p,corner:"top_right_resize_corner",isHidden:!c}),(0,tb.jsx)(Eh,{cx:k+2*p,cy:l+
2*p,targetSize:p,corner:"bottom_right_resize_corner",isHidden:!c}),(0,tb.jsx)(Eh,{cx:0,cy:l+2*p,targetSize:p,corner:"bottom_left_resize_corner",isHidden:!c}),(0,tb.jsx)(ck,{cx:-m,cy:l/2,size:q,direction:"left",isHidden:!d}),(0,tb.jsx)(ck,{cx:k+m,cy:l/2,size:q,direction:"right",isHidden:!d}),(0,tb.jsx)(ck,{cx:k/2,cy:l+m,size:q,direction:"down",isHidden:!d}),(null==t?void 0:t.every(v=>v))&&(0,tb.jsxs)(tb.Fragment,{children:[(0,tb.jsx)(Bh,{cx:0,cy:0,size:a,targetSize:p,corner:"top_left_corner",isHidden:!b}),
(0,tb.jsx)(Bh,{cx:k,cy:0,size:a,targetSize:p,corner:"top_right_corner",isHidden:!b}),(0,tb.jsx)(Bh,{cx:k,cy:l,size:a,targetSize:p,corner:"bottom_right_corner",isHidden:!b}),(0,tb.jsx)(Bh,{cx:0,cy:l,size:a,targetSize:p,corner:"bottom_left_corner",isHidden:!b})]})]})})}),ek=F(589),jq=da(function({bounds:a}){return(0,ek.jsx)(Id,{bounds:a,zIndex:10001,children:(0,ek.jsx)(wc,{children:(0,ek.jsx)("rect",{className:"tl-brush",x:0,y:0,width:a.width,height:a.height})})})}),kq=F(589);da(function(){return(0,kq.jsx)(kq.Fragment,
{})});var fk=F(589),lq=da(function({shape:a,handle:b,id:c}){a=Qu(a,c);const [d,e]=b.point;return(0,fk.jsxs)("g",V(N({className:"tl-handle","aria-label":"handle"},a),{transform:`translate(${d}, ${e})`,children:[(0,fk.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,fk.jsx)("circle",{className:"tl-counter-scaled tl-handle",pointerEvents:"none",r:4})]}))}),mq=ea(F(19)),gk=F(589),hk=da(function({direction:a}){const {viewport:{bounds:b}}=Jb(),c=mq.useRef(null);mq.useLayoutEffect(()=>{const d=
c.current;if(d){var e=[b.width/2,b.height/2],f=Y.getRectangleSides([12,12],[b.width-24,b.height-24]);for(const [,[g,h]]of f)f=il(e,a,g,h),f.didIntersect&&(f=f.points[0],d.style.transform=`translate(${f[0]-6}px,${f[1]-6}px) rotate(${L.toAngle(a)}rad)`)}},[a,b]);return(0,gk.jsx)("div",{ref:c,className:"tl-direction-indicator","data-html2canvas-ignore":"true",children:(0,gk.jsx)("svg",{height:12,width:12,children:(0,gk.jsx)("polygon",{points:"0,0 12,6 0,12"})})})}),cb=F(589),nv=da(function({id:a,className:b,
brush:c,shapes:d,assets:e,bindingShapes:f,editingShape:g,hoveredShape:h,hoveredGroup:k,selectionBounds:l,selectedShapes:m,erasingShapes:p,selectionDirectionHint:q,cursor:t="default",cursorRotation:r=0,selectionRotation:v=0,showSelection:y=!0,showHandles:u=!0,showSelectionRotation:x=!1,showResizeHandles:w=!0,showRotateHandles:z=!0,showCloneHandles:A=!0,showSelectionDetail:D=!0,showContextBar:J=!0,showGrid:Q=!0,gridSize:K=8,onEditingEnd:O=Jy,theme:W=qh,children:R}){var T;const I=ig.useRef(null),{viewport:C,
components:H,meta:B}=Jb(),G=xa(),P=ig.useCallback(U=>{G.inputs.updateContainerOffset([U.minX,U.minY])},[]);cu(W,a);Ou(I);Yt(I,C,P);Iu(I);Yu();Su(I,t,r);Vu(I);kv(I);a=fu();const S=(t=1===(null==m?void 0:m.length)&&m[0])&&"handles"in t.props?null==m?void 0:m[0]:void 0,ha=ig.useMemo(()=>new Set(m||[]),[m]),la=ig.useMemo(()=>new Set(p||[]),[p]);t=1===(null==m?void 0:m.length)?m[0]:void 0;k=[...(new Set([k,h]))].filter(Ub);return(0,cb.jsxs)("div",{ref:I,className:`tl-container ${null!=b?b:""}`,children:[(0,cb.jsxs)("div",
V(N({tabIndex:-1,className:"tl-absolute tl-canvas"},a),{children:[Q&&H.Grid&&(0,cb.jsx)(H.Grid,{size:K}),(0,cb.jsxs)(Yp,{children:[H.SelectionBackground&&m&&l&&y&&(0,cb.jsx)(Id,{"data-type":"SelectionBackground",bounds:l,zIndex:2,"data-html2canvas-ignore":"true",children:(0,cb.jsx)(H.SelectionBackground,{shapes:m,bounds:l,showResizeHandles:w,showRotateHandles:z})}),d&&d.map((U,pa)=>(0,cb.jsx)(jz,{shape:U,asset:e&&U.props.assetId?e[U.props.assetId]:void 0,isEditing:U===g,isHovered:U===h,isBinding:null==
f?void 0:f.includes(U),isSelected:ha.has(U),isErasing:la.has(U),meta:B,zIndex:1E3+pa,onEditingEnd:O},"shape_"+U.id)),!G.isIn("select.pinching")&&(null==m?void 0:m.map(U=>(0,cb.jsx)(Zp,{shape:U,isEditing:U===g,isHovered:!1,isBinding:!1,isSelected:!0,isLocked:U.props.isLocked},"selected_indicator_"+U.id))),k.map(U=>U!==g&&(0,cb.jsx)(Zp,{shape:U},"hovered_indicator_"+U.id)),t&&H.BacklinksCount&&(0,cb.jsx)(gz,{hidden:!1,bounds:t.bounds,shape:t}),h&&h!==t&&H.QuickLinks&&(0,cb.jsx)(fz,{hidden:!1,bounds:h.bounds,
shape:h}),c&&H.Brush&&(0,cb.jsx)(H.Brush,{bounds:c}),m&&l&&(0,cb.jsxs)(cb.Fragment,{children:[y&&H.SelectionForeground&&(0,cb.jsx)(Id,{"data-type":"SelectionForeground","data-html2canvas-ignore":"true",bounds:l,zIndex:g&&m.includes(g)?1002:10002,children:(0,cb.jsx)(H.SelectionForeground,{shapes:m.filter(U=>!U.props.isLocked),bounds:l,showResizeHandles:w,showRotateHandles:z,showCloneHandles:A})}),u&&S&&H.Handle&&(0,cb.jsx)(Id,{"data-type":"onlySelectedShapeWithHandles","data-html2canvas-ignore":"true",
bounds:l,zIndex:10003,children:(0,cb.jsx)(wc,{children:Object.entries(null!=(T=S.props.handles)?T:{}).map(([U,pa])=>ig.createElement(H.Handle,{key:`${pa.id}_handle_${pa.id}`,shape:S,handle:pa,id:U}))})}),m&&H.SelectionDetail&&(0,cb.jsx)(iz,{"data-html2canvas-ignore":"true",shapes:m,bounds:l,detail:x?"rotation":"size",hidden:!D,rotation:v},"detail"+m.map(U=>U.id).join(""))]})]}),q&&l&&m&&(0,cb.jsx)(hk,{direction:q,bounds:l,shapes:m}),(0,cb.jsx)("div",{id:"tl-dev-tools-canvas-anchor","data-html2canvas-ignore":"true"})]})),
(0,cb.jsx)(Yp,{children:m&&l&&(0,cb.jsx)(cb.Fragment,{children:m&&H.ContextBar&&(0,cb.jsx)(dz,{shapes:m.filter(U=>!U.props.isLocked),hidden:!J,bounds:t?t.bounds:l,rotation:t?t.props.rotation:0},"context"+m.map(U=>U.id).join(""))})}),R]})}),nq=ea(F(19)),oq=ea(F(19)),pq=F(589);da(function({children:a}){const b=oq.useRef(null),{viewport:c}=Jb();oq.useEffect(()=>If(()=>{const d=b.current;if(d){var {zoom:e,point:f}=c.camera;d.style.transform=`scale(${e}) translateX(${f[0]}px) translateY(${f[1]}px)`}}),
[]);return(0,pq.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,pq.jsx)("g",{ref:b,pointerEvents:"none",children:a})})});var oz=F(589),pz=da(function(a){const b=Ku(a),c=rm(a.id);Mu(b,a);Ju(b,a);return(0,oz.jsx)(c.Provider,{value:b,children:a.children})}),qz=F(589),mv=da(function({id:a="noid",viewport:b,inputs:c,callbacks:d=qh,meta:e=qh,components:f=qh,children:g}){const [h,k]=nq.useState(()=>{const {Brush:m,ContextBar:p,DirectionIndicator:q,Grid:t,Handle:r,SelectionBackground:v,
SelectionDetail:y,SelectionForeground:u}=f,x=fa(f,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:a,viewport:b,inputs:c,callbacks:d,meta:e,components:V(N({},x),{Brush:null===m?void 0:jq,ContextBar:p,DirectionIndicator:null===q?void 0:hk,Grid:null===t?void 0:cq,Handle:null===r?void 0:lq,SelectionBackground:null===v?void 0:eq,SelectionDetail:null===y?void 0:gq,SelectionForeground:null===u?void 0:iq})}});nq.useLayoutEffect(()=>
{const {Brush:m,ContextBar:p,DirectionIndicator:q,Grid:t,Handle:r,SelectionBackground:v,SelectionDetail:y,SelectionForeground:u}=f,x=fa(f,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return If(()=>{k({id:a,viewport:b,inputs:c,callbacks:d,meta:e,components:V(N({},x),{Brush:null===m?void 0:jq,ContextBar:p,DirectionIndicator:null===q?void 0:hk,Grid:null===t?void 0:cq,Handle:null===r?void 0:lq,SelectionBackground:null===v?void 0:
eq,SelectionDetail:null===y?void 0:gq,SelectionForeground:null===u?void 0:iq})})})},[]);const l=nm(a);return(0,qz.jsx)(l.Provider,{value:h,children:g})}),Sm=F(589),rz=F(589),sz=da(function(a){const b=xa();return(0,rz.jsx)(lv,N({viewport:b.viewport,inputs:b.inputs,callbacks:b._events,brush:b.brush,editingShape:b.editingShape,hoveredShape:b.hoveredShape,hoveredGroup:b.hoveredGroup,bindingShapes:b.bindingShapes,selectionDirectionHint:b.selectionDirectionHint,selectionBounds:b.selectionBounds,selectedShapes:b.selectedShapesArray,
erasingShapes:b.erasingShapesArray,shapes:b.shapes,assets:b.assets,showGrid:b.settings.showGrid,penMode:b.settings.penMode,showSelection:b.showSelection,showSelectionRotation:b.showSelectionRotation,showResizeHandles:b.showResizeHandles,showRotateHandles:b.showRotateHandles,showCloneHandles:b.showCloneHandles,showSelectionDetail:b.showSelectionDetail,showContextBar:b.showContextBar,cursor:b.cursors.cursor,cursorRotation:b.cursors.rotation,selectionRotation:b.selectionRotation,onEditingEnd:b.clearEditingState},
a))});F(589);var ef=ea(F(19)),Jd=ea(F(19)),tz=F(589),uz="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),ra=a=>{var {name:b,className:c}=a;a=fa(a,["name","className"]);const d=uz.includes(b)?"tie tie-":"ti ti-";return(0,tz.jsx)("i",N({className:[d+b,c].join(" ")},
a))},wa=F(19),ov=F(19),$d=F(19),bc=F(19),ik=F(19),sv=F(20),Pb=F(19),Qc=(0,Pb.forwardRef)((a,b)=>{var {children:c}=a;a=fa(a,["children"]);const d=Pb.Children.toArray(c),e=d.find(qv);if(e){const f=e.props.children;c=d.map(g=>g===e?1<Pb.Children.count(f)?Pb.Children.only(null):(0,Pb.isValidElement)(f)?f.props.children:null:g);return(0,Pb.createElement)(jk,ca({},a,{ref:b}),(0,Pb.isValidElement)(f)?(0,Pb.cloneElement)(f,void 0,c):null)}return(0,Pb.createElement)(jk,ca({},a,{ref:b}),c)});Qc.displayName=
"Slot";var jk=(0,Pb.forwardRef)((a,b)=>{const {children:c}=a;a=fa(a,["children"]);return(0,Pb.isValidElement)(c)?(0,Pb.cloneElement)(c,V(N({},rv(a,c.props)),{ref:Wi(b,c.ref)})):1<Pb.Children.count(c)?Pb.Children.only(null):null});jk.displayName="SlotClone";var Tm=({children:a})=>(0,Pb.createElement)(Pb.Fragment,null,a),mb="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((a,b)=>{const c=(0,ik.forwardRef)((d,e)=>{var {asChild:f}=d;d=fa(d,["asChild"]);f=f?Qc:b;(0,ik.useEffect)(()=>
{window[Symbol.for("radix-ui")]=!0},[]);return(0,ik.createElement)(f,ca({},d,{ref:e}))});c.displayName=`Primitive.${b}`;return V(N({},a),{[b]:c})},{}),Xi=F(19),tv=F(19),qq,vz=(0,bc.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),kk=(0,bc.forwardRef)((a,b)=>{var c;const {disableOutsidePointerEvents:d=!1,onEscapeKeyDown:e,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:h,onDismiss:k}=a,l=fa(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),
m=(0,bc.useContext)(vz),[p,q]=(0,bc.useState)(null),t=null!==(c=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==c?c:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,r]=(0,bc.useState)({});b=Ia(b,w=>q(w));c=Array.from(m.layers);var [v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1);v=c.indexOf(v);const y=p?c.indexOf(p):-1;c=0<m.layersWithOutsidePointerEventsDisabled.size;const u=y>=v;v=uv(w=>{const z=w.target,A=[...m.branches].some(D=>D.contains(z));u&&!A&&(null===
f||void 0===f||f(w),null===h||void 0===h||h(w),w.defaultPrevented||null===k||void 0===k||k())},t);const x=vv(w=>{const z=w.target;[...m.branches].some(A=>A.contains(z))||(null===g||void 0===g||g(w),null===h||void 0===h||h(w),w.defaultPrevented||null===k||void 0===k||k())},t);Vm(w=>{y===m.layers.size-1&&(null===e||void 0===e||e(w),!w.defaultPrevented&&k&&(w.preventDefault(),k()))},t);(0,bc.useEffect)(()=>{if(p)return d&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(qq=t.body.style.pointerEvents,
t.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),Xm(),()=>{d&&1===m.layersWithOutsidePointerEventsDisabled.size&&(t.body.style.pointerEvents=qq)}},[p,t,d,m]);(0,bc.useEffect)(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),Xm())},[p,m]);(0,bc.useEffect)(()=>{const w=()=>r({});document.addEventListener("dismissableLayer.update",w);return()=>document.removeEventListener("dismissableLayer.update",w)},[]);return(0,bc.createElement)(mb.div,
ca({},l,{ref:b,style:N({pointerEvents:c?u?"auto":"none":void 0},a.style),onFocusCapture:qa(a.onFocusCapture,x.onFocusCapture),onBlurCapture:qa(a.onBlurCapture,x.onBlurCapture),onPointerDownCapture:qa(a.onPointerDownCapture,v.onPointerDownCapture)}))}),Ym=ea(F(19)),wz=F(19),Kb=(null===globalThis||void 0===globalThis?0:globalThis.document)?wz.useLayoutEffect:()=>{},wv=Ym["useId".toString()]||(()=>{}),xv=0,xb=F(19),xz=(a,b,c)=>Ga(void 0,null,function*(){const {placement:d="bottom",strategy:e="absolute",
middleware:f=[],platform:g}=c,h=yield null==g.isRTL?void 0:g.isRTL(b);let k=yield g.getElementRects({reference:a,floating:b,strategy:e}),{x:l,y:m}=Zm(k,d,h),p=d,q={},t=0;for(let r=0;r<f.length;r++){const {name:v,fn:y}=f[r],{x:u,y:x,data:w,reset:z}=yield y({x:l,y:m,initialPlacement:d,placement:p,strategy:e,middlewareData:q,rects:k,platform:g,elements:{reference:a,floating:b}});l=null!=u?u:l;m=null!=x?x:m;q=V(N({},q),{[v]:N(N({},q[v]),w)});z&&50>=t&&(t++,"object"==typeof z&&(z.placement&&(p=z.placement),
z.rects&&(k=!0===z.rects?yield g.getElementRects({reference:a,floating:b,strategy:e}):z.rects),{x:l,y:m}=Zm(k,p,h)),r=-1)}return{x:l,y:m,placement:p,strategy:e,middlewareData:q}}),lk=Math.min,md=Math.max,rq=a=>({name:"arrow",options:a,fn(b){return Ga(this,null,function*(){const {element:c,padding:d=0}=null!=a?a:{},{x:e,y:f,placement:g,rects:h,platform:k}=b;if(null==c)return{};const l=$m(d),m={x:e,y:f},p=Ne(g),q=g.split("-")[1],t=Yi(p);var r=yield k.getDimensions(c);const v="y"===p?"top":"left",y=
"y"===p?"bottom":"right";var u=h.reference[t]+h.reference[p]-m[p]-h.floating[t];const x=m[p]-h.reference[p];var w=yield null==k.getOffsetParent?void 0:k.getOffsetParent(c);let z=w?"y"===p?w.clientHeight||0:w.clientWidth||0:0;0===z&&(z=h.floating[t]);w=l[v];const A=z-r[t]-l[y];r=z/2-r[t]/2+(u/2-x/2);u=md(w,lk(r,A));return{[p]:m[p]-(0<("start"===q?l[v]:l[y])&&r!==u&&h.reference[t]<=h.floating[t]?r<w?w-r:A-r:0),data:{[p]:u,centerOffset:r-u}}})}}),yv={left:"right",right:"left",bottom:"top",top:"bottom"},
Av={start:"end",end:"start"},dn=["top","right","bottom","left"];dn.reduce((a,b)=>a.concat(b,b+"-start",b+"-end"),[]);var sq=function(a){return void 0===a&&(a={}),{name:"flip",options:a,fn(b){return Ga(this,null,function*(){var c;const {placement:d,middlewareData:e,rects:f,initialPlacement:g,platform:h,elements:k}=b;var l=a;const {mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:q,fallbackStrategy:t="bestFit",flipAlignment:r=!0}=l;l=fa(l,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy",
"flipAlignment"]);const v=be(d);var y=q||(v!==g&&r?function(D){const J=Yg(D);return[an(D),J,an(J)]}(g):[Yg(g)]);y=[g,...y];const u=yield Sf(b,l),x=[];l=(null==(c=e.flip)?void 0:c.overflows)||[];if(m&&x.push(u[v]),p){const {main:D,cross:J}=zv(d,f,yield null==h.isRTL?void 0:h.isRTL(k.floating));x.push(u[D],u[J])}if(l=[...l,{placement:d,overflows:x}],!x.every(D=>0>=D)){var w,z;c=(null!=(w=null==(z=e.flip)?void 0:z.index)?w:0)+1;if(w=y[c])return{data:{index:c,overflows:l},reset:{placement:w}};w="bottom";
switch(t){case "bestFit":var A;(z=null==(A=l.map(D=>[D,D.overflows.filter(J=>0<J).reduce((J,Q)=>J+Q,0)]).sort((D,J)=>D[1]-J[1])[0])?void 0:A[0].placement)&&(w=z);break;case "initialPlacement":w=g}if(d!==w)return{reset:{placement:w}}}return{}})}}},tq=function(a){a=void 0===a?{}:a;let {strategy:b="referenceHidden"}=a,c=fa(a,["strategy"]);return{name:"hide",fn(d){return Ga(this,null,function*(){var {rects:e}=d;switch(b){case "referenceHidden":return e=bn(yield Sf(d,V(N({},c),{elementContext:"reference"})),
e.reference),{data:{referenceHiddenOffsets:e,referenceHidden:cn(e)}};case "escaped":return e=bn(yield Sf(d,V(N({},c),{altBoundary:!0})),e.floating),{data:{escapedOffsets:e,escaped:cn(e)}};default:return{}}})}}},uq=function(a){return void 0===a&&(a=0),{name:"offset",options:a,fn(b){return Ga(this,null,function*(){const {x:c,y:d}=b,e=yield function(f,g){return Ga(this,null,function*(){const {placement:h,platform:k,elements:l}=f;var m=yield null==k.isRTL?void 0:k.isRTL(l.floating),p=be(h);const q=h.split("-")[1],
t="x"===Ne(h);p=["left","top"].includes(p)?-1:1;m=m&&t?-1:1;const r="function"==typeof g?g(f):g;let {mainAxis:v,crossAxis:y,alignmentAxis:u}="number"==typeof r?{mainAxis:r,crossAxis:0,alignmentAxis:null}:N({mainAxis:0,crossAxis:0,alignmentAxis:null},r);return q&&"number"==typeof u&&(y="end"===q?-1*u:u),t?{x:y*m,y:v*p}:{x:v*p,y:y*m}})}(b,a);return{x:c+e.x,y:d+e.y,data:e}})}}},vq=function(a){return void 0===a&&(a={}),{name:"shift",options:a,fn(b){return Ga(this,null,function*(){const {x:c,y:d,placement:e}=
b;var f=a;const {mainAxis:g=!0,crossAxis:h=!1,limiter:k={fn:t=>{let {x:r,y:v}=t;return{x:r,y:v}}}}=f;var l=fa(f,["mainAxis","crossAxis","limiter"]);f={x:c,y:d};l=yield Sf(b,l);const m=Ne(be(e)),p="x"===m?"y":"x";let q=f[m];f=f[p];g&&(q=md(q+l["y"===m?"top":"left"],lk(q,q-l["y"===m?"bottom":"right"])));h&&(f=md(f+l["y"===p?"top":"left"],lk(f,f-l["y"===p?"bottom":"right"])));f=k.fn(V(N({},b),{[m]:q,[p]:f}));return V(N({},f),{data:{x:f.x-c,y:f.y-d}})})}}},wq=function(a){return void 0===a&&(a={}),{options:a,
fn(b){const {x:c,y:d,placement:e,rects:f,middlewareData:g}=b,{offset:h=0,mainAxis:k=!0,crossAxis:l=!0}=a;var m={x:c,y:d};b=Ne(e);const p="x"===b?"y":"x";let q=m[b];m=m[p];var t="function"==typeof h?h(V(N({},f),{placement:e})):h;t="number"==typeof t?{mainAxis:t,crossAxis:0}:N({mainAxis:0,crossAxis:0},t);if(k){var r="y"===b?"height":"width",v=f.reference[b]-f.floating[r]+t.mainAxis;r=f.reference[b]+f.reference[r]-t.mainAxis;q<v?q=v:q>r&&(q=r)}if(l){var y,u,x,w;const z="y"===b?"width":"height";v=["top",
"left"].includes(be(e));r=f.reference[p]-f.floating[z]+(v&&null!=(y=null==(u=g.offset)?void 0:u[p])?y:0)+(v?0:t.crossAxis);y=f.reference[p]+f.reference[z]+(v?0:null!=(x=null==(w=g.offset)?void 0:w[p])?x:0)-(v?t.crossAxis:0);m<r?m=r:m>y&&(m=y)}return{[b]:q,[p]:m}}}},yz=function(a){return void 0===a&&(a={}),{name:"size",options:a,fn(b){return Ga(this,null,function*(){const {placement:c,rects:d,platform:e,elements:f}=b;var g=a,{apply:h}=g;g=fa(g,["apply"]);g=yield Sf(b,g);var k=be(c),l=c.split("-")[1],
m,p;"top"===k||"bottom"===k?(m=k,p=l===((yield null==e.isRTL?void 0:e.isRTL(f.floating))?"start":"end")?"left":"right"):(p=k,m="end"===l?"top":"bottom");k=md(g.left,0);l=md(g.right,0);const q=md(g.top,0),t=md(g.bottom,0);p={availableHeight:d.floating.height-(["left","right"].includes(c)?2*(0!==q||0!==t?q+t:md(g.top,g.bottom)):g[m]),availableWidth:d.floating.width-(["top","bottom"].includes(c)?2*(0!==k||0!==l?k+l:md(g.left,g.right)):g[p])};m=yield e.getDimensions(f.floating);null==h||h(N(N({},b),p));
h=yield e.getDimensions(f.floating);return m.width!==h.width||m.height!==h.height?{reset:{rects:!0}}:{}})}}},xq=Math.min,Uf=Math.max,$g=Math.round,zz={getClippingRect:function(a){let {element:b,boundary:c,rootBoundary:d,strategy:e}=a;a=[...("clippingAncestors"===c?Bv(b):[].concat(c)),d];a=a.reduce((f,g)=>{g=nn(b,g,e);return f.top=Uf(g.top,f.top),f.right=xq(g.right,f.right),f.bottom=xq(g.bottom,f.bottom),f.left=Uf(g.left,f.left),f},nn(b,a[0],e));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,
y:a.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(a){let {rect:b,offsetParent:c,strategy:d}=a;var e=Nc(c);const f=Ad(c);if(c===f)return b;a={scrollLeft:0,scrollTop:0};var g=0,h=0;(e||!e&&"fixed"!==d)&&(("body"!==gd(c)||Zg(f))&&(a=ah(c)),Nc(c))&&(e=hd(c,!0),g=e.x+c.clientLeft,h=e.y+c.clientTop);return V(N({},b),{x:b.x-a.scrollLeft+g,y:b.y-a.scrollTop+h})},isElement:zd,getDimensions:ln,getOffsetParent:$i,getDocumentElement:Ad,getElementRects:a=>{let {reference:b,floating:c,strategy:d}=
a;a=$i(c);var e=Nc(a);const f=Ad(a);var g;if(g=e)g=hd(a),g=$g(g.width)!==a.offsetWidth||$g(g.height)!==a.offsetHeight;g=hd(b,g,"fixed"===d);let h={scrollLeft:0,scrollTop:0};var k=0,l=0;if(e||!e&&"fixed"!==d)(("body"!==gd(a)||Zg(f))&&(h=ah(a)),Nc(a))?(e=hd(a,!0),k=e.x+a.clientLeft,l=e.y+a.clientTop):f&&(k=hn(f));return{reference:{x:g.left+h.scrollLeft-k,y:g.top+h.scrollTop-l,width:g.width,height:g.height},floating:V(N({},ln(c)),{x:0,y:0})}},getClientRects:a=>Array.from(a.getClientRects()),isRTL:a=>
"rtl"===Tf(a).direction},Dv=(a,b,c)=>xz(a,b,N({platform:zz},c)),jc=ea(F(19),1),yq=F(19),Ev=ea(F(20),1),bj="undefined"!==typeof document?yq.useLayoutEffect:yq.useEffect,zq=a=>{const {element:b,padding:c}=a;return{name:"arrow",options:a,fn(d){if(Object.prototype.hasOwnProperty.call(b,"current")){if(null!=b.current)return rq({element:b.current,padding:c}).fn(d)}else if(b)return rq({element:b,padding:c}).fn(d);return{}}}},mk=F(19),Az=(0,mk.forwardRef)((a,b)=>{const {children:c,width:d=10,height:e=5}=
a,f=fa(a,["children","width","height"]);return(0,mk.createElement)(mb.svg,ca({},f,{ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),a.asChild?c:(0,mk.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),Fv=F(19),[nk,ff]=uc("Popper"),[Bz,Aq]=nk("Popper"),ok=(0,xb.forwardRef)((a,b)=>{const {__scopePopper:c,virtualRef:d}=a;a=fa(a,["__scopePopper","virtualRef"]);const e=Aq("PopperAnchor",c),f=(0,xb.useRef)(null);b=Ia(b,f);(0,xb.useEffect)(()=>{e.onAnchorChange((null===d||void 0===
d?void 0:d.current)||f.current)});return d?null:(0,xb.createElement)(mb.div,ca({},a,{ref:b}))}),[Cz,Dz]=nk("PopperContent"),[Ez,Fz]=nk("PopperContent",{hasParent:!1,positionUpdateFns:new Set}),pk=(0,xb.forwardRef)((a,b)=>{var c,d,e,f,g,h,k,l;const {__scopePopper:m,side:p="bottom",sideOffset:q=0,align:t="center",alignOffset:r=0,arrowPadding:v=0,collisionBoundary:y=[],collisionPadding:u=0,sticky:x="partial",hideWhenDetached:w=!1,avoidCollisions:z=!0}=a;a=fa(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const A=Aq("PopperContent",m),[D,J]=(0,xb.useState)(null);b=Ia(b,fb=>J(fb));const [Q,K]=(0,xb.useState)(null);var O=cj(Q),W=null!==(c=null===O||void 0===O?void 0:O.width)&&void 0!==c?c:0;c=null!==(d=null===O||void 0===O?void 0:O.height)&&void 0!==d?d:0;d=p+("center"!==t?"-"+t:"");O="number"===typeof u?u:N({top:0,right:0,bottom:0,left:0},u);const R=Array.isArray(y)?y:[y],T=0<R.length;O={padding:O,boundary:R.filter(Hv),altBoundary:T};const {reference:I,floating:C,strategy:H,x:B,y:G,placement:P,middlewareData:S,
update:ha}=pn({strategy:"fixed",placement:d,whileElementsMounted:on,middleware:[uq({mainAxis:q+c,alignmentAxis:r}),z?vq(N({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?wq():void 0},O)):void 0,Q?zq({element:Q,padding:v}):void 0,z?sq(N({},O)):void 0,Gz({arrowWidth:W,arrowHeight:c}),w?tq({strategy:"referenceHidden"}):void 0].filter(Gv)});Kb(()=>{I(A.anchor)},[I,A.anchor]);const la=null!==B&&null!==G,[U,pa]=qn(P);W=null===(e=S.arrow)||void 0===e?void 0:e.x;e=null===(f=S.arrow)||void 0===f?void 0:f.y;
f=0!==(null===(g=S.arrow)||void 0===g?void 0:g.centerOffset);const [ba,sa]=(0,xb.useState)();Kb(()=>{D&&sa(window.getComputedStyle(D).zIndex)},[D]);const {hasParent:ya,positionUpdateFns:Ra}=Fz("PopperContent",m),gb=!ya;(0,xb.useLayoutEffect)(()=>{if(!gb)return Ra.add(ha),()=>{Ra.delete(ha)}},[gb,Ra,ha]);(0,xb.useLayoutEffect)(()=>{gb&&la&&Array.from(Ra).reverse().forEach(fb=>requestAnimationFrame(fb))},[gb,la,Ra]);g=V(N({"data-side":U,"data-align":pa},a),{ref:b,style:V(N({},a.style),{animation:la?
void 0:"none",opacity:null!==(h=S.hide)&&void 0!==h&&h.referenceHidden?0:void 0})});return(0,xb.createElement)("div",{ref:C,"data-radix-popper-content-wrapper":"",style:{position:H,left:0,top:0,transform:la?`translate3d(${Math.round(B)}px, ${Math.round(G)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ba,["--radix-popper-transform-origin"]:[null===(k=S.transformOrigin)||void 0===k?void 0:k.x,null===(l=S.transformOrigin)||void 0===l?void 0:l.y].join(" ")}},(0,xb.createElement)(Cz,
{scope:m,placedSide:U,onArrowChange:K,arrowX:W,arrowY:e,shouldHideArrow:f},gb?(0,xb.createElement)(Ez,{scope:m,hasParent:!0,positionUpdateFns:Ra},(0,xb.createElement)(mb.div,g)):(0,xb.createElement)(mb.div,g)))}),Hz={top:"bottom",right:"left",bottom:"top",left:"right"},Bq=(0,xb.forwardRef)(function(a,b){var {__scopePopper:c}=a;a=fa(a,["__scopePopper"]);c=Dz("PopperArrow",c);return(0,xb.createElement)("span",{ref:c.onArrowChange,style:{position:"absolute",left:c.arrowX,top:c.arrowY,[Hz[c.placedSide]]:0,
transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[c.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[c.placedSide],visibility:c.shouldHideArrow?"hidden":void 0}},(0,xb.createElement)(Az,ca({},a,{ref:b,style:V(N({},a.style),{display:"block"})})))}),Gz=a=>({name:"transformOrigin",options:a,fn(b){var c,d,e,f,g;const {placement:h,rects:k,middlewareData:l}=
b,m=(b=0!==(null===(c=l.arrow)||void 0===c?void 0:c.centerOffset))?0:a.arrowWidth;c=b?0:a.arrowHeight;const [p,q]=qn(h),t={start:"0%",center:"50%",end:"100%"}[q],r=(null!==(d=null===(e=l.arrow)||void 0===e?void 0:e.x)&&void 0!==d?d:0)+m/2;d=(null!==(f=null===(g=l.arrow)||void 0===g?void 0:g.y)&&void 0!==f?f:0)+c/2;g=f="";"bottom"===p?(f=b?t:`${r}px`,g=`${-c}px`):"top"===p?(f=b?t:`${r}px`,g=`${k.floating.height+c}px`):"right"===p?(f=`${-c}px`,g=b?t:`${d}px`):"left"===p&&(f=`${k.floating.width+c}px`,
g=b?t:`${d}px`);return{data:{x:f,y:g}}}}),qk=a=>{const {__scopePopper:b,children:c}=a,[d,e]=(0,xb.useState)(null);return(0,xb.createElement)(Bz,{scope:b,anchor:d,onAnchorChange:e},c)},Cq=F(19),Iz=ea(F(20)),Jz=(0,Cq.forwardRef)((a,b)=>{var c;const {container:d=null===globalThis||void 0===globalThis?void 0:null===(c=globalThis.document)||void 0===c?void 0:c.body}=a;a=fa(a,["container"]);return d?Iz.default.createPortal((0,Cq.createElement)(mb.div,ca({},a,{ref:b})),d):null}),id=F(19),Kv=F(20),jg=a=>
{const {present:b,children:c}=a;a=Jv(b);const d="function"===typeof c?c({present:a.isPresent}):id.Children.only(c),e=Ia(a.ref,d.ref);return"function"===typeof c||a.isPresent?(0,id.cloneElement)(d,{ref:e}):null};jg.displayName="Presence";var dh=F(19),Dq=F(19),Kz=(0,Dq.forwardRef)((a,b)=>(0,Dq.createElement)(mb.span,ca({},a,{ref:b,style:N({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),[Fh]=
uc("Tooltip",[ff]),Gh=ff(),[Lz,rk]=Fh("TooltipProvider"),[Mz,kg]=Fh("Tooltip"),Nz=(0,wa.forwardRef)((a,b)=>{var {__scopeTooltip:c}=a;const d=fa(a,["__scopeTooltip"]),e=kg("TooltipTrigger",c),f=rk("TooltipTrigger",c);c=Gh(c);const g=(0,wa.useRef)(null);b=Ia(b,g,e.onTriggerChange);const h=(0,wa.useRef)(!1),k=(0,wa.useRef)(!1),l=(0,wa.useCallback)(()=>h.current=!1,[]);(0,wa.useEffect)(()=>()=>document.removeEventListener("pointerup",l),[l]);return(0,wa.createElement)(ok,ca({asChild:!0},c),(0,wa.createElement)(mb.button,
ca({"aria-describedby":e.open?e.contentId:void 0,"data-state":e.stateAttribute},d,{ref:b,onPointerMove:qa(a.onPointerMove,m=>{"touch"===m.pointerType||k.current||f.isPointerInTransitRef.current||(e.onTriggerEnter(),k.current=!0)}),onPointerLeave:qa(a.onPointerLeave,()=>{e.onTriggerLeave();k.current=!1}),onPointerDown:qa(a.onPointerDown,()=>{h.current=!0;document.addEventListener("pointerup",l,{once:!0})}),onFocus:qa(a.onFocus,()=>{if(!h.current)e.onOpen()}),onBlur:qa(a.onBlur,e.onClose),onClick:qa(a.onClick,
e.onClose)})))}),[Oz,Pz]=Fh("TooltipPortal",{forceMount:void 0}),Rz=(0,wa.forwardRef)((a,b)=>{var c=Pz("TooltipContent",a.__scopeTooltip);const {forceMount:d=c.forceMount,side:e="top"}=a;c=fa(a,["forceMount","side"]);a=kg("TooltipContent",a.__scopeTooltip);return(0,wa.createElement)(jg,{present:d||a.open},a.disableHoverableContent?(0,wa.createElement)(Eq,ca({side:e},c,{ref:b})):(0,wa.createElement)(Qz,ca({side:e},c,{ref:b})))}),Qz=(0,wa.forwardRef)((a,b)=>{const c=kg("TooltipContent",a.__scopeTooltip),
d=rk("TooltipContent",a.__scopeTooltip),e=(0,wa.useRef)(null);b=Ia(b,e);const [f,g]=(0,wa.useState)(null),{trigger:h,onClose:k}=c,l=e.current,{onPointerInTransitChange:m}=d,p=(0,wa.useCallback)(()=>{g(null);m(!1)},[m]),q=(0,wa.useCallback)((t,r)=>{const v=Mv({x:t.clientX,y:t.clientY},t.currentTarget.getBoundingClientRect()),y="right"===v||"bottom"===v?-5:5;t="right"===v||"left"===v?{x:t.clientX+y,y:t.clientY}:{x:t.clientX,y:t.clientY+y};r=r.getBoundingClientRect();const {top:u,right:x,bottom:w,left:z}=
r;r=Nv([t,{x:z,y:u},{x,y:u},{x,y:w},{x:z,y:w}]);g(r);m(!0)},[m]);(0,wa.useEffect)(()=>()=>p(),[p]);(0,wa.useEffect)(()=>{if(h&&l){const t=v=>q(v,l),r=v=>q(v,h);h.addEventListener("pointerleave",t);l.addEventListener("pointerleave",r);return()=>{h.removeEventListener("pointerleave",t);l.removeEventListener("pointerleave",r)}}},[h,l,q,p]);(0,wa.useEffect)(()=>{if(f){const t=r=>{var v=r.target;r={x:r.clientX,y:r.clientY};v=(null===h||void 0===h?void 0:h.contains(v))||(null===l||void 0===l?void 0:l.contains(v));
const {x:y,y:u}=r;r=!1;for(let x=0,w=f.length-1;x<f.length;w=x++){const z=f[x].x,A=f[x].y,D=f[w].x,J=f[w].y;A>u!==J>u&&y<(D-z)*(u-A)/(J-A)+z&&(r=!r)}r=!r;v?p():r&&(p(),k())};document.addEventListener("pointermove",t);return()=>document.removeEventListener("pointermove",t)}},[h,l,f,k,p]);return(0,wa.createElement)(Eq,ca({},a,{ref:b}))}),[Sz,Tz]=Fh("Tooltip",{isInside:!1}),Eq=(0,wa.forwardRef)((a,b)=>{const {__scopeTooltip:c,children:d,"aria-label":e,onEscapeKeyDown:f,onPointerDownOutside:g}=a;a=fa(a,
["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const h=kg("TooltipContent",c),k=Gh(c),{onClose:l}=h;(0,wa.useEffect)(()=>{document.addEventListener("tooltip.open",l);return()=>document.removeEventListener("tooltip.open",l)},[l]);(0,wa.useEffect)(()=>{if(h.trigger){const m=p=>{p=p.target;null!==p&&void 0!==p&&p.contains(h.trigger)&&l()};window.addEventListener("scroll",m,{capture:!0});return()=>window.removeEventListener("scroll",m,{capture:!0})}},[h.trigger,l]);
return(0,wa.createElement)(kk,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:m=>m.preventDefault(),onDismiss:l},(0,wa.createElement)(pk,ca({"data-state":h.stateAttribute},k,a,{ref:b,style:V(N({},a.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,wa.createElement)(Tm,null,d),(0,wa.createElement)(Sz,{scope:c,isInside:!0},(0,wa.createElement)(Kz,{id:h.contentId,role:"tooltip"},e||d))))}),Uz=(0,wa.forwardRef)((a,
b)=>{const {__scopeTooltip:c}=a;a=fa(a,["__scopeTooltip"]);const d=Gh(c);return Tz("TooltipArrow",c).isInside?null:(0,wa.createElement)(Bq,ca({},d,a,{ref:b}))}),Pv=a=>{const {__scopeTooltip:b,delayDuration:c=700,skipDelayDuration:d=300,disableHoverableContent:e=!1,children:f}=a,[g,h]=(0,wa.useState)(!0),k=(0,wa.useRef)(!1),l=(0,wa.useRef)(0);(0,wa.useEffect)(()=>{const m=l.current;return()=>window.clearTimeout(m)},[]);return(0,wa.createElement)(Lz,{scope:b,isOpenDelayed:g,delayDuration:c,onOpen:(0,wa.useCallback)(()=>
{window.clearTimeout(l.current);h(!1)},[]),onClose:(0,wa.useCallback)(()=>{window.clearTimeout(l.current);l.current=window.setTimeout(()=>h(!0),d)},[d]),isPointerInTransitRef:k,onPointerInTransitChange:(0,wa.useCallback)(m=>{k.current=m},[]),disableHoverableContent:e},f)},Qv=a=>{const {__scopeTooltip:b,children:c,open:d,defaultOpen:e=!1,onOpenChange:f,disableHoverableContent:g,delayDuration:h}=a,k=rk("Tooltip",a.__scopeTooltip);a=Gh(b);const [l,m]=(0,wa.useState)(null),p=ae(),q=(0,wa.useRef)(0),t=
null!==g&&void 0!==g?g:k.disableHoverableContent,r=null!==h&&void 0!==h?h:k.delayDuration,v=(0,wa.useRef)(!1),[y=!1,u]=Oc({prop:d,defaultProp:e,onChange:D=>{if(D)k.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));else k.onClose();null===f||void 0===f||f(D)}}),x=(0,wa.useMemo)(()=>y?v.current?"delayed-open":"instant-open":"closed",[y]),w=(0,wa.useCallback)(()=>{window.clearTimeout(q.current);v.current=!1;u(!0)},[u]),z=(0,wa.useCallback)(()=>{window.clearTimeout(q.current);u(!1)},[u]),
A=(0,wa.useCallback)(()=>{window.clearTimeout(q.current);q.current=window.setTimeout(()=>{v.current=!0;u(!0)},r)},[r,u]);(0,wa.useEffect)(()=>()=>window.clearTimeout(q.current),[]);return(0,wa.createElement)(qk,a,(0,wa.createElement)(Mz,{scope:b,contentId:p,open:y,stateAttribute:x,trigger:l,onTriggerChange:m,onTriggerEnter:(0,wa.useCallback)(()=>{k.isOpenDelayed?A():w()},[k.isOpenDelayed,A,w]),onTriggerLeave:(0,wa.useCallback)(()=>{t?z():window.clearTimeout(q.current)},[z,t]),onOpen:w,onClose:z,disableHoverableContent:t},
c))},Rv=Nz,Sv=a=>{const {__scopeTooltip:b,forceMount:c,children:d,container:e}=a;a=kg("TooltipPortal",b);return(0,wa.createElement)(Oz,{scope:b,forceMount:c},(0,wa.createElement)(jg,{present:c||a.open},(0,wa.createElement)(Jz,{asChild:!0,container:e},d)))},Tv=Rz,Uv=Uz,Bd=F(589),rn=F(589),sk=F(589),Vz=({style:a,icon:b,onClick:c})=>(0,sk.jsx)("button",{"data-html2canvas-ignore":"true",style:a,className:"tl-circle-button",onPointerDown:c,children:(0,sk.jsx)("div",{className:"tl-circle-button-icons-wrapper",
children:(0,sk.jsx)(ra,{name:b})})}),Fq=F(19),Gq=(0,Fq.forwardRef)((a,b)=>{const {pressed:c,defaultPressed:d=!1,onPressedChange:e}=a,f=fa(a,["pressed","defaultPressed","onPressedChange"]),[g=!1,h]=Oc({prop:c,onChange:e,defaultProp:d});return(0,Fq.createElement)(mb.button,ca({type:"button","aria-pressed":g,"data-state":g?"on":"off","data-disabled":a.disabled?"":void 0},f,{ref:b,onClick:qa(a.onClick,()=>{a.disabled||h(!g)})}))}),Vv=Gq,dj=F(589),xc=F(19),ua=F(19),Pc=ea(F(19)),sn=F(19),Wv=(0,sn.createContext)(void 0),
Xv=F(19),gj=0,Kd=F(19),Hq={bubbles:!1,cancelable:!0},Jq=(0,Kd.forwardRef)((a,b)=>{const {loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f}=a;a=fa(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [g,h]=(0,Kd.useState)(null),k=Vb(e),l=Vb(f),m=(0,Kd.useRef)(null);b=Ia(b,t=>h(t));const p=(0,Kd.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Kd.useEffect)(()=>{if(d){let t=function(v){!p.paused&&g&&(v=v.target,g.contains(v)?m.current=v:ce(m.current,
{select:!0}))},r=function(v){!p.paused&&g&&(g.contains(v.relatedTarget)||ce(m.current,{select:!0}))};document.addEventListener("focusin",t);document.addEventListener("focusout",r);return()=>{document.removeEventListener("focusin",t);document.removeEventListener("focusout",r)}}},[d,g,p.paused]);(0,Kd.useEffect)(()=>{if(g){Iq.add(p);const t=document.activeElement;if(!g.contains(t)){const r=new CustomEvent("focusScope.autoFocusOnMount",Hq);g.addEventListener("focusScope.autoFocusOnMount",k);g.dispatchEvent(r);
r.defaultPrevented||(Yv($v(un(g)),{select:!0}),document.activeElement===t&&ce(g))}return()=>{g.removeEventListener("focusScope.autoFocusOnMount",k);setTimeout(()=>{const r=new CustomEvent("focusScope.autoFocusOnUnmount",Hq);g.addEventListener("focusScope.autoFocusOnUnmount",l);g.dispatchEvent(r);r.defaultPrevented||ce(null!==t&&void 0!==t?t:document.body,{select:!0});g.removeEventListener("focusScope.autoFocusOnUnmount",l);Iq.remove(p)},0)}}},[g,k,l,p]);const q=(0,Kd.useCallback)(t=>{if((c||d)&&!p.paused){var r=
document.activeElement;if("Tab"===t.key&&!t.altKey&&!t.ctrlKey&&!t.metaKey&&r){const y=t.currentTarget;var v=y;const u=un(v),x=vn(u,v);v=vn(u.reverse(),v);const [w,z]=[x,v];w&&z?t.shiftKey||r!==z?t.shiftKey&&r===w&&(t.preventDefault(),c&&ce(z,{select:!0})):(t.preventDefault(),c&&ce(w,{select:!0})):r===y&&t.preventDefault()}}},[c,d,p.paused]);return(0,Kd.createElement)(mb.div,ca({tabIndex:-1},a,{ref:b,onKeyDown:q}))}),Iq=function(){let a=[];return{add(b){const c=a[0];b===c||null!==c&&void 0!==c&&c.pause();
a=wn(a,b);a.unshift(b)},remove(b){var c;a=wn(a,b);null===(c=a[0])||void 0===c||c.resume()}}}(),yb=F(19),Wz={bubbles:!1,cancelable:!0},[tk,Kq,Xz]=ej("RovingFocusGroup"),[Yz,Hh]=uc("RovingFocusGroup",[Xz]),[Zz,$z]=Yz("RovingFocusGroup"),Lq=(0,yb.forwardRef)((a,b)=>(0,yb.createElement)(tk.Provider,{scope:a.__scopeRovingFocusGroup},(0,yb.createElement)(tk.Slot,{scope:a.__scopeRovingFocusGroup},(0,yb.createElement)(aA,ca({},a,{ref:b}))))),aA=(0,yb.forwardRef)((a,b)=>{const {__scopeRovingFocusGroup:c,orientation:d,
loop:e=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:h,onCurrentTabStopIdChange:k,onEntryFocus:l}=a,m=fa(a,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),p=(0,yb.useRef)(null);b=Ia(b,p);const q=Vf(f),[t=null,r]=Oc({prop:g,defaultProp:h,onChange:k}),[v,y]=(0,yb.useState)(!1),u=Vb(l),x=Kq(c),w=(0,yb.useRef)(!1),[z,A]=(0,yb.useState)(0);(0,yb.useEffect)(()=>{const D=p.current;if(D)return D.addEventListener("rovingFocusGroup.onEntryFocus",
u),()=>D.removeEventListener("rovingFocusGroup.onEntryFocus",u)},[u]);return(0,yb.createElement)(Zz,{scope:c,orientation:d,dir:q,loop:e,currentTabStopId:t,onItemFocus:(0,yb.useCallback)(D=>r(D),[r]),onItemShiftTab:(0,yb.useCallback)(()=>y(!0),[]),onFocusableItemAdd:(0,yb.useCallback)(()=>A(D=>D+1),[]),onFocusableItemRemove:(0,yb.useCallback)(()=>A(D=>D-1),[])},(0,yb.createElement)(mb.div,ca({tabIndex:v||0===z?-1:0,"data-orientation":d},m,{ref:b,style:N({outline:"none"},a.style),onMouseDown:qa(a.onMouseDown,
()=>{w.current=!0}),onFocus:qa(a.onFocus,D=>{var J=!w.current;if(D.target===D.currentTarget&&J&&!v&&(J=new CustomEvent("rovingFocusGroup.onEntryFocus",Wz),D.currentTarget.dispatchEvent(J),!J.defaultPrevented)){D=x().filter(K=>K.focusable);J=D.find(K=>K.active);const Q=D.find(K=>K.id===t);D=[J,Q,...D].filter(Boolean).map(K=>K.ref.current);xn(D)}w.current=!1}),onBlur:qa(a.onBlur,()=>y(!1))})))}),Mq=(0,yb.forwardRef)((a,b)=>{const {__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1}=a,f=fa(a,["__scopeRovingFocusGroup",
"focusable","active"]),g=ae(),h=$z("RovingFocusGroupItem",c),k=h.currentTabStopId===g,l=Kq(c),{onFocusableItemAdd:m,onFocusableItemRemove:p}=h;(0,yb.useEffect)(()=>{if(d)return m(),()=>p()},[d,m,p]);return(0,yb.createElement)(tk.ItemSlot,{scope:c,id:g,focusable:d,active:e},(0,yb.createElement)(mb.span,ca({tabIndex:k?0:-1,"data-orientation":h.orientation},f,{ref:b,onMouseDown:qa(a.onMouseDown,q=>{if(d)h.onItemFocus(g);else q.preventDefault()}),onFocus:qa(a.onFocus,()=>h.onItemFocus(g)),onKeyDown:qa(a.onKeyDown,
q=>{if("Tab"===q.key&&q.shiftKey)h.onItemShiftTab();else if(q.target===q.currentTarget){var t=aw(q,h.orientation,h.dir);if(void 0!==t){q.preventDefault();let r=l().filter(v=>v.focusable).map(v=>v.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t)"prev"===t&&r.reverse(),q=r.indexOf(q.currentTarget),r=h.loop?cw(r,q+1):r.slice(q+1);setTimeout(()=>xn(r))}}})})))}),bw={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},
bA=function(a){return"undefined"===typeof document?null:(Array.isArray(a)?a[0]:a).ownerDocument.body},gf=new WeakMap,Ih=new WeakMap,Jh={},uk=0,vk=function(a,b,c){void 0===b&&(b=bA(a));void 0===c&&(c="data-aria-hidden");var d=Array.isArray(a)?a:[a];Jh[c]||(Jh[c]=new WeakMap);var e=Jh[c],f=[],g=new Set,h=function(l){l&&!g.has(l)&&(g.add(l),h(l.parentNode))};d.forEach(h);var k=function(l){!l||0<=d.indexOf(l)||Array.prototype.forEach.call(l.children,function(m){if(g.has(m))k(m);else{var p=m.getAttribute("aria-hidden");
p=null!==p&&"false"!==p;var q=(gf.get(m)||0)+1,t=(e.get(m)||0)+1;gf.set(m,q);e.set(m,t);f.push(m);1===q&&p&&Ih.set(m,!0);1===t&&m.setAttribute(c,"true");p||m.setAttribute("aria-hidden","true")}})};k(b);g.clear();uk++;return function(){f.forEach(function(l){var m=gf.get(l)-1,p=e.get(l)-1;gf.set(l,m);e.set(l,p);m||(Ih.has(l)||l.removeAttribute("aria-hidden"),Ih.delete(l));p||l.removeAttribute(c)});uk--;uk||(gf=new WeakMap,gf=new WeakMap,Ih=new WeakMap,Jh={})}},cA=ea(dy(),1),{__assign:Ld,__rest:Nq,__spreadArray:dA}=
cA.default,Oq=ea(F(19)),nd=ea(F(19)),ew=F(19),eA=ea(F(19)),Pq=function(a){var b=a.sideCar;a=Nq(a,["sideCar"]);if(!b)throw Error("Sidecar: please provide `sideCar` property to import the right car");b=b.read();if(!b)throw Error("Sidecar medium not found");return eA.createElement(b,Ld({},a))};Pq.isSideCarExport=!0;var Qq=function(a){void 0===a&&(a={});var b=hw(null);b.options=Ld({async:!0,ssr:!1},a);return b}(),wk=function(){},Kh=nd.forwardRef(function(a,b){var c=nd.useRef(null),d=nd.useState({onScrollCapture:wk,
onWheelCapture:wk,onTouchMoveCapture:wk}),e=d[0];d=d[1];var f=a.forwardProps,g=a.children,h=a.className,k=a.removeScrollBar,l=a.enabled,m=a.shards,p=a.sideCar,q=a.noIsolation,t=a.inert,r=a.allowPinchZoom,v=a.as;v=void 0===v?"div":v;a=Nq(a,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));b=fw([c,b]);e=Ld(Ld({},a),e);return nd.createElement(nd.Fragment,null,l&&nd.createElement(p,{sideCar:Qq,removeScrollBar:k,shards:m,noIsolation:q,
inert:t,setCallbacks:d,allowPinchZoom:!!r,lockRef:c}),f?nd.cloneElement(nd.Children.only(g),Ld(Ld({},e),{ref:b})):nd.createElement(v,Ld({},e,{className:h,ref:b}),g))});Kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kh.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var Gb=ea(F(19)),Rq=ea(F(19)),fA=ea(F(19)),gA=function(){var a=0,b=null;return{add:function(c){if(0==a){if(document){var d=document.createElement("style");d.type="text/css";var e="undefined"!==
typeof __webpack_nonce__?__webpack_nonce__:void 0;e&&d.setAttribute("nonce",e)}else d=null;if(b=d)d=b,d.styleSheet?d.styleSheet.cssText=c:d.appendChild(document.createTextNode(c)),c=b,(document.head||document.getElementsByTagName("head")[0]).appendChild(c)}a++},remove:function(){a--;!a&&b&&(b.parentNode&&b.parentNode.removeChild(b),b=null)}}},hA=function(){var a=gA();return function(b,c){fA.useEffect(function(){a.add(b);return function(){a.remove()}},[b&&c])}},Sq=function(){var a=hA();return function(b){a(b.styles,
b.dynamic);return null}},iA={left:0,top:0,right:0,gap:0},jA=Sq(),kA=function(a,b,c,d){var e=a.left,f=a.top,g=a.right;a=a.gap;void 0===c&&(c="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(d,";\n   padding-right: ").concat(a,"px ").concat(d,";\n  }\n  body {\n    overflow: hidden ").concat(d,";\n    overscroll-behavior: contain;\n    ").concat([b&&"position: relative ".concat(d,";"),"margin"===c&&"\n    padding-left: ".concat(e,"px;\n    padding-top: ").concat(f,
"px;\n    padding-right: ").concat(g,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(a,"px ").concat(d,";\n    "),"padding"===c&&"padding-right: ".concat(a,"px ").concat(d,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(a,"px ").concat(d,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(a,"px ").concat(d,";\n  }\n  \n  .").concat("right-scroll-bar-position"," .").concat("right-scroll-bar-position",
" {\n    right: 0 ").concat(d,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(d,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(a,"px;\n  }\n")},lA=function(a){var b=a.noRelative,c=a.noImportant;a=a.gapMode;var d=void 0===a?"margin":a;a=Rq.useMemo(function(){var e=d;void 0===e&&(e="margin");if("undefined"===typeof window)e=iA;else{var f=window.getComputedStyle(document.body),g=f["padding"===
e?"paddingTop":"marginTop"],h=f["padding"===e?"paddingRight":"marginRight"];e=[parseInt(f["padding"===e?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(g||"",10)||0,parseInt(h||"",10)||0];e={left:e[0],top:e[1],right:e[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+e[2]-e[0])}}return e},[d]);return Rq.createElement(jA,{styles:kA(a,!b,d,c?"":"!important")})},xk=!1;if("undefined"!==typeof window)try{var Lh=Object.defineProperty({},"passive",{get:function(){return xk=!0}});window.addEventListener("test",
Lh,Lh);window.removeEventListener("test",Lh,Lh)}catch(a){xk=!1}var hf=xk?{passive:!1}:!1,Tq=function(a,b){var c=window.getComputedStyle(a);return"hidden"!==c[b]&&!(c.overflowY===c.overflowX&&"TEXTAREA"!==a.tagName&&"visible"===c[b])},Wq=function(a,b){do{"undefined"!==typeof ShadowRoot&&b instanceof ShadowRoot&&(b=b.host);if(Uq(a,b)){var c=Vq(a,b);if(c[1]>c[2])return!0}b=b.parentNode}while(b&&b!==document.body);return!1},Uq=function(a,b){return"v"===a?Tq(b,"overflowY"):Tq(b,"overflowX")},Vq=function(a,
b){return"v"===a?[b.scrollTop,b.scrollHeight,b.clientHeight]:[b.scrollLeft,b.scrollWidth,b.clientWidth]},Mh=function(a){return"changedTouches"in a?[a.changedTouches[0].clientX,a.changedTouches[0].clientY]:[0,0]},Xq=function(a){return a&&"current"in a?a.current:a},mA=function(a){return"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")},nA=0,jf=[];Qq.useMedium(function(a){var b=Gb.useRef([]),c=Gb.useRef([0,0]),d=Gb.useRef(),
e=Gb.useState(nA++)[0],f=Gb.useState(function(){return Sq()})[0],g=Gb.useRef(a);Gb.useEffect(function(){g.current=a},[a]);Gb.useEffect(function(){if(a.inert){document.body.classList.add("block-interactivity-".concat(e));var r=dA([a.lockRef.current],(a.shards||[]).map(Xq),!0).filter(Boolean);r.forEach(function(v){return v.classList.add("allow-interactivity-".concat(e))});return function(){document.body.classList.remove("block-interactivity-".concat(e));r.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(e))})}}},
[a.inert,a.lockRef.current,a.shards]);var h=Gb.useCallback(function(r,v){if("touches"in r&&2===r.touches.length)return!g.current.allowPinchZoom;var y=Mh(r),u=c.current,x="deltaX"in r?r.deltaX:u[0]-y[0];u="deltaY"in r?r.deltaY:u[1]-y[1];var w=r.target,z=Math.abs(x)>Math.abs(u)?"h":"v";if("touches"in r&&"h"===z&&"range"===w.type)return!1;var A=Wq(z,w);if(!A)return!0;A?y=z:(y="v"===z?"h":"v",A=Wq(z,w));if(!A)return!1;!d.current&&"changedTouches"in r&&(x||u)&&(d.current=y);if(!y)return!0;y=d.current||
y;u="h"===y?x:u;x=window.getComputedStyle(v).direction;x="h"===y&&"rtl"===x?-1:1;z=x*u;r=r.target;u=v.contains(r);w=!1;z=0<z;var D=A=0;do{var J=Vq(y,r),Q=J[0];J=J[1]-J[2]-x*Q;(Q||J)&&Uq(y,r)&&(A+=J,D+=Q);r=r.parentNode}while(!u&&r!==document.body||u&&(v.contains(r)||v===r));z&&0===A?w=!0:z||0!==D||(w=!0);return w},[]),k=Gb.useCallback(function(r){if(jf.length&&jf[jf.length-1]===f){var v="deltaY"in r?[r.deltaX,r.deltaY]:Mh(r),y=b.current.filter(function(u){var x;if(x=u.name===r.type&&u.target===r.target)u=
u.delta,x=u[0]===v[0]&&u[1]===v[1];return x})[0];y&&y.should?r.cancelable&&r.preventDefault():y||(y=(g.current.shards||[]).map(Xq).filter(Boolean).filter(function(u){return u.contains(r.target)}),(0<y.length?h(r,y[0]):!g.current.noIsolation)&&r.cancelable&&r.preventDefault())}},[]),l=Gb.useCallback(function(r,v,y,u){var x={name:r,delta:v,target:y,should:u};b.current.push(x);setTimeout(function(){b.current=b.current.filter(function(w){return w!==x})},1)},[]),m=Gb.useCallback(function(r){c.current=
Mh(r);d.current=void 0},[]),p=Gb.useCallback(function(r){l(r.type,[r.deltaX,r.deltaY],r.target,h(r,a.lockRef.current))},[]),q=Gb.useCallback(function(r){l(r.type,Mh(r),r.target,h(r,a.lockRef.current))},[]);Gb.useEffect(function(){jf.push(f);a.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:q});document.addEventListener("wheel",k,hf);document.addEventListener("touchmove",k,hf);document.addEventListener("touchstart",m,hf);return function(){jf=jf.filter(function(r){return r!==f});
document.removeEventListener("wheel",k,hf);document.removeEventListener("touchmove",k,hf);document.removeEventListener("touchstart",m,hf)}},[]);var t=a.removeScrollBar;return Gb.createElement(Gb.Fragment,null,a.inert?Gb.createElement(f,{styles:mA(e)}):null,t?Gb.createElement(lA,{gapMode:"margin"}):null)});var Nh=Oq.forwardRef(function(a,b){return Oq.createElement(Kh,Ld({},a,{ref:b,sideCar:Pq}))});Nh.classNames=Kh.classNames;var yk=["Enter"," "],Yq=["ArrowUp","PageDown","End"],oA=["ArrowDown","PageUp",
"Home",...Yq];[...yk];[...yk];var [zk,pA,qA]=ej("Menu"),[ne,Zq]=uc("Menu",[qA,ff,Hh]),Ak=ff(),$q=Hh(),[rA,Oh]=ne("Menu"),[sA,Bk]=ne("Menu"),tA=(0,ua.forwardRef)((a,b)=>{var {__scopeMenu:c}=a;a=fa(a,["__scopeMenu"]);c=Ak(c);return(0,ua.createElement)(ok,ca({},c,a,{ref:b}))}),[,uA]=ne("MenuPortal",{forceMount:void 0}),[vA,ar]=ne("MenuContent"),yA=(0,ua.forwardRef)((a,b)=>{var c=uA("MenuContent",a.__scopeMenu);({forceMount:c=c.forceMount}=a);const d=fa(a,["forceMount"]),e=Oh("MenuContent",a.__scopeMenu),
f=Bk("MenuContent",a.__scopeMenu);return(0,ua.createElement)(zk.Provider,{scope:a.__scopeMenu},(0,ua.createElement)(jg,{present:c||e.open},(0,ua.createElement)(zk.Slot,{scope:a.__scopeMenu},f.modal?(0,ua.createElement)(wA,ca({},d,{ref:b})):(0,ua.createElement)(xA,ca({},d,{ref:b})))))}),wA=(0,ua.forwardRef)((a,b)=>{const c=Oh("MenuContent",a.__scopeMenu),d=(0,ua.useRef)(null);b=Ia(b,d);(0,ua.useEffect)(()=>{const e=d.current;if(e)return vk(e)},[]);return(0,ua.createElement)(br,ca({},a,{ref:b,trapFocus:c.open,
disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:qa(a.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)}))}),xA=(0,ua.forwardRef)((a,b)=>{const c=Oh("MenuContent",a.__scopeMenu);return(0,ua.createElement)(br,ca({},a,{ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)}))}),br=(0,ua.forwardRef)((a,b)=>{const {__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,
disableOutsidePointerEvents:h,onEscapeKeyDown:k,onPointerDownOutside:l,onFocusOutside:m,onInteractOutside:p,onDismiss:q,disableOutsideScroll:t}=a,r=fa(a,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),v=Oh("MenuContent",c),y=Bk("MenuContent",c),u=Ak(c),x=$q(c),w=pA(c),[z,A]=(0,ua.useState)(null),D=(0,ua.useRef)(null);b=Ia(b,D,v.onContentChange);
const J=(0,ua.useRef)(0),Q=(0,ua.useRef)(""),K=(0,ua.useRef)(0),O=(0,ua.useRef)(null),W=(0,ua.useRef)("right"),R=(0,ua.useRef)(0),T=t?Nh:ua.Fragment,I=t?{as:Qc,allowPinchZoom:!0}:void 0,C=B=>{var G,P;B=Q.current+B;const S=w().filter(ba=>!ba.disabled),ha=document.activeElement,la=null===(G=S.find(ba=>ba.ref.current===ha))||void 0===G?void 0:G.textValue;G=S.map(ba=>ba.textValue);const U=kw(G,B,la),pa=null===(P=S.find(ba=>ba.textValue===U))||void 0===P?void 0:P.ref.current;(function ya(sa){Q.current=
sa;window.clearTimeout(J.current);""!==sa&&(J.current=window.setTimeout(()=>ya(""),1E3))})(B);pa&&setTimeout(()=>pa.focus())};(0,ua.useEffect)(()=>()=>window.clearTimeout(J.current),[]);fj();const H=(0,ua.useCallback)(B=>{var G,P,S;if(S=W.current===(null===(G=O.current)||void 0===G?void 0:G.side)){if(G=null===(P=O.current)||void 0===P?void 0:P.area){const {x:ha,y:la}={x:B.clientX,y:B.clientY};B=!1;for(let U=0,pa=G.length-1;U<G.length;pa=U++){P=G[U].x;S=G[U].y;const ba=G[pa].x,sa=G[pa].y;S>la!==sa>
la&&ha<(ba-P)*(la-S)/(sa-S)+P&&(B=!B)}G=B}else G=!1;S=G}return S},[]);return(0,ua.createElement)(vA,{scope:c,searchRef:Q,onItemEnter:(0,ua.useCallback)(B=>{H(B)&&B.preventDefault()},[H]),onItemLeave:(0,ua.useCallback)(B=>{var G;H(B)||(null===(G=D.current)||void 0===G||G.focus(),A(null))},[H]),onTriggerLeave:(0,ua.useCallback)(B=>{H(B)&&B.preventDefault()},[H]),pointerGraceTimerRef:K,onPointerGraceIntentChange:(0,ua.useCallback)(B=>{O.current=B},[])},(0,ua.createElement)(T,I,(0,ua.createElement)(Jq,
{asChild:!0,trapped:e,onMountAutoFocus:qa(f,B=>{var G;B.preventDefault();null===(G=D.current)||void 0===G||G.focus()}),onUnmountAutoFocus:g},(0,ua.createElement)(kk,{asChild:!0,disableOutsidePointerEvents:h,onEscapeKeyDown:k,onPointerDownOutside:l,onFocusOutside:m,onInteractOutside:p,onDismiss:q},(0,ua.createElement)(Lq,ca({asChild:!0},x,{dir:y.dir,orientation:"vertical",loop:d,currentTabStopId:z,onCurrentTabStopIdChange:A,onEntryFocus:B=>{y.isUsingKeyboardRef.current||B.preventDefault()}}),(0,ua.createElement)(pk,
ca({role:"menu","aria-orientation":"vertical","data-state":v.open?"open":"closed","data-radix-menu-content":"",dir:y.dir},u,r,{ref:b,style:N({outline:"none"},r.style),onKeyDown:qa(r.onKeyDown,B=>{var G=B.target.closest("[data-radix-menu-content]")===B.currentTarget;const P=B.ctrlKey||B.altKey||B.metaKey,S=1===B.key.length;G&&("Tab"===B.key&&B.preventDefault(),!P&&S&&C(B.key));B.target===D.current&&oA.includes(B.key)&&(B.preventDefault(),G=w().filter(ha=>!ha.disabled).map(ha=>ha.ref.current),Yq.includes(B.key)&&
G.reverse(),iw(G))}),onBlur:qa(a.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(J.current),Q.current="")}),onPointerMove:qa(a.onPointerMove,hj(B=>{const G=R.current!==B.clientX;B.currentTarget.contains(B.target)&&G&&(W.current=B.clientX>R.current?"right":"left",R.current=B.clientX)}))})))))))}),AA=(0,ua.forwardRef)((a,b)=>{const {disabled:c=!1,onSelect:d}=a,e=fa(a,["disabled","onSelect"]),f=(0,ua.useRef)(null),g=Bk("MenuItem",a.__scopeMenu),h=ar("MenuItem",a.__scopeMenu);b=Ia(b,
f);const k=(0,ua.useRef)(!1);return(0,ua.createElement)(zA,ca({},e,{ref:b,disabled:c,onClick:qa(a.onClick,()=>{const l=f.current;if(!c&&l){const m=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});l.addEventListener("menu.itemSelect",p=>null===d||void 0===d?void 0:d(p),{once:!0});Um(l,m);if(m.defaultPrevented)k.current=!1;else g.onClose()}}),onPointerDown:l=>{var m;null===(m=a.onPointerDown)||void 0===m||m.call(a,l);k.current=!0},onPointerUp:qa(a.onPointerUp,l=>{var m;k.current||null===
(m=l.currentTarget)||void 0===m||m.click()}),onKeyDown:qa(a.onKeyDown,l=>{const m=""!==h.searchRef.current;c||m&&" "===l.key||!yk.includes(l.key)||(l.currentTarget.click(),l.preventDefault())})}))}),zA=(0,ua.forwardRef)((a,b)=>{const {__scopeMenu:c,disabled:d=!1,textValue:e}=a,f=fa(a,["__scopeMenu","disabled","textValue"]),g=ar("MenuItem",c),h=$q(c),k=(0,ua.useRef)(null);b=Ia(b,k);const [l,m]=(0,ua.useState)(!1),[p,q]=(0,ua.useState)("");(0,ua.useEffect)(()=>{const t=k.current;if(t){var r;q((null!==
(r=t.textContent)&&void 0!==r?r:"").trim())}},[f.children]);return(0,ua.createElement)(zk.ItemSlot,{scope:c,disabled:d,textValue:null!==e&&void 0!==e?e:p},(0,ua.createElement)(Mq,ca({asChild:!0},h,{focusable:!d}),(0,ua.createElement)(mb.div,ca({role:"menuitem","data-highlighted":l?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0},f,{ref:b,onPointerMove:qa(a.onPointerMove,hj(t=>{if(d)g.onItemLeave(t);else g.onItemEnter(t),t.defaultPrevented||t.currentTarget.focus()})),onPointerLeave:qa(a.onPointerLeave,
hj(t=>g.onItemLeave(t))),onFocus:qa(a.onFocus,()=>m(!0)),onBlur:qa(a.onBlur,()=>m(!1))}))))});ne("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});ne("MenuItemIndicator",{checked:!1});ne("MenuSub");var BA=a=>{const {__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a;a=Ak(b);const [h,k]=(0,ua.useState)(null),l=(0,ua.useRef)(!1),m=Vb(f),p=Vf(e);(0,ua.useEffect)(()=>{const q=()=>{l.current=!0;document.addEventListener("pointerdown",t,{capture:!0,once:!0});document.addEventListener("pointermove",
t,{capture:!0,once:!0})},t=()=>l.current=!1;document.addEventListener("keydown",q,{capture:!0});return()=>{document.removeEventListener("keydown",q,{capture:!0});document.removeEventListener("pointerdown",t,{capture:!0});document.removeEventListener("pointermove",t,{capture:!0})}},[]);return(0,ua.createElement)(qk,a,(0,ua.createElement)(rA,{scope:b,open:c,onOpenChange:m,content:h,onContentChange:k},(0,ua.createElement)(sA,{scope:b,onClose:(0,ua.useCallback)(()=>m(!1),[m]),isUsingKeyboardRef:l,dir:p,
modal:g},d)))},[CA]=uc("DropdownMenu",[Zq]),Ph=Zq(),[DA,cr]=CA("DropdownMenu"),EA=(0,xc.forwardRef)((a,b)=>{const {__scopeDropdownMenu:c,disabled:d=!1}=a,e=fa(a,["__scopeDropdownMenu","disabled"]),f=cr("DropdownMenuTrigger",c),g=Ph(c);return(0,xc.createElement)(tA,ca({asChild:!0},g),(0,xc.createElement)(mb.button,ca({type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d},
e,{ref:Wi(b,f.triggerRef),onPointerDown:qa(a.onPointerDown,h=>{d||0!==h.button||!1!==h.ctrlKey||(f.onOpenToggle(),f.open||h.preventDefault())}),onKeyDown:qa(a.onKeyDown,h=>{if(!d){if(["Enter"," "].includes(h.key))f.onOpenToggle();if("ArrowDown"===h.key)f.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(h.key)&&h.preventDefault()}})})))}),FA=(0,xc.forwardRef)((a,b)=>{var {__scopeDropdownMenu:c}=a;const d=fa(a,["__scopeDropdownMenu"]),e=cr("DropdownMenuContent",c);c=Ph(c);const f=(0,xc.useRef)(!1);
return(0,xc.createElement)(yA,ca({id:e.contentId,"aria-labelledby":e.triggerId},c,d,{ref:b,onCloseAutoFocus:qa(a.onCloseAutoFocus,g=>{var h;f.current||null===(h=e.triggerRef.current)||void 0===h||h.focus();f.current=!1;g.preventDefault()}),onInteractOutside:qa(a.onInteractOutside,g=>{g=g.detail.originalEvent;const h=0===g.button&&!0===g.ctrlKey;g=2===g.button||h;if(!e.modal||g)f.current=!0}),style:V(N({},a.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
lg=(0,xc.forwardRef)((a,b)=>{var {__scopeDropdownMenu:c}=a;a=fa(a,["__scopeDropdownMenu"]);c=Ph(c);return(0,xc.createElement)(AA,ca({},c,a,{ref:b}))}),GA=a=>{const {__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:h=!0}=a;a=Ph(b);const k=(0,xc.useRef)(null),[l=!1,m]=Oc({prop:e,defaultProp:f,onChange:g});return(0,xc.createElement)(DA,{scope:b,triggerId:ae(),triggerRef:k,contentId:ae(),open:l,onOpenChange:m,onOpenToggle:(0,xc.useCallback)(()=>m(p=>!p),[m]),modal:h},(0,xc.createElement)(BA,
ca({},a,{open:l,onOpenChange:m,dir:d,modal:h}),c))},Pa=ea(F(19)).default.createContext({}),HA=ea(F(19)),dr=F(589),Hb=a=>{var {action:b,shortcut:c,opts:d}=a;a=fa(a,["action","shortcut","opts"]);var {renderers:e}=HA.useContext(Pa);e=null==e?void 0:e.KeyboardShortcut;return(0,dr.jsx)("div",V(N({className:"tl-menu-right-slot"},a),{children:(0,dr.jsx)(e,{action:b,shortcut:c,opts:d})}))};F(19);var oc=F(589),IA=da(function(){const a=xa(),b=c=>{c.preventDefault()};return(0,oc.jsxs)(GA,{children:[(0,oc.jsx)(EA,
{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*a.viewport.camera.zoom).toFixed(0)+"%"}),(0,oc.jsxs)(FA,{onCloseAutoFocus:c=>c.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,oc.jsxs)(lg,{className:"tl-menu-item",onSelect:b,onClick:a.api.zoomToFit,children:["Zoom to drawing",(0,oc.jsx)(Hb,{action:"whiteboard/zoom-to-fit"})]}),(0,oc.jsxs)(lg,{className:"tl-menu-item",onSelect:b,onClick:a.api.zoomToSelection,disabled:0===a.selectedShapesArray.length,
children:["Zoom to fit selection",(0,oc.jsx)(Hb,{action:"whiteboard/zoom-to-selection"})]}),(0,oc.jsxs)(lg,{className:"tl-menu-item",onSelect:b,onClick:a.api.zoomIn,children:["Zoom in",(0,oc.jsx)(Hb,{action:"whiteboard/zoom-in"})]}),(0,oc.jsxs)(lg,{className:"tl-menu-item",onSelect:b,onClick:a.api.zoomOut,children:["Zoom out",(0,oc.jsx)(Hb,{action:"whiteboard/zoom-out"})]}),(0,oc.jsxs)(lg,{className:"tl-menu-item",onSelect:b,onClick:a.api.resetZoom,children:["Reset zoom",(0,oc.jsx)(Hb,{action:"whiteboard/reset-zoom"})]})]})]})}),
er=F(19),fr=["horizontal","vertical"],oe=(0,er.forwardRef)((a,b)=>{const {decorative:c,orientation:d="horizontal"}=a;a=fa(a,["decorative","orientation"]);const e=fr.includes(d)?d:"horizontal";return(0,er.createElement)(mb.div,ca({"data-orientation":e},c?{role:"none"}:{"aria-orientation":"vertical"===e?e:void 0,role:"separator"},a,{ref:b}))});oe.propTypes={orientation(a,b,c){a=a[b];b=String(a);return a&&!fr.includes(a)?Error(`Invalid prop \`orientation\` of value \`${b}\` supplied to \`${c}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};var ub=F(589),JA=da(function(){const a=xa(),{handlers:{t:b}}=Jd.useContext(Pa),c=Jd.useCallback(()=>{a.api.undo()},[a]),d=Jd.useCallback(()=>{a.api.redo()},[a]),e=Jd.useCallback(()=>{a.api.zoomIn()},[a]),f=Jd.useCallback(()=>{a.api.zoomOut()},[a]),g=Jd.useCallback(()=>{a.api.toggleGrid()},[a]),h=Jd.useCallback(()=>{a.api.toggleSnapToGrid()},[a]),k=Jd.useCallback(()=>{a.api.togglePenMode()},[a]);return(0,ub.jsxs)("div",{className:"tl-action-bar","data-html2canvas-ignore":"true",
children:[!a.readOnly&&(0,ub.jsxs)("div",{className:"tl-toolbar tl-history-bar mr-2 mb-2",children:[(0,ub.jsx)(qb,{tooltip:b("whiteboard/undo"),onClick:c,children:(0,ub.jsx)(ra,{name:"arrow-back-up"})}),(0,ub.jsx)(qb,{tooltip:b("whiteboard/redo"),onClick:d,children:(0,ub.jsx)(ra,{name:"arrow-forward-up"})})]}),(0,ub.jsxs)("div",{className:"tl-toolbar tl-zoom-bar mr-2 mb-2",children:[(0,ub.jsx)(qb,{tooltip:b("whiteboard/zoom-in"),onClick:e,id:"tl-zoom-in",children:(0,ub.jsx)(ra,{name:"plus"})}),(0,ub.jsx)(qb,
{tooltip:b("whiteboard/zoom-out"),onClick:f,id:"tl-zoom-out",children:(0,ub.jsx)(ra,{name:"minus"})}),(0,ub.jsx)(oe,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ub.jsx)(IA,{})]}),(0,ub.jsxs)("div",{className:"tl-toolbar tl-grid-bar mr-2 mb-2",children:[(0,ub.jsx)(Cd,{tooltip:b("whiteboard/toggle-grid"),className:"tl-button",pressed:a.settings.showGrid,id:"tl-show-grid",onPressedChange:g,children:(0,ub.jsx)(ra,{name:"grid-dots"})}),!a.readOnly&&(0,ub.jsx)(Cd,{tooltip:b("whiteboard/snap-to-grid"),
className:"tl-button",pressed:a.settings.snapToGrid,id:"tl-snap-to-grid",onPressedChange:h,children:(0,ub.jsx)(ra,{name:a.settings.snapToGrid?"magnet":"magnet-off"})})]}),!a.readOnly&&(0,ub.jsx)("div",{className:"tl-toolbar tl-pen-mode-bar mb-2",children:(0,ub.jsx)(Cd,{tooltip:b("whiteboard/toggle-pen-mode"),className:"tl-button",pressed:a.settings.penMode,id:"tl-toggle-pen-mode",onPressedChange:k,children:(0,ub.jsx)(ra,{name:a.settings.penMode?"pencil":"pencil-off"})})})]})}),gr=ea(F(19)),KA=ea(F(20)),
Ck=F(589),Qh=a=>`[${a.map(b=>{var c;return null!=(c=null==b?void 0:b.toFixed(2))?c:"-"}).join(", ")}]`,LA=da(()=>{var a;const {viewport:{bounds:b,camera:{point:c,zoom:d}},inputs:e}=Jb(),f=gr.default.useRef();gr.default.useEffect(()=>{const h=document.getElementById("tl-statusbar-anchor");f.current=h},[]);const g=[["Z",null!=(a=null==d?void 0:d.toFixed(2))?a:"null"],["MP",Qh(e.currentPoint)],["MS",Qh(e.currentScreenPoint)],["VP",Qh(c)],["VBR",Qh([b.maxX,b.maxY])]].map(h=>h.join("")).join("|");a=f.current?
KA.default.createPortal((0,Ck.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:g}),f.current):null;return(0,Ck.jsx)(Ck.Fragment,{children:a})}),mg=ea(F(19)),Rh=F(589),Xc=da(a=>{var {id:b,icon:c,tooltip:d,tooltipSide:e="left",handleClick:f}=a;a=fa(a,["id","icon","tooltip","tooltipSide","handleClick"]);var g;const h=xa(),k=null==(g=[...h.Tools,Ze,$e])?void 0:g.find(l=>l.id===b);g=(g=null==k?void 0:k.shortcut)&&d?(0,Rh.jsxs)("div",{className:"flex",children:[d,(0,Rh.jsx)(Hb,{action:g})]}):
d;return(0,Rh.jsx)(qb,V(N({},a),{tooltipSide:e,tooltip:g,"data-tool":b,"data-selected":b===h.selectedTool.id,onClick:f,children:"string"===typeof c?(0,Rh.jsx)(ra,{name:c}):c}))}),Wa=F(19),[hr]=uc("Popover",[ff]),Sh=ff(),[MA,ng]=hr("Popover"),ir=(0,Wa.forwardRef)((a,b)=>{var {__scopePopover:c}=a;const d=fa(a,["__scopePopover"]),e=ng("PopoverTrigger",c);c=Sh(c);b=Ia(b,e.triggerRef);a=(0,Wa.createElement)(mb.button,ca({type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,
"data-state":e.open?"open":"closed"},d,{ref:b,onClick:qa(a.onClick,e.onOpenToggle)}));return e.hasCustomAnchor?a:(0,Wa.createElement)(ok,ca({asChild:!0},c),a)}),[,NA]=hr("PopoverPortal",{forceMount:void 0}),jr=(0,Wa.forwardRef)((a,b)=>{var c=NA("PopoverContent",a.__scopePopover);({forceMount:c=c.forceMount}=a);const d=fa(a,["forceMount"]);a=ng("PopoverContent",a.__scopePopover);return(0,Wa.createElement)(jg,{present:c||a.open},a.modal?(0,Wa.createElement)(OA,ca({},d,{ref:b})):(0,Wa.createElement)(PA,
ca({},d,{ref:b})))}),OA=(0,Wa.forwardRef)((a,b)=>{const c=ng("PopoverContent",a.__scopePopover),d=(0,Wa.useRef)(null);b=Ia(b,d);const e=(0,Wa.useRef)(!1);(0,Wa.useEffect)(()=>{const f=d.current;if(f)return vk(f)},[]);return(0,Wa.createElement)(Nh,{as:Qc,allowPinchZoom:!0},(0,Wa.createElement)(kr,ca({},a,{ref:b,trapFocus:c.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qa(a.onCloseAutoFocus,f=>{var g;f.preventDefault();e.current||null===(g=c.triggerRef.current)||void 0===g||g.focus()}),onPointerDownOutside:qa(a.onPointerDownOutside,
f=>{f=f.detail.originalEvent;const g=0===f.button&&!0===f.ctrlKey;e.current=2===f.button||g},{checkForDefaultPrevented:!1}),onFocusOutside:qa(a.onFocusOutside,f=>f.preventDefault(),{checkForDefaultPrevented:!1})})))}),PA=(0,Wa.forwardRef)((a,b)=>{const c=ng("PopoverContent",a.__scopePopover),d=(0,Wa.useRef)(!1);return(0,Wa.createElement)(kr,ca({},a,{ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var f;null===(f=a.onCloseAutoFocus)||void 0===f||f.call(a,e);if(!e.defaultPrevented){var g;
d.current||null===(g=c.triggerRef.current)||void 0===g||g.focus();e.preventDefault()}d.current=!1},onInteractOutside:e=>{var f,g;null===(f=a.onInteractOutside)||void 0===f||f.call(a,e);e.defaultPrevented||(d.current=!0);f=e.target;(null===(g=c.triggerRef.current)||void 0===g?0:g.contains(f))&&e.preventDefault()}}))}),kr=(0,Wa.forwardRef)((a,b)=>{const {__scopePopover:c,trapFocus:d,onOpenAutoFocus:e,onCloseAutoFocus:f,disableOutsidePointerEvents:g,onEscapeKeyDown:h,onPointerDownOutside:k,onFocusOutside:l,
onInteractOutside:m}=a;a=fa(a,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));const p=ng("PopoverContent",c),q=Sh(c);fj();return(0,Wa.createElement)(Jq,{asChild:!0,loop:!0,trapped:d,onMountAutoFocus:e,onUnmountAutoFocus:f},(0,Wa.createElement)(kk,{asChild:!0,disableOutsidePointerEvents:g,onInteractOutside:m,onEscapeKeyDown:h,onPointerDownOutside:k,onFocusOutside:l,onDismiss:()=>
p.onOpenChange(!1)},(0,Wa.createElement)(pk,ca({"data-state":p.open?"open":"closed",role:"dialog",id:p.contentId},q,a,{ref:b,style:V(N({},a.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),lr=(0,Wa.forwardRef)((a,b)=>{var {__scopePopover:c}=a;a=fa(a,["__scopePopover"]);c=Sh(c);return(0,Wa.createElement)(Bq,ca({},c,a,{ref:b}))}),mr=a=>{const {__scopePopover:b,children:c,open:d,defaultOpen:e,onOpenChange:f,modal:g=!1}=a;a=Sh(b);const h=(0,Wa.useRef)(null),
[k,l]=(0,Wa.useState)(!1),[m=!1,p]=Oc({prop:d,defaultProp:e,onChange:f});return(0,Wa.createElement)(qk,a,(0,Wa.createElement)(MA,{scope:b,contentId:ae(),triggerRef:h,open:m,onOpenChange:p,onOpenToggle:(0,Wa.useCallback)(()=>p(q=>!q),[p]),hasCustomAnchor:k,onCustomAnchorAdd:(0,Wa.useCallback)(()=>l(!0),[]),onCustomAnchorRemove:(0,Wa.useCallback)(()=>l(!1),[]),modal:g},c))},QA=ea(F(19)),od=F(589),nr=da(function(a){var {popoverSide:b="left",setGeometry:c,activeGeometry:d,chevron:e=!0}=a;a=fa(a,["popoverSide",
"setGeometry","activeGeometry","chevron"]);var {handlers:{t:f}}=QA.default.useContext(Pa);const g=[{id:"box",icon:"square",tooltip:f("whiteboard/rectangle")},{id:"ellipse",icon:"circle",tooltip:f("whiteboard/circle")},{id:"polygon",icon:"triangle",tooltip:f("whiteboard/triangle")}];f={id:"shapes",icon:"triangle-square-circle",tooltip:f("whiteboard/shape")};f=d?g.find(h=>h.id===d):f;return(0,od.jsxs)(mr,{children:[(0,od.jsx)(ir,{asChild:!0,children:(0,od.jsxs)("div",V(N({},a),{className:"tl-geometry-tools-pane-anchor",
children:[(0,od.jsx)(Xc,V(N({},f),{tooltipSide:b})),e&&(0,od.jsx)(ra,{"data-selected":d,className:"tl-popover-indicator",name:"chevron-down-left"})]}))}),(0,od.jsxs)(jr,{className:"tl-popover-content",side:b,sideOffset:15,children:[(0,od.jsx)("div",{className:`tl-toolbar tl-geometry-toolbar ${["left","right"].includes(b)?"flex-col":"flex-row"}`,children:g.map(h=>(0,od.jsx)(Xc,{id:h.id,icon:h.icon,tooltip:d?h.tooltip:"",handleClick:c,tooltipSide:b},h.id))}),(0,od.jsx)(lr,{className:"tl-popover-arrow"})]})]})}),
Ha=F(19),zn=F(19),or=["PageUp","PageDown"],pr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qr={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[Dk,RA,SA]=ej("Slider"),[rr]=uc("Slider",[SA]),[TA,Th]=rr("Slider"),XA=(0,Ha.forwardRef)((a,b)=>{function c(R){const T=nw(K,R);f(R,T)}function d(R){f(R,D.current)}function e(){K[D.current]!==
W.current[D.current]&&y(K)}function f(R,T,{commit:I}={commit:!1}){const C=(String(l).split(".")[1]||"").length;R=qw(Math.round((R-h)/l)*l+h,C);const H=ij(R,[h,k]);O((B=[])=>{const G=lw(B,H,T);var P=q*l;if(0<P){const S=pw(G);P=Math.min(...S)>=P}else P=!0;return P?(D.current=G.indexOf(H),(P=String(G)!==String(B))&&I&&y(G),P?G:B):B})}const {name:g,min:h=0,max:k=100,step:l=1,orientation:m="horizontal",disabled:p=!1,minStepsBetweenThumbs:q=0,defaultValue:t=[h],value:r,onValueChange:v=()=>{},onValueCommit:y=
()=>{},inverted:u=!1}=a,x=fa(a,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[w,z]=(0,Ha.useState)(null);b=Ia(b,R=>z(R));const A=(0,Ha.useRef)(new Set),D=(0,Ha.useRef)(0);var J="horizontal"===m;const Q=w?!!w.closest("form"):!0;J=J?UA:VA;const [K=[],O]=Oc({prop:r,defaultProp:t,onChange:R=>{var T;null===(T=[...A.current][D.current])||void 0===T||T.focus();v(R)}}),W=(0,Ha.useRef)(K);return(0,Ha.createElement)(TA,{scope:a.__scopeSlider,
disabled:p,min:h,max:k,valueIndexToChangeRef:D,thumbs:A.current,values:K,orientation:m},(0,Ha.createElement)(Dk.Provider,{scope:a.__scopeSlider},(0,Ha.createElement)(Dk.Slot,{scope:a.__scopeSlider},(0,Ha.createElement)(J,ca({"aria-disabled":p,"data-disabled":p?"":void 0},x,{ref:b,onPointerDown:qa(x.onPointerDown,()=>{p||(W.current=K)}),min:h,max:k,inverted:u,onSlideStart:p?void 0:c,onSlideMove:p?void 0:d,onSlideEnd:p?void 0:e,onHomeKeyDown:()=>!p&&f(h,0,{commit:!0}),onEndKeyDown:()=>!p&&f(k,K.length-
1,{commit:!0}),onStepKeyDown:({event:R,direction:T})=>{if(!p){R=or.includes(R.key)||R.shiftKey&&pr.includes(R.key);const I=D.current;f(K[I]+l*(R?10:1)*T,I,{commit:!0})}}})))),Q&&K.map((R,T)=>(0,Ha.createElement)(WA,{key:T,name:g?g+(1<K.length?"[]":""):void 0,value:R})))}),[sr,tr]=rr("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),UA=(0,Ha.forwardRef)((a,b)=>{function c(x){const w=r.current||q.getBoundingClientRect(),z=jj([0,w.width],u?[d,e]:[e,d]);r.current=w;return z(x-w.left)}
const {min:d,max:e,dir:f,inverted:g,onSlideStart:h,onSlideMove:k,onSlideEnd:l,onStepKeyDown:m}=a,p=fa(a,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[q,t]=(0,Ha.useState)(null);b=Ia(b,x=>t(x));const r=(0,Ha.useRef)(),v=Vf(f),y="ltr"===v,u=y&&!g||!y&&g;return(0,Ha.createElement)(sr,{scope:a.__scopeSlider,startEdge:u?"left":"right",endEdge:u?"right":"left",direction:u?1:-1,size:"width"},(0,Ha.createElement)(ur,ca({dir:v,"data-orientation":"horizontal"},p,{ref:b,
style:V(N({},p.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:x=>{x=c(x.clientX);null===h||void 0===h||h(x)},onSlideMove:x=>{x=c(x.clientX);null===k||void 0===k||k(x)},onSlideEnd:()=>{r.current=void 0;null===l||void 0===l||l()},onStepKeyDown:x=>{const w=qr[u?"from-left":"from-right"].includes(x.key);null===m||void 0===m||m({event:x,direction:w?-1:1})}})))}),VA=(0,Ha.forwardRef)((a,b)=>{function c(r){const v=q.current||p.current.getBoundingClientRect(),y=jj([0,v.height],
t?[e,d]:[d,e]);q.current=v;return y(r-v.top)}const {min:d,max:e,inverted:f,onSlideStart:g,onSlideMove:h,onSlideEnd:k,onStepKeyDown:l}=a,m=fa(a,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),p=(0,Ha.useRef)(null);b=Ia(b,p);const q=(0,Ha.useRef)(),t=!f;return(0,Ha.createElement)(sr,{scope:a.__scopeSlider,startEdge:t?"bottom":"top",endEdge:t?"top":"bottom",size:"height",direction:t?1:-1},(0,Ha.createElement)(ur,ca({"data-orientation":"vertical"},m,{ref:b,style:V(N({},
m.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:r=>{r=c(r.clientY);null===g||void 0===g||g(r)},onSlideMove:r=>{r=c(r.clientY);null===h||void 0===h||h(r)},onSlideEnd:()=>{q.current=void 0;null===k||void 0===k||k()},onStepKeyDown:r=>{const v=qr[t?"from-bottom":"from-top"].includes(r.key);null===l||void 0===l||l({event:r,direction:v?-1:1})}})))}),ur=(0,Ha.forwardRef)((a,b)=>{const {__scopeSlider:c,onSlideStart:d,onSlideMove:e,onSlideEnd:f,onHomeKeyDown:g,onEndKeyDown:h,
onStepKeyDown:k}=a,l=fa(a,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),m=Th("Slider",c);return(0,Ha.createElement)(mb.span,ca({},l,{ref:b,onKeyDown:qa(a.onKeyDown,p=>{"Home"===p.key?(g(p),p.preventDefault()):"End"===p.key?(h(p),p.preventDefault()):or.concat(pr).includes(p.key)&&(k(p),p.preventDefault())}),onPointerDown:qa(a.onPointerDown,p=>{const q=p.target;q.setPointerCapture(p.pointerId);p.preventDefault();m.thumbs.has(q)?q.focus():d(p)}),
onPointerMove:qa(a.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&e(p)}),onPointerUp:qa(a.onPointerUp,p=>{const q=p.target;q.hasPointerCapture(p.pointerId)&&(q.releasePointerCapture(p.pointerId),f(p))})}))}),YA=(0,Ha.forwardRef)((a,b)=>{var {__scopeSlider:c}=a;a=fa(a,["__scopeSlider"]);c=Th("SliderTrack",c);return(0,Ha.createElement)(mb.span,ca({"data-disabled":c.disabled?"":void 0,"data-orientation":c.orientation},a,{ref:b}))}),ZA=(0,Ha.forwardRef)((a,b)=>{var {__scopeSlider:c}=a;const d=
fa(a,["__scopeSlider"]),e=Th("SliderRange",c);c=tr("SliderRange",c);var f=(0,Ha.useRef)(null);b=Ia(b,f);var g=e.values.length;f=e.values.map(h=>An(h,e.min,e.max));g=1<g?Math.min(...f):0;f=100-Math.max(...f);return(0,Ha.createElement)(mb.span,ca({"data-orientation":e.orientation,"data-disabled":e.disabled?"":void 0},d,{ref:b,style:V(N({},a.style),{[c.startEdge]:g+"%",[c.endEdge]:f+"%"})}))}),aB=(0,Ha.forwardRef)((a,b)=>{const c=RA(a.__scopeSlider),[d,e]=(0,Ha.useState)(null);b=Ia(b,g=>e(g));const f=
(0,Ha.useMemo)(()=>d?c().findIndex(g=>g.ref.current===d):-1,[c,d]);return(0,Ha.createElement)($A,ca({},a,{ref:b,index:f}))}),$A=(0,Ha.forwardRef)((a,b)=>{const {__scopeSlider:c,index:d}=a,e=fa(a,["__scopeSlider","index"]),f=Th("SliderThumb",c),g=tr("SliderThumb",c),[h,k]=(0,Ha.useState)(null);b=Ia(b,t=>k(t));var l=cj(h);const m=f.values[d],p=void 0===m?0:An(m,f.min,f.max),q=mw(d,f.values.length);l=(l=null===l||void 0===l?void 0:l[g.size])?ow(l,p,g.direction):0;(0,Ha.useEffect)(()=>{if(h)return f.thumbs.add(h),
()=>{f.thumbs.delete(h)}},[h,f.thumbs]);return(0,Ha.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[g.startEdge]:`calc(${p}% + ${l}px)`}},(0,Ha.createElement)(Dk.ItemSlot,{scope:a.__scopeSlider},(0,Ha.createElement)(mb.span,ca({role:"slider","aria-label":a["aria-label"]||q,"aria-valuemin":f.min,"aria-valuenow":m,"aria-valuemax":f.max,"aria-orientation":f.orientation,"data-orientation":f.orientation,"data-disabled":f.disabled?"":void 0,tabIndex:f.disabled?
void 0:0},e,{ref:b,style:void 0===m?{display:"none"}:a.style,onFocus:qa(a.onFocus,()=>{f.valueIndexToChangeRef.current=d})}))))}),WA=a=>{const {value:b}=a;a=fa(a,["value"]);const c=(0,Ha.useRef)(null),d=yn(b);(0,Ha.useEffect)(()=>{const e=c.current,f=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(d!==b&&f){const g=new Event("input",{bubbles:!0});f.call(e,b);e.dispatchEvent(g)}},[d,b]);return(0,Ha.createElement)("input",ca({style:{display:"none"}},a,{ref:c,defaultValue:b}))},
rw=XA,sw=YA,tw=ZA,uw=aB,Uh=ea(F(19)),Vh=F(589),Dn=da(a=>{var {side:b,align:c,alignOffset:d,label:e,arrow:f,children:g,border:h}=a;a=fa(a,"side align alignOffset label arrow children border".split(" "));const k=Uh.useRef(null),[l,m]=Uh.useState(!1),{viewport:{bounds:p,camera:{point:q,zoom:t}}}=xa(),[r,v]=Uh.useState(0);Uh.useEffect(()=>{if(k.current&&l){var y=k.current.getBoundingClientRect();Y.boundsContain(p,{minX:y.x,minY:y.y,maxX:y.right,maxY:y.bottom,width:y.width,height:y.height})||v(u=>u+1)}},
[q[0],q[1],t,l]);return(0,Vh.jsxs)(mr,{onOpenChange:y=>m(y),children:[(0,Vh.jsx)(ir,V(N({},a),{"data-border":h,className:"tl-button tl-popover-trigger-button",children:e})),(0,Vh.jsxs)(jr,{ref:k,className:"tl-popover-content",align:c,alignOffset:d,side:b,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[g,f&&(0,Vh.jsx)(lr,{className:"tl-popover-arrow"})]},"popover-content-"+r)]})}),Cn=ea(F(19)),Bb=F(589),Gw=ea(F(19)),X=F(19),vr=F(20),Yc=ea(F(19)),cc=F(19),Ek=F(19),
ww=F(20),Yb="a button div form h2 h3 img input label li nav ol p span svg ul".split(" ").reduce((a,b)=>{const c=(0,Ek.forwardRef)((d,e)=>{var {asChild:f}=d;d=fa(d,["asChild"]);f=f?Qc:b;(0,Ek.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ek.createElement)(f,ca({},d,{ref:e}))});c.displayName=`Primitive.${b}`;return V(N({},a),{[b]:c})},{}),wr,bB=(0,cc.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),cB=(0,cc.forwardRef)((a,b)=>{var c;
const {disableOutsidePointerEvents:d=!1,onEscapeKeyDown:e,onPointerDownOutside:f,onFocusOutside:g,onInteractOutside:h,onDismiss:k}=a,l=fa(a,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),m=(0,cc.useContext)(bB),[p,q]=(0,cc.useState)(null),t=null!==(c=null===p||void 0===p?void 0:p.ownerDocument)&&void 0!==c?c:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,r]=(0,cc.useState)({});b=Ia(b,w=>q(w));c=Array.from(m.layers);
var [v]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1);v=c.indexOf(v);const y=p?c.indexOf(p):-1;c=0<m.layersWithOutsidePointerEventsDisabled.size;const u=y>=v;v=xw(w=>{const z=w.target,A=[...m.branches].some(D=>D.contains(z));u&&!A&&(null===f||void 0===f||f(w),null===h||void 0===h||h(w),w.defaultPrevented||null===k||void 0===k||k())},t);const x=yw(w=>{const z=w.target;[...m.branches].some(A=>A.contains(z))||(null===g||void 0===g||g(w),null===h||void 0===h||h(w),w.defaultPrevented||null===
k||void 0===k||k())},t);Vm(w=>{y===m.layers.size-1&&(null===e||void 0===e||e(w),!w.defaultPrevented&&k&&(w.preventDefault(),k()))},t);(0,cc.useEffect)(()=>{if(p)return d&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(wr=t.body.style.pointerEvents,t.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),Fn(),()=>{d&&1===m.layersWithOutsidePointerEventsDisabled.size&&(t.body.style.pointerEvents=wr)}},[p,t,d,m]);(0,cc.useEffect)(()=>()=>{p&&(m.layers.delete(p),
m.layersWithOutsidePointerEventsDisabled.delete(p),Fn())},[p,m]);(0,cc.useEffect)(()=>{const w=()=>r({});document.addEventListener("dismissableLayer.update",w);return()=>document.removeEventListener("dismissableLayer.update",w)},[]);return(0,cc.createElement)(Yb.div,ca({},l,{ref:b,style:N({pointerEvents:c?u?"auto":"none":void 0},a.style),onFocusCapture:qa(a.onFocusCapture,x.onFocusCapture),onBlurCapture:qa(a.onBlurCapture,x.onBlurCapture),onPointerDownCapture:qa(a.onPointerDownCapture,v.onPointerDownCapture)}))}),
Md=F(19),xr={bubbles:!1,cancelable:!0},dB=(0,Md.forwardRef)((a,b)=>{const {loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f}=a;a=fa(a,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [g,h]=(0,Md.useState)(null),k=Vb(e),l=Vb(f),m=(0,Md.useRef)(null);b=Ia(b,t=>h(t));const p=(0,Md.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Md.useEffect)(()=>{if(d){let t=function(v){!p.paused&&g&&(v=v.target,g.contains(v)?m.current=v:de(m.current,{select:!0}))},
r=function(v){!p.paused&&g&&(g.contains(v.relatedTarget)||de(m.current,{select:!0}))};document.addEventListener("focusin",t);document.addEventListener("focusout",r);return()=>{document.removeEventListener("focusin",t);document.removeEventListener("focusout",r)}}},[d,g,p.paused]);(0,Md.useEffect)(()=>{if(g){yr.add(p);const t=document.activeElement;if(!g.contains(t)){const r=new CustomEvent("focusScope.autoFocusOnMount",xr);g.addEventListener("focusScope.autoFocusOnMount",k);g.dispatchEvent(r);r.defaultPrevented||
(zw(Bw(Gn(g)),{select:!0}),document.activeElement===t&&de(g))}return()=>{g.removeEventListener("focusScope.autoFocusOnMount",k);setTimeout(()=>{const r=new CustomEvent("focusScope.autoFocusOnUnmount",xr);g.addEventListener("focusScope.autoFocusOnUnmount",l);g.dispatchEvent(r);r.defaultPrevented||de(null!==t&&void 0!==t?t:document.body,{select:!0});g.removeEventListener("focusScope.autoFocusOnUnmount",l);yr.remove(p)},0)}}},[g,k,l,p]);const q=(0,Md.useCallback)(t=>{if((c||d)&&!p.paused){var r=document.activeElement;
if("Tab"===t.key&&!t.altKey&&!t.ctrlKey&&!t.metaKey&&r){const y=t.currentTarget;var v=y;const u=Gn(v),x=Hn(u,v);v=Hn(u.reverse(),v);const [w,z]=[x,v];w&&z?t.shiftKey||r!==z?t.shiftKey&&r===w&&(t.preventDefault(),c&&de(z,{select:!0})):(t.preventDefault(),c&&de(w,{select:!0})):r===y&&t.preventDefault()}}},[c,d,p.paused]);return(0,Md.createElement)(Yb.div,ca({tabIndex:-1},a,{ref:b,onKeyDown:q}))}),yr=function(){let a=[];return{add(b){const c=a[0];b===c||null!==c&&void 0!==c&&c.pause();a=In(a,b);a.unshift(b)},
remove(b){var c;a=In(a,b);null===(c=a[0])||void 0===c||c.resume()}}}(),Tb=F(19),[Fk,zr]=uc("Popper"),[eB,Ar]=Fk("Popper"),fB=(0,Tb.forwardRef)((a,b)=>{const {__scopePopper:c,virtualRef:d}=a;a=fa(a,["__scopePopper","virtualRef"]);const e=Ar("PopperAnchor",c),f=(0,Tb.useRef)(null);b=Ia(b,f);(0,Tb.useEffect)(()=>{e.onAnchorChange((null===d||void 0===d?void 0:d.current)||f.current)});return d?null:(0,Tb.createElement)(Yb.div,ca({},a,{ref:b}))}),[gB]=Fk("PopperContent"),[hB,iB]=Fk("PopperContent",{hasParent:!1,
positionUpdateFns:new Set}),nB=(0,Tb.forwardRef)((a,b)=>{var c,d,e,f,g,h,k,l;const {__scopePopper:m,side:p="bottom",sideOffset:q=0,align:t="center",alignOffset:r=0,arrowPadding:v=0,collisionBoundary:y=[],collisionPadding:u=0,sticky:x="partial",hideWhenDetached:w=!1,avoidCollisions:z=!0,onPlaced:A}=a,D=fa(a,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions onPlaced".split(" ")),J=Ar("PopperContent",m),[Q,K]=(0,Tb.useState)(null);
b=Ia(b,Zc=>K(Zc));const [O,W]=(0,Tb.useState)(null);var R=cj(O),T=null!==(c=null===R||void 0===R?void 0:R.width)&&void 0!==c?c:0;c=null!==(d=null===R||void 0===R?void 0:R.height)&&void 0!==d?d:0;d=p+("center"!==t?"-"+t:"");R="number"===typeof u?u:N({top:0,right:0,bottom:0,left:0},u);const I=Array.isArray(y)?y:[y],C=0<I.length;R={padding:R,boundary:I.filter(Dw),altBoundary:C};const {reference:H,floating:B,strategy:G,x:P,y:S,placement:ha,middlewareData:la,update:U}=pn({strategy:"fixed",placement:d,
whileElementsMounted:on,middleware:[jB(),uq({mainAxis:q+c,alignmentAxis:r}),z?vq(N({mainAxis:!0,crossAxis:!1,limiter:"partial"===x?wq():void 0},R)):void 0,O?zq({element:O,padding:v}):void 0,z?sq(N({},R)):void 0,yz(V(N({},R),{apply:({elements:Zc,availableWidth:kB,availableHeight:lB})=>{Zc.floating.style.setProperty("--radix-popper-available-width",`${kB}px`);Zc.floating.style.setProperty("--radix-popper-available-height",`${lB}px`)}})),mB({arrowWidth:T,arrowHeight:c}),w?tq({strategy:"referenceHidden"}):
void 0].filter(Cw)});Kb(()=>{H(J.anchor)},[H,J.anchor]);const pa=null!==P&&null!==S,[ba,sa]=Jn(ha),ya=Vb(A);Kb(()=>{pa&&(null===ya||void 0===ya||ya())},[pa,ya]);T=null===(e=la.arrow)||void 0===e?void 0:e.x;e=null===(f=la.arrow)||void 0===f?void 0:f.y;f=0!==(null===(g=la.arrow)||void 0===g?void 0:g.centerOffset);const [Ra,gb]=(0,Tb.useState)();Kb(()=>{Q&&gb(window.getComputedStyle(Q).zIndex)},[Q]);const {hasParent:fb,positionUpdateFns:$c}=iB("PopperContent",m),pd=!fb;(0,Tb.useLayoutEffect)(()=>{if(!pd)return $c.add(U),
()=>{$c.delete(U)}},[pd,$c,U]);Kb(()=>{pd&&pa&&Array.from($c).reverse().forEach(Zc=>requestAnimationFrame(Zc))},[pd,pa,$c]);g=V(N({"data-side":ba,"data-align":sa},D),{ref:b,style:V(N({},D.style),{animation:pa?void 0:"none",opacity:null!==(h=la.hide)&&void 0!==h&&h.referenceHidden?0:void 0})});return(0,Tb.createElement)("div",{ref:B,"data-radix-popper-content-wrapper":"",style:{position:G,left:0,top:0,transform:pa?`translate3d(${Math.round(P)}px, ${Math.round(S)}px, 0)`:"translate3d(0, -200%, 0)",
minWidth:"max-content",zIndex:Ra,["--radix-popper-transform-origin"]:[null===(k=la.transformOrigin)||void 0===k?void 0:k.x,null===(l=la.transformOrigin)||void 0===l?void 0:l.y].join(" ")},dir:a.dir},(0,Tb.createElement)(gB,{scope:m,placedSide:ba,onArrowChange:W,arrowX:T,arrowY:e,shouldHideArrow:f},pd?(0,Tb.createElement)(hB,{scope:m,hasParent:!0,positionUpdateFns:$c},(0,Tb.createElement)(Yb.div,g)):(0,Tb.createElement)(Yb.div,g)))}),jB=()=>({name:"anchorCssProperties",fn(a){const {rects:b,elements:c}=
a,{width:d,height:e}=b.reference;c.floating.style.setProperty("--radix-popper-anchor-width",`${d}px`);c.floating.style.setProperty("--radix-popper-anchor-height",`${e}px`);return{}}}),mB=a=>({name:"transformOrigin",options:a,fn(b){var c,d,e,f,g;const {placement:h,rects:k,middlewareData:l}=b,m=(b=0!==(null===(c=l.arrow)||void 0===c?void 0:c.centerOffset))?0:a.arrowWidth;c=b?0:a.arrowHeight;const [p,q]=Jn(h),t={start:"0%",center:"50%",end:"100%"}[q],r=(null!==(d=null===(e=l.arrow)||void 0===e?void 0:
e.x)&&void 0!==d?d:0)+m/2;d=(null!==(f=null===(g=l.arrow)||void 0===g?void 0:g.y)&&void 0!==f?f:0)+c/2;g=f="";"bottom"===p?(f=b?t:`${r}px`,g=`${-c}px`):"top"===p?(f=b?t:`${r}px`,g=`${k.floating.height+c}px`):"right"===p?(f=`${-c}px`,g=b?t:`${d}px`):"left"===p&&(f=`${k.floating.width+c}px`,g=b?t:`${d}px`);return{data:{x:f,y:g}}}}),oB=a=>{const {__scopePopper:b,children:c}=a,[d,e]=(0,Tb.useState)(null);return(0,Tb.createElement)(eB,{scope:b,anchor:d,onAnchorChange:e},c)},Br=F(19),pB=ea(F(20)),qB=(0,Br.forwardRef)((a,
b)=>{var c;const {container:d=null===globalThis||void 0===globalThis?void 0:null===(c=globalThis.document)||void 0===c?void 0:c.body}=a;a=fa(a,["container"]);return d?pB.default.createPortal((0,Br.createElement)(Yb.div,ca({},a,{ref:b})),d):null}),Cr=F(19),rB=(0,Cr.forwardRef)((a,b)=>(0,Cr.createElement)(Yb.span,ca({},a,{ref:b,style:N({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},a.style)}))),sB=[" ",
"Enter","ArrowUp","ArrowDown"],tB=[" ","Enter"],[Wh,Xh,uB]=function(a){var b=a+"CollectionProvider";const [c,d]=uc(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=m=>{const {scope:p,children:q}=m;m=Yc.default.useRef(null);const t=Yc.default.useRef(new Map).current;return Yc.default.createElement(e,{scope:p,itemMap:t,collectionRef:m},q)};Object.assign(g,{displayName:b});const h=a+"CollectionSlot";b=Yc.default.forwardRef((m,p)=>{const {scope:q,children:t}=m;m=f(h,q);p=Ia(p,m.collectionRef);
return Yc.default.createElement(Qc,{ref:p},t)});Object.assign(b,{displayName:h});const k=a+"CollectionItemSlot",l=Yc.default.forwardRef((m,p)=>{const {scope:q,children:t}=m,r=fa(m,["scope","children"]),v=Yc.default.useRef(null);m=Ia(p,v);const y=f(k,q);Yc.default.useEffect(()=>{y.itemMap.set(v,N({ref:v},r));return()=>void y.itemMap.delete(v)});return Yc.default.createElement(Qc,{["data-radix-collection-item"]:"",ref:m},t)});Object.assign(l,{displayName:k});return[{Provider:g,Slot:b,ItemSlot:l},function(m){const p=
f(a+"CollectionConsumer",m);return Yc.default.useCallback(()=>{const q=p.collectionRef.current;if(!q)return[];const t=Array.from(q.querySelectorAll("[data-radix-collection-item]"));return Array.from(p.itemMap.values()).sort((r,v)=>t.indexOf(r.ref.current)-t.indexOf(v.ref.current))},[p.collectionRef,p.itemMap])},d]}("Select"),[kf]=uc("Select",[uB,zr]),Gk=zr(),[vB,pe]=kf("Select"),[wB,xB]=kf("Select"),yB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,disabled:d=!1}=a;a=fa(a,["__scopeSelect","disabled"]);
const e=Gk(c),f=pe("SelectTrigger",c),g=f.disabled||d;b=Ia(b,f.onTriggerChange);const h=Xh(c),[k,l,m]=Kn(p=>{const q=h().filter(r=>!r.disabled),t=q.find(r=>r.value===f.value);p=Ln(q,p,t);if(void 0!==p)f.onValueChange(p.value)});return(0,X.createElement)(fB,ca({asChild:!0},e),(0,X.createElement)(Yb.button,ca({type:"button",role:"combobox","aria-controls":f.contentId,"aria-expanded":f.open,"aria-required":f.required,"aria-autocomplete":"none",dir:f.dir,"data-state":f.open?"open":"closed",disabled:g,
"data-disabled":g?"":void 0,"data-placeholder":void 0===f.value?"":void 0},a,{ref:b,onClick:qa(a.onClick,p=>{p.currentTarget.focus()}),onPointerDown:qa(a.onPointerDown,p=>{const q=p.target;q.hasPointerCapture(p.pointerId)&&q.releasePointerCapture(p.pointerId);0===p.button&&!1===p.ctrlKey&&(g||(f.onOpenChange(!0),m()),f.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:qa(a.onKeyDown,p=>{const q=""!==k.current;p.ctrlKey||p.altKey||p.metaKey||
1!==p.key.length||l(p.key);q&&" "===p.key||!sB.includes(p.key)||(g||(f.onOpenChange(!0),m()),p.preventDefault())})})))}),zB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,children:d,placeholder:e}=a;a=fa(a,["__scopeSelect","className","style","children","placeholder"]);const f=pe("SelectValue",c),{onValueNodeHasChildrenChange:g}=f,h=void 0!==d;b=Ia(b,f.onValueNodeChange);Kb(()=>{g(h)},[g,h]);return(0,X.createElement)(Yb.span,ca({},a,{ref:b,style:{pointerEvents:"none"}}),void 0===f.value&&void 0!==
e?e:d)}),AB=(0,X.forwardRef)((a,b)=>{const {children:c}=a;a=fa(a,["__scopeSelect","children"]);return(0,X.createElement)(Yb.span,ca({"aria-hidden":!0},a,{ref:b}),c||"▼")}),CB=(0,X.forwardRef)((a,b)=>{const c=pe("SelectContent",a.__scopeSelect),[d,e]=(0,X.useState)();Kb(()=>{e(new DocumentFragment)},[]);return c.open?(0,X.createElement)(BB,ca({},a,{ref:b})):d?(0,vr.createPortal)((0,X.createElement)(Dr,{scope:a.__scopeSelect},(0,X.createElement)(Wh.Slot,{scope:a.__scopeSelect},(0,X.createElement)("div",
null,a.children))),d):null}),[Dr,qe]=kf("SelectContent"),BB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,position:d="item-aligned",onCloseAutoFocus:e,onEscapeKeyDown:f,onPointerDownOutside:g,side:h,sideOffset:k,align:l,alignOffset:m,arrowPadding:p,collisionBoundary:q,collisionPadding:t,sticky:r,hideWhenDetached:v,avoidCollisions:y}=a;a=fa(a,"__scopeSelect position onCloseAutoFocus onEscapeKeyDown onPointerDownOutside side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));
const u=pe("SelectContent",c),[x,w]=(0,X.useState)(null),[z,A]=(0,X.useState)(null);b=Ia(b,ba=>w(ba));const [D,J]=(0,X.useState)(null),[Q,K]=(0,X.useState)(null),O=Xh(c),[W,R]=(0,X.useState)(!1),T=(0,X.useRef)(!1);(0,X.useEffect)(()=>{if(x)return vk(x)},[x]);fj();const I=(0,X.useCallback)(ba=>{const [sa,...ya]=O().map(fb=>fb.ref.current),[Ra]=ya.slice(-1),gb=document.activeElement;for(const fb of ba){if(fb===gb)break;null===fb||void 0===fb||fb.scrollIntoView({block:"nearest"});fb===sa&&z&&(z.scrollTop=
0);fb===Ra&&z&&(z.scrollTop=z.scrollHeight);null===fb||void 0===fb||fb.focus();if(document.activeElement!==gb)break}},[O,z]),C=(0,X.useCallback)(()=>I([D,x]),[I,D,x]);(0,X.useEffect)(()=>{W&&C()},[W,C]);const {onOpenChange:H,triggerPointerDownPosRef:B}=u;(0,X.useEffect)(()=>{if(x){var ba=0,sa=0;const ya=gb=>{var fb,$c,pd,Zc;ba=Math.abs(Math.round(gb.pageX)-(null!==(fb=null===($c=B.current)||void 0===$c?void 0:$c.x)&&void 0!==fb?fb:0));sa=Math.abs(Math.round(gb.pageY)-(null!==(pd=null===(Zc=B.current)||
void 0===Zc?void 0:Zc.y)&&void 0!==pd?pd:0))},Ra=gb=>{10>=ba&&10>=sa?gb.preventDefault():x.contains(gb.target)||H(!1);document.removeEventListener("pointermove",ya);B.current=null};null!==B.current&&(document.addEventListener("pointermove",ya),document.addEventListener("pointerup",Ra,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",ya);document.removeEventListener("pointerup",Ra,{capture:!0})}}},[x,H,B]);(0,X.useEffect)(()=>{const ba=()=>H(!1);window.addEventListener("blur",
ba);window.addEventListener("resize",ba);return()=>{window.removeEventListener("blur",ba);window.removeEventListener("resize",ba)}},[H]);const [G,P]=Kn(ba=>{const sa=O().filter(gb=>!gb.disabled),ya=sa.find(gb=>gb.ref.current===document.activeElement),Ra=Ln(sa,ba,ya);Ra&&setTimeout(()=>Ra.ref.current.focus())}),S=(0,X.useCallback)((ba,sa,ya)=>{ya=!T.current&&!ya;if(void 0!==u.value&&u.value===sa||ya)J(ba),ya&&(T.current=!0)},[u.value]),ha=(0,X.useCallback)(()=>null===x||void 0===x?void 0:x.focus(),
[x]),la=(0,X.useCallback)((ba,sa,ya)=>{ya=!T.current&&!ya;(void 0!==u.value&&u.value===sa||ya)&&K(ba)},[u.value]),U="popper"===d?Er:DB,pa=U===Er?{side:h,sideOffset:k,align:l,alignOffset:m,arrowPadding:p,collisionBoundary:q,collisionPadding:t,sticky:r,hideWhenDetached:v,avoidCollisions:y}:{};return(0,X.createElement)(Dr,{scope:c,content:x,viewport:z,onViewportChange:A,itemRefCallback:S,selectedItem:D,onItemLeave:ha,itemTextRefCallback:la,focusSelectedItem:C,selectedItemText:Q,position:d,isPositioned:W,
searchRef:G},(0,X.createElement)(Nh,{as:Qc,allowPinchZoom:!0},(0,X.createElement)(dB,{asChild:!0,trapped:u.open,onMountAutoFocus:ba=>{ba.preventDefault()},onUnmountAutoFocus:qa(e,ba=>{var sa;null===(sa=u.trigger)||void 0===sa||sa.focus({preventScroll:!0});ba.preventDefault()})},(0,X.createElement)(cB,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:f,onPointerDownOutside:g,onFocusOutside:ba=>ba.preventDefault(),onDismiss:()=>u.onOpenChange(!1)},(0,X.createElement)(U,ca({role:"listbox",id:u.contentId,
"data-state":u.open?"open":"closed",dir:u.dir,onContextMenu:ba=>ba.preventDefault()},a,pa,{onPlaced:()=>R(!0),ref:b,style:N({display:"flex",flexDirection:"column",outline:"none"},a.style),onKeyDown:qa(a.onKeyDown,ba=>{var sa=ba.ctrlKey||ba.altKey||ba.metaKey;"Tab"===ba.key&&ba.preventDefault();sa||1!==ba.key.length||P(ba.key);if(["ArrowUp","ArrowDown","Home","End"].includes(ba.key)){let ya=O().filter(Ra=>!Ra.disabled).map(Ra=>Ra.ref.current);["ArrowUp","End"].includes(ba.key)&&(ya=ya.slice().reverse());
["ArrowUp","ArrowDown"].includes(ba.key)&&(sa=ya.indexOf(ba.target),ya=ya.slice(sa+1));setTimeout(()=>I(ya));ba.preventDefault()}})}))))))}),DB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,onPlaced:d}=a;a=fa(a,["__scopeSelect","onPlaced"]);const e=pe("SelectContent",c);var f=qe("SelectContent",c);const [g,h]=(0,X.useState)(null),[k,l]=(0,X.useState)(null);b=Ia(b,z=>l(z));const m=Xh(c),p=(0,X.useRef)(!1),q=(0,X.useRef)(!0),{viewport:t,selectedItem:r,selectedItemText:v,focusSelectedItem:y}=f,u=(0,X.useCallback)(()=>
{if(e.trigger&&e.valueNode&&g&&k&&t&&r&&v){var z=e.trigger.getBoundingClientRect(),A=k.getBoundingClientRect(),D=e.valueNode.getBoundingClientRect(),J=v.getBoundingClientRect();"rtl"!==e.dir?(J=D.left-(J.left-A.left),D=z.width+(z.left-J),A=ij(J,[10,window.innerWidth-10-Math.max(D,A.width)]),g.style.minWidth=D+"px",g.style.left=A+"px"):(J=window.innerWidth-D.right-(A.right-J.right),D=z.width+(window.innerWidth-z.right-J),A=ij(J,[10,window.innerWidth-10-Math.max(D,A.width)]),g.style.minWidth=D+"px",
g.style.right=A+"px");const T=m();A=window.innerHeight-20;var Q=t.scrollHeight,K=window.getComputedStyle(k);D=parseInt(K.borderTopWidth,10);var O=parseInt(K.paddingTop,10);J=parseInt(K.borderBottomWidth,10);K=parseInt(K.paddingBottom,10);var W=D+O+Q+K+J;Q=Math.min(5*r.offsetHeight,W);var R=window.getComputedStyle(t);K=parseInt(R.paddingTop,10);R=parseInt(R.paddingBottom,10);const I=z.top+z.height/2-10,C=A-I;z=r.offsetHeight/2;O=D+O+(r.offsetTop+z);W-=O;O<=I?(D=r===T[T.length-1].ref.current,g.style.bottom=
"0px",g.style.height=O+Math.max(C,z+(D?R:0)+(k.clientHeight-t.offsetTop-t.offsetHeight)+J)+"px"):(J=r===T[0].ref.current,g.style.top="0px",g.style.height=Math.max(I,D+t.offsetTop+(J?K:0)+z)+W+"px",t.scrollTop=O-I+t.offsetTop);g.style.margin="10px 0";g.style.minHeight=Q+"px";g.style.maxHeight=A+"px";null===d||void 0===d||d();requestAnimationFrame(()=>p.current=!0)}},[m,e.trigger,e.valueNode,g,k,t,r,v,e.dir,d]);Kb(()=>u(),[u]);const [x,w]=(0,X.useState)();Kb(()=>{k&&w(window.getComputedStyle(k).zIndex)},
[k]);f=(0,X.useCallback)(z=>{z&&!0===q.current&&(u(),null===y||void 0===y||y(),q.current=!1)},[u,y]);return(0,X.createElement)(EB,{scope:c,contentWrapper:g,shouldExpandOnScrollRef:p,onScrollButtonChange:f},(0,X.createElement)("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:x}},(0,X.createElement)(Yb.div,ca({},a,{ref:b,style:N({boxSizing:"border-box",maxHeight:"100%"},a.style)}))))}),Er=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,align:d="start",collisionPadding:e=
10}=a;a=fa(a,["__scopeSelect","align","collisionPadding"]);const f=Gk(c);return(0,X.createElement)(nB,ca({},f,a,{ref:b,align:d,collisionPadding:e,style:V(N({boxSizing:"border-box"},a.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))}),
[EB,Hk]=kf("SelectContent",{}),FB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c}=a;a=fa(a,["__scopeSelect"]);const d=qe("SelectViewport",c),e=Hk("SelectViewport",c);b=Ia(b,d.onViewportChange);const f=(0,X.useRef)(0);return(0,X.createElement)(X.Fragment,null,(0,X.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,X.createElement)(Wh.Slot,
{scope:c},(0,X.createElement)(Yb.div,ca({"data-radix-select-viewport":"",role:"presentation"},a,{ref:b,style:N({position:"relative",flex:1,overflow:"auto"},a.style),onScroll:qa(a.onScroll,g=>{g=g.currentTarget;const {contentWrapper:h,shouldExpandOnScrollRef:k}=e;if(null!==k&&void 0!==k&&k.current&&h){var l=Math.abs(f.current-g.scrollTop);if(0<l){var m=window.innerHeight-20,p=parseFloat(h.style.minHeight);const q=parseFloat(h.style.height);p=Math.max(p,q);p<m&&(l=p+l,m=Math.min(m,l),l-=m,h.style.height=
m+"px","0px"===h.style.bottom&&(g.scrollTop=0<l?l:0,h.style.justifyContent="flex-end"))}}f.current=g.scrollTop})}))))});kf("SelectGroup");var [GB,HB]=kf("SelectItem"),IB=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,value:d,disabled:e=!1,textValue:f}=a;a=fa(a,["__scopeSelect","value","disabled","textValue"]);const g=pe("SelectItem",c),h=qe("SelectItem",c),k=g.value===d,[l,m]=(0,X.useState)(null!==f&&void 0!==f?f:""),[p,q]=(0,X.useState)(!1);b=Ia(b,v=>{var y;return null===(y=h.itemRefCallback)||
void 0===y?void 0:y.call(h,v,d,e)});const t=ae(),r=()=>{e||(g.onValueChange(d),g.onOpenChange(!1))};return(0,X.createElement)(GB,{scope:c,value:d,disabled:e,textId:t,isSelected:k,onItemTextChange:(0,X.useCallback)(v=>{m(y=>{var u;return y||(null!==(u=null===v||void 0===v?void 0:v.textContent)&&void 0!==u?u:"").trim()})},[])},(0,X.createElement)(Wh.ItemSlot,{scope:c,value:d,disabled:e,textValue:l},(0,X.createElement)(Yb.div,ca({role:"option","aria-labelledby":t,"data-highlighted":p?"":void 0,"aria-selected":k&&
p,"data-state":k?"checked":"unchecked","aria-disabled":e||void 0,"data-disabled":e?"":void 0,tabIndex:e?void 0:-1},a,{ref:b,onFocus:qa(a.onFocus,()=>q(!0)),onBlur:qa(a.onBlur,()=>q(!1)),onPointerUp:qa(a.onPointerUp,r),onPointerMove:qa(a.onPointerMove,v=>{if(e){var y;null===(y=h.onItemLeave)||void 0===y||y.call(h)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qa(a.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;null===(y=h.onItemLeave)||void 0===y||y.call(h)}}),
onKeyDown:qa(a.onKeyDown,v=>{var y;if(""===(null===(y=h.searchRef)||void 0===y?void 0:y.current)||" "!==v.key)tB.includes(v.key)&&r()," "===v.key&&v.preventDefault()})}))))}),JB=(0,X.forwardRef)((a,b)=>{var {__scopeSelect:c}=a;a=fa(a,["__scopeSelect","className","style"]);const d=pe("SelectItemText",c),e=qe("SelectItemText",c),f=HB("SelectItemText",c);c=xB("SelectItemText",c);const [g,h]=(0,X.useState)(null);b=Ia(b,q=>h(q),f.onItemTextChange,q=>{var t;return null===(t=e.itemTextRefCallback)||void 0===
t?void 0:t.call(e,q,f.value,f.disabled)});const k=null===g||void 0===g?void 0:g.textContent,l=(0,X.useMemo)(()=>(0,X.createElement)("option",{key:f.value,value:f.value,disabled:f.disabled},k),[f.disabled,f.value,k]),{onNativeOptionAdd:m,onNativeOptionRemove:p}=c;Kb(()=>{m(l);return()=>p(l)},[m,p,l]);return(0,X.createElement)(X.Fragment,null,(0,X.createElement)(Yb.span,ca({id:f.textId},a,{ref:b})),f.isSelected&&d.valueNode&&!d.valueNodeHasChildren?(0,vr.createPortal)(a.children,d.valueNode):null)}),
KB=(0,X.forwardRef)((a,b)=>{const c=qe("SelectScrollUpButton",a.__scopeSelect),d=Hk("SelectScrollUpButton",a.__scopeSelect),[e,f]=(0,X.useState)(!1);b=Ia(b,d.onScrollButtonChange);Kb(()=>{if(c.viewport&&c.isPositioned){let g=function(){f(0<h.scrollTop)};const h=c.viewport;g();h.addEventListener("scroll",g);return()=>h.removeEventListener("scroll",g)}},[c.viewport,c.isPositioned]);return e?(0,X.createElement)(Fr,ca({},a,{ref:b,onAutoScroll:()=>{const {viewport:g,selectedItem:h}=c;g&&h&&(g.scrollTop-=
h.offsetHeight)}})):null}),LB=(0,X.forwardRef)((a,b)=>{const c=qe("SelectScrollDownButton",a.__scopeSelect),d=Hk("SelectScrollDownButton",a.__scopeSelect),[e,f]=(0,X.useState)(!1);b=Ia(b,d.onScrollButtonChange);Kb(()=>{if(c.viewport&&c.isPositioned){let g=function(){f(Math.ceil(h.scrollTop)<h.scrollHeight-h.clientHeight)};const h=c.viewport;g();h.addEventListener("scroll",g);return()=>h.removeEventListener("scroll",g)}},[c.viewport,c.isPositioned]);return e?(0,X.createElement)(Fr,ca({},a,{ref:b,onAutoScroll:()=>
{const {viewport:g,selectedItem:h}=c;g&&h&&(g.scrollTop+=h.offsetHeight)}})):null}),Fr=(0,X.forwardRef)((a,b)=>{const {__scopeSelect:c,onAutoScroll:d}=a;a=fa(a,["__scopeSelect","onAutoScroll"]);const e=qe("SelectScrollButton",c),f=(0,X.useRef)(null),g=Xh(c),h=(0,X.useCallback)(()=>{null!==f.current&&(window.clearInterval(f.current),f.current=null)},[]);(0,X.useEffect)(()=>()=>h(),[h]);Kb(()=>{var k;const l=g().find(m=>m.ref.current===document.activeElement);null===l||void 0===l||null===(k=l.ref.current)||
void 0===k||k.scrollIntoView({block:"nearest"})},[g]);return(0,X.createElement)(Yb.div,ca({"aria-hidden":!0},a,{ref:b,style:N({flexShrink:0},a.style),onPointerMove:qa(a.onPointerMove,()=>{var k;null===(k=e.onItemLeave)||void 0===k||k.call(e);null===f.current&&(f.current=window.setInterval(d,50))}),onPointerLeave:qa(a.onPointerLeave,()=>{h()})}))}),Gr=(0,X.forwardRef)((a,b)=>{const {value:c}=a;a=fa(a,["value"]);const d=(0,X.useRef)(null);b=Ia(b,d);const e=yn(c);(0,X.useEffect)(()=>{const f=d.current,
g=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(e!==c&&g){const h=new Event("change",{bubbles:!0});g.call(f,c);f.dispatchEvent(h)}},[e,c]);return(0,X.createElement)(rB,{asChild:!0},(0,X.createElement)("select",ca({},a,{ref:b,defaultValue:c})))});Gr.displayName="BubbleSelect";var Hw=a=>{const {__scopeSelect:b,children:c,open:d,defaultOpen:e,onOpenChange:f,value:g,defaultValue:h,onValueChange:k,dir:l,name:m,autoComplete:p,disabled:q,required:t}=a,r=Gk(b),[v,y]=(0,X.useState)(null),
[u,x]=(0,X.useState)(null),[w,z]=(0,X.useState)(!1),A=Vf(l),[D=!1,J]=Oc({prop:d,defaultProp:e,onChange:f}),[Q,K]=Oc({prop:g,defaultProp:h,onChange:k}),O=(0,X.useRef)(null),W=v?!!v.closest("form"):!0,[R,T]=(0,X.useState)(new Set),I=Array.from(R).map(C=>C.props.value).join(";");return(0,X.createElement)(oB,r,(0,X.createElement)(vB,{required:t,scope:b,trigger:v,onTriggerChange:y,valueNode:u,onValueNodeChange:x,valueNodeHasChildren:w,onValueNodeHasChildrenChange:z,contentId:ae(),value:Q,onValueChange:K,
open:D,onOpenChange:J,dir:A,triggerPointerDownPosRef:O,disabled:q},(0,X.createElement)(Wh.Provider,{scope:b},(0,X.createElement)(wB,{scope:a.__scopeSelect,onNativeOptionAdd:(0,X.useCallback)(C=>{T(H=>(new Set(H)).add(C))},[]),onNativeOptionRemove:(0,X.useCallback)(C=>{T(H=>{H=new Set(H);H.delete(C);return H})},[])},c)),W?(0,X.createElement)(Gr,{key:I,"aria-hidden":!0,required:t,tabIndex:-1,name:m,autoComplete:p,value:Q,onChange:C=>K(C.target.value),disabled:q},void 0===Q?(0,X.createElement)("option",
{value:""}):null,Array.from(R)):null))},Iw=yB,Jw=zB,Kw=AB,Lw=a=>(0,X.createElement)(qB,ca({asChild:!0},a)),Mw=CB,Ow=FB,Pw=IB,Qw=JB,Nw=KB,Rw=LB,Wb=F(589),Sw=ea(F(19)),Tw=F(589),Zb=F(589),MB=da(function(){const a=xa(),{handlers:{t:b}}=mg.useContext(Pa),c=mg.useCallback(g=>{a.api.setColor(g)},[]),d=mg.useCallback(g=>{(g=g.currentTarget.dataset.tool)&&a.selectTool(g)},[]),[e,f]=mg.useState(()=>{var g;return null!=(g=Object.values(Ve).find(h=>h===a.selectedTool.id))?g:Object.values(Ve)[0]});mg.useEffect(()=>
{f(g=>{var h;return null!=(h=Object.values(Ve).find(k=>k===a.selectedTool.id))?h:g})},[a.selectedTool.id]);return(0,Zb.jsx)("div",{className:"tl-primary-tools","data-html2canvas-ignore":"true",children:(0,Zb.jsxs)("div",{className:"tl-toolbar tl-tools-floating-panel",children:[(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("select"),tooltip:b("whiteboard/select"),id:"select",icon:"select-cursor"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("move"),tooltip:b("whiteboard/pan"),id:"move",icon:a.isIn("move.panning")?
"hand-grab":"hand-stop"}),(0,Zb.jsx)(oe,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("logseq-portal"),tooltip:b("whiteboard/add-block-or-page"),id:"logseq-portal",icon:"circle-plus"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("pencil"),tooltip:b("whiteboard/draw"),id:"pencil",icon:"ballpen"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("highlighter"),tooltip:b("whiteboard/highlight"),id:"highlighter",icon:"highlight"}),(0,Zb.jsx)(Xc,{handleClick:()=>
a.selectTool("erase"),tooltip:b("whiteboard/eraser"),id:"erase",icon:"eraser"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("line"),tooltip:b("whiteboard/connector"),id:"line",icon:"connector"}),(0,Zb.jsx)(Xc,{handleClick:()=>a.selectTool("text"),tooltip:b("whiteboard/text"),id:"text",icon:"text"}),(0,Zb.jsx)(nr,{activeGeometry:e,setGeometry:d}),(0,Zb.jsx)(oe,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,Zb.jsx)(Bn,{popoverSide:"left",color:a.settings.color,
setColor:c}),(0,Zb.jsx)(Mn,{scaleLevel:a.settings.scaleLevel,popoverSide:"left",compact:!0})]})})}),Ik=F(589),NB=da(function(){const a=xa();return(0,Ik.jsxs)("div",{className:"tl-statusbar","data-html2canvas-ignore":"true",children:[a.selectedTool.id," | ",a.selectedTool.currentState.id,(0,Ik.jsx)("div",{style:{flex:1}}),(0,Ik.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})}),lf=F(589),OB=da(function(){const a=xa();return(0,lf.jsxs)(lf.Fragment,{children:[Ki()&&(0,lf.jsx)(NB,{}),
Ki()&&(0,lf.jsx)(LA,{}),!a.readOnly&&(0,lf.jsx)(MB,{}),(0,lf.jsx)(JA,{})]})}),og=ea(F(19)),Ib=ea(F(19)),Bo=ea(F(19)),PB=ea(F(19)),Nd=F(589),Co=({id:a,showReferenceContent:b=!1})=>{var c;const {handlers:{isWhiteboardPage:d,redirectToPage:e,sidebarAddBlock:f,queryBlockByUUID:g},renderers:{Breadcrumb:h,PageName:k}}=PB.default.useContext(Pa);var l="";let m=Zd(a)?"B":"P",p="";if(Zd(a)){l=g(a);if(!l)return(0,Nd.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});p=l.content;
l="whiteboard-shape"===(null==(c=l.properties)?void 0:c["ls-type"])?"link-to-whiteboard":"link-to-block"}else l=d(a)?"link-to-whiteboard":"link-to-page";c=p&&23<p.length?p.slice(0,20)+"...":p;return(0,Nd.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:q=>{q.stopPropagation();q.shiftKey?f(a,"B"===m?"block":"page"):e(a)},children:[(0,Nd.jsx)(ra,{name:l}),(0,Nd.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===m?(0,Nd.jsx)(k,{pageName:a}):
(0,Nd.jsxs)(Nd.Fragment,{children:[(0,Nd.jsx)(h,{levelLimit:1,blockId:a,endSeparator:b}),b&&c]})})]})},Lb=ea(F(19)),dc=F(19),ex=["children"],gh="undefined"!==typeof document?dc.useLayoutEffect:dc.useEffect,va=ea(F(19)),Fa=F(19),fx=F(20),pg,Cb,px="undefined"!=typeof document?Fa.useLayoutEffect:Fa.useEffect;!function(a){a[a.DEBUG=0]="DEBUG";a[a.INFO=1]="INFO";a[a.WARN=2]="WARN";a[a.ERROR=3]="ERROR"}(Cb||={});var QB=((pg={})[Cb.DEBUG]="debug",pg[Cb.INFO]="log",pg[Cb.WARN]="warn",pg[Cb.ERROR]="error",
pg),Od=Va(function(){var a=ka(Cb.ERROR);return{log:ka(function(b,c,d){var e;void 0===d&&(d=Cb.INFO);d>=(null!=(e=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?e:a(4))&&console[QB[d]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",b,c)}),logLevel:a}},[],{singleton:!0}),ec=Va(function(){var a=Ba(),b=Ba(),c=ka(0),d=Ba(),e=ka(0),f=Ba(),g=Ba(),h=ka(0),k=ka(0),l=ka(0),m=ka(0),p=Ba(),q=Ba(),t=ka(!1),r=ka(!1);return za(ia(a,na(function(v){return v.scrollTop})),
b),za(ia(a,na(function(v){return v.scrollHeight})),g),za(b,e),{scrollContainerState:a,scrollTop:b,viewportHeight:f,headerHeight:h,fixedHeaderHeight:k,fixedFooterHeight:l,footerHeight:m,scrollHeight:g,smoothScrollTargetReached:d,react18ConcurrentRendering:r,scrollTo:p,scrollBy:q,statefulScrollTop:e,deviation:c,scrollingInProgress:t}},[],{singleton:!0}),La={lvl:0},Jk=Va(function(){return{recalcInProgress:ka(!1)}},[],{singleton:!0}),RB={offsetHeight:"height",offsetWidth:"width"},qd=Va(function(a){var b=
a[0].log,c=a[1].recalcInProgress;a=Ba();var d=Ba(),e=Xb(d,0),f=Ba(),g=Ba(),h=ka(0),k=ka([]),l=ka(void 0),m=ka(void 0),p=ka(function(x,w){return Dc(x,RB[w])}),q=ka(void 0),t=ka(0),r={offsetTree:[],sizeTree:La,groupOffsetTree:La,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},v=Xb(ia(a,Qa(k,b,t),jd(jx,r),jb()),r);za(ia(k,Ja(function(x){return 0<x.length}),Qa(v,t),na(function(x){var w=x[0],z=x[1],A=x[2];x=w.reduce(function(D,J,Q){return Tc(D,J,Yf(J,z.offsetTree,A)||Q)},La);return Da({},z,{groupIndices:w,
groupOffsetTree:x})})),v);za(ia(d,Qa(v),Ja(function(x){return x[0]<x[1].lastIndex}),na(function(x){var w=x[1];return[{startIndex:x[0],endIndex:w.lastIndex,size:w.lastSize}]})),a);za(l,m);var y=Xb(ia(l,na(function(x){return void 0===x})),!0);za(ia(m,Ja(function(x){return void 0!==x&&v(4).sizeTree===La}),na(function(x){return[{startIndex:0,endIndex:0,size:x}]})),a);r=kc(ia(a,Qa(v),jd(function(x,w){w=w[1];return{changed:w!==x.sizes,sizes:w}},{changed:!1,sizes:r}),na(function(x){return x.changed})));
Za(ia(h,jd(function(x,w){return{diff:x.prev-w,prev:w}},{diff:0,prev:0}),na(function(x){return x.diff})),function(x){0<x?(c(0,!0),f(0,x)):0>x&&g(0,x)});Za(ia(h,Qa(b)),function(x){0>x[0]&&(0,x[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:h},Cb.ERROR)});b=kc(f);za(ia(f,Qa(v),na(function(x){var w=x[0];x=x[1];if(0<x.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return hh(x.sizeTree).reduce(function(z,
A){var D=A.k;A=A.v;return{ranges:[].concat(z.ranges,[{startIndex:z.prevIndex,endIndex:D+w-1,size:z.prevSize}]),prevIndex:D+w,prevSize:A}},{ranges:[],prevIndex:0,prevSize:x.lastSize}).ranges})),a);var u=kc(ia(g,Qa(v,t),na(function(x){return Yf(-x[0],x[1].offsetTree,x[2])})));return za(ia(g,Qa(v,t),na(function(x){var w=x[0],z=x[1];x=x[2];if(0<z.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var A=hh(z.sizeTree).reduce(function(D,J){return Tc(D,Math.max(0,J.k+w),
J.v)},La);return Da({},z,{sizeTree:A},co(z.offsetTree,0,A,x))})),v),{data:q,totalCount:d,sizeRanges:a,groupIndices:k,defaultItemSize:m,fixedItemSize:l,unshiftWith:f,shiftWith:g,shiftWithOffset:u,beforeUnshiftWith:b,firstItemIndex:h,gap:t,sizes:v,listRefresh:r,statefulTotalCount:e,trackItemSizes:y,itemSize:p}},eb(Od,Jk),{singleton:!0}),kx="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,qg=Va(function(a){function b(){y&&(y(),y=null);x&&(x(),x=null);u&&(clearTimeout(u),
u=null);h(0,!1)}var c=a[0],d=c.sizes,e=c.totalCount,f=c.listRefresh;c=c.gap;var g=a[1],h=g.scrollingInProgress,k=g.viewportHeight,l=g.scrollTo,m=g.smoothScrollTargetReached,p=g.headerHeight,q=g.footerHeight,t=g.fixedHeaderHeight;g=g.fixedFooterHeight;a=a[2].log;var r=Ba(),v=ka(0),y=null,u=null,x=null;return za(ia(r,Qa(d,k,e,v,p,q,a),Qa(c,t,g),na(function(w){var z=w[0],A=z[0],D=z[1],J=z[2],Q=z[3],K=z[4],O=z[5],W=z[6],R=z[7],T=w[1];z=w[2];w=w[3];var I=go(A),C=I.align,H=I.behavior,B=I.offset;--Q;I=eo(I,
D,Q);O=Yf(I,D.offsetTree,T)+O;"end"===C?(O+=z+Sc(D.sizeTree,I)[1]-J+w,I===Q&&(O+=W)):"center"===C?O+=(z+Sc(D.sizeTree,I)[1]-J+w)/2:O-=K;B&&(O+=B);var G=function(S){b();S?(R("retrying to scroll to",{location:A},Cb.DEBUG),r(0,A)):R("list did not change, scroll successful",{},Cb.DEBUG)};if(b(),"smooth"===H){var P=!1;x=Za(f,function(S){P=P||S});y=fe(m,function(){G(P)})}else y=fe(ia(f,function(S){var ha=setTimeout(function(){S(!1)},150);return function(la){la&&(S(!0),clearTimeout(ha))}}),G);u=setTimeout(function(){b()},
1200);h(0,!0);return R("scrolling from index to",{index:I,top:O,behavior:H},Cb.DEBUG),{top:O,behavior:H}})),l),{scrollToIndex:r,topListHeight:v}},eb(qd,ec,Od),{singleton:!0}),SB={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},rg=Va(function(a){var b=a[0],c=b.scrollContainerState;a=b.scrollTop;var d=b.viewportHeight,e=b.headerHeight,f=b.footerHeight,g=b.scrollBy;b=ka(!1);var h=ka(!0),k=Ba(),l=Ba(),m=ka(4),p=ka(0),q=Xb(ia(Tn(ia(Ma(a),
fh(1),Dd(!0)),ia(Ma(a),fh(1),Dd(!1),Sn(100))),jb()),!1),t=Xb(ia(Tn(ia(g,Dd(!0)),ia(g,Dd(!1),Sn(200))),jb()),!1);za(ia(Qb(Ma(a),Ma(p)),na(function(r){return r[0]<=r[1]}),jb()),h);za(ia(h,Pe(50)),l);d=kc(ia(Qb(c,Ma(d),Ma(e),Ma(f),Ma(m)),jd(function(r,v){var y,u,x=v[0],w=x.scrollTop;x=x.scrollHeight;var z=v[1],A={viewportHeight:z,scrollTop:w,scrollHeight:x};return w+z-x>-v[4]?(w>r.state.scrollTop?(y="SCROLLED_DOWN",u=r.state.scrollTop-w):(y="SIZE_DECREASED",u=r.state.scrollTop-w||r.scrollTopDelta),{atBottom:!0,
state:A,atBottomBecause:y,scrollTopDelta:u}):{atBottom:!1,notAtBottomBecause:A.scrollHeight>r.state.scrollHeight?"SIZE_INCREASED":z<r.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":w<r.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:A}},SB),jb(function(r,v){return r&&r.atBottom===v.atBottom})));e=Xb(ia(c,jd(function(r,v){var y=v.scrollTop,u=v.scrollHeight;v=v.viewportHeight;return 1.01>Math.abs(r.scrollHeight-u)?{scrollTop:y,scrollHeight:u,jump:0,changed:!1}:
r.scrollTop!==y&&1>u-(y+v)?{scrollHeight:u,scrollTop:y,jump:r.scrollTop-y,changed:!0}:{scrollHeight:u,scrollTop:y,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ja(function(r){return r.changed}),na(function(r){return r.jump})),0);za(ia(d,na(function(r){return r.atBottom})),b);za(ia(b,Pe(50)),k);f=ka("down");za(ia(c,na(function(r){return r.scrollTop}),jb(),jd(function(r,v){return t(4)?{direction:r.direction,prevScrollTop:v}:{direction:v<r.prevScrollTop?"up":"down",prevScrollTop:v}},
{direction:"down",prevScrollTop:0}),na(function(r){return r.direction})),f);za(ia(c,Pe(50),Dd("none")),f);c=ka(0);return za(ia(q,Ja(function(r){return!r}),Dd(0)),c),za(ia(a,Pe(100),Qa(q),Ja(function(r){return!!r[1]}),jd(function(r,v){return[r[1],v[0]]},[0,0]),na(function(r){return r[1]-r[0]})),c),{isScrolling:q,isAtTop:h,isAtBottom:b,atBottomState:d,atTopStateChange:l,atBottomStateChange:k,scrollDirection:f,atBottomThreshold:m,atTopThreshold:p,scrollVelocity:c,lastJumpDueToItemResize:e}},eb(ec)),
re=Va(function(a){var b=a[0].log;a=ka(!1);var c=kc(ia(a,Ja(function(d){return d}),jb()));return Za(a,function(d){d&&b(4)("props updated",{},Cb.DEBUG)}),{propsReady:a,didMount:c}},eb(Od),{singleton:!0}),Kk=Va(function(a){var b=a[0],c=b.sizes,d=b.listRefresh;b=b.defaultItemSize;var e=a[1].scrollTop,f=a[2].scrollToIndex;a=a[3].didMount;var g=ka(!0),h=ka(0);return za(ia(a,Qa(h),Ja(function(k){return!!k[1]}),Dd(!1)),g),Za(ia(Qb(d,a),Qa(g,c,b),Ja(function(k){var l=k[1],m=k[3];return k[0][1]&&(k[2].sizeTree!==
La||void 0!==m)&&!l}),Qa(h)),function(k){var l=k[1];setTimeout(function(){fe(e,function(){g(0,!0)});f(0,l)})}),{scrolledToInitialItem:g,initialTopMostItemIndex:h}},eb(qd,ec,qg,re),{singleton:!0}),TB=Va(function(a){function b(v){k(0,{index:"LAST",align:"end",behavior:v})}function c(v){var y=fe(h,function(u){!v||u.atBottom||"SIZE_INCREASED"!==u.notAtBottomBecause||r||(p(4)("scrolling to bottom due to increased size",{},Cb.DEBUG),b("auto"))});setTimeout(y,100)}var d=a[0],e=d.totalCount,f=d.listRefresh,
g=a[1];d=g.isAtBottom;var h=g.atBottomState,k=a[2].scrollToIndex;g=a[3].scrolledToInitialItem;var l=a[4],m=l.propsReady;l=l.didMount;var p=a[5].log;a=a[6].scrollingInProgress;var q=ka(!1),t=Ba(),r=null;return Za(ia(Qb(ia(Ma(e),fh(1)),l),Qa(Ma(q),d,g,a),na(function(v){var y=v[0],u=y[0];y=y[1]&&v[3];var x="auto";y&&(x=v[1],v=v[2]||v[4],x="function"==typeof x?ho(x(v)):v&&ho(x),y=y&&!!x);return{totalCount:u,shouldFollow:y,followOutputBehavior:x}}),Ja(function(v){return v.shouldFollow})),function(v){var y=
v.totalCount,u=v.followOutputBehavior;r&&(r(),r=null);r=fe(f,function(){p(4)("following output to ",{totalCount:y},Cb.DEBUG);b(u);r=null})}),Za(ia(Qb(Ma(q),e,m),Ja(function(v){return v[0]&&v[2]}),jd(function(v,y){y=y[1];return{refreshed:v.value===y,value:y}},{refreshed:!1,value:0}),Ja(function(v){return v.refreshed}),Qa(q,e)),function(v){c(!1!==v[1])}),Za(t,function(){c(!1!==q(4))}),Za(Qb(Ma(q),h),function(v){var y=v[1];v[0]&&!y.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===y.notAtBottomBecause&&b("auto")}),
{followOutput:q,autoscrollToBottom:t}},eb(qd,rg,qg,Kk,re,Od,ec)),Hr=Va(function(a){var b=a[0],c=b.totalCount,d=b.groupIndices;b=b.sizes;var e=a[1];a=e.scrollTop;e=e.headerHeight;var f=Ba(),g=Ba(),h=kc(ia(f,na(lx)));return za(ia(h,na(function(k){return k.totalCount})),c),za(ia(h,na(function(k){return k.groupIndices})),d),za(ia(Qb(a,b,e),Ja(function(k){return k[1].groupOffsetTree!==La}),na(function(k){return Sc(k[1].groupOffsetTree,Math.max(k[0]-k[2],0),"v")[0]}),jb(),na(function(k){return[k]})),g),
{groupCounts:f,topItemsIndexes:g}},eb(qd,ec)),Lk=Va(function(a){var b=a[0];a=b.scrollTop;var c=b.viewportHeight,d=b.deviation,e=b.headerHeight,f=b.fixedHeaderHeight;b=Ba();var g=ka(0),h=ka(0),k=ka(0);a=Xb(ia(Qb(Ma(a),Ma(c),Ma(e),Ma(b,Zf),Ma(k),Ma(g),Ma(f),Ma(d),Ma(h)),na(function(l){var m=l[0],p=l[1],q=l[2],t=l[3],r=t[0];t=t[1];var v=l[4],y=l[6],u=l[7],x=l[8],w=m-u;l=l[5]+y;var z=Math.max(q-w,0),A="none",D="number"==typeof x?x:x.top||0;x="number"==typeof x?x:x.bottom||0;return r-=u,t+=q+y,r+(q+y)>
m+l-D&&(A="up"),t-u<m-z+p+x&&(A="down"),"none"!==A?[Math.max(w-q-jo(v,"top",A)-D,0),w-z-y+p+jo(v,"bottom",A)+x]:null}),Ja(function(l){return null!=l}),jb(Zf)),[0,0]);return{listBoundary:b,overscan:k,topListHeight:g,increaseViewportBy:h,visibleRange:a}},eb(ec),{singleton:!0}),Ir={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},mf=Va(function(a){var b=a[0],c=b.sizes,d=b.totalCount,e=b.data,f=b.firstItemIndex,g=b.gap,h=a[1],k=a[2],l=k.visibleRange;
b=k.listBoundary;k=k.topListHeight;var m=a[3],p=m.scrolledToInitialItem,q=m.initialTopMostItemIndex;m=a[4].topListHeight;var t=a[5],r=a[6].didMount,v=a[7].recalcInProgress;a=ka([]);var y=Ba();za(h.topItemsIndexes,a);c=Xb(ia(Qb(r,v,Ma(l,Zf),Ma(d),Ma(c),Ma(q),p,Ma(a),Ma(f),Ma(g),e),Ja(function(u){return u[0]&&!u[1]}),na(function(u){var x=u[2],w=x[0],z=x[1];x=u[3];var A=u[5],D=u[6],J=u[7],Q=u[8],K=u[9],O=u[10];u=u[4];var W=u.sizeTree,R=u.offsetTree;if(0===x||0===w&&0===z)return Da({},Ir,{totalCount:x});
if(W===La)return jh(function(la,U,pa){return U.groupOffsetTree!==La?(la=fo(la,U),[{index:Sc(U.groupOffsetTree,la)[0],size:0,offset:0},{index:la,size:0,offset:0,data:pa&&pa[0]}]):[{index:la,size:0,offset:0,data:pa&&pa[0]}]}("number"==typeof A?A:"LAST"===A.index?x-1:A.index,u,O),[],x,K,u,Q);A=[];if(0<J.length){var T,I=J[0],C=J[J.length-1],H=0;for(W=ge(ih(W,I,C));!(T=W()).done;){var B=T.value;T=B.value;var G=Math.min(B.end,C);for(B=Math.max(B.start,I);B<=G;B++)A.push({index:B,size:T,offset:H,data:O&&
O[B]}),H+=T}}if(!D)return jh([],A,x,K,u,Q);var P=0<J.length?J[J.length-1]+1:0,S=function(la,U,pa,ba){return void 0===ba&&(ba=0),0<ba&&(U=Math.max(U,la[Xf(la,ba,sj)].offset)),bo((ya=pa,gb=Xf(sa=la,U,Ra=hx),fb=Xf(sa,ya,Ra,gb),sa.slice(gb,fb+1)),ix);var sa,ya,Ra,gb,fb}(R,w,z,P);if(0===S.length)return null;var ha=x-1;return jh(eh([],function(la){for(var U,pa=ge(S);!(U=pa()).done;){var ba=U.value,sa=ba.value;U=sa.offset;var ya=ba.start,Ra=sa.size;sa.offset<w&&(sa=(ya+=Math.floor((w-sa.offset+K)/(Ra+K)))-
ba.start,U+=sa*Ra+sa*K);ya<P&&(U+=(P-ya)*Ra,ya=P);for(ba=Math.min(ba.end,ha);ya<=ba&&!(U>=z);ya++)la.push({index:ya,size:Ra,offset:U,data:O&&O[ya]}),U+=Ra+K}}),A,x,K,u,Q)}),Ja(function(u){return null!==u}),jb()),Ir);return za(ia(e,Ja(function(u){return void 0!==u}),na(function(u){return u.length})),d),za(ia(c,na(function(u){return u.topListHeight})),m),za(m,k),za(ia(c,na(function(u){return[u.top,u.bottom]})),b),za(ia(c,na(function(u){return u.items})),y),Da({listState:c,topItemsIndexes:a,endReached:kc(ia(c,
Ja(function(u){return 0<u.items.length}),Qa(d,e),Ja(function(u){var x=u[0].items;return x[x.length-1].originalIndex===u[1]-1}),na(function(u){return[u[1]-1,u[2]]}),jb(Zf),na(function(u){return u[0]}))),startReached:kc(ia(c,Pe(200),Ja(function(u){var x=u.items;return 0<x.length&&x[0].originalIndex===u.topItems.length}),na(function(u){return u.items[0].index}),jb())),rangeChanged:kc(ia(c,Ja(function(u){return 0<u.items.length}),na(function(u){u=u.items;for(var x=0,w=u.length-1;"group"===u[x].type&&
x<w;)x++;for(;"group"===u[w].type&&w>x;)w--;return{startIndex:u[x].index,endIndex:u[w].index}}),jb(io))),itemsRendered:y},t)},eb(qd,Hr,Lk,Kk,qg,rg,re,Jk),{singleton:!0}),UB=Va(function(a){var b=a[0],c=b.sizes,d=b.firstItemIndex,e=b.data;b=b.gap;var f=a[1].listState;a=a[2].didMount;var g=ka(0);return za(ia(a,Qa(g),Ja(function(h){return 0!==h[1]}),Qa(c,d,b,e),na(function(h){var k=h[0][1],l=h[1],m=h[2],p=h[3];h=h[4];var q=void 0===h?[]:h;h=0;if(0<l.groupIndices.length)for(var t,r=ge(l.groupIndices);!((t=
r()).done||t.value-h>=k);)h++;k+=h;return jh(Array.from({length:k}).map(function(v,y){return{index:y,size:0,offset:0,data:q[y]}}),[],k,p,l,m)})),f),{initialItemCount:g}},eb(qd,mf,re),{singleton:!0}),Jr=Va(function(a){a=a[0].scrollVelocity;var b=ka(!1),c=Ba(),d=ka(!1);return za(ia(a,Qa(d,b,c),Ja(function(e){return!!e[1]}),na(function(e){var f=e[0],g=e[1],h=e[2];e=e[3];var k=g.enter;if(h){if((0,g.exit)(f,e))return!1}else if(k(f,e))return!0;return h}),jb()),b),Za(ia(Qb(b,a,c),Qa(d)),function(e){var f=
e[0];e=e[1];return f[0]&&e&&e.change&&e.change(f[1],f[2])}),{isSeeking:b,scrollSeekConfiguration:d,scrollVelocity:a,scrollSeekRangeChanged:c}},eb(rg),{singleton:!0}),VB=Va(function(a){a=a[0].topItemsIndexes;var b=ka(0);return za(ia(b,Ja(function(c){return 0<c}),na(function(c){return Array.from({length:c}).map(function(d,e){return e})})),a),{topItemCount:b}},eb(mf)),Mk=Va(function(a){var b=a[0],c=b.footerHeight,d=b.headerHeight,e=b.fixedHeaderHeight;b=b.fixedFooterHeight;var f=a[1].listState;a=Ba();
c=Xb(ia(Qb(c,b,d,e,f),na(function(g){var h=g[4];return g[0]+g[1]+g[2]+g[3]+h.offsetBottom+h.bottom})),0);return za(Ma(c),a),{totalListHeight:c,totalListHeightChanged:a}},eb(ec,mf),{singleton:!0}),WB=lo(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),XB=Va(function(a){function b(y){0<y?(d(0,{top:-y,behavior:"auto"}),f(0,0)):(f(0,0),d(0,{top:-y,behavior:"auto"}))}var c=a[0],d=c.scrollBy,e=c.scrollTop,f=c.deviation,g=c.scrollingInProgress,h=a[1];c=h.isScrolling;
var k=h.isAtBottom,l=h.scrollDirection,m=a[3],p=m.beforeUnshiftWith,q=m.shiftWithOffset,t=m.sizes;m=m.gap;var r=a[4].log,v=a[5].recalcInProgress;a=kc(ia(a[2].listState,Qa(h.lastJumpDueToItemResize),jd(function(y,u){var x=y[1],w=u[0],z=w.items,A=w.totalCount;w=w.bottom+w.offsetBottom;var D=0;return y[2]===A&&0<x.length&&0<z.length&&(0===z[0].originalIndex&&0===x[0].originalIndex||0!=(D=w-y[3])&&(D+=u[1])),[D,z,A,w]},[0,[],0,0]),Ja(function(y){return 0!==y[0]}),Qa(e,l,g,k,r),Ja(function(y){return!y[3]&&
0!==y[1]&&"up"===y[2]}),na(function(y){var u=y[0][0];return(0,y[5])("Upward scrolling compensation",{amount:u},Cb.DEBUG),u})));return Za(ia(a,Qa(f,c)),function(y){var u=y[0],x=y[1];y[2]&&WB()?f(0,x-u):b(-u)}),Za(ia(Qb(Xb(c,!1),f,v),Ja(function(y){return!y[0]&&!y[2]&&0!==y[1]}),na(function(y){return y[1]}),Pe(1)),b),za(ia(q,na(function(y){return{top:-y}})),d),Za(ia(p,Qa(t,m),na(function(y){var u=y[0];return u*y[1].lastSize+u*y[2]})),function(y){f(0,y);requestAnimationFrame(function(){Qn(d,{top:y});
requestAnimationFrame(function(){f(0,0);v(0,!1)})})}),{deviation:f}},eb(ec,rg,mf,qd,Od,Jk)),YB=Va(function(a){var b=a[0].totalListHeight,c=a[1].didMount,d=a[2].scrollTo;a=ka(0);return Za(ia(c,Qa(a),Ja(function(e){return 0!==e[1]}),na(function(e){return{top:e[1]}})),function(e){fe(ia(b,Ja(function(f){return 0!==f})),function(){setTimeout(function(){d(0,e)})})}),{initialScrollTop:a}},eb(Mk,re,ec),{singleton:!0}),ZB=Va(function(a){var b=a[0].viewportHeight;a=a[1].totalListHeight;var c=ka(!1);return{alignToBottom:c,
paddingTopAddition:Xb(ia(Qb(c,b,a),Ja(function(d){return d[0]}),na(function(d){return Math.max(0,d[1]-d[2])}),jb()),0)}},eb(ec,Mk),{singleton:!0}),Kr=Va(function(a){var b=a[0];a=b.scrollTo;b=b.scrollContainerState;var c=Ba(),d=Ba(),e=Ba(),f=ka(!1),g=ka(void 0);return za(ia(Qb(c,d),na(function(h){var k=h[0];return{scrollTop:Math.max(0,k.scrollTop-h[1].offsetTop),scrollHeight:k.scrollHeight,viewportHeight:k.viewportHeight}})),b),za(ia(a,Qa(d),na(function(h){var k=h[0];return Da({},k,{top:k.top+h[1].offsetTop})})),
e),{useWindowScroll:f,customScrollParent:g,windowScrollContainerState:c,windowViewportRect:d,windowScrollTo:e}},eb(ec)),$B=["done","behavior","align"],aC=Va(function(a){var b=a[0],c=b.sizes,d=b.totalCount;b=b.gap;var e=a[1],f=e.scrollTop,g=e.viewportHeight,h=e.headerHeight,k=e.fixedHeaderHeight,l=e.fixedFooterHeight,m=e.scrollingInProgress;a=a[2].scrollToIndex;e=Ba();return za(ia(e,Qa(c,g,d,h,k,l,f),Qa(b),na(function(p){var q=p[0],t=q[0],r=q[1],v=q[2],y=q[3],u=q[4],x=q[5],w=q[6];q=q[7];var z=p[1];
p=t.done;var A=t.behavior,D=t.align,J=Qe(t,$B),Q=null;t=eo(t,r,y-1);u=Yf(t,r.offsetTree,z)+u+x;return u<q+x?Q=Da({},J,{behavior:A,align:null!=D?D:"start"}):u+Sc(r.sizeTree,t)[1]>q+v-w&&(Q=Da({},J,{behavior:A,align:null!=D?D:"end"})),Q?p&&fe(ia(m,fh(1),Ja(function(K){return!1===K})),p):p&&p(),Q}),Ja(function(p){return null!==p})),a),{scrollIntoView:e}},eb(qd,ec,qg,mf,Od),{singleton:!0}),bC=["listState","topItemsIndexes"],cC=Va(function(a){return Da({},a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8])},
eb(Lk,UB,re,Jr,Mk,YB,ZB,Kr,aC)),Lr=Va(function(a){var b=a[0],c=b.totalCount,d=b.sizeRanges,e=b.fixedItemSize,f=b.defaultItemSize,g=b.trackItemSizes,h=b.itemSize,k=b.data,l=b.firstItemIndex,m=b.groupIndices,p=b.statefulTotalCount;b=b.gap;var q=a[1],t=q.initialTopMostItemIndex;q=q.scrolledToInitialItem;var r=a[2],v=a[3],y=a[4],u=y.listState,x=y.topItemsIndexes;y=Qe(y,bC);var w=a[5].scrollToIndex,z=a[7].topItemCount,A=a[8].groupCounts,D=a[9];a=a[10];return za(y.rangeChanged,D.scrollSeekRangeChanged),
za(ia(D.windowViewportRect,na(function(J){return J.visibleHeight})),r.viewportHeight),Da({totalCount:c,data:k,firstItemIndex:l,sizeRanges:d,initialTopMostItemIndex:t,scrolledToInitialItem:q,topItemsIndexes:x,topItemCount:z,groupCounts:A,fixedItemHeight:e,defaultItemHeight:f,gap:b},v,{statefulTotalCount:p,listState:u,scrollToIndex:w,trackItemSizes:g,itemSize:h,groupIndices:m},y,D,r,a)},eb(qd,Kk,ec,TB,mf,qg,XB,VB,Hr,cC,Od)),Mr=lo(function(){if("undefined"==typeof document)return"sticky";var a=document.createElement("div");
return a.style.position="-webkit-sticky","-webkit-sticky"===a.style.position?"-webkit-sticky":"sticky"}),Yh=va.createContext(void 0),Nr=va.createContext(void 0),dC=["placeholder"],mx=["style","children"],ox=["style","children"],eC=Va(function(){var a=ka(function(k){return"Item "+k}),b=ka(null),c=ka(function(k){return"Group "+k}),d=ka({}),e=ka(uj),f=ka("div"),g=ka(ee),h=function(k,l){return void 0===l&&(l=null),Xb(ia(d,na(function(m){return m[k]}),jb()),l)};return{context:b,itemContent:a,groupContent:c,
components:d,computeItemKey:e,headerFooterTag:f,scrollerRef:g,FooterComponent:h("Footer"),HeaderComponent:h("Header"),TopItemListComponent:h("TopItemList"),ListComponent:h("List","div"),ItemComponent:h("Item","div"),GroupComponent:h("Group","div"),ScrollerComponent:h("Scroller","div"),EmptyPlaceholder:h("EmptyPlaceholder"),ScrollSeekPlaceholder:h("ScrollSeekPlaceholder")}}),fC=Va(function(a){function b(e,f,g){za(ia(e,Qa(d.components),na(function(h){var k,l=h[0];h=h[1];return console.warn("react-virtuoso: "+
g+" property is deprecated. Pass components."+f+" instead."),Da({},h,((k={})[f]=l,k))})),d.components)}var c=a[0],d=a[1];a={item:Re(d.itemContent,"Rename the %citem%c prop to %citemContent."),group:Re(d.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Re(c.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Re(c.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Re(c.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),
adjustForPrependedItems:Ba(),maxHeightCacheSize:Ba(),footer:Ba(),header:Ba(),HeaderContainer:Ba(),FooterContainer:Ba(),ItemContainer:Ba(),ScrollContainer:Ba(),GroupContainer:Ba(),ListContainer:Ba(),emptyComponent:Ba(),scrollSeek:Ba()};return Za(a.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),Za(a.maxHeightCacheSize,
function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),Za(a.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),Za(a.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),
Za(a.scrollSeek,function(e){var f=e.placeholder;e=Qe(e,dC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");f=Da({},(0,d.components)(4),{ScrollSeekPlaceholder:f});(0,d.components)(0,f);(0,c.scrollSeekConfiguration)(0,e)}),b(a.footer,"Footer","footer"),b(a.header,"Header","header"),b(a.ItemContainer,"Item","ItemContainer"),b(a.ListContainer,"List","ListContainer"),b(a.ScrollContainer,
"Scroller","ScrollContainer"),b(a.emptyComponent,"EmptyPlaceholder","emptyComponent"),b(a.GroupContainer,"Group","GroupContainer"),Da({},c,d,a)},eb(Lr,eC)),gC=function(a){return va.createElement("div",{style:{height:a.height}})},hC={position:Mr(),zIndex:1,overflowAnchor:"none"},iC={overflowAnchor:"none"},Or=va.memo(function(a){a=a.showTopList;a=void 0!==a&&a;var b=Sa("listState"),c=yc("sizeRanges"),d=Sa("useWindowScroll"),e=Sa("customScrollParent"),f=yc("windowScrollContainerState"),g=yc("scrollContainerState");
d=e||d?f:g;var h=Sa("itemContent"),k=Sa("context"),l=Sa("groupContent");f=Sa("trackItemSizes");g=Sa("itemSize");var m=Sa("log"),p=yc("gap");c=Wn(c,g,f,a?ee:d,m,p,e).callbackRef;e=va.useState(0);var q=e[0],t=e[1];Nk("deviation",function(z){q!==z&&t(z)});e=Sa("EmptyPlaceholder");var r=Sa("ScrollSeekPlaceholder")||gC;d=Sa("ListComponent");var v=Sa("ItemComponent"),y=Sa("GroupComponent"),u=Sa("computeItemKey"),x=Sa("isSeeking"),w=0<Sa("groupIndices").length;f=Sa("paddingTopAddition");f=a?{}:{boxSizing:"border-box",
paddingTop:b.offsetTop+f,paddingBottom:b.offsetBottom,marginTop:q};return!a&&0===b.totalCount&&e?(0,Fa.createElement)(e,rb(e,k)):(0,Fa.createElement)(d,Da({},rb(d,k),{ref:c,style:f,"data-test-id":a?"virtuoso-top-item-list":"virtuoso-item-list"}),(a?b.topItems:b.items).map(function(z){var A=z.originalIndex,D=u(A+b.firstItemIndex,z.data,k);return x?(0,Fa.createElement)(r,Da({},rb(r,k),{key:D,index:z.index,height:z.size,type:z.type||"item"},"group"===z.type?{}:{groupIndex:z.groupIndex})):"group"===z.type?
(0,Fa.createElement)(y,Da({},rb(y,k),{key:D,"data-index":A,"data-known-size":z.size,"data-item-index":z.index,style:hC}),l(z.index)):(0,Fa.createElement)(v,Da({},rb(v,k),{key:D,"data-index":A,"data-known-size":z.size,"data-item-index":z.index,"data-item-group-index":z.groupIndex,style:iC}),w?h(z.index,z.groupIndex,z.data,k):h(z.index,z.data,k))}))}),nx={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},nf={width:"100%",height:"100%",position:"absolute",
top:0},jC={width:"100%",position:Mr(),top:0},kC=va.memo(function(){var a=Sa("HeaderComponent"),b=yc("headerHeight"),c=Sa("headerFooterTag"),d=Rc(function(f){return b(Dc(f,"height"))}),e=Sa("context");return a?(0,Fa.createElement)(c,{ref:d},(0,Fa.createElement)(a,rb(a,e))):null}),lC=va.memo(function(){var a=Sa("FooterComponent"),b=yc("footerHeight"),c=Sa("headerFooterTag"),d=Rc(function(f){return b(Dc(f,"height"))}),e=Sa("context");return a?(0,Fa.createElement)(c,{ref:d},(0,Fa.createElement)(a,rb(a,
e))):null}),mC=function(a){a=a.children;var b=(0,Fa.useContext)(Yh),c=yc("viewportHeight"),d=yc("fixedItemHeight"),e=Rc(Wf(c,function(f){return Dc(f,"height")}));return va.useEffect(function(){b&&(c(b.viewportHeight),d(b.itemHeight))},[b,c,d]),va.createElement("div",{style:nf,ref:e,"data-viewport-type":"element"},a)},nC=function(a){a=a.children;var b=(0,Fa.useContext)(Yh),c=yc("windowViewportRect"),d=yc("fixedItemHeight"),e=Sa("customScrollParent");e=tj(c,e);return va.useEffect(function(){b&&(d(b.itemHeight),
c({offsetTop:0,visibleHeight:b.viewportHeight,visibleWidth:100}))},[b,c,d]),va.createElement("div",{ref:e,style:nf,"data-viewport-type":"window"},a)},oC=function(a){a=a.children;var b=Sa("TopItemListComponent"),c=Sa("headerHeight");c=Da({},jC,{marginTop:c+"px"});var d=Sa("context");return(0,Fa.createElement)(b||"div",{style:c,context:d},a)},Zh=lj(fC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",
overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",
initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",
ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",
atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},va.memo(function(a){var b=Sa("useWindowScroll"),c=0<Sa("topItemsIndexes").length,d=Sa("customScrollParent"),e=d||b?nC:mC;return va.createElement(d||b?pC:qC,Da({},a),va.createElement(e,null,va.createElement(kC,null),va.createElement(Or,null),va.createElement(lC,null)),c&&va.createElement(oC,null,va.createElement(Or,
{showTopList:!0})))})),rC=Zh.Component,yc=Zh.usePublisher,Sa=Zh.useEmitterValue,Nk=Zh.useEmitter,qC=vj({usePublisher:yc,useEmitterValue:Sa,useEmitter:Nk}),pC=wj({usePublisher:yc,useEmitterValue:Sa,useEmitter:Nk}),Pr={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},sC={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Qr=Math.round,Rr=Math.ceil,kh=Math.floor,Ok=Math.min,Se=Math.max,tC=Va(function(a){var b=a[0],c=b.overscan,d=b.visibleRange,
e=b.listBoundary,f=a[1];b=f.scrollTop;var g=f.viewportHeight,h=f.scrollBy,k=f.scrollTo,l=f.smoothScrollTargetReached,m=f.scrollContainerState,p=f.footerHeight;f=f.headerHeight;var q=a[2],t=a[3],r=a[4],v=r.propsReady,y=r.didMount,u=a[5];r=u.windowViewportRect;var x=u.windowScrollTo,w=u.useWindowScroll,z=u.customScrollParent;u=u.windowScrollContainerState;a=a[6];var A=ka(0),D=ka(0),J=ka(Pr),Q=ka({height:0,width:0}),K=ka({height:0,width:0}),O=Ba(),W=Ba(),R=ka(0),T=ka(void 0),I=ka({row:0,column:0});za(ia(Qb(y,
D,T),Ja(function(C){return 0!==C[1]}),na(function(C){return{items:xj(0,C[1]-1,C[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),J);za(ia(Qb(Ma(A),d,Ma(I,qx),Ma(K,function(C,H){return C&&C.width===H.width&&C.height===H.height}),T),Qa(Q),na(function(C){var H=C[0],B=H[0],G=H[1],P=G[0],S=G[1],ha=H[2],la=H[3],U=H[4],pa=C[1];C=ha.row;var ba=ha.column;H=la.height;G=la.width;var sa=pa.width;if(0===B||0===sa)return Pr;if(0===G)return Da({},sC,{items:xj(0,0,U)});ba=Se(1,kh((sa+ba)/
(G+ba)));P=ba*kh((P+C)/(H+C));S=ba*Rr((S+C)/(H+C))-1;S=Ok(B-1,Se(S,ba-1));P=xj(Ok(S,Se(0,P)),S,U);la=mo(pa,ha,la,P);ha=la.top;la=la.bottom;B=Rr(B/ba);return{items:P,offsetTop:ha,offsetBottom:B*H+(B-1)*C-la,top:ha,bottom:la,itemHeight:H,itemWidth:G}})),J);za(ia(T,Ja(function(C){return void 0!==C}),na(function(C){return C.length})),A);za(ia(Q,na(function(C){return C.height})),g);za(ia(Qb(Q,K,J,I),na(function(C){C=mo(C[0],C[3],C[1],C[2].items);return[C.top,C.bottom]}),jb(Zf)),e);d=kc(ia(Ma(J),Ja(function(C){return 0<
C.items.length}),Qa(A),Ja(function(C){var H=C[0].items;return H[H.length-1].index===C[1]-1}),na(function(C){return C[1]-1}),jb()));e=kc(ia(Ma(J),Ja(function(C){C=C.items;return 0<C.length&&0===C[0].index}),Dd(0),jb()));g=kc(ia(Ma(J),Ja(function(C){return 0<C.items.length}),na(function(C){C=C.items;return{startIndex:C[0].index,endIndex:C[C.length-1].index}}),jb(io)));za(g,t.scrollSeekRangeChanged);za(ia(O,Qa(Q,K,A,I),na(function(C){var H=C[1],B=C[2],G=C[3],P=C[4],S=go(C[0]);C=S.align;var ha=S.behavior,
la=S.offset;S=S.index;"LAST"===S&&(S=G-1);G=yj(H,P,B,Se(0,S,Ok(G-1,S)));return"end"===C?G=Qr(G-H.height+B.height):"center"===C&&(G=Qr(G-H.height/2+B.height/2)),la&&(G+=la),{top:G,behavior:ha}})),k);y=Xb(ia(J,na(function(C){return C.offsetBottom+C.bottom})),0);return za(ia(r,na(function(C){return{width:C.visibleWidth,height:C.visibleHeight}})),Q),Da({data:T,totalCount:A,viewportDimensions:Q,itemDimensions:K,scrollTop:b,scrollHeight:W,overscan:c,scrollBy:h,scrollTo:k,scrollToIndex:O,smoothScrollTargetReached:l,
windowViewportRect:r,windowScrollTo:x,useWindowScroll:w,customScrollParent:z,windowScrollContainerState:u,deviation:R,scrollContainerState:m,footerHeight:p,headerHeight:f,initialItemCount:D,gap:I},t,{gridState:J,totalListHeight:y},q,{startReached:e,endReached:d,rangeChanged:g,propsReady:v},a)},eb(Lk,ec,rg,Jr,re,Kr,Od)),uC=["placeholder"],vC=Va(function(){var a=ka(function(l){return"Item "+l}),b=ka({}),c=ka(null),d=ka("virtuoso-grid-item"),e=ka("virtuoso-grid-list"),f=ka(uj),g=ka("div"),h=ka(ee),k=
function(l,m){return void 0===m&&(m=null),Xb(ia(b,na(function(p){return p[l]}),jb()),m)};return{context:c,itemContent:a,components:b,computeItemKey:f,itemClassName:d,listClassName:e,headerFooterTag:g,scrollerRef:h,FooterComponent:k("Footer"),HeaderComponent:k("Header"),ListComponent:k("List","div"),ItemComponent:k("Item","div"),ScrollerComponent:k("Scroller","div"),ScrollSeekPlaceholder:k("ScrollSeekPlaceholder","div")}}),wC=Va(function(a){function b(e,f,g){za(ia(e,Qa(d.components),na(function(h){var k,
l=h[0];h=h[1];return console.warn("react-virtuoso: "+g+" property is deprecated. Pass components."+f+" instead."),Da({},h,((k={})[f]=l,k))})),d.components)}var c=a[0],d=a[1];a={item:Re(d.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Ba(),ScrollContainer:Ba(),ListContainer:Ba(),emptyComponent:Ba(),scrollSeek:Ba()};return Za(a.scrollSeek,function(e){var f=e.placeholder;e=Qe(e,uC);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");
f=Da({},(0,d.components)(4),{ScrollSeekPlaceholder:f});(0,d.components)(0,f);(0,c.scrollSeekConfiguration)(0,e)}),b(a.ItemContainer,"Item","ItemContainer"),b(a.ListContainer,"List","ListContainer"),b(a.ScrollContainer,"Scroller","ScrollContainer"),Da({},c,d,a)},eb(tC,vC)),xC=va.memo(function(){var a=nb("gridState"),b=nb("listClassName"),c=nb("itemClassName"),d=nb("itemContent"),e=nb("computeItemKey"),f=nb("isSeeking"),g=Ic("scrollHeight"),h=nb("ItemComponent"),k=nb("ListComponent"),l=nb("ScrollSeekPlaceholder"),
m=nb("context"),p=Ic("itemDimensions"),q=Ic("gap"),t=nb("log"),r=Rc(function(v){g(v.parentElement.parentElement.scrollHeight);var y=v.firstChild;y&&p(y.getBoundingClientRect());q({row:no("row-gap",getComputedStyle(v).rowGap,t),column:no("column-gap",getComputedStyle(v).columnGap,t)})});return(0,Fa.createElement)(k,Da({ref:r,className:b},rb(k,m),{style:{paddingTop:a.offsetTop,paddingBottom:a.offsetBottom}}),a.items.map(function(v){var y=e(v.index,v.data,m);return f?(0,Fa.createElement)(l,Da({key:y},
rb(l,m),{index:v.index,height:a.itemHeight,width:a.itemWidth})):(0,Fa.createElement)(h,Da({},rb(h,m),{className:c,"data-index":v.index,key:y}),d(v.index,v.data,m))}))}),yC=va.memo(function(){var a=nb("HeaderComponent"),b=Ic("headerHeight"),c=nb("headerFooterTag"),d=Rc(function(f){return b(Dc(f,"height"))}),e=nb("context");return a?(0,Fa.createElement)(c,{ref:d},(0,Fa.createElement)(a,rb(a,e))):null}),zC=va.memo(function(){var a=nb("FooterComponent"),b=Ic("footerHeight"),c=nb("headerFooterTag"),d=
Rc(function(f){return b(Dc(f,"height"))}),e=nb("context");return a?(0,Fa.createElement)(c,{ref:d},(0,Fa.createElement)(a,rb(a,e))):null}),AC=function(a){a=a.children;var b=(0,Fa.useContext)(Nr),c=Ic("itemDimensions"),d=Ic("viewportDimensions"),e=Rc(function(f){d(f.getBoundingClientRect())});return va.useEffect(function(){b&&(d({height:b.viewportHeight,width:b.viewportWidth}),c({height:b.itemHeight,width:b.itemWidth}))},[b,d,c]),va.createElement("div",{style:nf,ref:e},a)},BC=function(a){a=a.children;
var b=(0,Fa.useContext)(Nr),c=Ic("windowViewportRect"),d=Ic("itemDimensions"),e=nb("customScrollParent");e=tj(c,e);return va.useEffect(function(){b&&(d({height:b.itemHeight,width:b.itemWidth}),c({offsetTop:0,visibleHeight:b.viewportHeight,visibleWidth:b.viewportWidth}))},[b,c,d]),va.createElement("div",{ref:e,style:nf},a)},Pk=lj(wC,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",
initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},va.memo(function(a){a=Da({},a);var b=nb("useWindowScroll"),c=nb("customScrollParent"),d=c||b?BC:AC;return va.createElement(c||b?CC:DC,Da({},a),va.createElement(d,null,va.createElement(yC,null),va.createElement(xC,null),va.createElement(zC,null)))})),Ic=Pk.usePublisher,nb=Pk.useEmitterValue,Sr=Pk.useEmitter,DC=vj({usePublisher:Ic,useEmitterValue:nb,
useEmitter:Sr}),CC=wj({usePublisher:Ic,useEmitterValue:nb,useEmitter:Sr}),EC=Va(function(){var a=ka(function(k){return va.createElement("td",null,"Item $",k)}),b=ka(null),c=ka(null),d=ka(null),e=ka({}),f=ka(uj),g=ka(ee),h=function(k,l){return void 0===l&&(l=null),Xb(ia(e,na(function(m){return m[k]}),jb()),l)};return{context:b,itemContent:a,fixedHeaderContent:c,fixedFooterContent:d,components:e,computeItemKey:f,scrollerRef:g,TableComponent:h("Table","table"),TableHeadComponent:h("TableHead","thead"),
TableFooterComponent:h("TableFoot","tfoot"),TableBodyComponent:h("TableBody","tbody"),TableRowComponent:h("TableRow","tr"),ScrollerComponent:h("Scroller","div"),EmptyPlaceholder:h("EmptyPlaceholder"),ScrollSeekPlaceholder:h("ScrollSeekPlaceholder"),FillerRow:h("FillerRow")}}),FC=Va(function(a){return Da({},a[0],a[1])},eb(Lr,EC)),GC=function(a){return va.createElement("tr",null,va.createElement("td",{style:{height:a.height}}))},HC=function(a){return va.createElement("tr",null,va.createElement("td",
{style:{height:a.height,padding:0,border:0}}))},IC=va.memo(function(){var a=Xa("listState"),b=Jc("sizeRanges"),c=Xa("useWindowScroll"),d=Xa("customScrollParent"),e=Jc("windowScrollContainerState"),f=Jc("scrollContainerState");c=d||c?e:f;var g=Xa("itemContent");e=Xa("trackItemSizes");d=Wn(b,Xa("itemSize"),e,c,Xa("log"),void 0,d);b=d.callbackRef;var h=d.ref;d=va.useState(0);var k=d[0],l=d[1];Qk("deviation",function(u){k!==u&&(h.current.style.marginTop=u+"px",l(u))});e=Xa("EmptyPlaceholder");var m=Xa("ScrollSeekPlaceholder")||
GC;c=Xa("FillerRow")||HC;d=Xa("TableBodyComponent");var p=Xa("TableRowComponent"),q=Xa("computeItemKey"),t=Xa("isSeeking");f=Xa("paddingTopAddition");var r=Xa("firstItemIndex"),v=Xa("statefulTotalCount"),y=Xa("context");if(0===v&&e)return(0,Fa.createElement)(e,rb(e,y));e=a.offsetTop+f+k;f=a.offsetBottom;e=0<e?va.createElement(c,{height:e,key:"padding-top"}):null;c=0<f?va.createElement(c,{height:f,key:"padding-bottom"}):null;a=a.items.map(function(u){var x=u.originalIndex,w=q(x+r,u.data,y);return t?
(0,Fa.createElement)(m,Da({},rb(m,y),{key:w,index:u.index,height:u.size,type:u.type||"item"})):(0,Fa.createElement)(p,Da({},rb(p,y),{key:w,"data-index":x,"data-known-size":u.size,"data-item-index":u.index,style:{overflowAnchor:"none"}}),g(u.index,u.data,y))});return(0,Fa.createElement)(d,Da({ref:b,"data-test-id":"virtuoso-item-list"},rb(d,y)),[e].concat(a,[c]))}),JC=function(a){a=a.children;var b=(0,Fa.useContext)(Yh),c=Jc("viewportHeight"),d=Jc("fixedItemHeight"),e=Rc(Wf(c,function(f){return Dc(f,
"height")}));return va.useEffect(function(){b&&(c(b.viewportHeight),d(b.itemHeight))},[b,c,d]),va.createElement("div",{style:nf,ref:e,"data-viewport-type":"element"},a)},KC=function(a){a=a.children;var b=(0,Fa.useContext)(Yh),c=Jc("windowViewportRect"),d=Jc("fixedItemHeight"),e=Xa("customScrollParent");e=tj(c,e);return va.useEffect(function(){b&&(d(b.itemHeight),c({offsetTop:0,visibleHeight:b.viewportHeight,visibleWidth:100}))},[b,c,d]),va.createElement("div",{ref:e,style:nf,"data-viewport-type":"window"},
a)},Rk=lj(FC,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",
computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",
scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},va.memo(function(a){var b=Xa("useWindowScroll"),c=Xa("customScrollParent"),d=Jc("fixedHeaderHeight"),e=Jc("fixedFooterHeight"),f=
Xa("fixedHeaderContent"),g=Xa("fixedFooterContent"),h=Xa("context");d=Rc(Wf(d,function(p){return Dc(p,"height")}));var k=Rc(Wf(e,function(p){return Dc(p,"height")}));e=c||b?LC:MC;b=c||b?KC:JC;c=Xa("TableComponent");var l=Xa("TableHeadComponent"),m=Xa("TableFooterComponent");f=f?va.createElement(l,Da({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:d},rb(l,h)),f()):null;g=g?va.createElement(m,Da({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:k},rb(m,h)),g()):null;return va.createElement(e,
Da({},a),va.createElement(b,null,va.createElement(c,Da({style:{borderSpacing:0}},rb(c,h)),[f,va.createElement(IC,{key:"TableBody"}),g])))})),Jc=Rk.usePublisher,Xa=Rk.useEmitterValue,Qk=Rk.useEmitter,MC=vj({usePublisher:Jc,useEmitterValue:Xa,useEmitter:Qk}),LC=wj({usePublisher:Jc,useEmitterValue:Xa,useEmitter:Qk}),Tr=ea(F(19)),Uc=function(a){function b(c){c=a.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+c+" for more information.")||
this;if(void 0===c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}rx(b,a);return b}(Bj(Error)),oo={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",
cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",
floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",
lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",
mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",
sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},vx=/^#[a-fA-F0-9]{6}$/,wx=/^#[a-fA-F0-9]{8}$/,xx=/^#[a-fA-F0-9]{3}$/,yx=/^#[a-fA-F0-9]{4}$/,Cj=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,
zx=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Ax=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,Bx=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,Dj=function(a){return 7===a.length&&a[1]===a[2]&&a[3]===a[4]&&a[5]===a[6]?"#"+a[1]+a[3]+a[5]:a},Ex=ro(so,so.length,[]),to=
F(589),Kc=ea(F(19)),pc=class{static insertTextFirefox(a,b){a.setRangeText(b,a.selectionStart||0,a.selectionEnd||0,"end");a.dispatchEvent(new InputEvent("input",{data:b,inputType:"insertText",isComposing:!1}))}static insert(a,b){const c=a.ownerDocument,d=c.activeElement;d!==a&&a.focus();c.execCommand("insertText",!1,b)||pc.insertTextFirefox(a,b);d===c.body?a.blur():d instanceof HTMLElement&&d!==a&&d.focus()}static set(a,b){a.select();pc.insert(a,b)}static getSelection(a){const {selectionStart:b,selectionEnd:c}=
a;return a.value.slice(b?b:void 0,c?c:void 0)}static wrapSelection(a,b,c){const {selectionStart:d,selectionEnd:e}=a,f=pc.getSelection(a);pc.insert(a,b+f+(null!=c?c:b));a.selectionStart=(d||0)+b.length;a.selectionEnd=(e||0)+b.length}static replace(a,b,c){let d=0;a.value.replace(b,(...e)=>{const f=d+e[e.length-2],g=e[0].length;a.selectionStart=f;a.selectionEnd=f+g;e="string"===typeof c?c:c(...e);pc.insert(a,e);a.selectionStart=f;d+=e.length-g;return e})}static findLineEnd(a,b){const c=a.lastIndexOf("\n",
b-1)+1;return"\t"!==a.charAt(c)?b:c+1}static indent(a){var b;const {selectionStart:c,selectionEnd:d,value:e}=a;var f=e.slice(c,d);if((f=null==(b=/\n/g.exec(f))?void 0:b.length)&&0<f){b=e.lastIndexOf("\n",c-1)+1;var g=a.value.slice(b,d-1);f=g.replace(/^|\n/g,"$\x26  ");g=f.length-g.length;a.setSelectionRange(b,d-1);pc.insert(a,f);a.setSelectionRange(c+1,d+g)}else pc.insert(a,"  ")}static unindent(a){const {selectionStart:b,selectionEnd:c,value:d}=a;var e=d.lastIndexOf("\n",b-1)+1;const f=pc.findLineEnd(d,
c);var g=a.value.slice(e,f);const h=g.replace(/(^|\n)(\t| {1,2})/g,"$1");g=g.length-h.length;a.setSelectionRange(e,f);pc.insert(a,h);e=(e=/\t| {1,2}/.exec(d.slice(e,b)))?e[0].length:0;a.setSelectionRange(b-e,Math.max(b-e,c-g))}},Sk=F(589),$h=a=>a.stopPropagation(),ai=Kc.memo(function({font:a,text:b,color:c,fontStyle:d,fontSize:e,fontWeight:f,offsetX:g=0,offsetY:h=0,scale:k=1,isEditing:l=!1,pointerEvents:m=!1,onBlur:p,onChange:q}){const t=Kc.useRef(null),r=Kc.useRef(!1),v=Kc.useCallback(A=>{q(cf.normalizeText(A.currentTarget.value))},
[q]),y=Kc.useCallback(A=>{if("Escape"!==A.key)if("Tab"===A.key&&0===b.length)A.preventDefault();else{if("Meta"!==A.key&&!A.metaKey)A.stopPropagation();else if("z"===A.key&&A.metaKey){document.execCommand(A.shiftKey?"redo":"undo",!1);A.stopPropagation();A.preventDefault();return}"Tab"===A.key&&(A.preventDefault(),A.shiftKey?pc.unindent(A.currentTarget):pc.indent(A.currentTarget),null==q?void 0:q(cf.normalizeText(A.currentTarget.value)))}},[q]),u=Kc.useCallback(A=>{l&&(A.currentTarget.setSelectionRange(0,
0),null==p?void 0:p())},[p]),x=Kc.useCallback(A=>{l&&r.current&&document.activeElement===A.currentTarget&&A.currentTarget.select()},[l]),w=Kc.useCallback(A=>{l&&A.stopPropagation()},[l]);Kc.useEffect(()=>{l&&requestAnimationFrame(()=>{r.current=!0;const A=t.current;A&&(A.focus(),A.select())})},[l,p]);const z=Kc.useRef(null);Kc.useLayoutEffect(()=>{const A=z.current;if(A){var D=Yd(b||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:e,lineHeight:1,fontWeight:f},4);A.style.transform=`scale(${k}, ${k}) translate(${g}px, ${h}px)`;
A.style.width=D[0]+1+"px";A.style.height=D[1]+1+"px"}},[b,f,e,h,g,k]);return(0,Sk.jsx)("div",{className:"tl-text-label-wrapper",children:(0,Sk.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:z,style:{font:a,fontStyle:d,fontSize:e,fontWeight:f,color:c,pointerEvents:m?"all":"none",userSelect:l?"text":"none"},children:[l?(0,Sk.jsx)("textarea",{ref:t,style:{font:a,color:c,fontStyle:d,fontSize:e,fontWeight:f},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",
autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:b,color:c,onFocus:x,onChange:v,onKeyDown:y,onBlur:u,onPointerDown:w,onContextMenu:$h,onCopy:$h,onPaste:$h,onCut:$h}):b,"​"]})})}),Pd=F(589),Ur={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},of=class extends Sb{constructor(){super(...arguments);n(this,"canEdit",!0);n(this,"ReactComponent",da(({events:a,isErasing:b,isBinding:c,isSelected:d,isEditing:e,onEditingEnd:f})=>
{const {props:{size:[g,h],stroke:k,fill:l,noFill:m,strokeWidth:p,strokeType:q,borderRadius:t,opacity:r,label:v,italic:y,fontWeight:u,fontSize:x}}=this;var w=v||e?Yd(v,{fontFamily:"var(--ls-font-family)",fontSize:x,lineHeight:1,fontWeight:u},4):[0,0];const z=L.mul(this.props.size,.5);w=Math.max(.5,Math.min(1,g/w[0],h/w[1]));const A=this.getBounds(),D=Tr.useMemo(()=>L.sub(z,L.toFixed([A.width/2,A.height/2])),[A,w,z]),J=Tr.useCallback(Q=>{var K;null==(K=this.update)?void 0:K.call(this,{label:Q})},[v]);
return(0,Pd.jsxs)("div",V(N({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,Pd.jsx)(ai,{font:"20px / 1 var(--ls-font-family)",text:v,color:Ya(k,"text"),offsetX:D[0],offsetY:D[1],fontSize:x,scale:w,isEditing:e,onChange:J,onBlur:f,fontStyle:y?"italic":"normal",fontWeight:u,pointerEvents:!!v}),(0,Pd.jsxs)(wc,{opacity:b?.2:r,children:[c&&(0,Pd.jsx)(Ej,{mode:"svg",strokeWidth:p,size:[g,h]}),(0,Pd.jsx)("rect",{className:d||!m?"tl-hitarea-fill":"tl-hitarea-stroke",
x:p/2,y:p/2,rx:t,ry:t,width:Math.max(.01,g-p),height:Math.max(.01,h-p),pointerEvents:"all"}),(0,Pd.jsx)("rect",{x:p/2,y:p/2,rx:t,ry:t,width:Math.max(.01,g-p),height:Math.max(.01,h-p),strokeWidth:p,stroke:Ya(k,"stroke"),strokeDasharray:"dashed"===q?"8 2":void 0,fill:m?"none":Ya(l,"background")})]})]}))}));n(this,"setScaleLevel",a=>Ga(this,null,function*(){this.update({scaleLevel:a,fontSize:Ur[null!=a?a:"md"],strokeWidth:Ur[null!=a?a:"md"]/10});this.onResetBounds()}));n(this,"ReactIndicator",da(()=>
{const {props:{size:[a,b],borderRadius:c,isLocked:d}}=this;return(0,Pd.jsx)("g",{children:(0,Pd.jsx)("rect",{width:a,height:b,rx:c,ry:c,fill:"transparent",strokeDasharray:d?"8 2":void 0})})}));n(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));void 0!==a.borderRadius&&(a.borderRadius=Math.max(0,a.borderRadius));return Ec(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};n(of,"id","box");n(of,"defaultProps",{id:"box",
parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});M([oa],of.prototype,"scaleLevel",1);M([ja],of.prototype,"setScaleLevel",2);var Vr=ea(F(19)),ad=F(589),Wr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},pf=class extends Sj{constructor(){super(...arguments);n(this,"canEdit",!0);n(this,"ReactComponent",da(({isSelected:a,isErasing:b,events:c,isEditing:d,onEditingEnd:e})=>{const {size:[f,
g],stroke:h,fill:k,noFill:l,strokeWidth:m,strokeType:p,opacity:q,label:t,italic:r,fontWeight:v,fontSize:y}=this.props;var u=t||d?Yd(t,{fontFamily:"var(--ls-font-family)",fontSize:y,lineHeight:1,fontWeight:v},4):[0,0];const x=L.mul(this.props.size,.5);u=Math.max(.5,Math.min(1,f/u[0],g/u[1]));const w=this.getBounds(),z=Vr.useMemo(()=>L.sub(x,L.toFixed([w.width/2,w.height/2])),[w,u,x]),A=Vr.useCallback(D=>{var J;null==(J=this.update)?void 0:J.call(this,{label:D})},[t]);return(0,ad.jsxs)("div",V(N({},
c),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-ellipse-container",children:[(0,ad.jsx)(ai,{font:"18px / 1 var(--ls-font-family)",text:t,color:Ya(h,"text"),offsetX:z[0],offsetY:z[1],scale:u,isEditing:d,onChange:A,onBlur:e,fontStyle:r?"italic":"normal",fontSize:y,fontWeight:v,pointerEvents:!!t}),(0,ad.jsxs)(wc,V(N({},c),{opacity:b?.2:q,children:[(0,ad.jsx)("ellipse",{className:a||!l?"tl-hitarea-fill":"tl-hitarea-stroke",cx:f/2,cy:g/2,rx:Math.max(.01,(f-m)/2),ry:Math.max(.01,
(g-m)/2)}),(0,ad.jsx)("ellipse",{cx:f/2,cy:g/2,rx:Math.max(.01,(f-m)/2),ry:Math.max(.01,(g-m)/2),strokeWidth:m,stroke:Ya(h,"stroke"),strokeDasharray:"dashed"===p?"8 2":void 0,fill:l?"none":Ya(k,"background")})]}))]}))}));n(this,"setScaleLevel",a=>Ga(this,null,function*(){this.update({scaleLevel:a,fontSize:Wr[null!=a?a:"md"],strokeWidth:Wr[null!=a?a:"md"]/10});this.onResetBounds()}));n(this,"ReactIndicator",da(()=>{const {size:[a,b],isLocked:c}=this.props;return(0,ad.jsx)("g",{children:(0,ad.jsx)("ellipse",
{cx:a/2,cy:b/2,rx:a/2,ry:b/2,strokeWidth:2,fill:"transparent",strokeDasharray:c?"8 2":"undefined"})})}));n(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Ec(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {size:[b,c],stroke:d,fill:e,noFill:f,strokeWidth:g,strokeType:h,opacity:k}=this.props;return(0,ad.jsxs)("g",{opacity:k,children:[(0,ad.jsx)("ellipse",{className:f?"tl-hitarea-stroke":
"tl-hitarea-fill",cx:b/2,cy:c/2,rx:Math.max(.01,(b-g)/2),ry:Math.max(.01,(c-g)/2)}),(0,ad.jsx)("ellipse",{cx:b/2,cy:c/2,rx:Math.max(.01,(b-g)/2),ry:Math.max(.01,(c-g)/2),strokeWidth:g,stroke:Ya(d,"stroke"),strokeDasharray:"dashed"===h?"8 2":void 0,fill:f?"none":Ya(e,"background")})]})}};n(pf,"id","ellipse");n(pf,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,
label:""});M([oa],pf.prototype,"scaleLevel",1);M([ja],pf.prototype,"setScaleLevel",2);var sg=F(589),Tk=class extends th{constructor(){super(...arguments);n(this,"ReactComponent",da(({events:a})=>{const b=this.getBounds(),c=xa(),d=c.selectedShapesArray.some(f=>c.shapesInGroups([this]).includes(f)),e=this.ReactIndicator;return(0,sg.jsxs)(wc,V(N({},a),{className:"tl-group-container",children:[(0,sg.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,b.width-2),height:Math.max(.01,b.height-
2),pointerEvents:"all"}),d&&(0,sg.jsx)("g",{stroke:"var(--color-selectedFill)",children:(0,sg.jsx)(e,{})})]}))}));n(this,"ReactIndicator",da(()=>{const a=this.getBounds();return(0,sg.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:a.width+16,height:a.height+16,fill:"transparent"})}))}};n(Tk,"id","group");n(Tk,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});var bi=F(589),NC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},se=class extends We{constructor(a=
{}){super(a);n(this,"ReactComponent",da(({events:b,isErasing:c})=>{const {pointsPath:d,props:{stroke:e,strokeWidth:f,opacity:g}}=this;return(0,bi.jsx)(wc,V(N({},b),{opacity:c?.2:1,children:(0,bi.jsx)("path",{d,strokeWidth:16*f,stroke:Ya(e,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:g})}))}));n(this,"setScaleLevel",b=>Ga(this,null,function*(){this.update({scaleLevel:b,strokeWidth:NC[null!=b?b:"md"]});this.onResetBounds()}));n(this,"ReactIndicator",
da(()=>{const {pointsPath:b,props:c}=this;return(0,bi.jsx)("path",{d:b,fill:"none",strokeDasharray:c.isLocked?"8 2":"undefined"})}));n(this,"validateProps",b=>{b=Ec(this,b);void 0!==b.strokeWidth&&(b.strokeWidth=Math.max(b.strokeWidth,1));return b});kb(this)}get pointsPath(){const {points:a}=this.props;return Qj.getCurvedPathForPoints(a)}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:b,strokeWidth:c,opacity:d}}=this;return(0,bi.jsx)("path",
{d:a,strokeWidth:16*c,stroke:Ya(b,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:d})}};n(se,"id","highlighter");n(se,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});M([oa],se.prototype,"pointsPath",1);M([oa],se.prototype,"scaleLevel",1);M([ja],se.prototype,"setScaleLevel",2);var Uk=ea(F(19)),ci=F(589),Vk={xs:.5,sm:.8,md:1,
lg:1.5,xl:2,xxl:3},Qd=class extends Sb{constructor(){super(...arguments);n(this,"canChangeAspectRatio",!0);n(this,"canFlip",!1);n(this,"canEdit",!0);n(this,"htmlAnchorRef",Uk.createRef());n(this,"setScaleLevel",a=>Ga(this,null,function*(){var b;const c=L.mul(this.props.size,Vk[null!=a?a:"md"]/Vk[null!=(b=this.props.scaleLevel)?b:"md"]);this.update({scaleLevel:a});yield mm();this.update({size:c})}));n(this,"onResetBounds",a=>{var b;if(this.htmlAnchorRef.current){const c=this.htmlAnchorRef.current.getBoundingClientRect(),
[d,e]=L.div([c.width,c.height],null!=(b=null==a?void 0:a.zoom)?b:1);this.update({size:[Math.max(Math.min(d||400,1400),10),Math.max(Math.min(e||400,1400),10)]})}return this});n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c})=>{const {props:{html:d,scaleLevel:e}}=this,f=lh(),g=xa(),h=g.selectedIds.has(this.id),k=f||h&&!c||"select"!==g.selectedTool.id,l=Uk.useCallback(p=>{k||p.stopPropagation()},[k]),m=Vk[null!=e?e:"md"];Uk.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:g.viewport.camera.zoom}),
g.persist(!0))},[]);return(0,ci.jsx)(nc,V(N({style:{overflow:"hidden",pointerEvents:"all",opacity:b?.2:1}},a),{children:(0,ci.jsx)("div",{onWheelCapture:l,onPointerDown:l,onPointerUp:l,className:"tl-html-container",style:{pointerEvents:f||!c&&!h?"none":"all",overflow:c?"auto":"hidden",width:`calc(100% / ${m})`,height:`calc(100% / ${m})`,transform:`scale(${m})`},children:(0,ci.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:d.trim()}})})}))}));n(this,"ReactIndicator",
da(()=>{const {props:{size:[a,b],isLocked:c}}=this;return(0,ci.jsx)("rect",{width:a,height:b,fill:"transparent",strokeDasharray:c?"8 2":"undefined"})}));n(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[1],1));return Ec(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}};n(Qd,"id","html");n(Qd,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});M([oa],Qd.prototype,"scaleLevel",1);
M([ja],Qd.prototype,"setScaleLevel",2);var Xr=ea(F(19)),tg=F(589),te=class extends Sb{constructor(){super(...arguments);n(this,"frameRef",Xr.createRef());n(this,"canEdit",!0);n(this,"onIFrameSourceChange",a=>{this.update({url:a})});n(this,"reload",()=>{var a,b;this.frameRef.current&&(this.frameRef.current.src=null==(b=null==(a=this.frameRef)?void 0:a.current)?void 0:b.src)});n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c})=>{Xr.useRef(null);const d=xa();return(0,tg.jsx)(nc,V(N({style:{overflow:"hidden",
pointerEvents:"all",opacity:b?.2:1}},a),{children:(0,tg.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:c||d.readOnly?"all":"none",userSelect:"none"},children:this.props.url&&(0,tg.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,tg.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin allow-presentation"})})})}))}));
n(this,"ReactIndicator",da(()=>{const {props:{size:[a,b],isLocked:c}}=this;return(0,tg.jsx)("rect",{width:a,height:b,fill:"transparent",rx:8,ry:8,strokeDasharray:c?"8 2":"undefined"})}))}};n(te,"id","iframe");n(te,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});M([ja],te.prototype,"onIFrameSourceChange",2);M([ja],te.prototype,"reload",2);var OC=ea(F(19)),qf=F(589),di=class extends Tj{constructor(){super(...arguments);n(this,"ReactComponent",da(({events:a,
isErasing:b,isBinding:c,asset:d})=>{const {props:{opacity:e,objectFit:f,clipping:g,size:[h,k]}}=this,[l,m,p,q]=Array.isArray(g)?g:[g,g,g,g],{handlers:t}=OC.useContext(Pa);return(0,qf.jsxs)(nc,V(N({},a),{opacity:b?.2:e,children:[c&&(0,qf.jsx)(Ej,{mode:"html",strokeWidth:4,size:[h,k]}),(0,qf.jsx)("div",{"data-asset-loaded":!!d,className:"tl-image-shape-container",children:d?(0,qf.jsx)("img",{src:t?t.makeAssetUrl(d.src):d.src,draggable:!1,style:{position:"relative",top:-l,left:-q,width:h+(q-m),height:k+
(l-p),objectFit:f}}):"Asset is missing"})]}))}));n(this,"ReactIndicator",da(()=>{const {props:{size:[a,b],isLocked:c}}=this;return(0,qf.jsx)("rect",{width:a,height:b,fill:"transparent",strokeDasharray:c?"8 2":"undefined"})}))}getShapeSVGJsx({assets:a}){var b,c;const d=this.getBounds(),{assetId:e,clipping:f}=this.props;if(a=a.find(g=>g.id===e)){Array.isArray(f);const g=null==(c=null==(b=window.logseq)?void 0:b.api)?void 0:c.make_asset_url;return(0,qf.jsx)("image",{width:d.width,height:d.height,href:g?
g(a.src):a.src})}return super.getShapeSVGJsx({})}};n(di,"id","image");n(di,"defaultProps",{id:"image1",parentId:"page",type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var Wk=ea(F(19)),PC=ea(F(19)),Fj=F(589),rf=F(589),Yr={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},QC=PC.memo(function({style:a,start:b,end:c,decorationStart:d,decorationEnd:e,scaleLevel:f}){const g=L.dist(b,c);if(2>g)return null;const {strokeWidth:h}=a,k=1+h*Yr[null!=f?f:"md"]/
10,l="M"+L.toFixed(b)+"L"+L.toFixed(c);f=Math.min(g/3,h*Yr[null!=f?f:"md"]);d=d?Gj(b,c,f):null;e=e?Gj(c,b,f):null;return(0,rf.jsxs)(rf.Fragment,{children:[(0,rf.jsx)("path",{className:"tl-stroke-hitarea",d:l}),(0,rf.jsx)("path",{d:l,strokeWidth:k,stroke:a.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===a.strokeType?"8 4":void 0,pointerEvents:"stroke"}),d&&(0,rf.jsx)(uo,{left:d.left,middle:b,right:d.right,stroke:a.stroke,strokeWidth:k}),e&&(0,rf.jsx)(uo,{left:e.left,
middle:c,right:e.right,stroke:a.stroke,strokeWidth:k})]})}),mh=F(589),fc=F(589),RC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},sf=class extends Nf{constructor(){super(...arguments);n(this,"hideSelection",!0);n(this,"canEdit",!0);n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c,onEditingEnd:d})=>{const {stroke:e,handles:{start:f,end:g},opacity:h,label:k,italic:l,fontWeight:m,fontSize:p,id:q}=this.props,t=k||c?Yd(k||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:p,lineHeight:1,fontWeight:m},
6):[0,0],r=L.med(f.point,g.point);var v=L.dist(f.point,g.point);v=Math.max(.5,Math.min(1,Math.max(v/(t[1]+128),v/(t[0]+128))));const y=this.getBounds(),u=Wk.useMemo(()=>L.sub(r,L.toFixed([y.width/2,y.height/2])),[y,v,r]),x=Wk.useCallback(w=>{var z;null==(z=this.update)?void 0:z.call(this,{label:w})},[k]);return(0,fc.jsxs)("div",V(N({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,fc.jsx)(ai,{font:"20px / 1 var(--ls-font-family)",text:k,fontSize:p,
color:Ya(e,"text"),offsetX:u[0],offsetY:u[1],scale:v,isEditing:c,onChange:x,onBlur:d,fontStyle:l?"italic":"normal",fontWeight:m,pointerEvents:!!k}),(0,fc.jsxs)(wc,{opacity:b?.2:h,id:q+"_svg",children:[(0,fc.jsx)(Gx,{id:q,bounds:y,labelSize:t,offset:u,scale:v}),(0,fc.jsx)("g",{pointerEvents:"none",mask:k||c?`url(#${q}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));n(this,"setScaleLevel",a=>Ga(this,null,function*(){this.update({scaleLevel:a,fontSize:RC[null!=a?a:"md"]});this.onResetBounds()}));
n(this,"ReactIndicator",da(({isEditing:a})=>{const {id:b,decorations:c,label:d,strokeWidth:e,fontSize:f,fontWeight:g,handles:{start:h,end:k},isLocked:l}=this.props,m=this.getBounds(),p=d||a?Yd(d,{fontFamily:"var(--ls-font-family)",fontSize:f,lineHeight:1,fontWeight:g},6):[0,0],q=L.med(h.point,k.point);var t=L.dist(h.point,k.point);t=Math.max(.5,Math.min(1,Math.max(t/(p[1]+128),t/(p[0]+128))));const r=Wk.useMemo(()=>L.sub(q,L.toFixed([m.width/2,m.height/2])),[m,t,q]);return(0,fc.jsxs)("g",{children:[(0,fc.jsx)("path",
{mask:d?`url(#${b}_clip)`:"",d:Fx({strokeWidth:e},h.point,k.point,null==c?void 0:c.start,null==c?void 0:c.end),strokeDasharray:l?"8 2":"undefined"}),d&&!a&&(0,fc.jsx)("rect",{x:m.width/2-p[0]/2*t+r[0],y:m.height/2-p[1]/2*t+r[1],width:p[0]*t,height:p[1]*t,rx:4*t,ry:4*t,fill:"transparent"})]})}));n(this,"validateProps",a=>Ec(this,a))}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx({preview:a}){const {stroke:b,fill:c,strokeWidth:d,strokeType:e,decorations:f,label:g,
scaleLevel:h,handles:{start:k,end:l}}=this.props,m=L.med(k.point,l.point);return(0,fc.jsxs)(fc.Fragment,{children:[(0,fc.jsx)(QC,{style:{stroke:Ya(b,"text"),fill:c,strokeWidth:d,strokeType:e},scaleLevel:h,start:k.point,end:l.point,decorationStart:null==f?void 0:f.start,decorationEnd:null==f?void 0:f.end}),a&&(0,fc.jsx)(fc.Fragment,{children:(0,fc.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${m[0]}, ${m[1]})`,textAnchor:"middle",fill:Ya(b,"text"),
stroke:Ya(b,"text"),children:g})})]})}};n(sf,"id","line");n(sf,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});M([oa],sf.prototype,"scaleLevel",1);M([ja],sf.prototype,"setScaleLevel",2);var gc=ea(F(19)),db=F(589),ug={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},
SC=da(({type:a,fill:b,opacity:c,children:d})=>{const e="var(--ls-secondary-background-color)"!==b?Ya(b,"background"):"var(--ls-tertiary-background-color)";b=b&&"var(--ls-secondary-background-color)"!==b?Xd(b)?`var(--ls-highlight-color-${b})`:b:"var(--ls-secondary-background-color)";return(0,db.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===a?"page":"block"}`,children:[(0,db.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:c,background:"P"===
a?e:`linear-gradient(0deg, ${b}, ${e})`}}),(0,db.jsx)("div",{className:"relative",children:d})]})}),ob=class extends Sb{constructor(a={}){var b;super(a);n(this,"hideRotateHandle",!0);n(this,"canChangeAspectRatio",!0);n(this,"canFlip",!0);n(this,"canEdit",!0);n(this,"persist",null);n(this,"initialHeightCalculated",!0);n(this,"getInnerHeight",null);n(this,"setCollapsed",c=>Ga(this,null,function*(){var d;if("B"===this.props.blockType){if(this.update({compact:c}),this.canResize[1]=!c,!c)this.onResetBounds()}else{const e=
this.props.size[1];this.canResize[1]=!c;this.update({isAutoResizing:!c,collapsed:c,size:[this.props.size[0],c?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:c?e:this.props.collapsedHeight})}null==(d=this.persist)?void 0:d.call(this)}));n(this,"setScaleLevel",c=>Ga(this,null,function*(){var d;const e=L.mul(this.props.size,ug[null!=c?c:"md"]/ug[null!=(d=this.props.scaleLevel)?d:"md"]);this.update({scaleLevel:c});yield mm();this.update({size:e})}));n(this,"onResetBounds",c=>{c=this.getAutoResizeHeight();
null!==c&&1<Math.abs(c-this.props.size[1])&&(this.update({size:[this.props.size[0],c]}),this.initialHeightCalculated=!0);return this});n(this,"onResize",(c,d)=>{var e;const {bounds:f,rotation:g,scale:[h,k]}=d;c=[...this.scale];0>h&&(c[0]*=-1);0>k&&(c[1]*=-1);d=f.height;this.props.isAutoResizing&&(d=null!=(e=this.getAutoResizeHeight())?e:d);return this.update({point:[f.minX,f.minY],size:[Math.max(1,f.width),Math.max(1,d)],scale:c,rotation:g})});n(this,"PortalComponent",da(({})=>{const {props:{pageId:c,
fill:d,opacity:e}}=this,{renderers:f}=gc.useContext(Pa),g=xa(),h=gc.useRef(null),[,k]=this.useComponentSize(h,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==f||!f.Page)return null;const {Page:l,Block:m}=f,[p,q]=gc.useState(!1);gc.useEffect(()=>{var t,r;if(this.props.isAutoResizing){const v=(null!=(r=null==(t=this.getInnerHeight)?void 0:t.call(this))?r:k)+this.getHeaderHeight();k&&1<Math.abs(v-this.props.size[1])&&(this.update({size:[this.props.size[0],
v]}),p&&g.persist(!0))}},[k,this.props.isAutoResizing]);gc.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();g.persist(!0)})},[this.initialHeightCalculated]);gc.useEffect(()=>{setTimeout(function(){q(!0)})},[]);return(0,db.jsxs)(db.Fragment,{children:[(0,db.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>g.viewport.camera.zoom?"optimizeSpeed":"auto",background:d&&"var(--ls-secondary-background-color)"!==d?Xd(d)?`var(--ls-highlight-color-${d})`:
d:"var(--ls-secondary-background-color)",opacity:e}}),(0,db.jsx)("div",{ref:h,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(p||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,db.jsx)(m,{blockId:c}):(0,db.jsx)(l,{pageName:c}))})]})}));n(this,"ReactComponent",da(c=>{var d;const {events:e,isErasing:f,isEditing:g,isBinding:h}=c,{props:{opacity:k,pageId:l,fill:m,scaleLevel:p,strokeWidth:q,size:t}}=this,
r=xa(),{renderers:v,handlers:y}=gc.useContext(Pa);this.persist=()=>r.persist();const u=lh(),x=r.selectedIds.has(this.id)&&1===r.selectedIds.size,w=r.isIn("logseq-portal.creating")&&!l,z=(u||x&&!g||"select"!==r.selectedTool.id)&&!w,A=gc.useCallback(C=>{z||C.stopPropagation()},[z]),D=1===r.selectedShapesArray.length&&r.selectedShapesArray.some(C=>"logseq-portal"===C.type&&C.props.id!==this.props.id&&l&&C.props.pageId===l),J=ug[null!=p?p:"md"];gc.useEffect(()=>this.props.collapsed&&g?(this.update({size:[this.props.size[0],
this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[g,this.props.collapsed]);gc.useEffect(()=>{if(w){const C=[r.viewport.bounds.width,r.viewport.bounds.height],H=r.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(H[0]>C[0]-400||H[1]>C[1]-240||1.5<r.viewport.camera.zoom||.5>r.viewport.camera.zoom)&&r.viewport.zoomToBounds(V(N({},this.bounds),{minY:this.bounds.maxY+25}))}},[r.viewport.bounds.height.toFixed(2)]);const Q=gc.useCallback(C=>
{this.initialHeightCalculated=!1;const H=Zd(C)?"B":"P";this.update({pageId:C,size:[400,320],blockType:H,compact:"B"===H});r.selectTool("select");r.history.resume();r.history.persist()},[]),K=this.PortalComponent;var O=gc.useMemo(()=>{var C;if(l&&"B"===this.props.blockType)return null==(C=null==y?void 0:y.queryBlockByUUID(l))?void 0:C.content},[null==y?void 0:y.queryBlockByUUID,l]);O="B"===this.props.blockType&&"string"!==typeof O;const W=(!this.props.collapsed||g)&&!O;if(null==v||!v.Page)return null;
const {Breadcrumb:R,PageName:T}=v,I={width:`calc(100% / ${J})`,height:`calc(100% / ${J})`,opacity:f?.2:1};1!==J&&(I.transform=`scale(${J})`);return(0,db.jsxs)(nc,V(N({style:{pointerEvents:"all"}},e),{children:[h&&(0,db.jsx)(Ej,{mode:"html",strokeWidth:q,size:t}),(0,db.jsx)("div",{"data-inner-events":!z,onWheelCapture:A,onPointerDown:A,onPointerUp:A,style:{width:"100%",height:"100%",pointerEvents:u||!g&&!x?"none":"all"},children:w?(0,db.jsx)(Zr,{onChange:Q,onAddBlock:C=>{setTimeout(()=>{var H,B,G;
r.api.editShape(this);null==(G=null==(B=null==(H=window.logseq)?void 0:H.api)?void 0:B.edit_block)?void 0:G.call(B,C)})},placeholder:"Create or search your graph..."}):(0,db.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":l,"data-portal-selected":D,"data-editing":g,style:I,children:[!this.props.compact&&!O&&(0,db.jsx)(SC,{type:null!=(d=this.props.blockType)?d:"P",fill:m,opacity:k,children:"P"===this.props.blockType?(0,db.jsx)(T,{pageName:l}):(0,db.jsx)(R,
{blockId:l})}),O&&(0,db.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),W&&(0,db.jsx)(K,N({},c))]})})]}))}));n(this,"ReactIndicator",da(()=>{const c=this.getBounds();return(0,db.jsx)("rect",{width:c.width,height:c.height,fill:"transparent",rx:8,ry:8,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));n(this,"validateProps",c=>{var d;if(void 0!==c.size){const e=ug[null!=(d=this.props.scaleLevel)?d:"md"];c.size[0]=Math.max(c.size[0],60*e);c.size[1]=Math.max(c.size[1],
40*e)}return Ec(this,c)});kb(this);a.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(b=a.size)?void 0:b[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(a){return a?/^\(\(.*\)\)$/.test(a)&&40===a.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}useComponentSize(a,b=""){const [c,d]=gc.useState([0,0]),e=xa();gc.useEffect(()=>{setTimeout(()=>{if(null==
a?0:a.current){const f=b?a.current.querySelector(b):a.current;if(f){const g=()=>{const {width:k,height:l}=f.getBoundingClientRect(),m=L.div([k,l],e.viewport.camera.zoom);d(m);return m};g();this.getInnerHeight=()=>g()[1];const h=new ResizeObserver(()=>{g()});h.observe(f);return()=>{h.disconnect()}}}return()=>{}},10)},[a,b]);return c}getHeaderHeight(){var a;const b=ug[null!=(a=this.props.scaleLevel)?a:"md"];return this.props.compact?0:40*b}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+
this.getInnerHeight():null}getShapeSVGJsx({}){var a,b,c;const d=this.getBounds();return(0,db.jsxs)(db.Fragment,{children:[(0,db.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Xd(this.props.fill)?`var(--ls-highlight-color-${this.props.fill})`:this.props.fill:"var(--ls-secondary-background-color)",stroke:Ya(this.props.fill,"background"),strokeWidth:null!=(a=this.props.strokeWidth)?a:2,fillOpacity:null!=(b=this.props.opacity)?b:.2,width:d.width,rx:8,ry:8,
height:d.height}),!this.props.compact&&(0,db.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?Ya(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(c=this.props.opacity)?c:.2,x:1,y:1,width:d.width-2,height:38,rx:8,ry:8}),(0,db.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${d.width/2}, ${10+d.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",
stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};n(ob,"id","logseq-portal");n(ob,"defaultSearchQuery","");n(ob,"defaultSearchFilter",null);n(ob,"defaultProps",{id:"logseq-portal",type:"logseq-portal",parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});M([oa],ob.prototype,"collapsed",
1);M([ja],ob.prototype,"setCollapsed",2);M([oa],ob.prototype,"scaleLevel",1);M([ja],ob.prototype,"setScaleLevel",2);var {min:Te,PI:TC}=Math,dg=TC+1E-4,Xk=F(589),UC={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},VC={easing:a=>Math.sin(a*Math.PI/2),simulatePressure:!0},WC={easing:a=>a*a,simulatePressure:!1},ue=class extends We{constructor(a={}){super(a);n(this,"ReactComponent",da(({events:b,isErasing:c})=>{const {props:{opacity:d}}=this;return(0,Xk.jsx)(wc,V(N({},b),{opacity:c?.2:d,children:this.getShapeSVGJsx()}))}));
n(this,"setScaleLevel",b=>Ga(this,null,function*(){this.update({scaleLevel:b,strokeWidth:UC[null!=b?b:"md"]});this.onResetBounds()}));n(this,"ReactIndicator",da(()=>{const {pointsPath:b}=this;return(0,Xk.jsx)("path",{d:b,strokeDasharray:this.props.isLocked?"8 2":"undefined"})}));n(this,"validateProps",b=>{b=Ec(this,b);void 0!==b.strokeWidth&&(b.strokeWidth=Math.max(b.strokeWidth,1));return b});kb(this)}get pointsPath(){var a=this.props;if(2>a.points.length)var b="";else b=V(N({size:1+1.5*a.strokeWidth,
thinning:.65,streamline:.65,smoothing:.65},.5===a.points[1][2]?VC:WC),{last:a.isComplete}),a=Lx(a.points,b),b=Qj.getSvgPathFromStroke(Kx(a,b));return b}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(){const {pointsPath:a,props:{stroke:b,strokeWidth:c,strokeType:d}}=this;return(0,Xk.jsx)("path",{pointerEvents:"all",d:a,strokeWidth:c/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:Ya(b,"text"),fill:Ya(b,"text"),strokeDasharray:"dashed"===d?"12 4":void 0})}};
n(ue,"id","pencil");n(ue,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});M([oa],ue.prototype,"pointsPath",1);M([oa],ue.prototype,"scaleLevel",1);M([ja],ue.prototype,"setScaleLevel",2);var $r=ea(F(19)),Lc=F(589),as={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},tf=class extends Fd{constructor(){super(...arguments);n(this,"canEdit",!0);n(this,"ReactComponent",da(({events:a,isErasing:b,isSelected:c,
isEditing:d,onEditingEnd:e})=>{const {offset:[f,g],props:{stroke:h,fill:k,noFill:l,strokeWidth:m,opacity:p,strokeType:q,label:t,italic:r,fontWeight:v,fontSize:y}}=this,u=this.getVertices(m/2).join();var x=t||d?Yd(t,{fontFamily:"var(--ls-font-family)",fontSize:y,lineHeight:1,fontWeight:v},4):[0,0];const w=[this.props.size[0]/2,2*this.props.size[1]/3];x=Math.max(.5,Math.min(1,this.props.size[0]/(2*x[0]),this.props.size[1]/(2*x[1])));const z=this.getBounds(),A=$r.useMemo(()=>L.sub(w,L.toFixed([z.width/
2,z.height/2])),[z,x,w]),D=$r.useCallback(J=>{var Q;null==(Q=this.update)?void 0:Q.call(this,{label:J})},[t]);return(0,Lc.jsxs)("div",V(N({},a),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,Lc.jsx)(ai,{font:"20px / 1 var(--ls-font-family)",text:t,fontSize:y,color:Ya(h,"text"),offsetX:A[0],offsetY:A[1]/x,scale:x,isEditing:d,onChange:D,onBlur:e,fontStyle:r?"italic":"normal",fontWeight:v,pointerEvents:!!t}),(0,Lc.jsx)(wc,{opacity:b?.2:p,children:(0,Lc.jsxs)("g",{transform:`translate(${f}, ${g})`,
children:[(0,Lc.jsx)("polygon",{className:c||!l?"tl-hitarea-fill":"tl-hitarea-stroke",points:u}),(0,Lc.jsx)("polygon",{points:u,stroke:Ya(h,"stroke"),fill:l?"none":Ya(k,"background"),strokeWidth:m,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===q?"8 2":void 0})]})})]}))}));n(this,"setScaleLevel",a=>Ga(this,null,function*(){this.update({scaleLevel:a,fontSize:as[null!=a?a:"md"],strokeWidth:as[null!=a?a:"md"]/10});this.onResetBounds()}));n(this,"ReactIndicator",da(()=>{const {offset:[a,b],
props:{strokeWidth:c,isLocked:d}}=this;return(0,Lc.jsx)("g",{children:(0,Lc.jsx)("polygon",{transform:`translate(${a}, ${b})`,points:this.getVertices(c/2).join(),strokeDasharray:d?"8 2":"undefined"})})}));n(this,"validateProps",a=>{void 0!==a.sides&&(a.sides=Math.max(a.sides,3));return Ec(this,a)})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getShapeSVGJsx(a){const {offset:[b,c],props:{stroke:d,fill:e,noFill:f,strokeWidth:g,opacity:h,strokeType:k}}=this;a=this.getVertices(g/
2).join();return(0,Lc.jsxs)("g",{transform:`translate(${b}, ${c})`,opacity:h,children:[(0,Lc.jsx)("polygon",{className:f?"tl-hitarea-stroke":"tl-hitarea-fill",points:a}),(0,Lc.jsx)("polygon",{points:a,stroke:Ya(d,"stroke"),fill:f?"none":Ya(e,"background"),strokeWidth:g,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===k?"8 2":void 0})]})}};n(tf,"id","polygon");n(tf,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",
fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});M([oa],tf.prototype,"scaleLevel",1);M([ja],tf.prototype,"setScaleLevel",2);var bd=ea(F(19)),Rd=F(589),XC={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},uf=class extends Uj{constructor(){super(...arguments);n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c,onEditingEnd:d})=>{const {props:{opacity:e,fontFamily:f,fontSize:g,fontWeight:h,italic:k,lineHeight:l,text:m,stroke:p,padding:q}}=this,
t=bd.useRef(null),r=bd.useRef(!1),v=bd.useRef(null),y=bd.useCallback(A=>{const {isSizeLocked:D}=this.props;A=cf.normalizeText(A.currentTarget.value);D?this.update({text:A,size:this.getAutoSizedBoundingBox({text:A})}):this.update({text:A})},[]),u=bd.useCallback(A=>{if("Escape"!==A.key)if("Tab"===A.key&&0===m.length)A.preventDefault();else{if("Meta"!==A.key&&!A.metaKey)A.stopPropagation();else if("z"===A.key&&A.metaKey){A.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);A.stopPropagation();
A.preventDefault();return}"Tab"===A.key&&(A.preventDefault(),A.shiftKey?pc.unindent(A.currentTarget):pc.indent(A.currentTarget),this.update({text:cf.normalizeText(A.currentTarget.value)}))}},[]),x=bd.useCallback(A=>{c&&(null==d?void 0:d())},[d]),w=bd.useCallback(A=>{c&&r.current&&document.activeElement===A.currentTarget&&A.currentTarget.select()},[c]),z=bd.useCallback(A=>{c&&A.stopPropagation()},[c]);bd.useEffect(()=>{c&&requestAnimationFrame(()=>{r.current=!0;const A=t.current;A&&(A.focus(),A.select())})},
[c,d]);bd.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,Rd.jsx)(nc,V(N({},a),{opacity:b?.2:e,children:(0,Rd.jsx)("div",{ref:v,className:"tl-text-shape-wrapper","data-hastext":!!m,"data-isediting":c,style:{fontFamily:f,fontStyle:k?"italic":"normal",fontSize:g,fontWeight:h,padding:q,lineHeight:l,color:Ya(p,"text")},children:c?(0,Rd.jsx)("textarea",{ref:t,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",
autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:m,onFocus:w,onChange:y,onKeyDown:u,onBlur:x,onPointerDown:z}):(0,Rd.jsxs)(Rd.Fragment,{children:[m,"​"]})})}))}));n(this,"setScaleLevel",a=>Ga(this,null,function*(){this.update({scaleLevel:a,fontSize:XC[null!=a?a:"md"]});this.onResetBounds()}));n(this,"ReactIndicator",da(({isEditing:a})=>{const {props:{borderRadius:b,isLocked:c},bounds:d}=this;return a?null:(0,Rd.jsx)("rect",
{width:d.width,height:d.height,rx:b,ry:b,fill:"transparent",strokeDasharray:c?"8 2":"undefined"})}));n(this,"validateProps",a=>Ec(this,a));n(this,"getBounds",()=>{const [a,b]=this.props.point,[c,d]=this.props.size;return{minX:a,minY:b,maxX:a+c,maxY:b+d,width:c,height:d}});n(this,"onResizeStart",({isSingle:a})=>{var b;if(!a)return this;this.scale=[...(null!=(b=this.props.scale)?b:[1,1])];return this.update({isSizeLocked:!1})});n(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),
isSizeLocked:!0});return this})}get scaleLevel(){var a;return null!=(a=this.props.scaleLevel)?a:"md"}getAutoSizedBoundingBox(a={}){const {text:b=this.props.text,fontFamily:c=this.props.fontFamily,fontSize:d=this.props.fontSize,fontWeight:e=this.props.fontWeight,lineHeight:f=this.props.lineHeight,padding:g=this.props.padding}=a,[h,k]=Yd(b,{fontFamily:c,fontSize:d,lineHeight:f,fontWeight:e},g);return[h,k]}getShapeSVGJsx(){var a=window.navigator.userAgent.toLowerCase();if(a.includes("webkit")&&!a.includes("chrome"))return super.getShapeSVGJsx(null);
const {props:{text:b,stroke:c,fontSize:d,fontFamily:e}}=this;a=this.getBounds();return(0,Rd.jsx)("foreignObject",{width:a.width,height:a.height,children:(0,Rd.jsx)("div",{style:{color:Ya(c,"text"),fontSize:d,fontFamily:e,display:"contents"},children:b})})}};n(uf,"id","text");n(uf,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",
fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});M([oa],uf.prototype,"scaleLevel",1);M([ja],uf.prototype,"setScaleLevel",2);var bs=ea(F(19)),ei=F(589),fi=class extends Sb{constructor(){super(...arguments);n(this,"canFlip",!1);n(this,"canEdit",!0);n(this,"canChangeAspectRatio",!1);n(this,"ReactComponent",da(({events:a,isErasing:b,asset:c,isEditing:d})=>{const {props:{opacity:e}}=this,f=lh();var g=xa();const h=g.selectedIds.has(this.id),k=f||h&&!d||"select"!==g.selectedTool.id;g=bs.useCallback(m=>
{k||m.stopPropagation()},[k]);const {handlers:l}=bs.useContext(Pa);return(0,ei.jsx)(nc,V(N({style:{overflow:"hidden",pointerEvents:"all",opacity:b?.2:e}},a),{children:(0,ei.jsx)("div",{onWheelCapture:g,onPointerDown:g,onPointerUp:g,className:"tl-video-container",style:{pointerEvents:f||!d&&!h?"none":"all",overflow:d?"auto":"hidden"},children:c&&(0,ei.jsx)("video",{controls:!0,src:l?l.makeAssetUrl(c.src):c.src})})}))}));n(this,"ReactIndicator",da(()=>{const {props:{size:[a,b],isLocked:c}}=this;return(0,ei.jsx)("rect",
{width:a,height:b,fill:"transparent",strokeDasharray:c?"8 2":"undefined"})}))}};n(fi,"id","video");n(fi,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,isAspectRatioLocked:!0});var Mb=F(589),cs=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,ds=class extends Sb{constructor(){super(...arguments);n(this,"aspectRatio",480/853);n(this,"canChangeAspectRatio",!1);n(this,
"canFlip",!1);n(this,"canEdit",!0);n(this,"onYoutubeLinkChange",a=>{this.update({url:a,size:ds.defaultProps.size})});n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c})=>{const d=xa();return(0,Mb.jsx)(nc,V(N({style:{overflow:"hidden",pointerEvents:"all",opacity:b?.2:1}},a),{children:(0,Mb.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:c||d.readOnly?"all":"none",userSelect:"none",background:`url('https://img.youtube.com/vi/${this.embedId}/mqdefault.jpg') no-repeat center/cover`},
children:this.embedId?(0,Mb.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,Mb.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded youtube"})}):(0,Mb.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},
children:(0,Mb.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,Mb.jsxs)("g",{children:[(0,Mb.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,Mb.jsx)("g",{children:(0,Mb.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,Mb.jsxs)("g",{fill:"#fff",children:[(0,Mb.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,Mb.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))}));n(this,"ReactIndicator",da(()=>{const {props:{size:[a,b],isLocked:c}}=this;return(0,Mb.jsx)("rect",{width:a,height:b,fill:"transparent",rx:8,ry:8,strokeDasharray:c?"8 2":"undefined"})}));n(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.max(a.size[0],1),a.size[1]=Math.max(a.size[0]*this.aspectRatio,1));return Ec(this,a)})}get embedId(){var a,b;const c=this.props.url,
d=c.match(cs);return null!=(b=null!=(a=null==d?void 0:d[1])?a:c)?b:""}getShapeSVGJsx(){const a=this.getBounds(),b=this.embedId;return b?(0,Mb.jsxs)("g",{children:[(0,Mb.jsx)("image",{width:a.width,height:a.height,href:`https://img.youtube.com/vi/${b}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,Mb.jsx)("svg",{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Mb.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},ve=ds;n(ve,"id","youtube");n(ve,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});M([oa],ve.prototype,"embedId",1);M([ja],ve.prototype,"onYoutubeLinkChange",2);var vf=ea(F(19)),rd=F(589),es=/https?:\/\/(x|twitter).com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,fs=class extends Sb{constructor(){super(...arguments);n(this,"canFlip",!1);n(this,"canEdit",!0);n(this,"initialHeightCalculated",
!0);n(this,"getInnerHeight",null);n(this,"onTwitterLinkChange",a=>{this.update({url:a,size:fs.defaultProps.size})});n(this,"ReactComponent",da(({events:a,isErasing:b,isEditing:c})=>{const {renderers:{Tweet:d}}=vf.useContext(Pa),e=xa(),f=vf.useRef(null),[,g]=this.useComponentSize(f);vf.useEffect(()=>{var h,k;const l=null!=(k=null==(h=this.getInnerHeight)?void 0:h.call(this))?k:g;g&&1<Math.abs(l-this.props.size[1])&&(this.update({size:[this.props.size[0],l]}),e.persist(!0))},[g]);vf.useEffect(()=>{this.initialHeightCalculated||
setTimeout(()=>{this.onResetBounds();e.persist(!0)})},[this.initialHeightCalculated]);return(0,rd.jsx)(nc,V(N({style:{overflow:"hidden",pointerEvents:"all",opacity:b?.2:1}},a),{children:(0,rd.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:c||e.readOnly?"all":"none",userSelect:"none"},children:this.embedId?(0,rd.jsx)("div",{ref:f,children:(0,rd.jsx)(d,{tweetId:this.embedId})}):null})}))}));n(this,"ReactIndicator",da(()=>{const {props:{size:[a,
b],isLocked:c}}=this;return(0,rd.jsx)("rect",{width:a,height:b,fill:"transparent",rx:8,ry:8,strokeDasharray:c?"8 2":"undefined"})}));n(this,"onResetBounds",a=>{a=this.getAutoResizeHeight();null!==a&&1<Math.abs(a-this.props.size[1])&&(this.update({size:[this.props.size[0],a]}),this.initialHeightCalculated=!0);return this});n(this,"onResize",(a,b)=>{var c;const {bounds:d,rotation:e,scale:[f,g]}=b;a=[...this.scale];0>f&&(a[0]*=-1);0>g&&(a[1]*=-1);b=null!=(c=this.getAutoResizeHeight())?c:d.height;return this.update({point:[d.minX,
d.minY],size:[Math.max(1,d.width),Math.max(1,b)],scale:a,rotation:e})});n(this,"validateProps",a=>{void 0!==a.size&&(a.size[0]=Math.min(Math.max(a.size[0],300),550),a.size[1]=Math.max(a.size[1],1));return Ec(this,a)})}get embedId(){var a,b;const c=this.props.url,d=c.match(es);return null!=(b=null!=(a=null==d?void 0:d[1])?a:c)?b:""}useComponentSize(a,b=""){const [c,d]=vf.useState([0,0]),e=xa();vf.useEffect(()=>{if(null==a?0:a.current){const f=b?a.current.querySelector(b):a.current;if(f){const g=()=>
{const {width:k,height:l}=f.getBoundingClientRect(),m=L.div([k,l],e.viewport.camera.zoom);d(m);return m};g();this.getInnerHeight=()=>g()[1];const h=new ResizeObserver(()=>{g()});h.observe(f);return()=>{h.disconnect()}}}return()=>{}},[a,b]);return c}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const a=this.getBounds();return this.embedId?(0,rd.jsxs)("g",{children:[(0,rd.jsx)("rect",{width:a.width,height:a.height,fill:"#15202b",rx:8,ry:8}),(0,rd.jsx)("svg",
{x:a.width/4,y:a.height/4,width:a.width/2,height:a.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,rd.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},wf=fs;n(wf,"id","tweet");n(wf,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});M([oa],wf.prototype,"embedId",1);M([ja],wf.prototype,"onTwitterLinkChange",2);var Yk=ea(F(19)),Zk=F(589),vg=class extends Sb{constructor(){super(...arguments);n(this,"frameRef",Yk.createRef());n(this,"canChangeAspectRatio",!0);n(this,"canFlip",!0);n(this,"canEdit",!0);n(this,"ReactComponent",
da(({events:a,asset:b,isErasing:c,isEditing:d})=>{Yk.useRef(null);const {handlers:e}=Yk.useContext(Pa);xa();const f=lh();return(0,Zk.jsx)(nc,V(N({style:{overflow:"hidden",pointerEvents:"all",opacity:c?.2:1}},a),{children:b?(0,Zk.jsx)("embed",{src:e?e.inflateAsset(b.src).url:b.src,className:"relative tl-pdf-container",onWheelCapture:stop,onPointerDown:stop,onPointerUp:stop,style:{width:"100%",height:"100%",pointerEvents:!f&&d?"all":"none"}}):null}))}));n(this,"ReactIndicator",da(()=>{const {props:{size:[a,
b],isLocked:c}}=this;return(0,Zk.jsx)("rect",{width:a,height:b,fill:"transparent",rx:8,ry:8,strokeDasharray:c?"8 2":"undefined"})}))}};n(vg,"id","pdf");n(vg,"defaultProps",{id:"pdf",type:"pdf",parentId:"page",point:[0,0],size:[595,842],assetId:""});F(589);var gs=[of,pf,se,di,fi,sf,ue,tf,uf,ve,wf,te,Qd,vg,ob,Tk],$k=class extends ld{constructor(){super(...arguments);n(this,"Shape",of)}};n($k,"id","box");n($k,"shortcut","whiteboard/rectangle");var al=class extends ld{constructor(){super(...arguments);
n(this,"Shape",pf)}};n(al,"id","ellipse");n(al,"shortcut","whiteboard/ellipse");var bl=class extends uh{};n(bl,"id","erase");n(bl,"shortcut","whiteboard/eraser");var cl=class extends fg{constructor(){super(...arguments);n(this,"Shape",se);n(this,"simplify",!0);n(this,"simplifyTolerance",.618)}};n(cl,"id","highlighter");n(cl,"shortcut","whiteboard/highlighter");var dl=class extends vh{constructor(){super(...arguments);n(this,"Shape",sf)}};n(dl,"id","line");n(dl,"shortcut","whiteboard/connector");var el=
class extends fg{constructor(){super(...arguments);n(this,"Shape",ue);n(this,"simplify",!1)}};n(el,"id","pencil");n(el,"shortcut","whiteboard/pencil");var hs=class extends ld{constructor(){super(...arguments);n(this,"Shape",tf)}};n(hs,"id","polygon");var fl=class extends wh{constructor(){super(...arguments);n(this,"Shape",uf)}};n(fl,"id","text");n(fl,"shortcut","whiteboard/text");var is=class extends ld{constructor(){super(...arguments);n(this,"Shape",ve)}};n(is,"id","youtube");var js=class extends Ka{constructor(){super(...arguments);
n(this,"creatingShape");n(this,"offset",[0,0]);n(this,"onEnter",()=>{this.app.history.pause();zb(()=>{var a=L.sub(this.app.inputs.originPoint,this.offset);this.app.settings.snapToGrid&&(a=L.snap(a,8));this.creatingShape=a=new ob({id:lb(),parentId:this.app.currentPage.id,point:a,size:ob.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.app.currentPage.addShapes(a);this.app.setEditingShape(a);this.app.setSelectedShapes([a])})});n(this,"onPointerDown",a=>{switch(a.type){case "shape":if(a.shape===
this.creatingShape)break;this.app.selectTool("select");break;case "canvas":a.order||this.app.selectTool("select")}});n(this,"onExit",()=>{var a;this.creatingShape&&(this.app.history.resume(),(null==(a=this.creatingShape)?0:a.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};n(js,"id","creating");var ks=class extends Ka{constructor(){super(...arguments);n(this,"cursor","crosshair");
n(this,"onPointerDown",a=>{this.tool.transition("creating")})}};n(ks,"id","idle");var wg=class extends Gd{constructor(){super(...arguments);n(this,"Shape",ob);n(this,"onPinch",a=>{this.app.viewport.pinchZoom(a.point,a.delta,a.delta[2])})}};n(wg,"id","logseq-portal");n(wg,"shortcut","whiteboard/portal");n(wg,"states",[ks,js]);n(wg,"initial","idle");var ls=class extends ld{constructor(){super(...arguments);n(this,"Shape",Qd)}};n(ls,"id","youtube");var ms=class extends ld{constructor(){super(...arguments);
n(this,"Shape",te)}};n(ms,"id","iframe");var YC=ea(F(592)),zc=F(589),ZC=new Map(gs.map(a=>[a.id,a])),Ij=class{constructor(a){n(this,"shapes");n(this,"pageId");n(this,"assets");a&&this.load(a)}load(a){var b;const c=null==(b=null==a?void 0:a.pages)?void 0:b[0];this.pageId=null==c?void 0:c.id;this.assets=a.assets;this.shapes=null==c?void 0:c.shapes.map(d=>{var e=d.type;if(!e)throw Error("No shape type provided.");const f=ZC.get(e);if(!f)throw Error(`Could not find shape class for ${e}`);return new f(d)}).filter(d=>
"group"!==d.type)}generatePreviewJsx(a,b){var c,d;const e=[...(null!=(c=this.shapes)?c:[]).map(l=>l.getRotatedBounds())];(c=null==a?void 0:a.currentView)&&e.push(c);let f=Y.getCommonBounds(e);if(!f)return null;f=Y.expandBounds(f,16);f=b?Y.ensureRatio(f,b):f;const g=l=>[(l[0]-f.minX).toFixed(2),(l[1]-f.minY).toFixed(2)],[h,k]=c?g([c.minX,c.minY]):[0,0];return f&&(0,zc.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":f.minX.toFixed(2),"data-common-bound-y":f.minY.toFixed(2),"data-common-bound-width":f.width.toFixed(2),
"data-common-bound-height":f.height.toFixed(2),viewBox:[0,0,f.width,f.height].join(" "),children:[(0,zc.jsx)("defs",{children:c&&(0,zc.jsxs)(zc.Fragment,{children:[(0,zc.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${h}, ${k})`,width:c.width,height:c.height}),(0,zc.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,zc.jsx)("rect",{width:f.width,height:f.height,fill:"white"}),(0,zc.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,zc.jsx)("g",{id:this.pageId+
"-preview-shapes",children:null==(d=this.shapes)?void 0:d.map(l=>{var m,p;const {bounds:q,props:{rotation:t}}=l,[r,v]=g([q.minX,q.minY]),y=+(180*((null!=t?t:0)+(null!=(m=q.rotation)?m:0))/Math.PI).toFixed(2),[u,x]=[(q.width/2).toFixed(2),(q.height/2).toFixed(2)];return(0,zc.jsx)("g",{transform:[`translate(${r}, ${v})`,`rotate(${y}, ${u}, ${x})`].join(" "),children:l.getShapeSVGJsx({assets:null!=(p=this.assets)?p:[]})},l.id)})}),(0,zc.jsx)("rect",{mask:c?`url(#${this.pageId}-camera-mask)`:"",width:f.width,
height:f.height,fill:"transparent"}),c&&(0,zc.jsx)("use",{id:"minimap-camera-rect","data-x":h,"data-y":k,"data-width":c.width,"data-height":c.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/a.camera.zoom})]})}exportAsSVG(a){return(a=this.generatePreviewJsx(void 0,a))?YC.default.renderToString(a):""}},$C=ea(F(19)),gi=F(589),hi=$C.forwardRef((a,b)=>{var {value:c,className:d}=a;a=fa(a,["autoResize","value","className"]);return(0,gi.jsx)("div",{className:"tl-input"+
(d?" "+d:""),children:(0,gi.jsxs)("div",{className:"tl-input-sizer",children:[(0,gi.jsx)("div",{className:"tl-input-hidden",children:c}),(0,gi.jsx)("input",N({ref:b,value:c,className:"tl-text-input",type:"text"},a))]})})}),Ea=F(589),Sd=({type:a,active:b})=>(0,Ea.jsx)("span",{className:"tl-type-tag","data-active":b,children:(0,Ea.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[a]}`})}),ns=(a,b)=>
(0,Ea.jsx)("span",{children:a.split(new RegExp(`(${b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((c,d)=>1===d%2?(0,Ea.jsx)("mark",{className:"tl-highlighted",children:c}):c).map((c,d)=>(0,Ea.jsx)(Lb.default.Fragment,{children:c},d))}),aD=(a,b)=>{const {handlers:c}=Lb.default.useContext(Pa),[d,e]=Lb.default.useState(null),f=Xu(a,200);Lb.default.useEffect(()=>{let g=!1;if(0<f.length){const h={"pages?":!0,"blocks?":!0,"files?":!1};"B"===b?h["pages?"]=!1:"P"===b&&(h["blocks?"]=!1);c.search(f,
h).then(k=>{g||e(k)})}else e(null);return()=>{g=!0}},[f,null==c?void 0:c.search]);return d},Zr=da(({className:a,style:b,placeholder:c,onChange:d,onBlur:e,onAddBlock:f})=>{const [g,h]=Lb.default.useState(ob.defaultSearchQuery),[k,l]=Lb.default.useState(ob.defaultSearchFilter),m=Lb.default.useRef(null),{handlers:p,renderers:q}=Lb.default.useContext(Pa),t=p.t,r=Lb.default.useCallback(K=>{var O;setTimeout(()=>d(K));null==(O=m.current)?void 0:O.blur();K&&(ob.defaultSearchQuery="",ob.defaultSearchFilter=
null)},[]),v=Lb.default.useCallback(K=>{if(K=null==p?void 0:p.addNewBlock(K))r(K),null==f?void 0:f(K);return K},[f]),y=Lb.default.useRef(null),[u,x]=Lb.default.useState(0),w=aD(g,k),[z,A]=Lb.default.useState("circle-plus"),[D,J]=Lb.default.useState(!1);Lb.default.useEffect(()=>{setTimeout(()=>{var K;null==(K=m.current)?void 0:K.focus()})},[k]);Lb.default.useEffect(()=>{ob.defaultSearchQuery=g;ob.defaultSearchFilter=k},[g,k]);const Q=Lb.default.useMemo(()=>{var K;const O=[],W=null==q?void 0:q.Breadcrumb;
if(!W||!p)return[];f&&O.push({actionIcon:"circle-plus",onChosen:()=>!!v(g),element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,{active:!0,type:"BA"}),0<g.length?(0,Ea.jsxs)(Ea.Fragment,{children:[(0,Ea.jsx)("strong",{children:t("whiteboard/new-block")}),g]}):(0,Ea.jsx)("strong",{children:t("whiteboard/new-block-no-colon")})]})});(null==(K=null==w?void 0:w.pages)?0:K.some(R=>R.toLowerCase()===g.toLowerCase()))||!g||O.push({actionIcon:"circle-plus",onChosen:()=>
{r(g);return!0},element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,{active:!0,type:"PA"}),(0,Ea.jsx)("strong",{children:t("whiteboard/new-page")}),g]})},{actionIcon:"circle-plus",onChosen:()=>{null==p?void 0:p.addNewWhiteboard(g);r(g);return!0},element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,{active:!0,type:"WA"}),(0,Ea.jsx)("strong",{children:t("whiteboard/new-whiteboard")}),g]})});0===g.length&&null===k&&O.push({actionIcon:"search",
onChosen:()=>{l("B");return!0},element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,{type:"BS"}),t("whiteboard/search-only-blocks")]})},{actionIcon:"search",onChosen:()=>{l("P");return!0},element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,{type:"PS"}),t("whiteboard/search-only-pages")]})});k&&"P"!==k||!w||!w.pages||O.push(...w.pages.map(R=>({actionIcon:"search",onChosen:()=>{r(R);return!0},element:(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,Ea.jsx)(Sd,{type:p.isWhiteboardPage(R)?"WP":"P"}),ns(R,g)]})})));k&&"B"!==k||!w||!w.blocks||O.push(...w.blocks.filter(R=>R.content&&R.uuid).map(({content:R,uuid:T})=>{const I=p.queryBlockByUUID(T);return{actionIcon:"search",onChosen:()=>{var C,H,B;return I?(r(T),null==(B=null==(H=null==(C=window.logseq)?void 0:C.api)?void 0:H.set_blocks_id)?void 0:B.call(H,[T]),!0):!1},element:I?(0,Ea.jsxs)(Ea.Fragment,{children:[(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)(Sd,
{type:"B"}),(0,Ea.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,Ea.jsx)(W,{blockId:T})})]}),(0,Ea.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,Ea.jsx)("div",{className:"tl-quick-search-option-placeholder"}),ns(R,g)]})]}):(0,Ea.jsx)("div",{className:"tl-quick-search-option-row",children:t("whiteboard/cache-outdated")})}}));return O},[g,k,w,null==q?void 0:q.Breadcrumb,p]);Lb.default.useEffect(()=>{const K=O=>{var W,R;let T=u;"ArrowDown"===O.key?T=Math.min(Q.length-
1,u+1):"ArrowUp"===O.key?T=Math.max(0,u-1):"Enter"===O.key?(null==(W=Q[u])?void 0:W.onChosen(),O.stopPropagation(),O.preventDefault()):"Backspace"===O.key&&0===g.length?l(null):"Escape"===O.key&&r("");T!==u&&(W=Q[T],x(T),A(W.actionIcon),O.stopPropagation(),O.preventDefault(),(O=null==(R=y.current)?void 0:R.querySelector(".tl-quick-search-option:nth-child("+(T+1)+")"))&&(null==O?void 0:O.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",K,!0);return()=>{document.removeEventListener("keydown",
K,!0)}},[Q,u,g]);return(0,Ea.jsxs)("div",{className:"tl-quick-search "+(null!=a?a:""),style:b,children:[(0,Ea.jsx)(Vz,{icon:z,onClick:()=>{var K;null==(K=Q[u])?void 0:K.onChosen()}}),(0,Ea.jsxs)("div",{className:"tl-quick-search-input-container",children:[k&&(0,Ea.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,Ea.jsx)(Sd,{type:k}),"B"===k?"Search blocks":"Search pages",(0,Ea.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>l(null),children:(0,Ea.jsx)(ra,
{name:"x"})})]}),(0,Ea.jsx)(hi,{ref:m,type:"text",value:g,className:"tl-quick-search-input",placeholder:null!=c?c:"Create or search your graph...",onChange:K=>h(K.target.value),onKeyDown:K=>{"Enter"===K.key&&r(g);K.stopPropagation()},onFocus:()=>{J(!0)},onBlur:()=>{J(!1);null==e?void 0:e()}})]}),0<Q.length&&(0,Ea.jsx)("div",{onWheelCapture:K=>K.stopPropagation(),className:"tl-quick-search-options",ref:y,style:{visibility:D?"visible":"hidden",pointerEvents:D?"all":"none"},children:(0,Ea.jsx)(rC,{style:{height:40*
Math.min(Math.max(1,Q.length),12)},totalCount:Q.length,itemContent:K=>{const {actionIcon:O,onChosen:W,element:R}=Q[K];return(0,Ea.jsx)("div",{"data-focused":K===u,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{A(O);x(K)},onPointerDownCapture:T=>{W()&&(T.stopPropagation(),T.preventDefault())},children:R},K)}})})]})}),$a=F(589),bD=da(function(a){var {pageId:b,portalType:c,refs:d,side:e,onRefsChange:f}=a;a=fa(a,"pageId portalType shapeType refs side onRefsChange".split(" "));const {handlers:{t:g}}=
Bo.default.useContext(Pa),h=d.length+(b?1:0),k=0===d.length,l=p=>{p&&!d.includes(p)&&k&&f([...d,p])},m=!(!b||!c);return(0,$a.jsx)(Dn,V(N({},a),{side:e,align:"start",alignOffset:-6,label:(0,$a.jsx)(Oe,{content:g("whiteboard/link"),sideOffset:14,children:(0,$a.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",children:[(0,$a.jsx)(ra,{name:0<h?"link":"add-link"}),0<h&&(0,$a.jsx)("div",{className:"tl-shape-links-count",children:h})]})}),children:(0,$a.jsxs)("div",{className:"color-level rounded-lg",
"data-show-reference-panel":m,children:[m&&(0,$a.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,$a.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,$a.jsx)(ra,{className:"opacity-50",name:"internal-link"}),g("whiteboard/references")]}),(0,$a.jsx)(Ao,{type:c,id:b})]}),(0,$a.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,$a.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,$a.jsx)(ra,{className:"opacity-50",
name:"add-link"}),g("whiteboard/link-to-any-page-or-block")]}),k&&(0,$a.jsx)(Zr,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:g("whiteboard/start-typing-to-search"),onChange:l}),0<d.length&&(0,$a.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:d.map((p,q)=>(0,$a.jsx)(Ao,{id:p,type:Zd(p)?"B":"P",onRemove:()=>{f(d.filter((t,r)=>q!==r))},showContent:!0},p))})]})]})}))}),hb=ea(F(19)),[os]=uc("ToggleGroup",[Hh]),ps=Hh(),eD=hb.default.forwardRef((a,b)=>{const {type:c}=
a;a=fa(a,["type"]);if("single"===c)return hb.default.createElement(cD,ca({},a,{ref:b}));if("multiple"===c)return hb.default.createElement(dD,ca({},a,{ref:b}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[qs,rs]=os("ToggleGroup"),cD=hb.default.forwardRef((a,b)=>{const {value:c,defaultValue:d,onValueChange:e=()=>{}}=a,f=fa(a,["value","defaultValue","onValueChange"]),[g,h]=Oc({prop:c,defaultProp:d,onChange:e});return hb.default.createElement(qs,{scope:a.__scopeToggleGroup,type:"single",
value:g?[g]:[],onItemActivate:h,onItemDeactivate:hb.default.useCallback(()=>h(""),[h])},hb.default.createElement(ss,ca({},f,{ref:b})))}),dD=hb.default.forwardRef((a,b)=>{const {value:c,defaultValue:d,onValueChange:e=()=>{}}=a,f=fa(a,["value","defaultValue","onValueChange"]),[g=[],h]=Oc({prop:c,defaultProp:d,onChange:e}),k=hb.default.useCallback(m=>h((p=[])=>[...p,m]),[h]),l=hb.default.useCallback(m=>h((p=[])=>p.filter(q=>q!==m)),[h]);return hb.default.createElement(qs,{scope:a.__scopeToggleGroup,
type:"multiple",value:g,onItemActivate:k,onItemDeactivate:l},hb.default.createElement(ss,ca({},f,{ref:b})))}),[fD,gD]=os("ToggleGroup"),ss=hb.default.forwardRef((a,b)=>{const {__scopeToggleGroup:c,disabled:d=!1,rovingFocus:e=!0,orientation:f,dir:g,loop:h=!0}=a;var k=fa(a,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));a=ps(c);const l=Vf(g);k=N({role:"group",dir:l},k);return hb.default.createElement(fD,{scope:c,rovingFocus:e,disabled:d},e?hb.default.createElement(Lq,ca({asChild:!0},
a,{orientation:f,dir:l,loop:h}),hb.default.createElement(mb.div,ca({},k,{ref:b}))):hb.default.createElement(mb.div,ca({},k,{ref:b})))}),hD=hb.default.forwardRef((a,b)=>{var c=rs("ToggleGroupItem",a.__scopeToggleGroup);const d=gD("ToggleGroupItem",a.__scopeToggleGroup),e=ps(a.__scopeToggleGroup);c=c.value.includes(a.value);const f=d.disabled||a.disabled;a=V(N({},a),{pressed:c,disabled:f});const g=hb.default.useRef(null);return d.rovingFocus?hb.default.createElement(Mq,ca({asChild:!0},e,{focusable:!f,
active:c,ref:g}),hb.default.createElement(ts,ca({},a,{ref:b}))):hb.default.createElement(ts,ca({},a,{ref:b}))}),ts=hb.default.forwardRef((a,b)=>{const {__scopeToggleGroup:c,value:d}=a,e=fa(a,["__scopeToggleGroup","value"]),f=rs("ToggleGroupItem",c);a={role:"radio","aria-checked":a.pressed,"aria-pressed":void 0};return hb.default.createElement(Gq,ca({},"single"===f.type?a:void 0,e,{ref:b,onPressedChange:g=>{if(g)f.onItemActivate(d);else f.onItemDeactivate(d)}}))}),Do=eD,Eo=hD,Ed=F(589),Na=F(589),us=
"EditPdf LogseqPortalViewMode Geometry AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource ArrowMode Links".split(" "),iD=["YoutubeLink","TwitterLink","IFrameSource","Links","EditPdf"],$b=new Map,Jj={"logseq-portal":["Swatch","LogseqPortalViewMode","ScaleLevel","AutoResizing","Links"],youtube:["YoutubeLink","Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),
ellipse:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Geometry TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:["TextStyle","Swatch","ScaleLevel","ArrowMode","Links"],pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:["TextStyle","Swatch","ScaleLevel","AutoResizing","Links"],html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"],pdf:["EditPdf","Links"]},Dx=Object.entries(Jj).filter(([,
a])=>a.includes("NoFill")&&a.includes("Swatch")).map(([a])=>a),jD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("AutoResizing"),d=c.every(e=>e.props.isAutoResizing);return(0,Na.jsx)(Cd,{tooltip:b("whiteboard/auto-resize"),toggle:c.every(e=>"logseq-portal"===e.props.type),className:"tl-button",pressed:d,onPressedChange:e=>{c.forEach(f=>{if("logseq-portal"===f.props.type)f.update({isAutoResizing:e});else f.onResetBounds({zoom:a.viewport.camera.zoom})});a.persist()},children:(0,Na.jsx)(ra,
{name:"dimensions"})})}),kD=da(()=>{const a=xa();var {handlers:{t:b}}=Ib.default.useContext(Pa);const c=Hc("LogseqPortalViewMode"),d=c.every(e=>e.collapsed);if(!d&&!c.every(e=>!e.collapsed))return null;b=(0,Na.jsxs)("div",{className:"flex",children:[d?b("whiteboard/expand"):b("whiteboard/collapse"),(0,Na.jsx)(Hb,{action:d?"editor/expand-block-children":"editor/collapse-block-children"})]});return(0,Na.jsx)(Cd,{tooltip:b,toggle:c.every(e=>"logseq-portal"===e.props.type),className:"tl-button",pressed:d,
onPressedChange:()=>a.api.setCollapsed(!d),children:(0,Na.jsx)(ra,{name:d?"object-expanded":"object-compact"})})}),lD=da(()=>{const {handlers:{isMobile:a}}=Ib.default.useContext(Pa);var b=Hc("ScaleLevel");b=1<(new Set(b.map(c=>c.scaleLevel))).size?"":b[0].scaleLevel;return(0,Na.jsx)(Mn,{scaleLevel:b,compact:a()})}),mD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("IFrameSource")[0],d=Ib.default.useCallback(f=>{c.onIFrameSourceChange(f.target.value.trim().toLowerCase());a.persist()},
[]),e=Ib.default.useCallback(()=>{c.reload()},[]);return(0,Na.jsxs)("span",{className:"flex gap-3",children:[(0,Na.jsx)(qb,{tooltip:b("whiteboard/reload"),type:"button",onClick:e,children:(0,Na.jsx)(ra,{name:"refresh"})}),(0,Na.jsx)(hi,{title:b("whiteboard/website-url"),className:"tl-iframe-src",value:`${c.props.url}`,onChange:d}),(0,Na.jsx)(qb,{tooltip:b("whiteboard/open-website-url"),type:"button",onClick:()=>window.open(c.props.url),children:(0,Na.jsx)(ra,{name:"external-link"})})]})}),nD=da(()=>
{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("YoutubeLink")[0],d=Ib.default.useCallback(e=>{c.onYoutubeLinkChange(e.target.value);a.persist()},[]);return(0,Na.jsxs)("span",{className:"flex gap-3",children:[(0,Na.jsx)(hi,{title:b("whiteboard/youtube-url"),className:"tl-youtube-link",value:`${c.props.url}`,onChange:d}),(0,Na.jsx)(qb,{tooltip:b("whiteboard/open-youtube-url"),type:"button",onClick:()=>{var e,f,g;return null==(g=null==(f=null==(e=window.logseq)?void 0:e.api)?void 0:f.open_external_link)?
void 0:g.call(f,c.props.url)},children:(0,Na.jsx)(ra,{name:"external-link"})})]})}),oD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("TwitterLink")[0],d=Ib.default.useCallback(e=>{c.onTwitterLinkChange(e.target.value);a.persist()},[]);return(0,Na.jsxs)("span",{className:"flex gap-3",children:[(0,Na.jsx)(hi,{title:b("whiteboard/twitter-url"),className:"tl-twitter-link",value:`${c.props.url}`,onChange:d}),(0,Na.jsx)(qb,{tooltip:b("whiteboard/open-twitter-url"),type:"button",onClick:()=>
{var e,f,g;return null==(g=null==(f=null==(e=window.logseq)?void 0:e.api)?void 0:f.open_external_link)?void 0:g.call(f,c.props.url)},children:(0,Na.jsx)(ra,{name:"external-link"})})]})}),pD=da(()=>{const a=xa(),{handlers:{t:b,setCurrentPdf:c}}=Ib.default.useContext(Pa),d=a.selectedShapesArray[0];return(0,Na.jsx)(qb,{tooltip:b("whiteboard/edit-pdf"),type:"button",onClick:()=>c(a.assets[d.props.assetId].src),children:(0,Na.jsx)(ra,{name:"edit"})})}),qD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa);
var c=Hc("NoFill");const d=Ib.default.useCallback(e=>{a.selectedShapesArray.forEach(f=>f.update({noFill:e}));a.persist()},[]);c=c.every(e=>e.props.noFill);return(0,Na.jsx)(Cd,{tooltip:b("whiteboard/fill"),className:"tl-button",pressed:c,onPressedChange:d,children:(0,Na.jsx)(ra,{name:c?"droplet-off":"droplet"})})}),rD=da(()=>{const a=xa(),b=Hc("Swatch"),c=Ib.default.useCallback(e=>{a.selectedShapesArray.forEach(f=>{f.update({fill:e,stroke:e})});a.persist()},[]),d=Ib.default.useCallback(e=>{a.selectedShapesArray.forEach(f=>
{f.update({opacity:e})});a.persist()},[]);return(0,Na.jsx)(Bn,{popoverSide:"top",color:b[0].props.noFill?b[0].props.stroke:b[0].props.fill,opacity:b[0].props.opacity,setOpacity:d,setColor:c})}),sD=da(()=>{const a=xa(),b=Ib.default.useCallback(c=>{a.api.convertShapes(c.currentTarget.dataset.tool)},[]);return(0,Na.jsx)(nr,{popoverSide:"top",chevron:!1,setGeometry:b})}),tD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("StrokeType"),d=c.every(e=>"dashed"===e.props.strokeType)?"dashed":
c.every(e=>"line"===e.props.strokeType)?"line":"mixed";return(0,Na.jsx)(Ox,{title:b("whiteboard/stroke-type"),options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:d,onValueChange:e=>{c.forEach(f=>{f.update({strokeType:e})});a.persist()}})}),uD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=Hc("ArrowMode");var d=c.every(f=>{var g;return"arrow"===(null==(g=f.props.decorations)?void 0:g.start)});const e=c.every(f=>{var g;
return"arrow"===(null==(g=f.props.decorations)?void 0:g.end)});d=[d?"start":null,e?"end":null].filter(Ub);return(0,Na.jsx)(Px,{title:b("whiteboard/arrow-head"),options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:d,onValueChange:f=>{c.forEach(g=>{var h=g.update;var k={start:f.includes("start")?"arrow":null,end:f.includes("end")?"arrow":null};h.call(g,{decorations:k})});a.persist()}})}),vD=da(()=>{const a=xa(),{handlers:{t:b}}=Ib.default.useContext(Pa),c=
Hc("TextStyle"),d=c.every(f=>500<f.props.fontWeight),e=c.every(f=>f.props.italic);return(0,Na.jsxs)("span",{className:"flex gap-1",children:[(0,Na.jsx)(Cd,{tooltip:b("whiteboard/bold"),className:"tl-button",pressed:d,onPressedChange:f=>{c.forEach(g=>{g.update({fontWeight:f?700:400});g.onResetBounds()});a.persist()},children:(0,Na.jsx)(ra,{name:"bold"})}),(0,Na.jsx)(Cd,{tooltip:b("whiteboard/italic"),className:"tl-button",pressed:e,onPressedChange:f=>{c.forEach(g=>{g.update({italic:f});g.onResetBounds()});
a.persist()},children:(0,Na.jsx)(ra,{name:"italic"})})]})}),wD=da(()=>{var a;const b=xa(),c=b.selectedShapesArray[0];return(0,Na.jsx)(bD,{onRefsChange:d=>{c.update({refs:d});b.persist()},refs:null!=(a=c.props.refs)?a:[],shapeType:c.props.type,side:"right",pageId:"logseq-portal"===c.props.type?c.props.pageId:void 0,portalType:"logseq-portal"===c.props.type?c.props.blockType:void 0})});$b.set("Geometry",sD);$b.set("AutoResizing",jD);$b.set("LogseqPortalViewMode",kD);$b.set("ScaleLevel",lD);$b.set("YoutubeLink",
nD);$b.set("TwitterLink",oD);$b.set("IFrameSource",mD);$b.set("NoFill",qD);$b.set("Swatch",rD);$b.set("StrokeType",tD);$b.set("ArrowMode",uD);$b.set("TextStyle",vD);$b.set("Links",wD);$b.set("EditPdf",pD);var vs=a=>{var b;return(null!=(b=Jj[a])?b:[]).filter(Ub)},xD=a=>{const b=a.map(d=>d.props.type),c=new Set(0<a.length?vs(b[0]):[]);for(let d=1;d<b.length&&0<c.size;d++){const e=vs(b[d]);c.forEach(f=>{e.includes(f)||c.delete(f)})}1<a.length&&iD.forEach(d=>{c.has(d)&&c.delete(d)});return Array.from(c).sort((d,
e)=>us.indexOf(d)-us.indexOf(e)).map(d=>$b.get(d))},xg=F(589),yD=da(({shapes:a,offsets:b,hidden:c})=>{const d=xa(),e=og.useRef(null),f=og.useRef(null);og.useLayoutEffect(()=>{setTimeout(()=>{const h=f.current;if(h){var {offsetWidth:k,offsetHeight:l}=h;e.current=[k,l]}})});og.useLayoutEffect(()=>{var h;const k=f.current;if(k){var l=null!=(h=e.current)?h:[0,0];h=0;if(116>b.top){var m=b.height/2+40;140>b.bottom&&(m+=b.bottom-140)}else m=-(b.height/2+40);16>b.left+b.width/2-l[0]/2?h+=-(b.left+b.width/
2-l[0]/2-16):16>b.right+b.width/2-l[0]/2&&(h+=b.right+b.width/2-l[0]/2-16);var [p,q]=[h,m];k.style.transform=`translateX(${p}px) translateY(${q}px)`}},[b]);if(!d)return null;const g=xD(a);return(0,xg.jsx)(nc,{centered:!0,children:0<g.length&&(0,xg.jsx)("div",{ref:f,className:"tl-toolbar tl-context-bar",style:{visibility:c?"hidden":"visible",pointerEvents:c?"none":"all"},children:g.map((h,k)=>(0,xg.jsxs)(og.Fragment,{children:[(0,xg.jsx)(h,{}),k<g.length-1&&(0,xg.jsx)(oe,{className:"tl-toolbar-separator",
orientation:"vertical"})]},k))})})}),gl=ea(F(19)),Z=F(589),Ua=window.LSUI,zD=da(function({children:a,collisionRef:b}){var c,d,e,f,g,h,k,l,m,p,q,t,r,v,y,u,x;const w=xa(),{handlers:z}=gl.useContext(Pa),A=z.t,D=gl.useRef(null),J=K=>{K();w.transition("select")},Q=gl.useMemo(()=>Ki(),[]);return(0,Z.jsxs)(Ua.ContextMenu,{onOpenChange:K=>{K&&!w.isIn("select.contextMenu")?w.transition("select").selectedTool.transition("contextMenu"):!K&&w.isIn("select.contextMenu")&&w.selectedTool.transition("idle")},children:[(0,Z.jsx)(Ua.ContextMenuTrigger,
{disabled:w.editingShape&&0!==Object.keys(w.editingShape).length,children:a}),(0,Z.jsx)(Ua.ContextMenuContent,{className:"tl-menu tl-context-menu",ref:D,onEscapeKeyDown:()=>w.transition("select"),collisionBoundary:b.current,asChild:!0,tabIndex:-1,children:(0,Z.jsxs)("div",{children:[1<(null==(c=w.selectedShapes)?void 0:c.size)&&!w.readOnly&&(null==(d=w.selectedShapesArray)?void 0:d.some(K=>!K.props.isLocked))&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-button-row-wrap",
children:[(0,Z.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-left"),onClick:()=>J(()=>w.align("left")),children:(0,Z.jsx)(ra,{name:"layout-align-left"})}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-center-horizontally"),onClick:()=>J(()=>w.align("centerHorizontal")),children:(0,Z.jsx)(ra,{name:"layout-align-center"})}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-right"),onClick:()=>J(()=>w.align("right")),children:(0,Z.jsx)(ra,{name:"layout-align-right"})}),
(0,Z.jsx)(oe,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/distribute-horizontally"),onClick:()=>J(()=>w.distribute("horizontal")),children:(0,Z.jsx)(ra,{name:"layout-distribute-vertical"})})]}),(0,Z.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-top"),onClick:()=>J(()=>w.align("top")),children:(0,Z.jsx)(ra,{name:"layout-align-top"})}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-center-vertically"),
onClick:()=>J(()=>w.align("centerVertical")),children:(0,Z.jsx)(ra,{name:"layout-align-middle"})}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/align-bottom"),onClick:()=>J(()=>w.align("bottom")),children:(0,Z.jsx)(ra,{name:"layout-align-bottom"})}),(0,Z.jsx)(oe,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,Z.jsx)(qb,{tooltip:A("whiteboard/distribute-vertically"),onClick:()=>J(()=>w.distribute("vertical")),children:(0,Z.jsx)(ra,{name:"layout-distribute-horizontal"})})]})]}),(0,Z.jsx)(Ua.ContextMenuSeparator,
{className:"menu-separator"}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.packIntoRectangle),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"layout-grid"}),A("whiteboard/pack-into-rectangle")]}),(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"})]}),0<(null==(e=w.selectedShapes)?void 0:e.size)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.api.zoomToSelection),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",
name:"circle-dotted"}),A("whiteboard/zoom-to-fit"),(0,Z.jsx)(Hb,{action:"whiteboard/zoom-to-fit"})]}),(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"})]}),(w.selectedShapesArray.some(K=>"group"===K.type||w.getParentGroup(K))||1<w.selectedShapesArray.length)&&(null==(f=w.selectedShapesArray)?void 0:f.some(K=>!K.props.isLocked))&&!w.readOnly&&(0,Z.jsxs)(Z.Fragment,{children:[w.selectedShapesArray.some(K=>"group"===K.type||w.getParentGroup(K))&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",
onClick:()=>J(w.api.unGroup),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"ungroup"}),A("whiteboard/ungroup"),(0,Z.jsx)(Hb,{action:"whiteboard/ungroup"})]}),1<w.selectedShapesArray.length&&(null==(g=w.selectedShapesArray)?void 0:g.some(K=>!K.props.isLocked))&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.api.doGroup),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"group"}),A("whiteboard/group"),(0,Z.jsx)(Hb,{action:"whiteboard/group"})]}),(0,Z.jsx)(Ua.ContextMenuSeparator,
{className:"menu-separator"})]}),0<(null==(h=w.selectedShapes)?void 0:h.size)&&(null==(k=w.selectedShapesArray)?void 0:k.some(K=>!K.props.isLocked))&&(0,Z.jsxs)(Z.Fragment,{children:[!w.readOnly&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.cut),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"cut"}),A("whiteboard/cut")]}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.copy),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"copy"}),A("whiteboard/copy"),
(0,Z.jsx)(Hb,{action:"editor/copy"})]})]}),!w.readOnly&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.paste),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"clipboard"}),A("whiteboard/paste"),(0,Z.jsx)(Hb,{shortcut:`${Kp}+v`})]}),1===(null==(l=w.selectedShapes)?void 0:l.size)&&!w.readOnly&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(()=>w.paste(void 0,!0)),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"circle-dotted"}),A("whiteboard/paste-as-link"),
(0,Z.jsx)(Hb,{shortcut:`${Kp}+\u21E7+v`})]}),0<(null==(m=w.selectedShapes)?void 0:m.size)&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(()=>{var K,O;return z.exportToImage(w.currentPageId,{x:w.selectionBounds.minX+w.viewport.camera.point[0]-8,y:w.selectionBounds.minY+w.viewport.camera.point[1]-8,width:(null==(K=w.selectionBounds)?void 0:K.width)+16,height:(null==(O=w.selectionBounds)?
void 0:O.height)+16,zoom:w.viewport.camera.zoom})}),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"file-export"}),A("whiteboard/export"),(0,Z.jsx)("div",{className:"tl-menu-right-slot",children:(0,Z.jsx)("span",{className:"keyboard-shortcut"})})]})]}),(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.api.selectAll),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"circle-dotted"}),A("whiteboard/select-all"),
(0,Z.jsx)(Hb,{action:"editor/select-parent"})]}),1<(null==(p=w.selectedShapes)?void 0:p.size)&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.api.deselectAll),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"circle-dotted"}),A("whiteboard/deselect-all")]}),!w.readOnly&&0<(null==(q=w.selectedShapes)?void 0:q.size)&&(null==(t=w.selectedShapesArray)?void 0:t.some(K=>!K.props.isLocked))&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(()=>w.setLocked(!0)),
children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"lock"}),A("whiteboard/lock"),(0,Z.jsx)(Hb,{action:"whiteboard/lock"})]}),!w.readOnly&&0<(null==(r=w.selectedShapes)?void 0:r.size)&&(null==(v=w.selectedShapesArray)?void 0:v.some(K=>K.props.isLocked))&&(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(()=>w.setLocked(!1)),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"lock-open"}),A("whiteboard/unlock"),(0,Z.jsx)(Hb,{action:"whiteboard/unlock"})]}),0<(null==(y=w.selectedShapes)?
void 0:y.size)&&!w.readOnly&&(null==(u=w.selectedShapesArray)?void 0:u.some(K=>!K.props.isLocked))&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.api.deleteShapes),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"backspace"}),A("whiteboard/delete"),(0,Z.jsx)(Hb,{action:"editor/delete"})]}),1<(null==(x=w.selectedShapes)?void 0:x.size)&&!w.readOnly&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"}),
(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.flipHorizontal),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"flip-horizontal"}),A("whiteboard/flip-horizontally")]}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.flipVertical),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"flip-vertical"}),A("whiteboard/flip-vertically")]})]}),!w.readOnly&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Ua.ContextMenuSeparator,{className:"menu-separator"}),
(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.bringToFront),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"circle-dotted"}),A("whiteboard/move-to-front"),(0,Z.jsx)(Hb,{action:"whiteboard/bring-to-front"})]}),(0,Z.jsxs)(Ua.ContextMenuItem,{className:"tl-menu-item",onClick:()=>J(w.sendToBack),children:[(0,Z.jsx)(ra,{className:"tl-menu-icon",name:"circle-dotted"}),A("whiteboard/move-to-back"),(0,Z.jsx)(Hb,{action:"whiteboard/send-to-back"})]})]}),Q&&(0,Z.jsx)(Ua.ContextMenuItem,
{className:"tl-menu-item",onClick:()=>{1===w.selectedShapesArray.length?console.log(Wd(w.selectedShapesArray[0].serialized)):console.log(w.selectedShapesArray.map(K=>Wd(K.serialized)))},children:A("whiteboard/dev-print-shape-props")})]})]})})]})}),ws=ea(F(19)),hl=F(589),AD=da(({shape:a})=>{const b=xa(),{handlers:c}=ws.default.useContext(Pa),d=c.t,e=ws.default.useMemo(()=>{var f;const g=[...(null!=(f=a.props.refs)?f:[])].map(h=>[h,!0]);"logseq-portal"===a.props.type&&a.props.pageId&&g.unshift([a.props.pageId,
!1]);return g.filter(h=>h[0].toLowerCase()!==b.currentPage.name&&c.getBlockPageName(h[0])!==b.currentPage.name)},[a.props.id,a.props.type,a.props.parentId,a.props.refs]);return 0===e.length?null:(0,hl.jsx)("div",{className:"tl-quick-links",title:d("whiteboard/shape-quick-links"),children:e.map(([f,g])=>(0,hl.jsx)("div",{className:"tl-quick-links-row",children:(0,hl.jsx)(Co,{id:f,showReferenceContent:g})},f))})}),Tx=ea(F(19)),Ho=ea(F(19)),Qx={image:[".png",".svg",".jpg",".jpeg",".gif"],video:[".mp4",
".webm",".ogg"],pdf:[".pdf"]},Rx=(a,b,c)=>Ga(void 0,[a,b,c],function*(d,{point:e,shiftKey:f,dataTransfer:g,fromDrop:h},k){function l(B,G){return Ga(this,null,function*(){const P=Object.values(d.assets).find(S=>S.src===B);return P?P:{id:lb(),type:G,src:B,size:yield Vt(k.makeAssetUrl(B),G)}})}function m(B){return Ga(this,null,function*(){const G=B.filter(P=>"unknown"!==Fo(P.name)).map(P=>Ga(this,null,function*(){try{const S=yield k.saveAsset(P);return yield l(S,Fo(P.name))}catch(S){console.error(S)}return null}));
return(yield Promise.all(G)).filter(Ub)})}function p(B){return[V(N({},Qd.defaultProps),{html:B,point:[e[0],e[1]]})]}function q(B){return Ga(this,null,function*(){return nh(r,v,x,u,w,y,Q)(B)})}function t(){return Ga(this,null,function*(){const B=yield navigator.clipboard.read(),G=nh(w,y,Q);return(yield Promise.all(B.map(P=>G(P)))).flat().filter(Ub)})}function r(B){return Ga(this,null,function*(){var G=B.getData("file");if(!G)return null;const P=yield l(G,"pdf");d.addAssets([P]);G=V(N({},vg.defaultProps),
{id:lb(),assetId:P.id,url:G,opacity:1});P.size&&Object.assign(G,{point:[e[0]-P.size[0]/4+16,e[1]-P.size[1]/4+16],size:L.div(P.size,2)});return[G]})}function v(B){return Ga(this,null,function*(){var G=Array.from(B.files);return 0<G.length?(W=G=yield m(G),G.map((P,S)=>{switch(P.type){case "video":var ha=fi.defaultProps;break;case "image":ha=di.defaultProps;break;case "pdf":ha=vg.defaultProps;break;default:return null}ha=V(N({},ha),{id:lb(),assetId:P.id,opacity:1});P.size&&Object.assign(ha,{point:[e[0]-
P.size[0]/4+16*S,e[1]-P.size[1]/4+16*S],size:L.div(P.size,2)});return ha})):null})}function y(B){return Ga(this,null,function*(){if(B.types.includes("text/plain")&&(f||h))return null;const G=yield Kj(B,"text/html");return G?nh(z,p)(G):null})}function u(B){return Ga(this,null,function*(){var G,P,S,ha,la,U,pa=B.getData("block-uuid");if(pa){pa=pa.trim();const ba=null==(S=null==(P=null==(G=window.logseq)?void 0:G.api)?void 0:P.get_selected_blocks)?void 0:S.call(P);G=ba&&1<(null==ba?void 0:ba.length)?
ba.map(sa=>sa.uuid):[pa];null==(U=null==(la=null==(ha=window.logseq)?void 0:ha.api)?void 0:la.set_blocks_id)?void 0:U.call(la,G);ha=G.map(sa=>J(`((${sa}))`));return(yield Promise.all(ha)).flat().filter(Ub).map((sa,ya)=>V(N({},sa),{point:[e[0]+(ob.defaultProps.size[0]+16)*ya,e[1]]}))}return null})}function x(B){return Ga(this,null,function*(){var G=B.getData("page-name");return G?(G=G.trim(),J(`[[${G}]]`)):null})}function w(B){return Ga(this,null,function*(){var G=yield Kj(B,"text/plain");return G?
(G=G.trim(),nh(A,D)(G)):null})}function z(B){if(B=d.api.getClonedShapesFromTldrString(decodeURIComponent(B),e)){const {shapes:G,assets:P,bindings:S}=B;R.push(...P);T.push(...S);return G}return null}function A(B){return Ga(this,null,function*(){try{const P=new URL(B);var G=P.host&&["http:","https:"].includes(P.protocol)}catch(P){G=!1}return G&&!f?cs.test(B)?[V(N({},ve.defaultProps),{url:B,point:[e[0],e[1]]})]:es.test(B)?[V(N({},wf.defaultProps),{url:B,point:[e[0],e[1]]})]:[V(N({},te.defaultProps),
{url:B,point:[e[0],e[1]]})]:null})}function D(B){return B.startsWith("\x3ciframe")?[V(N({},Qd.defaultProps),{html:B,point:[e[0],e[1]]})]:null}function J(B){return Ga(this,null,function*(){if(/^\(\(.*\)\)$/.test(B)&&40===B.length){var G=B.slice(2,-2);if(Zd(G))return[V(N({},ob.defaultProps),{point:[e[0],e[1]],size:[400,0],pageId:G,fill:d.settings.color,stroke:d.settings.color,scaleLevel:d.settings.scaleLevel,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(B))return G=B.slice(2,-2),[V(N({},ob.defaultProps),
{point:[e[0],e[1]],size:[400,0],pageId:G,fill:d.settings.color,stroke:d.settings.color,scaleLevel:d.settings.scaleLevel,blockType:"P"})];return null})}function Q(B){return Ga(this,null,function*(){var G=yield Kj(B,"text/plain");return G&&(G=G.trim(),G=null==k?void 0:k.addNewBlock(G))?[V(N({},ob.defaultProps),{size:[400,0],point:[e[0],e[1]],pageId:G,fill:d.settings.color,stroke:d.settings.color,scaleLevel:d.settings.scaleLevel,blockType:"B",compact:!0})]:null})}var K,O;let W=[],R=[];const T=[];d.cursors.setCursor("progress");
let I=[];try{g?I.push(...(null!=(K=yield q(g))?K:[])):I.push(...(null!=(O=yield t())?O:[]))}catch(B){console.error(B)}const C=I.map(B=>V(N({},B),{parentId:d.currentPageId,isLocked:!1,id:Zd(B.id)?B.id:lb()})),H=null==g?void 0:g.types.every(B=>"Files"===B);d.wrapUpdate(()=>{var B=[...W,...R];0<B.length&&d.createAssets(B);0<C.length&&d.createShapes(C);d.currentPage.updateBindings(Object.fromEntries(T.map(G=>[G.id,G])));if(1===d.selectedShapesArray.length&&1===C.length&&h){B=d.selectedShapesArray[0];
const G=d.getShapeById(C[0].id);d.createNewLineBinding(B,G)}d.setSelectedShapes(C.map(G=>G.id));d.selectedTool.transition("idle");d.cursors.setCursor("default");(h||H)&&d.packIntoRectangle()})}),Io=ea(F(19)),Wx=ea(F(19)),sd=F(589),BD=[$k,al,hs,bl,cl,dl,el,fl,is,ms,ls,wg],CD=a=>{const {renderers:b}=ef.useContext(Pa);return(0,sd.jsx)(b.BacklinksCount,V(N({},a),{options:{"portal?":!1}}))},DD=()=>{const a=ef.useRef(null),b=xa(),c=ef.useMemo(()=>({ContextBar:yD,BacklinksCount:CD,QuickLinks:AD}),[]);return(0,sd.jsx)(zD,
{collisionRef:a,children:(0,sd.jsx)("div",{ref:a,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":b.uuid,children:(0,sd.jsx)(sz,{components:c,children:(0,sd.jsx)(OB,{})})})})},ED=a=>{var {onPersist:b,readOnly:c,model:d}=a;a=fa(a,["onPersist","readOnly","model"]);const e=Sx(),f=Go(),g=Ux(),h=c?null:Vx(),k=ef.useCallback((l,m)=>{null==b?void 0:b(l,m)},[d]);return(0,sd.jsx)(pz,V(N({Shapes:gs,Tools:BD,onDrop:e,onPaste:f,onCopy:g,readOnly:c,onCanvasDBClick:h,onPersist:k,model:d},a),{children:(0,sd.jsx)(DD,
{})}))},ey=function(a){var {renderers:b,handlers:c}=a;a=fa(a,["renderers","handlers"]);const d={renderers:ef.useMemo(()=>Object.fromEntries(Object.entries(b).map(([e,f])=>[e,ef.memo(f)])),[]),handlers:c};return(0,sd.jsx)(Pa.Provider,{value:d,children:(0,sd.jsx)(ED,N({},a))})}};
'use strict';var QCd=function(a){return a},RCd=function(a,b){return $APP.Vh.j(function(c){var d=$APP.Jf(c);c=$APP.G.j(d,$APP.EA);d=$APP.G.j(d,$APP.mD);return new $APP.l(null,2,[$APP.Hl,$APP.t.A(c),$APP.FPb,$APP.Vw.j(d,new $APP.N(null,2,5,$APP.O,[$APP.RB,$APP.FPb],null))],null)},$APP.qg.j(function(c){return $APP.RB.A($APP.mD.A(c))},$APP.oN.C(a,b,new $APP.l(null,1,[$APP.ls,new $APP.N(null,2,5,$APP.O,[$APP.EA,$APP.mD],null)],null))))},SCd=function(a){return $APP.Np.F(a,$APP.F([$APP.Op,!0]))},TCd=function(a,
b,c,d){var e=$APP.eE(a);b=new $APP.l(null,2,[$APP.SB,$APP.Iqb,$APP.UB,new $APP.l(null,6,[$APP.Hl,$APP.qa(b,"id"),$APP.qp,$APP.qa(b,"name"),$APP.SE,SCd($APP.qa(b,"bindings")),$APP.FPb,$APP.qa(b,"nonce"),$APP.GPb,SCd(c),$APP.CPb,d],null)],null);c=$APP.tv();e=$APP.uE.A(e);e=$APP.m(e)?e:$APP.tv();return new $APP.l(null,5,[$APP.uq,a,$APP.KD,"whiteboard",$APP.mD,b,$APP.vE,c,$APP.uE,e],null)},UCd=function(a,b,c,d,e,f){a=SCd(a.getCleanUpAssets());var g=b.shapes,h=$APP.Vh.j(function(E){return $APP.qa(E,"id")},
g),n=$APP.Ch(h,$APP.Pj.A(g.length));g=$APP.zh($APP.Vh.j(function(E){E=$APP.Jf(E);E=$APP.G.j(E,$APP.Hl);return $APP.P.C(SCd(b.getShapeById(E).serialized),$APP.gw,$APP.G.j(n,E))},$APP.vy.j(c,d)));d=$APP.zh($APP.Vh.j($APP.Hl,d));var p=$APP.zh($APP.Vh.j($APP.Hl,c)),q=$APP.zh($APP.Km.j($APP.nk,$APP.vy.j(p,d)));c=$APP.zh($APP.qg.j(function(E){E=$APP.Hl.A(E);return q.A?q.A(E):q.call(null,E)},g));var r=$APP.Km.j($APP.nk,$APP.vy.j(d,p)),v=$APP.Ez();d=$APP.x(r)?$APP.Vh.j(function(E){return $APP.Vw.j(E,new $APP.N(null,
2,5,$APP.O,[$APP.mD,$APP.RB],null))},function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.ux],null),H=$APP.Oj.j(function(K){return new $APP.N(null,2,5,$APP.O,[$APP.EA,$APP.yi(K)],null)},r);return $APP.uC?$APP.uC(v,E,H):$APP.vC.call(null,v,E,H)}()):null;p=$APP.Oj.j(function(E){return new $APP.N(null,2,5,$APP.O,[$APP.jCb,new $APP.N(null,2,5,$APP.O,[$APP.EA,$APP.yi(E)],null)],null)},r);var y=$APP.vy.j(g,c),z=$APP.x(y)?function(){var E=new $APP.N(null,1,5,$APP.O,[$APP.ux],null),H=$APP.Oj.j(function(K){return new $APP.N(null,
2,5,$APP.O,[$APP.EA,$APP.yi($APP.Hl.A(K))],null)},y);return $APP.uC?$APP.uC(v,E,H):$APP.vC.call(null,v,E,H)}():null;return new $APP.l(null,4,[$APP.REc,TCd(e,b,a,h),$APP.fVc,$APP.Vh.j(function(E){return $APP.ke(q,$APP.t.A($APP.EA.A(E)))?$APP.P.C(E,$APP.vE,$APP.tv()):$APP.iCb(E)},$APP.Vh.j(function(E){E=new $APP.l(null,2,[$APP.SB,$APP.kJ,$APP.RB,E],null);E=new $APP.l(null,3,[$APP.tC,new $APP.l(null,1,[$APP.uq,$APP.tq.A?$APP.tq.A(e):$APP.tq.call(null,e)],null),$APP.DC,new $APP.l(null,1,[$APP.uq,e],null),
$APP.mD,E],null);var H=$APP.Oqb(E,e);return $APP.$l.F($APP.F([E,H]))},g)),$APP.QC,p,$APP.b7b,new $APP.l(null,3,[$APP.oMb,$APP.xb(f),$APP.vBb,f,$APP.Ku,new $APP.l(null,5,[$APP.mJ,e,$APP.WPb,d,$APP.XPb,c,$APP.YPb,y,$APP.ZPb,z],null)],null)],null)},VCd=function(a,b,c){var d=$APP.Xc($APP.A(b.pages)),e=d.shapes,f=$APP.eE(a);f=$APP.Vw.j(f,new $APP.N(null,3,5,$APP.O,[$APP.mD,$APP.UB,$APP.CPb],null));var g=$APP.Ch(f,$APP.Pj.A($APP.Pc(f)));e=$APP.zh($APP.yn.j(function(q,r){var v=r.id;return new $APP.l(null,
2,[$APP.Hl,v,$APP.FPb,$APP.B.j(q,$APP.G.j(g,v))?r.nonce:Date.now()],null)},e));var h=$APP.Ez();f=function(){var q=$APP.Vw.j($APP.u($APP.Vmd),new $APP.N(null,2,5,$APP.O,[h,a],null));return $APP.m(q)?q:$APP.zh($APP.Vh.j(function(r){return $APP.Dq.C(r,$APP.Hl,$APP.t)},RCd(h,a)))}();b=UCd(b,d,e,f,a,c);f=$APP.Jf(b);d=$APP.G.j(f,$APP.REc);b=$APP.G.j(f,$APP.fVc);c=$APP.G.j(f,$APP.QC);f=$APP.G.j(f,$APP.b7b);d=$APP.gl.F(c,new $APP.N(null,1,5,$APP.O,[d],null),$APP.F([b]));var n=$APP.Vw.j(f,new $APP.N(null,
2,5,$APP.O,[$APP.Ku,$APP.XPb],null)),p=$APP.Vw.j(f,new $APP.N(null,2,5,$APP.O,[$APP.Ku,$APP.WPb],null));n=$APP.m($APP.Xf(function(q){return $APP.B.j("group",$APP.Mm.A(q))},n))?$APP.P.C(f,$APP.$Pb,$APP.Bu):$APP.m(function(){var q=$APP.Lf(p);return $APP.m(q)?$APP.Wf(function(r){return $APP.B.j("group",$APP.Mm.A(r))},p):q}())?$APP.P.C(f,$APP.$Pb,$APP.bGc):$APP.m($APP.Xf(function(q){return $APP.B.j("line",$APP.Mm.A(q))&&$APP.B.j("arrow ",$APP.ko.A($APP.NDc.A(q)))},n))?$APP.P.C(f,$APP.$Pb,$APP.fRc):f;
b=$APP.x($APP.gl.j(b,c))?n:$APP.P.C(f,$APP.R1a,!0);$APP.ji.J($APP.Vmd,$APP.hu,new $APP.N(null,2,5,$APP.O,[h,a],null),e);if($APP.ke(new $APP.th(null,new $APP.l(null,1,[$APP.fRc,null],null),null),$APP.$Pb.A(b)))return $APP.Fz($APP.u7c,new $APP.l(null,2,[$APP.Nw,d,$APP.b7b,b],null));e=$APP.u7c.A($APP.u($APP.Bz));$APP.gl.j($APP.Nw.A(e),d);$APP.$l.F($APP.F([b,$APP.b7b.A(e)]));$APP.Fz($APP.u7c,$APP.If);return null},WCd=function(a){a=$APP.oN.A(a);return $APP.Km.j($APP.Gqb,a)},XCd=function(a){var b=$APP.Qw.A($APP.eE(a));
a=WCd(a);a=$APP.qg.j(function(d){return $APP.B.j(b,$APP.Qw.A($APP.DC.A(d)))},a);var c=$APP.zh($APP.Km.j($APP.ub,$APP.Vh.j(function(d){return $APP.Vw.C(d,new $APP.N(null,2,5,$APP.O,[$APP.EC,$APP.Qw],null),null)},a)));a=$APP.Km.j(function(d){d=$APP.Qw.A(d);return c.A?c.A(d):c.call(null,d)},a);return $APP.x(a)?$APP.A(a):null},YCd=function(){return $APP.nm(null,function(){return $APP.nm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.nm(a.text(),function(b){return $APP.nm($APP.Aq($APP.If,
b),function(c){return $APP.hm(c)})})})})},ZCd=function(a){var b=$APP.M5a();return($APP.vd(b)||$APP.B.j(1,$APP.Pc(b))&&$APP.B.j(a,$APP.uq.A($APP.A(b))))&&$APP.xb($APP.Vw.j($APP.u($APP.Bz),new $APP.N(null,1,5,$APP.O,[$APP.EYa],null)))},$Cd=function(a){return null!=a?$APP.qm($APP.nm(null,function(){return $APP.nm(YCd(),function(b){var c=$APP.Jf(b);b=$APP.G.j(c,$APP.sE);c=$APP.G.j(c,$APP.qv);var d=$APP.A(b);b=$APP.DPb(d,c);d=$APP.Fqb(d);c=$APP.GPb.A(d);d=$APP.SE.A(d);a.cloneShapesIntoCurrentPage($APP.hj(new $APP.l(null,
3,[$APP.OPb,b,$APP.GPb,c,$APP.SE,d],null)));b=$APP.GYa();return $APP.hm(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},aDd=function(a){a.cleanup($APP.Vh.j(function(b){return b.id},a.shapes))},dDd=function(a,b){b=$APP.Np.F(b,$APP.F([new $APP.l(null,1,[$APP.Op,!0],null)]));b=$APP.Jf(b);var c=$APP.G.j(b,bDd),d=$APP.G.j(b,$APP.kG),e=$APP.G.j(b,cDd),f=$APP.Ez();return $APP.nm(null,function(){return $APP.nm($APP.m(d)?$APP.bkb(f,a,new $APP.l(null,1,[$APP.Pv,
100],null)):null,function(g){return $APP.nm($APP.m(c)?$APP.gkb(a):null,function(h){return $APP.nm($APP.m(e)?$APP.ikb(a,100):null,function(n){return $APP.hm($APP.hj(new $APP.l(null,3,[$APP.sE,h,$APP.qv,g,$APP.SG,n],null)))})})})})},eDd=function(a){return $APP.mm($APP.rJb($APP.Ez(),new $APP.N(null,1,5,$APP.O,[$APP.Np.A(a)],null)),function(b){var c=(c=$APP.x(b))?$APP.A(b):c;return $APP.m(c)?(b=$APP.C.C(c,0,null),$APP.C.C(c,1,null),c=$APP.C.C(c,2,null),$APP.tJb($APP.m(c)?c:b)):null})},fDd=function(){return $APP.sMb(null)},
gDd=function(){return $APP.uMb(null)},xDd=function(a){return $APP.fh([hDd,iDd,jDd,kDd,lDd,mDd,nDd,oDd,$APP.XA,pDd,qDd,rDd,sDd,$APP.EX,tDd,uDd,vDd,wDd],[function(b){if($APP.Yu(b))var c=$APP.uq.A($APP.V3a($APP.Ez(),$APP.aj(b)));else c=$APP.uq.A,b=new $APP.N(null,2,5,$APP.O,[$APP.uq,$APP.tq.A?$APP.tq.A(b):$APP.tq.call(null,b)],null),b=$APP.CC.A?$APP.CC.A(b):$APP.CC.call(null,b),c=c.call($APP.uq,b);return c},function(b){return $APP.hj($APP.S3b(b))},function(b){return $APP.fE(b,!1)},function(b){return $APP.PYa($APP.m(b)?
$APP.S3b(b):null)},function(b){return $APP.HPb(b)},$APP.Lv,function(b){return $APP.rIb(b,new $APP.l(null,1,[$APP.xN,!1],null))},$APP.rE,dDd,eDd,QCd,function(b,c){return $APP.wKa(b,$APP.F([$APP.pv,c]))},function(b){var c=$APP.t,d=c.A,e=$APP.Sy?$APP.Sy():$APP.Ty.call(null),f=$APP.eE(a),g=XCd(a);b=new $APP.l(null,6,[$APP.EC,$APP.sh($APP.m(g)?g:f,new $APP.N(null,1,5,$APP.O,[$APP.Qw],null)),$APP.EA,e,$APP.BA,$APP.m(b)?b:"",$APP.VC,$APP.vq,$APP.tC,new $APP.l(null,2,[$APP.uq,$APP.tq.A?$APP.tq.A(a):$APP.tq.call(null,
a),$APP.xv,a],null),$APP.DC,new $APP.l(null,1,[$APP.uq,a],null)],null);$APP.wC(new $APP.N(null,1,5,$APP.O,[b],null));return d.call(c,e)},function(b){return $APP.qH.F($APP.F([$APP.Wh.A(b)]))},function(b,c){return $APP.TA(function(){return(0,$APP.$0b)(b,$APP.$l.F($APP.F([$APP.Np.F(c,$APP.F([$APP.Op,!0])),new $APP.l(null,1,[$APP.yN,!0],null)])))})},function(b,c){return $APP.yA($APP.Ez(),$APP.Qw.A($APP.eE(b)),$APP.Wh.A(c))},function(b){var c=$APP.Yu(b)?$APP.uq.A($APP.V3a($APP.Ez(),$APP.aj(b))):null;c=
$APP.m(c)?c:b;var d=$APP.$D(c),e=$APP.rE(c);return $APP.m(d)?$APP.m(e)?$APP.Vnb(c,new $APP.l(null,1,[$APP.GI,b],null)):$APP.FI($APP.fE(b,!1)):null},function(b){return $APP.hj($APP.P2a($APP.aj(b)))}])},wDd=new $APP.M(null,"queryBlockByUUID","queryBlockByUUID",2091812895),tDd=new $APP.M(null,"exportToImage","exportToImage",-154356643),sDd=new $APP.M(null,"addNewBlock","addNewBlock",1426762680),yDd=new $APP.M(null,"KeyboardShortcut","KeyboardShortcut",1250004264),cDd=new $APP.M(null,"files?","files?",
-1267491104),hDd=new $APP.M(null,"getBlockPageName","getBlockPageName",-1656908032),zDd=new $APP.M(null,"renderers","renderers",-1460292282),ADd=new $APP.M(null,"model","model",331153215),jDd=new $APP.M(null,"getRedirectPageName","getRedirectPageName",-1858136925),mDd=new $APP.M(null,"isMobile","isMobile",-2043133877),kDd=new $APP.M(null,"setCurrentPdf","setCurrentPdf",-63289336),BDd=new $APP.M(null,"onMount","onMount",-876858467),nDd=new $APP.M(null,"insertFirstPageBlock","insertFirstPageBlock",
-1676658548),qDd=new $APP.M(null,"makeAssetUrl","makeAssetUrl",217779988),CDd=new $APP.M(null,"onPersist","onPersist",-1848738852),DDd=new $APP.M(null,"Breadcrumb","Breadcrumb",-1351298906),rDd=new $APP.M(null,"copyToClipboard","copyToClipboard",1092115063),vDd=new $APP.M(null,"redirectToPage","redirectToPage",87147838),lDd=new $APP.M(null,"addNewWhiteboard","addNewWhiteboard",554297706),pDd=new $APP.M(null,"saveAsset","saveAsset",-668047853),EDd=new $APP.M(null,"BacklinksCount","BacklinksCount",
364670631),FDd=new $APP.M(null,"Block","Block",-1959785792),uDd=new $APP.M(null,"sidebarAddBlock","sidebarAddBlock",-1204903203),GDd=new $APP.M(null,"Page","Page",-1267059506),bDd=new $APP.M(null,"pages?","pages?",-2065014049),HDd=new $APP.M(null,"PageName","PageName",-164991013),IDd=new $APP.M(null,"Tweet","Tweet",-452258680),oDd=new $APP.M(null,"isWhiteboardPage","isWhiteboardPage",-134150579),JDd=new $APP.M(null,"BlockReference","BlockReference",-120254741),iDd=new $APP.M(null,"inflateAsset","inflateAsset",
-1449040639);$APP.kda("tldraw");var KDd=$APP.xm(593);var LDd,MDd;$APP.otd={};LDd=$APP.VN($APP.qa(KDd,"App"));$APP.rtd=$APP.qa(KDd,"generateJSXFromModel");
MDd=new $APP.l(null,8,[GDd,$APP.Uq($APP.Yq,function(a){return(0,$APP.Vrd)(new $APP.l(null,2,[$APP.mJ,$APP.fE($APP.qa(a,"pageName"),!1),$APP.yN,!0],null))},null,"frontend.extensions.tldraw/page-cp"),FDd,$APP.Uq($APP.Yq,function(a){a=$APP.yi($APP.qa(a,"blockId"));var b=$APP.SXa($APP.ajc);a=b.A?b.A(a):b.call(null,a);return $APP.Iq(a)},null,"frontend.extensions.tldraw/block-cp"),DDd,$APP.Uq($APP.Yq,function(a){return $APP.Iq($APP.yQ(new $APP.l(null,1,[$APP.cV,!0],null),$APP.Ez(),$APP.yi($APP.qa(a,"blockId")),
new $APP.l(null,2,[$APP.X8b,$APP.qa(a,"endSeparator"),$APP.Y8b,$APP.qa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),IDd,$APP.Uq($APP.Yq,function(a){return(0,$APP.N7b)($APP.qa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),HDd,$APP.Uq($APP.Yq,function(a){return(0,$APP.lQ)(new $APP.l(null,1,[$APP.cV,!0],null),new $APP.l(null,1,[$APP.uq,$APP.qa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),EDd,function(a){return $APP.Zf.j($APP.utd,$APP.Vh.j(function(b){return $APP.Np.F($APP.qa(a,
b),$APP.F([new $APP.l(null,1,[$APP.Op,!0],null)]))},new $APP.N(null,3,5,$APP.O,["id","className","options"],null)))},JDd,$APP.Uq($APP.Yq,function(a){return(0,$APP.Z6b)($APP.If,$APP.qa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference"),yDd,$APP.Uq($APP.Yq,function(a){return $APP.Iq(function(){var b=$APP.gj(a);if($APP.m(b)){var c=$APP.Jf(b);b=$APP.G.j(c,$APP.VI);var d=$APP.G.j(c,$APP.SN);c=$APP.G.j(c,$APP.YF);b="string"===typeof b?$APP.iO($APP.Wh.A(b)):d;var e=$APP.$l.F($APP.F([new $APP.l(null,
1,[$APP.t3,!1],null),c]));return"string"===typeof b?$APP.QSb(b,$APP.F([e])):$APP.Po.j(" | ",$APP.Vh.j(function(f){return $APP.QSb(f,$APP.F([e]))},b))}return null}())},null,"frontend.extensions.tldraw/keyboard-shortcut")],null);
$APP.ptd=$APP.Uq($APP.Yq,function(a,b){function c(n){if($APP.m(n)){n.appUndo=fDd;n.appRedo=gDd;var p=$APP.qa(n,"api");return $APP.m(p)?$APP.mm(d?$Cd(p):null,function(){aDd(n.currentPage);$APP.QYa(n,b);return h.A?h.A(n):h.call(null,n)}):null}return null}var d=ZCd(a),e=$APP.PPb(a),f=$APP.dr(null),g=$APP.C.C(f,0,null),h=$APP.C.C(f,1,null);$APP.er(function(){$APP.m($APP.m(g)?b:g)&&$APP.QYa(g,b);return function(){return $APP.uc}},new $APP.N(null,2,5,$APP.O,[b,g],null));return $APP.m(e)?$APP.W("div",{style:{overscrollBehavior:"none"},
onBlur:function(n){n=$APP.qa(n,"target").tagName;var p=new $APP.th(null,new $APP.l(null,2,["INPUT",null,"TEXTAREA",null],null),null);n=p.A?p.A(n):p.call(null,n);return $APP.m(n)?$APP.DA():null},onWheel:$APP.jv,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.xb(g)?$APP.W("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.Iq($APP.nO("Loading onboarding whiteboard ..."))]):null,$APP.Iq(function(){var n=new $APP.l(null,6,[zDd,MDd,$APP.PSa,
xDd(a),BDd,c,$APP.LWc,!0,CDd,function(p,q){$APP.Fz(new $APP.N(null,2,5,$APP.O,[$APP.OYc,$APP.Ez()],null),$APP.tv());return $APP.m(!1)?(console.time("tldraw persist"),p=VCd(a,p,q.replace),console.timeEnd("tldraw persist"),p):VCd(a,p,q.replace)},ADd,e],null);return LDd.A?LDd.A(n):LDd.call(null,n)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.Ra.Zi();
}).call(this);